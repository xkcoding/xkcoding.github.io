<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[è§£å†³ MacOS BigSur JD-GUI æ‰“å¼€å¤±è´¥çš„é—®é¢˜]]></title>
    <url>%2F2022%2F01%2F04%2Ffix-error-about-jd-gui-on-big-sur.html</url>
    <content type="text"><![CDATA[å‰è¨€ JD-GUI æ˜¯ä¸€æ¬¾è½»é‡çº§çš„ Java åç¼–è¯‘å·¥å…·ï¼Œå¯¹äºŽä¸€äº›æ²¡æœ‰æºç çš„ Jar åŒ…ï¼Œç›´æŽ¥æ‹–è¿›åŽ»å°±å¯ä»¥åç¼–è¯‘æºç ï¼Œååˆ†çš„æ–¹ä¾¿ã€‚ åœ¨ MacOS è¿˜æ˜¯ Mojave çš„æ—¶å€™ï¼ŒJD-GUI ä½¿ç”¨ä¸€åˆ‡æ­£å¸¸ã€‚ å½“ç³»ç»Ÿå‡çº§åˆ° BigSur å’Œ Monterey çš„æ—¶å€™ï¼Œæ‰“å¼€ JD-GUI å°±ä¼šæç¤ºæ‰¾ä¸åˆ° JDK çŽ¯å¢ƒã€‚ï¼ˆå³ä½¿ä½ çš„ç”µè„‘å·²ç»å­˜åœ¨ JDK çŽ¯å¢ƒå¹¶ä¸”é…ç½®äº†çŽ¯å¢ƒå˜é‡ï¼Œä¾ç„¶ä¼šæç¤ºæ‰¾ä¸åˆ° JDK çŽ¯å¢ƒï¼‰ å¤§è‡´é”™è¯¯æç¤ºå¦‚ä¸‹ï¼š 12345ERROR launching &apos;JD-GUI&apos;No suitable Java version found on your system!This program requires Java 1.8+Make sure you install the required Java version. è§£å†³åŠžæ³• èµ·åˆï¼Œæˆ‘ç¬¬ä¸€æ„Ÿè§‰å¯èƒ½æ˜¯æ–°ç‰ˆçš„ MacOS å’Œè€ç‰ˆæœ¬çš„ JD-GUI ä¸å…¼å®¹å¯¼è‡´çš„ï¼Œç„¶åŽåœ¨å®˜ç½‘ä¸‹è½½æœ€æ–°çš„ 1.6.6 ç‰ˆæœ¬ï¼Œå®‰è£…åŽï¼Œä¾ç„¶æŠ¥åŒæ ·çš„é”™è¯¯ä¿¡æ¯ã€‚ è¿™è‚¯å®šä¸å¯èƒ½æ˜¯æˆ‘ä¸€ä¸ªäººé‡åˆ°è¿™ä¸ªé—®é¢˜ï¼ŒäºŽæ˜¯æˆ‘åœ¨å®˜æ–¹ä»“åº“æ‰¾åˆ°äº†è¿™ä¸ªé—®é¢˜ Update universalJavaApplicationStub to be able to launch on macOS Big Sur #336 æˆ‘ä»¬éœ€è¦æ›¿æ¢ JD-GUI ç¨‹åºæ–‡ä»¶é‡Œä¸€ä¸ªè„šæœ¬æ–‡ä»¶ï¼Œå‚è€ƒæ­¥éª¤å¦‚ä¸‹ï¼š å…ˆå°†ä¸‹è½½ä¸‹æ¥çš„ jd-gui-osx-1.6.6.tar è§£åŽ‹ï¼Œç„¶åŽå°† JD-GUI.app æ–‡ä»¶æ‹·è´åˆ° Applications ç›®å½•ä¸‹ å³å‡» JD-GUI.app ç‚¹å‡»æ˜¾ç¤ºåŒ…å†…å®¹ å°† Contents/MacOS/universalJavaApplicationStub.sh æ–‡ä»¶çš„å†…å®¹æ›¿æ¢ä¸º https://github.com/tofi86/universalJavaApplicationStub/blob/v3.2.0/src/universalJavaApplicationStub ä¸­çš„å†…å®¹ï¼Œä¿å­˜ã€‚ æ³¨æ„ï¼šç¡®ä¿æœ¬åœ°å·²å­˜åœ¨ Java çŽ¯å¢ƒ æ­¤æ—¶ï¼Œå†æ¬¡æ‰“å¼€ JD-GUI.appï¼Œåˆ™å¯ä»¥æ­£å¸¸è¿è¡Œäº†ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ„‰å¿«çš„æœ¬åœ°å¼€å‘ä½“éªŒä¹‹YAPIæŽ¥å£æ–‡æ¡£ç®¡ç†]]></title>
    <url>%2F2021%2F05%2F20%2Fhappy-dev-yapi.html</url>
    <content type="text"><![CDATA[å‰è¨€ åšæ–‡æ¸²æŸ“å¤±è´¥ï¼Œo(â•¥ï¹â•¥)o éº»çƒ¦çœ‹åˆ°å°ä¼™ä¼´ï¼Œè”ç³»ä¸‹ä½œè€…ï¼Œè°¢è°¢å•¦~]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>yapi</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ„‰å¿«çš„æœ¬åœ°å¼€å‘ä½“éªŒä¹‹Traefikä»£ç†]]></title>
    <url>%2F2021%2F05%2F11%2Fhappy-dev-traefik-proxy.html</url>
    <content type="text"><![CDATA[å‰è¨€ åšæ–‡æ¸²æŸ“å¤±è´¥ï¼Œo(â•¥ï¹â•¥)o éº»çƒ¦çœ‹åˆ°å°ä¼™ä¼´ï¼Œè”ç³»ä¸‹ä½œè€…ï¼Œè°¢è°¢å•¦~]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>traefik</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ„‰å¿«çš„æœ¬åœ°å¼€å‘ä½“éªŒä¹‹æœ¬åœ°DNS]]></title>
    <url>%2F2021%2F05%2F01%2Fhappy-dev-run-local-dns-server.html</url>
    <content type="text"><![CDATA[å†™åœ¨å‰é¢ å¤§å®¶åœ¨æœ¬åœ°çŽ¯å¢ƒè¿›è¡Œè”è°ƒæˆ–è€…è¿è¡Œä¸€äº›æœåŠ¡çš„æ—¶å€™ï¼Œæ˜¯ä¸æ˜¯ç»å¸¸é€šè¿‡ ip:port è¿›è¡Œæµ‹è¯•ã€‚æœ‰æ—¶å€™æœåŠ¡ä¸€å¤šï¼Œç»å¸¸æ€§çš„éœ€è¦è®°ä½å¾ˆå¤š ip:port ä¿¡æ¯ã€‚ æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•é€šè¿‡è‡ªå®šä¹‰åŸŸåçš„æ–¹å¼åŽ»æ›¿æ¢ ip:portï¼Œå‡åŽ»æˆ‘ä»¬çš„è®°å¿†è´Ÿæ‹…ï¼Œæå‡æˆ‘ä»¬çš„å¼€å‘ä½“éªŒã€‚ æ–¹æ¡ˆä¸€ï¼šä¿®æ”¹æœ¬åœ° Hosts æ–‡ä»¶ + Nginx Proxy è¿™é‡ŒæŽ¨èä¸€æ¬¾å·¥å…·ï¼ŒSwitchHostsï¼ˆè®°å¿†ä¸­ï¼Œä¹‹å‰çš„ç‰ˆæœ¬å«åš SwitchHosts!ï¼‰ï¼Œé¡µé¢ç®€æ´ï¼Œæ“ä½œä¸€ç›®äº†ç„¶ã€‚ é…ç½® Hosts æ–‡ä»¶ï¼Œåªéœ€è¦å°†åŸŸåçš„åœ°å€è·Ÿ IP åšæ˜ å°„å³å¯ã€‚ æµ‹è¯• 123456789âžœ ~ ping a.dev.ioPING a.dev.io (127.0.0.1): 56 data bytes64 bytes from 127.0.0.1: icmp_seq=0 ttl=64 time=0.098 ms64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.086 ms64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.093 ms^C--- a.dev.io ping statistics ---3 packets transmitted, 3 packets received, 0.0% packet lossround-trip min/avg/max/stddev = 0.086/0.101/0.118/0.012 ms ä¿®æ”¹ Hosts æ–‡ä»¶è¿™ç§æ–¹å¼ï¼Œå¦‚æžœæˆ‘ä»¬åœ¨æœ¬æœºåˆéƒ¨ç½²äº†ä¸€ä¸ª b æœåŠ¡ï¼Œæ­¤æ—¶éœ€è¦åŠ ä¸€ä¸ª b.dev.ioï¼Œåˆ™éœ€è¦é¢å¤–æ–°å¢žä¸€æ¡è®°å½•ï¼Œå¹¶ä¸èƒ½åšåˆ°æ³›åŸŸåè§£æžï¼ˆ*.dev.ioï¼‰ã€‚å¦‚æžœè¦åœ¨æœ¬åœ°æ”¯æŒæ³›åŸŸåè§£æžï¼Œé‚£ä¹ˆå°±åªèƒ½é€šè¿‡æ–¹æ¡ˆäºŒæ¥å®žçŽ°äº†ã€‚ æ–¹æ¡ˆäºŒï¼šdnsmasq åŽŸç”Ÿçš„ dnsmasq æ˜¯ä¸å…·å¤‡ç•Œé¢çš„ï¼Œè¿™é‡ŒæŽ¨èä¸€æ¬¾å¸¦æœ‰ web ç•Œé¢çš„ dnsmasqï¼ŒåŒæ—¶è¿˜æ”¯æŒã€ŒHot Reloadã€æœºåˆ¶ã€‚ æˆ‘ä»¬é€šè¿‡ docker å¿«é€Ÿå¯åŠ¨ä¸€ä¸ª dnsmasq æœåŠ¡ï¼Œé¦–å…ˆæ–°å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ dnsmasq.confï¼Œå¹¶å°†é…ç½®æ–‡ä»¶å­˜æ”¾åœ¨ config ç›®å½•ä¸‹ã€‚ 1234567log-queriesno-resolvserver=8.8.8.8server=114.114.114.114strict-orderaddress=/dev.io/127.0.0.1 è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ jpillora/dnsmasq:latest è¿™ä¸ªé•œåƒï¼Œä¸‹é¢æ˜¯ç¼–æŽ’æ–‡ä»¶ï¼š 123456789101112131415161718version: "3.8"services: dns-server: image: jpillora/dnsmasq:latest ports: - "53:53/udp" - 8080:8080 environment: - HTTP_USER=root - HTTP_PASS=root volumes: - ./config/dnsmasq.conf:/etc/dnsmasq.conf restart: unless-stopped logging: driver: "json-file" options: max-size: "1m" è¿è¡Œ docker-compose up å¯åŠ¨æœåŠ¡ï¼Œè®¿é—®ç®¡ç†ç•Œé¢ http://localhost:8080 æµ‹è¯•ï¼ˆè®°å¾—æŠŠæ–¹æ¡ˆä¸€çš„ Hosts è®°å½•é‡ç½®ä¸€ä¸‹ðŸ˜‰ï¼‰ 12âžœ ~ ping a.dev.ioping: cannot resolve a.dev.io: Unknown host å“¦è±ï¼Œå¤±è´¥äº†ï¼Œéœ€è¦ä¿®æ”¹æœ¬æœº DNS é…ç½®ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š å†æ¬¡æµ‹è¯• 123456789âžœ ~ ping a.dev.ioPING a.dev.io (127.0.0.1): 56 data bytes64 bytes from 127.0.0.1: icmp_seq=0 ttl=64 time=0.043 ms64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.044 ms64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.133 ms^C--- a.dev.io ping statistics ---3 packets transmitted, 3 packets received, 0.0% packet lossround-trip min/avg/max/stddev = 0.043/0.099/0.144/0.045 ms æ­¤æ—¶ï¼Œå¦‚æžœæµ‹è¯•ä¸€ä¸‹ b.dev.io å‘¢ï¼Ÿ 123456789âžœ ~ ping b.dev.ioPING b.dev.io (127.0.0.1): 56 data bytes64 bytes from 127.0.0.1: icmp_seq=0 ttl=64 time=0.052 ms64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.143 ms64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.142 ms^C--- b.dev.io ping statistics ---3 packets transmitted, 3 packets received, 0.0% packet lossround-trip min/avg/max/stddev = 0.052/0.112/0.143/0.043 ms æ²¡é”™ï¼Œå¤©ç„¶æ”¯æŒæ³›åŸŸåè§£æžï¼Œè¿˜è®°å¾—æˆ‘ä»¬ä¸Šé¢çš„é…ç½®ä¹ˆï¼Ÿ 1address=/dev.io/127.0.0.1 è¿™é‡Œé…ç½®å°±æ„å‘³ç€ *.dev.io éƒ½ä¼šæŒ‡å‘åˆ° 127.0.0.1ã€‚ æ–¹æ¡ˆä¸‰ï¼šgo-dnsmasqï¼ˆ2021.09.16 æ›´æ–°ï¼‰ è¿è¡Œäº†ä¸€æ®µæ—¶é—´æ–¹æ¡ˆäºŒä¹‹åŽï¼Œå‘çŽ°æˆ‘çš„ MBP è¶Šæ¥è¶Šå¡ï¼Œé€šè¿‡ docker stats å‘çŽ°å¯èƒ½å­˜åœ¨å†…å­˜æ³„æ¼çš„é—®é¢˜ã€‚ç»è¿‡æŠ˜è…¾ç¾¤ç¾¤ä¸»(è‹æ´‹)çš„å»ºè®®ï¼Œæ›´æ¢äº†å¦å¤–ä¸€ä¸ª dns é•œåƒï¼Œå¯è§£å†³å†…å­˜æ³„æ¼çš„é—®é¢˜ï¼ŒåŒæ—¶è‹å¤§è¿˜å¯¹è¯¥é•œåƒè¿›è¡Œäº†ç²¾ç®€ï¼ˆé•œåƒå¤§å°çº¦2.7Mï¼‰ã€‚ æ–°å¢žé…ç½®æ–‡ä»¶ config/hosts.conf 1127.0.0.1 *.dev.io åˆ›å»ºç¼–æŽ’æ–‡ä»¶ 123456789101112version: "3.8"services: dns-server: image: soulteary/go-dnsmasq:test command: dnsmasq -l 0.0.0.0:53 -f /hosts.conf -p 1s -n 114.114.114.114:53 -n 8.8.8.8:53 ports: - "53:53/udp" - "53:53/tcp" volumes: - ./config/hosts.conf:/hosts.conf:rw restart: unless-stopped è¿è¡Œ docker-compose up å¯åŠ¨æœåŠ¡ï¼ŒåŒæ—¶åˆ«å¿˜äº†å‚è€ƒæ–¹æ¡ˆäºŒï¼Œéœ€è¦ä¿®æ”¹æœ¬æœº DNS é…ç½®ã€‚ æµ‹è¯•ä¸€ä¸‹ï¼š 123456789101112131415161718âžœ ~ ping a.dev.ioPING a.dev.io (127.0.0.1): 56 data bytes64 bytes from 127.0.0.1: icmp_seq=0 ttl=64 time=0.049 ms64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.084 ms64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.162 ms^C--- a.dev.io ping statistics ---3 packets transmitted, 3 packets received, 0.0% packet lossround-trip min/avg/max/stddev = 0.049/0.098/0.162/0.047 msâžœ ~ ping b.dev.ioPING b.dev.io (127.0.0.1): 56 data bytes64 bytes from 127.0.0.1: icmp_seq=0 ttl=64 time=0.061 ms64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.186 ms64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.125 ms^C--- b.dev.io ping statistics ---3 packets transmitted, 3 packets received, 0.0% packet lossround-trip min/avg/max/stddev = 0.061/0.124/0.186/0.051 ms æ³›åŸŸåè§£æžå·²ç»å¯ä»¥æ”¯æŒäº†ã€‚æœ€é‡è¦çš„æ˜¯ï¼Œè¿™ä¸ªæ–¹æ¡ˆè‡³å°‘ä¸ä¼šè®©æˆ‘çš„ç”µè„‘è¶Šç”¨è¶Šå¡ã€‚ðŸ˜ å¦‚æžœæƒ³è¦çŸ¥é“ DNS çš„è§£æžæ—¥å¿—ï¼Œå¯ä»¥é€šè¿‡ docker-compose logs -f æŸ¥çœ‹ï¼Œå¦‚æžœä½ ä¸æƒ³é€šè¿‡å‘½ä»¤è¡Œçš„æ–¹å¼æŸ¥çœ‹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡é…ç½® Dozzle æ¥æŸ¥çœ‹å®¹å™¨çš„æ—¥å¿—ï¼Œå…·ä½“ä½¿ç”¨æ–¹å¼å¯ä»¥å‚è€ƒè‹å¤§çš„åšæ–‡ï¼šhttps://soulteary.com/2020/11/15/view-container-logs-in-realtime.html å°æ’æ›² è‹å¤§å½“æ—¶æœªç¼–è¯‘ arm æž¶æž„çš„é•œåƒï¼Œå› æ­¤æˆ‘è¿™è¾¹ clone äº†æºç ï¼Œåœ¨æœ¬åœ°çš„ m1 èŠ¯ç‰‡çš„ç”µè„‘ä¸Šé‡æ–°ç¼–è¯‘äº†ä¸€ä¸ªæœ¬åœ°é•œåƒï¼Œæ‰€ä»¥å°ä¼™ä¼´ä»¬å¯ä»¥çœ‹åˆ°ä¸Šè¿°ç¼–æŽ’æ–‡ä»¶çš„é•œåƒ TAG ä¸º soulteary/go-dnsmasq:testã€‚ å¦‚æžœä¹Ÿæœ‰å°ä¼™ä¼´æ˜¯ m1 èŠ¯ç‰‡æƒ³è¦ä½“éªŒè¯¥é•œåƒçš„è¯ï¼Œå¯ä»¥å‚è€ƒæˆ‘çš„æ–¹æ¡ˆè¿›è¡Œæœ¬åœ°ç¼–è¯‘ã€‚ é¦–å…ˆ clone ä»“åº“åœ°å€ï¼Œgit clone https://github.com/soulteary/go-dnsmasq.git ä¿®æ”¹ Dockfile å†…å®¹ï¼Œå°† npx æ³¨é‡Šä¸€ä¸‹ï¼Œä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617FROM golang:1.16-alpine AS BuilderWORKDIR /appCOPY . .RUN go env -w GO111MODULE=on &amp;&amp; \ go env -w GOPROXY=https://mirrors.aliyun.com/goproxy/,direct &amp;&amp; \ go mod downloadARG VERSION=1.1.0# RUN apk add upxRUN go build -o dnsmasq -ldflags "-w -s -X main.Version=$&#123;VERSION&#125;" -tags="netgo" -trimpath cmd/dnsmasq/main.go# RUN upx -9 -o dnsmasq.min dnsmasqFROM scratch# COPY --from=Builder /app/dnsmasq.min /bin/dnsmasqCOPY --from=Builder /app/dnsmasq /bin/dnsmasqENV DNSMASQ_LISTEN=0.0.0.0:53EXPOSE 53 53/udpCMD ["/bin/dnsmasq"] æ‰“åŒ…æœ¬åœ°é•œåƒ docker build . -t soulteary/go-dnsmasq:test å¦å¤–ï¼Œç¾¤ä¸»å·²ç»ç­”åº”åŽé¢ä¼šæ›´æ–° arm æž¶æž„çš„é•œåƒå•¦ï¼Œå°ä¼™ä¼´ä»¬åŽé¢åº”è¯¥å¯ä»¥ç›´æŽ¥ä»Žå®˜æ–¹çš„é•œåƒä»“åº“ soulteary/go-dnsmasq æ‹‰å–ã€‚ ä¸‹ä¸€ç¯‡ï¼Œæˆ‘ä»¬æ¥èŠèŠå¦‚æžœé€šè¿‡ Traefik ä»£ç†æœ¬åœ°å®¹å™¨æœåŠ¡æ¥æå‡æœ¬åœ°çš„å¼€å‘ä½“éªŒã€‚ å‚è€ƒ https://little-star.love/posts/f114e298/ https://soulteary.com/2021/08/19/dns-for-local-development.html]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>dns</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å½“ Lombok é‡è§äº† MapStruct ã®ã€Œå‘ã€]]></title>
    <url>%2F2021%2F04%2F22%2Fwhen-lombok-met-mapstruct.html</url>
    <content type="text"><![CDATA[å‰è¨€ 2021 å¹´äº†ï¼Œç›¸ä¿¡æž Java çš„å°ä¼™ä¼´ä»¬ä¸ä¼šè¿˜æ²¡æœ‰äººæ²¡ç”¨è¿‡ Lombok å§ï¼Ÿ Lombok æ˜¯ä¸€æ¬¾é€šè¿‡ã€Œæ³¨è§£ã€çš„å½¢å¼ç®€åŒ–å¹¶æ¶ˆé™¤å†—ä½™ä»£ç çš„ Java æ’ä»¶ï¼Œåˆ©ç”¨ã€ŒAnnotation Processorã€åŽŸç†ï¼Œåœ¨ç¼–è¯‘æ—¶ç”Ÿæˆä¸€äº›ã€Œé‡å¤ã€ä»£ç ã€‚å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ IDEA çŽ¯å¢ƒä¸‹ï¼Œéœ€è¦é¢å¤–å®‰è£…ä¸€ä¸ª Lombok æ’ä»¶ã€‚ï¼ˆæœ¬æ–‡ä¸ä¼šä¸“é—¨ä»‹ç» Lombok çš„ä½¿ç”¨æ–¹æ³•ï¼Œæƒ³è¦æ·±å…¥å­¦ä¹ çš„å°ä¼™ä¼´å¯ä»¥åŽ» å®˜æ–¹æ–‡æ¡£ å­¦ä¹  Lombok æä¾›çš„æ‰€æœ‰æ³¨è§£çš„ä½¿ç”¨æ–¹æ³•ã€‚ï¼‰ å¯èƒ½ä¸€äº›æœ‹å‹å¯¹ MapStruct å°±æœ‰ç‚¹é™Œç”Ÿäº†ï¼Œä½†æ˜¯æˆ‘æ•¢è‚¯å®šçš„æ˜¯ï¼Œä½ ä»¬ä¸€å®šç”¨è¿‡å’Œä»–åŠŸèƒ½ç±»ä¼¼çš„å·¥å…·ã€‚æ¯”å¦‚ Apache Commons BeanUtilsã€Spring BeanUtilsã€BeanCopierã€Dozer ç­‰ç­‰ã€‚æ²¡é”™ï¼ŒMapStruct ä¹Ÿæ˜¯ä¸ºäº†è§£å†³å¯¹è±¡å±žæ€§æ‹·è´è¿™ä¸€ä¸ªé€šç”¨éœ€æ±‚çš„ã€‚ä¼ ç»Ÿä½¿ç”¨ã€Œåå°„ã€è¿›è¡Œå±žæ€§æ‹·è´çš„æ–¹å¼ï¼Œåœ¨å¤§æ•°æ®é‡çš„åœºæ™¯ä¸‹ï¼Œæ€§èƒ½ä½Žä¸‹ï¼Œæ•ˆçŽ‡å ªå¿§ã€‚MapStruct åº•å±‚åˆ™æ˜¯é€šè¿‡ getter/setter çš„æ–¹å¼æå‡å±žæ€§æ‹·è´çš„æ€§èƒ½çš„ï¼Œè·Ÿ Lombok ä¸€æ ·åˆ©ç”¨ã€ŒAnnotation Processorã€çš„åŽŸç†ï¼Œåœ¨ç¼–è¯‘æ—¶ç”Ÿæˆä»£ç ã€‚ è¸©å‘ é¦–å…ˆæˆ‘ä»¬æŒ‰ç…§ MapStruct å®˜æ–¹æ–‡æ¡£ä»‹ç»ï¼Œæ­ä¸€ä¸ªç®€å•çš„æ —å­ðŸŒ°~ å¼•å…¥ä¾èµ–ï¼š 123456789101112131415161718192021222324252627282930313233&lt;properties&gt; &lt;mapstruct.version&gt;1.4.2.Final&lt;/mapstruct.version&gt;&lt;/properties&gt;&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.mapstruct&lt;/groupId&gt; &lt;artifactId&gt;mapstruct&lt;/artifactId&gt; &lt;version&gt;$&#123;mapstruct.version&#125;&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt;&lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt; &lt;version&gt;3.8.1&lt;/version&gt; &lt;configuration&gt; &lt;source&gt;1.8&lt;/source&gt; &lt;target&gt;1.8&lt;/target&gt; &lt;annotationProcessorPaths&gt; &lt;!-- MapStruct åœ¨ç¼–è¯‘æ—¶ä¼šé€šè¿‡è¿™ä¸ªæ’ä»¶ç”Ÿæˆä»£ç  --&gt; &lt;path&gt; &lt;groupId&gt;org.mapstruct&lt;/groupId&gt; &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt; &lt;version&gt;$&#123;mapstruct.version&#125;&lt;/version&gt; &lt;/path&gt; &lt;/annotationProcessorPaths&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt;&lt;/build&gt; åˆ›å»ºä¸¤ä¸ªç±»ï¼Œç”¨äºŽå±žæ€§æ‹·è´ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495// æºå¯¹è±¡public class CarDO &#123; private String make; private int numberOfSeats; private CarType type; public CarDO() &#123; &#125; public CarDO(String make, int numberOfSeats, CarType type) &#123; this.make = make; this.numberOfSeats = numberOfSeats; this.type = type; &#125; public String getMake() &#123; return make; &#125; public void setMake(String make) &#123; this.make = make; &#125; public int getNumberOfSeats() &#123; return numberOfSeats; &#125; public void setNumberOfSeats(int numberOfSeats) &#123; this.numberOfSeats = numberOfSeats; &#125; public CarType getType() &#123; return type; &#125; public void setType(CarType type) &#123; this.type = type; &#125;&#125;// æµ‹è¯•æžšä¸¾public enum CarType &#123; /** * æ™®é€š */ COMMON, /** * è€çˆ·è½¦ */ OLD, /** * è·‘è½¦ */ SPORTS;&#125;// ç›®æ ‡å¯¹è±¡public class CarDTO &#123; private String make; private int seatCount; private String type; public CarDTO() &#123; &#125; public CarDTO(String make, int seatCount, String type) &#123; this.make = make; this.seatCount = seatCount; this.type = type; &#125; public String getMake() &#123; return make; &#125; public void setMake(String make) &#123; this.make = make; &#125; public int getSeatCount() &#123; return seatCount; &#125; public void setSeatCount(int seatCount) &#123; this.seatCount = seatCount; &#125; public String getType() &#123; return type; &#125; public void setType(String type) &#123; this.type = type; &#125;&#125; åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ‹·è´æŽ¥å£ï¼Œç”¨äºŽå‘Šè¯‰ MapStruct éœ€è¦ç”Ÿæˆå“ªä¸ªå¯¹è±¡çš„å±žæ€§æ‹·è´ã€‚ æ³¨æ„ï¼šè¿™é‡Œ @Mapper / Mappers / @Mapping éƒ½æ˜¯ org.mapstruct åŒ…ä¸‹çš„ï¼Œå½“å’Œ Mybatis ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œä¸è¦å¼•ç”¨é”™äº†~ 1234567@Mapperpublic interface CarMapper &#123; CarMapper INSTANCE = Mappers.getMapper(CarMapper.class); @Mapping(source = "numberOfSeats", target = "seatCount") CarDTO carToCarDto(CarDO car);&#125; æœ€åŽåˆ›å»ºæµ‹è¯•ç±»ï¼Œæµ‹è¯•ä¸€æŠŠï¼ 12345678910111213141516public class TestMapStruct &#123; @Test public void shouldMapCarToDto() &#123; //given CarDO car = new CarDO("Morris", 5, CarType.SPORTS); //when CarDTO carDto = CarMapper.INSTANCE.carToCarDto(car); //then Assert.assertNotNull(carDto); Assert.assertEquals("Morris", carDto.getMake()); Assert.assertEquals(5, carDto.getSeatCount()); Assert.assertEquals("SPORTS", carDto.getType()); &#125;&#125; æŒ‰ç…§å®˜æ–¹æ–‡æ¡£çš„åšæ³•ï¼Œååˆ†é¡ºåˆ©ï¼Œæµ‹è¯•é€šè¿‡ï¼ å¦‚æžœæˆ‘ä»¬æŠŠ 2 ä¸ªå®žä½“ç±»é‡Œçš„ getter/setter æ›¿æ¢æˆ Lombokï¼Œä¼šå‘ç”Ÿä»€ä¹ˆäº‹æƒ…å‘¢ï¼Ÿ æˆ‘ä»¬å…ˆæ”¹é€  pom.xml æ–‡ä»¶ï¼Œå¢žåŠ  Lombok ç›¸å…³ä¾èµ–ï¼š 1234567891011121314151617&lt;properties&gt;+ &lt;lombok.version&gt;1.18.12&lt;/lombok.version&gt; &lt;mapstruct.version&gt;1.4.2.Final&lt;/mapstruct.version&gt;&lt;/properties&gt;&lt;dependencies&gt;+ &lt;dependency&gt;+ &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;+ &lt;artifactId&gt;lombok&lt;/artifactId&gt;+ &lt;version&gt;$&#123;lombok.version&#125;&lt;/version&gt;+ &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.mapstruct&lt;/groupId&gt; &lt;artifactId&gt;mapstruct&lt;/artifactId&gt; &lt;version&gt;$&#123;mapstruct.version&#125;&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt; æ­¤æ—¶ï¼Œæˆ‘ä»¬çš„å®žä½“ç±»ä»£ç åº”è¯¥æ˜¯è¿™æ ·å­çš„ï¼š 12345678910111213141516171819// æºå¯¹è±¡@Data@NoArgsConstructor@AllArgsConstructorpublic class CarDO &#123; private String make; private int numberOfSeats; private CarType type;&#125;// ç›®æ ‡å¯¹è±¡@Data@NoArgsConstructor@AllArgsConstructorpublic class CarDTO &#123; private String make; private int seatCount; private String type;&#125; å†æ¥æ‰§è¡Œä¸€éæµ‹è¯•ç±»ï¼Œç¼–è¯‘æ—¶å°±ä¼šå‡ºçŽ°ç±»ä¼¼è¿™ç§ã€Œjava: æ‰¾ä¸åˆ°ç¬¦å· ç¬¦å·: æ–¹æ³• getXXX()ã€é”™è¯¯æç¤ºï¼Œå…·ä½“å¦‚ä¸‹å›¾ï¼š å½“å‡ºçŽ°è¿™ç§é”™è¯¯ï¼Œåˆ†æ˜Žå°±æ˜¯ Lombok æ²¡æœ‰ç”Ÿæ•ˆå˜›ï¼Œé‚£ä¹ˆè¯¥æ€Žä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ è§£å‘ è¿˜è®°å¾—æ–‡ç« å¼€å¤´ä»‹ç»çš„ï¼ŒLombok å’Œ MapStruct éƒ½æ˜¯åˆ©ç”¨ã€ŒAnnotation Processorã€åœ¨ç¨‹åºç¼–è¯‘æ—¶ç”Ÿæˆä»£ç çš„å—ï¼Ÿ äº†è§£åŽŸç†ï¼Œé—®é¢˜å°±å®¹æ˜“è§£å†³äº†ã€‚ å‰æ–‡æˆ‘ä»¬åœ¨æµ‹è¯• MapStruct çš„æ—¶å€™ï¼Œåœ¨ pom.xml æ–‡ä»¶ä¸­æ·»åŠ äº†ä¸€ä¸ªä¸€ä¸ªæ’ä»¶ï¼Œç”¨äºŽå‘Šè¯‰ Maven ç¼–è¯‘æ—¶ï¼Œéœ€è¦é¢å¤–æ‰§è¡Œ MapStruct çš„ä»£ç ç”Ÿæˆé€»è¾‘ï¼Œä½†æ˜¯æˆ‘ä»¬æ²¡æœ‰å‘Šè¯‰ Maven åœ¨ç¼–è¯‘æ—¶ï¼ŒLombok ä¹Ÿéœ€è¦ç”Ÿæˆä»£ç ã€‚ æˆ‘ä»¬åœ¨ pom.xml æ–‡ä»¶çš„ build èŠ‚ç‚¹ä¸­åŠ ä¸Šè¿™ä¹ˆä¸€æ®µï¼š 123456789101112131415161718192021222324252627&lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt; &lt;version&gt;3.8.1&lt;/version&gt; &lt;configuration&gt; &lt;source&gt;1.8&lt;/source&gt; &lt;target&gt;1.8&lt;/target&gt; &lt;annotationProcessorPaths&gt; &lt;!-- Lombok åœ¨ç¼–è¯‘æ—¶ä¼šé€šè¿‡è¿™ä¸ªæ’ä»¶ç”Ÿæˆä»£ç  --&gt;+ &lt;path&gt;+ &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;+ &lt;artifactId&gt;lombok&lt;/artifactId&gt;+ &lt;version&gt;$&#123;lombok.version&#125;&lt;/version&gt;+ &lt;/path&gt; &lt;!-- MapStruct åœ¨ç¼–è¯‘æ—¶ä¼šé€šè¿‡è¿™ä¸ªæ’ä»¶ç”Ÿæˆä»£ç  --&gt; &lt;path&gt; &lt;groupId&gt;org.mapstruct&lt;/groupId&gt; &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt; &lt;version&gt;$&#123;mapstruct.version&#125;&lt;/version&gt; &lt;/path&gt; &lt;/annotationProcessorPaths&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt;&lt;/build&gt; è¿™ä¸ªæ—¶å€™ï¼Œå†åŽ»è¿è¡Œä¸€ä¸‹é€šè¿‡æµ‹è¯•ç±»ï¼Œå°±ä¸ä¼šå‡ºçŽ°ä¸Šè¿°æ‰¾ä¸åˆ° get æ–¹æ³•çš„é”™è¯¯äº†~ é…å¥—ä»£ç ï¼šhttps://github.com/xkcoding/practice_demo/tree/master/lombok-with-mapstruct]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>lombok</tag>
        <tag>mapstruct</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨ docker å¿«é€Ÿå¯åŠ¨æœ¬åœ° ZooKeeper é›†ç¾¤]]></title>
    <url>%2F2021%2F04%2F14%2Frun-local-zookeeper-cluster-with-docker.html</url>
    <content type="text"><![CDATA[å‰è¨€ ZooKeeper ï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯ï¼šåŠ¨ç‰©å›­ç®¡ç†å‘˜ï¼Œè€Œè¿™ä¹Ÿæ˜¯å®ƒ logo çš„ç”±æ¥ã€‚å®ƒæ˜¯ä¸€ä¸ªä¸ºåˆ†å¸ƒå¼åº”ç”¨æä¾›ä¸€è‡´æ€§æœåŠ¡çš„è½¯ä»¶ï¼Œæ˜¯å¤§æ•°æ®åœºæ™¯ä¸‹çš„ä¸€ä¸ªé‡è¦çš„åŸºç¡€ç»„ä»¶ã€‚æ‰€ä»¥å®‰è£… ZooKeeperï¼Œä¹Ÿæ˜¯å…¥é—¨å­¦ä¹ å¤§æ•°æ®çš„ç¬¬ä¸€æ­¥ã€‚ æ›¾å‡ ä½•æ—¶ï¼Œæˆ‘ä»¬åœ¨å­¦ä¹ å¤§æ•°æ®æŠ€æœ¯çš„æ—¶å€™ï¼Œæ€»æ˜¯å…ˆåœ¨æœ¬åœ°çŽ¯å¢ƒå¯åŠ¨è™šæ‹Ÿæœºåº”ç”¨ï¼Œç„¶åŽå¼€å§‹åˆå§‹åŒ–è™šæ‹Ÿæœºé…ç½®å’ŒçŽ¯å¢ƒï¼Œç´§æŽ¥ç€å¼€å§‹å®‰è£…è½¯ä»¶ã€‚æ­¤æ—¶å¦‚æžœéœ€è¦æ¨¡æ‹Ÿä¸€äº›é›†ç¾¤çŽ¯å¢ƒï¼Œè¿˜éœ€è¦è¿›è¡Œå¤§é‡é‡å¤çš„è‹¦ä¸å ªè¨€çš„é…ç½®å·¥ä½œã€‚ ä»Šå¤©æˆ‘ä»¬ä¾¿åˆ©ç”¨ Docker æ¥å¿«é€Ÿçš„åœ¨æœ¬åœ°å¯åŠ¨ä¸€ä¸ª ZooKeeper çŽ¯å¢ƒã€‚ å®žæ“ çŽ¯å¢ƒ è‡ªè¡Œåœ¨æœ¬æœºå®‰è£… Docker å’Œ Docker Compose è½¯ä»¶ï¼Œå¦‚æžœç½‘ç»œçŽ¯å¢ƒå·®çš„ï¼Œå¯ä»¥é…ç½®é˜¿é‡Œçš„é•œåƒæºåœ°å€ï¼Œæœ¬æ–‡ä¸å†èµ˜è¿°ã€‚ å¯»æ‰¾åˆé€‚çš„é•œåƒ å‰å¾€ é•œåƒä»“åº“ å¯ä»¥å¾ˆè½»æ¾çš„æœç´¢åˆ° ZooKeeperï¼Œå‘çŽ°å·²ç»æä¾›äº† å®˜æ–¹é•œåƒï¼Œç¾Žæ»‹æ»‹ï¼ŒçœåŽ»äº†æˆ‘ä»¬é‰´åˆ«é•œåƒç”šè‡³è‡ªå·±å°è£…é•œåƒçš„æ­¥éª¤ã€‚ å¯åŠ¨å•æœºç‰ˆ ZooKeeper ä½ å¯ä»¥ç®€å•çš„æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤è¿è¡Œä¸€ä¸ªå•èŠ‚ç‚¹çš„ ZooKeeperï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©ç›®å‰æœ€æ–°çš„ 3.7.0 ç‰ˆæœ¬ã€‚ 1$ docker run -d -p 2181:2181 --name dev-zk zookeeper:3.7.0 æ­¤æ—¶ä½ å°±å¾—åˆ°äº†ä¸€ä¸ªå•æœºç‰ˆçš„ ZooKeeperï¼Œè¿™é‡Œæ›´æŽ¨èä½¿ç”¨ Compose çš„æ–¹å¼æŠŠå‚æ•°æŒä¹…åŒ–åˆ°æ–‡ä»¶ä¸­ï¼Œæ–¹ä¾¿åŽç»­è°ƒæ•´ä¸ºé›†ç¾¤æ¨¡å¼ã€‚ 1234567version: '3.8'services: zookeeper: image: zookeeper:3.7.0 ports: - 2181:2181 å°†ä¸Šè¿°å†…å®¹ä¿å­˜ä¸º docker-compose.yml æ–‡ä»¶ä¹‹åŽï¼Œåœ¨å‘½ä»¤è¡Œæ‰§è¡Œï¼š 1$ docker-compose up -d æ³¨æ„ï¼šè¿™é‡Œä½ ä¹Ÿå¯ä»¥ä¸åŠ  -d å‚æ•°ï¼Œè§‚å¯Ÿå¯åŠ¨æ—¥å¿—ï¼Œæ–¹ä¾¿æŽ’æŸ¥é—®é¢˜ï¼Œç¡®ä¿æ²¡é—®é¢˜åŽï¼Œä¸‹æ¬¡å†åŠ ä¸Š -d å‚æ•°è¿›è¡ŒåŽå°è¿è¡Œ å¯åŠ¨é›†ç¾¤ç‰ˆ ZooKeeper è¿™é‡Œæˆ‘ä»¬åˆ©ç”¨ Docker Compose çš„ Services ç½‘ç»œäº’é€šçš„ç‰¹æ€§ï¼Œæ¥ç»„æˆä¸€ä¸ªé›†ç¾¤ã€‚ ä¿®æ”¹ä¸Šé¢çš„ Compose æ–‡ä»¶å†…å®¹ï¼š 1234567891011121314151617181920212223242526272829version: '3.8'services: zoo1: image: zookeeper:3.7.0 hostname: zoo1 ports: - 2181:2181 environment: ZOO_MY_ID: 1 ZOO_SERVERS: server.1=0.0.0.0:2888:3888;2181 server.2=zoo2:2888:3888;2181 server.3=zoo3:2888:3888;2181 zoo2: image: zookeeper:3.7.0 hostname: zoo2 ports: - 2182:2181 environment: ZOO_MY_ID: 2 ZOO_SERVERS: server.1=zoo1:2888:3888;2181 server.2=0.0.0.0:2888:3888;2181 server.3=zoo3:2888:3888;2181 zoo3: image: zookeeper:3.7.0 hostname: zoo3 ports: - 2183:2181 environment: ZOO_MY_ID: 3 ZOO_SERVERS: server.1=zoo1:2888:3888;2181 server.2=zoo2:2888:3888;2181 server.3=0.0.0.0:2888:3888;2181 åœ¨å‘½ä»¤è¡Œæ‰§è¡Œ docker-compose up å¯åŠ¨ï¼Œè§‚å¯Ÿå¯åŠ¨æ—¥å¿—ã€‚ æ­¤æ—¶ä½ å°±å¾—åˆ°äº†ä¸€ä¸ª 3 ä¸ªèŠ‚ç‚¹çš„ ZooKeeper é›†ç¾¤ï¼Œåˆ†åˆ«æš´éœ²åœ¨æœ¬æœºçŽ¯å¢ƒçš„ 2181/2182/2183 ç«¯å£ã€‚ å…¶ä»– æœ‰äº›å°ä¼™ä¼´åœ¨è¿è¡Œ spring-boot-demo é¡¹ç›®çš„ demo-zookeeper æ¨¡å—æ—¶ï¼Œå‡ºçŽ°äº†èŽ·å–ä¸åˆ°é›†ç¾¤åœ°å€çš„é”™è¯¯ï¼Œæäº†ç›¸å…³ ISSUEï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 12345678910111213142021-04-14 15:52:18.630 ERROR 23630 --- [ain-EventThread] o.a.c.f.imps.CuratorFrameworkImpl : Background exception was not retry-able or retry gave upjava.lang.NullPointerException: null at org.apache.curator.utils.Compatibility.getHostAddress(Compatibility.java:116) ~[curator-client-5.1.0.jar:na] at org.apache.curator.framework.imps.EnsembleTracker.configToConnectionString(EnsembleTracker.java:185) ~[curator-framework-5.1.0.jar:5.1.0] at org.apache.curator.framework.imps.EnsembleTracker.processConfigData(EnsembleTracker.java:206) ~[curator-framework-5.1.0.jar:5.1.0] at org.apache.curator.framework.imps.EnsembleTracker.access$300(EnsembleTracker.java:50) ~[curator-framework-5.1.0.jar:5.1.0] at org.apache.curator.framework.imps.EnsembleTracker$2.processResult(EnsembleTracker.java:150) ~[curator-framework-5.1.0.jar:5.1.0] at org.apache.curator.framework.imps.CuratorFrameworkImpl.sendToBackgroundCallback(CuratorFrameworkImpl.java:892) [curator-framework-5.1.0.jar:5.1.0] at org.apache.curator.framework.imps.CuratorFrameworkImpl.processBackgroundOperation(CuratorFrameworkImpl.java:649) [curator-framework-5.1.0.jar:5.1.0] at org.apache.curator.framework.imps.WatcherRemovalFacade.processBackgroundOperation(WatcherRemovalFacade.java:152) [curator-framework-5.1.0.jar:5.1.0] at org.apache.curator.framework.imps.GetConfigBuilderImpl$2.processResult(GetConfigBuilderImpl.java:222) [curator-framework-5.1.0.jar:5.1.0] at org.apache.zookeeper.ClientCnxn$EventThread.processEvent(ClientCnxn.java:630) [zookeeper-3.6.0.jar:3.6.0] at org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:551) [zookeeper-3.6.0.jar:3.6.0] è§£å†³æ–¹å¼å¦‚ä¸‹ï¼š åœ¨æœ¬æœºé…ç½® hosts æ–‡ä»¶ï¼ŒæŽ¨èä½¿ç”¨ SwitchHosts! è½¯ä»¶é…ç½®ã€‚ 1127.0.0.1 zoo1 zoo2 zoo3 ä¿®æ”¹ Curator è¿žæŽ¥ ZooKeeper é›†ç¾¤åœ°å€ï¼Œé€šè¿‡ hostname æ–¹å¼è¿žæŽ¥ä¸Š ZooKeeperã€‚ 12- 127.0.0.1:2181,127.0.0.1:2182,127.0.0.1:2183+ zoo1:2181,zoo2:2182,zoo3:2183 æ­¤æ—¶è¯¥é—®é¢˜å°±å¯ä»¥è§£å†³äº†ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>docker</category>
      </categories>
      <tags>
        <tag>zookeeper</tag>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¦‚ä½•åœ¨æœ¬åœ°å¿«é€Ÿå¯åŠ¨ä¸€ä¸ª K8S é›†ç¾¤]]></title>
    <url>%2F2021%2F03%2F15%2Frun-local-k8s-cluster-quickly.html</url>
    <content type="text"><![CDATA[èƒŒæ™¯ æœ€è¿‘åœ¨é˜…è¯»ã€Šæ¯å¤©5åˆ†é’ŸçŽ©è½¬Kubernetesã€‹ è¿™æœ¬ä¹¦ï¼Œä¸ªäººæ„Ÿè§‰æ˜¯ä¸€æœ¬ä¸é”™çš„ K8S çš„å…¥é—¨ä¹¦ç±ã€‚ æˆ‘ä»¬åœ¨åˆšå¼€å§‹å­¦ä¹ ä¸€é¡¹æŠ€æœ¯çš„æ—¶å€™ï¼Œä¸è®ºæ˜¯é€šè¿‡å®˜æ–¹æ–‡æ¡£ã€ä¹¦ç±ï¼Œäº¦æˆ–æ˜¯è§†é¢‘çš„å½¢å¼ï¼Œå¦‚æžœä»…ä»…æ˜¯åŽ»çœ‹ï¼Œè€Œä¸åŽ»ç»ƒä¹ å®žè·µçš„è¯ï¼Œé‚£ä¹ˆæ˜¯å¾ˆéš¾å°†å…¶çœŸæ­£åº”ç”¨èµ·æ¥çš„ã€‚ ç„¶è€Œå½“æˆ‘å¼€å§‹å‡†å¤‡å®žè·µçš„æ—¶å€™ï¼Œå‘çŽ°è¦æƒ³åœ¨æœ¬åœ°å°† K8S è·‘èµ·æ¥ï¼Œå¹¶ä¸åƒæˆ‘ä»¬æƒ³è±¡çš„é‚£ä¹ˆå®¹æ˜“ã€‚å­˜åœ¨ä»¥ä¸‹å‡ ç‚¹ã€Œé—®é¢˜ã€ï¼š ç½‘ç»œçŽ¯å¢ƒï¼šK8S é‡Œé¢çš„ä¸€äº›é•œåƒåœ¨å›½å†…å¾ˆéš¾å°†å…¶ pull ä¸‹æ¥ï¼Œå½“ç„¶è¿™å¯ä»¥é€šè¿‡ä»£ç†ã€é•œåƒç«™ç­‰æ–¹å¼è§£å†³ã€‚ èµ„æºæ¶ˆè€—ï¼šåœ¨å†…å­˜èµ„æºä¸è¿™ä¹ˆå……è£•çš„æœ¬åœ°å¼€å‘çŽ¯å¢ƒï¼ŒåŽ»éƒ¨ç½²ä¸€ä¸ª K8S é›†ç¾¤ï¼Œè¿™æ— ç–‘ä¸æ˜¯ä¸€ä¸ªæ˜Žæ™ºçš„é€‰æ‹©ã€‚ é‚£ä¹ˆæœ‰æ²¡æœ‰ä»€ä¹ˆæ–¹æ¡ˆå¯ä»¥æ›´ä¼˜é›…æ›´è½»é‡æ›´å¿«é€Ÿæ­å»ºä¸€ä¸ª K8S é›†ç¾¤å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯ k3dã€‚ å…¶å®žæœ‰å¾ˆå¤šç§æ–¹å¼å¯ä»¥åœ¨æœ¬åœ°è¿è¡Œ k8sï¼Œæ¯”å¦‚ï¼š minikube ä»…æ”¯æŒå•èŠ‚ç‚¹ï¼Œä½†æ˜¯æˆ‘ä»¬æœŸæœ›å¯ä»¥è·‘ä¸€ä¸ªé›†ç¾¤çš„æ–¹å¼ï¼Œæ–¹ä¾¿æˆ‘ä»¬åŽ» Mock èŠ‚ç‚¹å®•æœºä¹‹åŽ K8S è‡ªåŠ¨è°ƒåº¦çš„ case âœ–ï¸ microk8s æ˜¯ Ubuntu ç”Ÿæ€é‡Œæä¾›çš„ä¸€ä¸ªå¯ä»¥å•æœºè¿è¡Œçš„ k8s ç‰ˆæœ¬ï¼Œé…åˆ Ubuntu ç”Ÿæ€çš„ multipassï¼Œå¯ä»¥æ¨¡æ‹Ÿå¤šèŠ‚ç‚¹ï¼Œä½†æ˜¯åœ¨æœ¬å°±èµ„æºç´§å¼ çš„æœ¬åœ°çŽ¯å¢ƒï¼Œé€šè¿‡è™šæ‹Ÿæœºçš„æ–¹å¼æ¨¡æ‹Ÿå¤šèŠ‚ç‚¹ï¼Œæ˜¾ç„¶å¹¶ä¸æ˜¯æˆ‘æƒ³è¦çš„ âœ–ï¸ kind æ˜¯ä¸€ä¸ªåŸºäºŽ docker æž„å»º Kubernetes é›†ç¾¤çš„å·¥å…·ï¼ŒKubernetes in Docker âœ”ï¸ k3d æ˜¯ä¸€ä¸ªå¯ä»¥è®© k3s è¿è¡Œåœ¨ Docker ä¸­çš„å·¥å…·ï¼Œç›¸æ¯”äºŽ kind ï¼Œå¯åŠ¨é€Ÿåº¦æ›´å¿«ï¼Œå ç”¨èµ„æºæ›´å°ï¼Œä¹Ÿæ˜¯æˆ‘é‡‡å–çš„ä¸€ç§æ–¹æ¡ˆ âœ… å½“ç„¶äº†ï¼Œå¦‚æžœåªæ˜¯å­¦ä¹  k8s çš„ä½¿ç”¨ï¼Œé‚£ä¹ˆä»¥ä¸Šæ–¹æ¡ˆå‡å¯ä»¥ä½¿ç”¨ã€‚ å…³äºŽ k3d ä»¥åŠ kind çš„å¯¹æ¯”ï¼Œå¯ä»¥å‚è€ƒ K3d vs Kind è°æ›´é€‚åˆæœ¬åœ°ç ”å‘ã€‚ 1. ä»€ä¹ˆæ˜¯ k3d + k3s ï¼Ÿ k3s æ˜¯ä¸€ç§éžå¸¸å¿«é€Ÿä¸”è½»é‡çº§çš„å®Œå…¨å…¼å®¹çš„ Kubernetes å‘è¡Œç‰ˆï¼ˆCNCF è®¤è¯ï¼‰ã€‚ k3d æ˜¯ä¸€ä¸ªå¯ä»¥è®© k3s è¿è¡Œåœ¨ Docker ä¸­çš„å·¥å…·ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªç®€å•çš„ CLI æ¥åˆ›å»ºã€è¿è¡Œå’Œåˆ é™¤å…·æœ‰ 1 åˆ° N ä¸ªèŠ‚ç‚¹çš„ Kubernetes é›†ç¾¤ã€‚ k3s åŒ…æ‹¬ä»¥ä¸‹ä¸€äº›ç»„ä»¶ï¼š Containerdï¼šä¸€ä¸ªç±»ä¼¼ Docker çš„è¿è¡Œæ—¶å®¹å™¨ï¼Œä½†æ˜¯å®ƒä¸æ”¯æŒæž„å»ºé•œåƒ Flannelï¼šåŸºäºŽ CNI å®žçŽ°çš„ç½‘ç»œæ¨¡åž‹ï¼Œé»˜è®¤ä½¿ç”¨çš„æ˜¯ Flannelï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Calico ç­‰å…¶ä»–å®žçŽ°æ›¿æ¢ CoreDNSï¼šé›†ç¾¤å†…éƒ¨ DNS ç»„ä»¶ SQLite3ï¼šé»˜è®¤ä½¿ç”¨ SQLite3 è¿›è¡Œå­˜å‚¨ï¼ŒåŒæ ·ä¹Ÿæ”¯æŒ etcd3, MySQL, Postgres Traefikï¼šé»˜è®¤å®‰è£… Ingress controller æ˜¯ traefik 1.x çš„ç‰ˆæœ¬ Embedded service loadbalancerï¼šå†…åµŒçš„ä¸€ä¸ªæœåŠ¡è´Ÿè½½å‡è¡¡ç»„ä»¶ k3s æ˜¯ä¸€ç§æ¨¡å—åŒ–çš„å‘è¡Œç‰ˆï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„æ›¿æ¢ä¸Šé¢çš„ç»„ä»¶ã€‚ 2. å®‰è£… k3d åœ¨ Mac ä¸‹ï¼Œä½¿ç”¨ Homebrew å¯ä»¥å¾ˆæ–¹ä¾¿çš„å®‰è£… k3dï¼š brew install k3dã€‚ é¡ºæ‰‹å®‰è£…ä¸€ä¸‹ kubectl å’Œ kubecmï¼š 12brew install kubectlbrew install kubecm 3. å°è¯•ç‰›åˆ€ æˆ‘ä»¬é€šè¿‡ k3d çš„å‘½ä»¤å¯ä»¥è½»æ˜“çš„åœ¨æœ¬åœ°å¯åŠ¨ä¸€ä¸ªæˆ– N ä¸ª k8s é›†ç¾¤ã€‚ é¦–å…ˆæˆ‘ä»¬å°è¯•åˆ›å»ºä¸€ä¸ª 1ä¸»2ä»Ž çš„é›†ç¾¤ï¼š 1k3d cluster create first-cluster --port 8080:80@loadbalancer --port 8443:443@loadbalancer --api-port 6443 --servers 1 --agents 2 åˆæ¬¡åˆ›å»ºå¯èƒ½ä¼šæ¯”è¾ƒæ…¢ï¼Œå› ä¸ºä¼šä»Ž Docker ä»“åº“æ‹‰å–æœ€æ–°çš„ rancher/k3s é•œåƒã€‚ å½“å‡ºçŽ°ä¸‹é¢çš„æ—¥å¿—æ—¶ï¼Œk8s é›†ç¾¤å°±åˆ›å»ºæˆåŠŸäº† ðŸ˜‰ 12345678910111213141516171819202122INFO[0000] Prep: NetworkINFO[0000] Created network 'k3d-first-cluster'INFO[0000] Created volume 'k3d-first-cluster-images'INFO[0001] Creating node 'k3d-first-cluster-server-0'INFO[0001] Creating node 'k3d-first-cluster-agent-0'INFO[0001] Creating node 'k3d-first-cluster-agent-1'INFO[0001] Creating LoadBalancer 'k3d-first-cluster-serverlb'INFO[0001] Starting cluster 'first-cluster'INFO[0001] Starting servers...INFO[0001] Starting Node 'k3d-first-cluster-server-0'INFO[0008] Starting agents...INFO[0008] Starting Node 'k3d-first-cluster-agent-0'INFO[0020] Starting Node 'k3d-first-cluster-agent-1'INFO[0028] Starting helpers...INFO[0028] Starting Node 'k3d-first-cluster-serverlb'INFO[0029] (Optional) Trying to get IP of the docker host and inject it into the cluster as 'host.k3d.internal' for easy accessINFO[0031] Successfully added host record to /etc/hosts in 4/4 nodes and to the CoreDNS ConfigMapINFO[0031] Cluster 'first-cluster' created successfully!INFO[0031] --kubeconfig-update-default=false --&gt; sets --kubeconfig-switch-context=falseINFO[0031] You can now use it like this:kubectl config use-context k3d-first-clusterkubectl cluster-info æ­¤æ—¶ï¼Œæˆ‘ä»¬æŒ‰ç…§æ—¥å¿—æç¤ºï¼Œè¿è¡Œ kubectl cluster-info æŸ¥çœ‹ä¸‹å½“å‰é›†ç¾¤çš„ä¿¡æ¯ï¼š 123Kubernetes master is running at https://0.0.0.0:6443CoreDNS is running at https://0.0.0.0:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxyMetrics-server is running at https://0.0.0.0:6443/api/v1/namespaces/kube-system/services/https:metrics-server:/proxy è¿è¡Œ kubectl get nodes æŸ¥çœ‹ä¸‹å½“å‰é›†ç¾¤çš„èŠ‚ç‚¹æƒ…å†µï¼š 1234NAME STATUS ROLES AGE VERSIONk3d-first-cluster-agent-1 Ready &lt;none&gt; 178m v1.20.2+k3s1k3d-first-cluster-server-0 Ready control-plane,master 178m v1.20.2+k3s1k3d-first-cluster-agent-0 Ready &lt;none&gt; 178m v1.20.2+k3s1 æ³¨æ„ï¼Œè¿™é‡Œçš„â€œèŠ‚ç‚¹â€å…¶å®žæ˜¯æœ¬æœº Docker è¿è¡Œçš„å®¹å™¨ï¼Œé€šè¿‡ docker ps æŸ¥çœ‹ä¸‹å½“å‰æœ¬æœºè¿è¡Œçš„å®¹å™¨å§ 12345CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMESa757151daf14 rancher/k3d-proxy:v4.2.0 "/bin/sh -c nginx-prâ€¦" 4 hours ago Up 4 hours 0.0.0.0:6443-&gt;6443/tcp, 0.0.0.0:8080-&gt;80/tcp, 0.0.0.0:8443-&gt;443/tcp k3d-first-cluster-serverlb6fcb1bbaf96e rancher/k3s:latest "/bin/k3s agent" 4 hours ago Up 4 hours k3d-first-cluster-agent-1cef7277e43b9 rancher/k3s:latest "/bin/k3s agent" 4 hours ago Up 4 hours k3d-first-cluster-agent-05d438c1b5087 rancher/k3s:latest "/bin/k3s server --tâ€¦" 4 hours ago Up 4 hours k3d-first-cluster-server-0 è§£é‡Šä¸€ä¸‹æˆ‘ä»¬åˆ›å»ºé›†ç¾¤æ—¶é…ç½®çš„ç«¯å£æ˜ å°„ï¼š --port 8080:80@loadbalancer ä¼šå°†æœ¬åœ°çš„ 8080 ç«¯å£æ˜ å°„åˆ° loadbalancer çš„ 80 ç«¯å£ï¼Œç„¶åŽ loadbalancer æŽ¥æ”¶åˆ° 80 ç«¯å£çš„è¯·æ±‚åŽï¼Œä¼šä»£ç†åˆ°æ‰€æœ‰çš„ k8s èŠ‚ç‚¹ã€‚ --api-port 6443 é»˜è®¤æä¾›çš„ç«¯å£å·ï¼Œk3s çš„ api-server ä¼šç›‘å¬ 6443 ç«¯å£ï¼Œä¸»è¦æ˜¯ç”¨æ¥æ“ä½œ Kubernetes API çš„ï¼Œå³ä½¿åˆ›å»ºå¤šä¸ª Master èŠ‚ç‚¹ï¼Œä¹Ÿåªéœ€è¦æš´éœ²ä¸€ä¸ª 6443 ç«¯å£ï¼Œloadbalancer ä¼šå°†è¯·æ±‚ä»£ç†åˆ†å‘ç»™å¤šä¸ª Master èŠ‚ç‚¹ã€‚ å¦‚æžœæˆ‘ä»¬æœŸæœ›é€šè¿‡ NodePort çš„å½¢å¼æš´éœ²æœåŠ¡ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰ä¸€äº›ç«¯å£å·æ˜ å°„åˆ° loadbalancer æ¥æš´éœ² k8s çš„æœåŠ¡ï¼Œæ¯”å¦‚ï¼š-p 10080-20080:10080-20080@loadbalancer çŽ°åœ¨æˆ‘ä»¬é›†ç¾¤å’Œä¸»æœºçš„ç½‘ç»œé€šä¿¡æ˜¯è¿™æ ·å­çš„ï¼š 4. æµ‹è¯• åˆ›å»ºä¸€ä¸ª nginx çš„ Deployment 1kubectl create deployment nginx --image=nginx åˆ›å»ºä¸€ä¸ª Service é€šè¿‡ ClusterIP çš„æ–¹å¼æš´éœ²æœåŠ¡ 1kubectl create service clusterip nginx --tcp=80:80 åˆ›å»ºä¸€ä¸ª Ingressï¼Œk3s é»˜è®¤å®‰è£…çš„æ˜¯ traefik 1.x ä½œä¸º Ingress Controller 12345678910111213141516171819cat &lt;&lt;EOF | kubectl apply -f -apiVersion: networking.k8s.io/v1kind: Ingressmetadata: name: nginx annotations: ingress.kubernetes.io/ssl-redirect: "false"spec: rules: - http: paths: - path: / pathType: Prefix backend: service: name: nginx port: number: 80EOF æ­¤æ—¶ï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® http://localhost:8080/ å°±å¯ä»¥çœ‹åˆ°ç†Ÿæ‚‰çš„ nginx é»˜è®¤é¡µã€‚ è¿™æ˜¯ä¸æ˜¯å¤ªé…·äº†~ ðŸ˜Ž 5. å…¶å®ƒ 5.1. ç®¡ç†é›†ç¾¤ åœæ­¢é›†ç¾¤ï¼šk3d cluster stop first-cluster é‡å¯é›†ç¾¤ï¼šk3d cluster start first-cluster åˆ é™¤é›†ç¾¤ï¼šk3d cluster delete first-cluster 5.2. åˆ›å»ºæŒ‡å®šç‰ˆæœ¬çš„k8sé›†ç¾¤ å½“ä½¿ç”¨ Helm Chart å®‰è£… Rancher æ—¶ï¼Œå¯èƒ½ä¼šå‡ºçŽ°å¦‚ä¸‹é”™è¯¯æ—¥å¿—ï¼š 1chart requires kubeVersion: &lt; 1.20.0-0 which is incompatible with Kubernetes v1.20.0+k3s2 æµ‹è¯•æ—¶ Rancher ç‰ˆæœ¬å·ä¸º 2.5.5ï¼Œç›®å‰æœ€æ–°çš„ 2.5.6 å·²ç»å¯ä»¥æ”¯æŒ 1.20.x ç‰ˆæœ¬äº† è¦åˆ›å»ºä¸€ä¸ª k8s ç‰ˆæœ¬å·ä¸º v1.19.8-k3s1 çš„ k8s é›†ç¾¤ï¼Œå¯ä»¥åœ¨åˆ›å»ºé›†ç¾¤çš„å‘½ä»¤åŽé¢åŠ  --image å‚æ•°ï¼ŒæŒ‡å®šç‰ˆæœ¬å·ï¼šk3d cluster create first-cluster xxxxx --image rancher/k3s:v1.19.8-k3s1 5.3. å¿«é€Ÿåˆ‡æ¢ kubectl context è¿˜è®°å¾—åœ¨ç¬¬äºŒæ­¥é¡ºæ‰‹å®‰è£…çš„ kubecm å—ï¼Ÿ å½“æˆ‘ä»¬åœ¨æœ¬åœ°ä½¿ç”¨ k3d åˆ›å»ºäº†å¤šä¸ªé›†ç¾¤ä¹‹åŽï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ kubecm å¿«é€Ÿåˆ‡æ¢ contextã€‚ 123456789101112$ kubecm sUse the arrow keys to navigate: â†“ â†‘ â†’ â† and / toggles searchSelect Kube Context ðŸ˜¼ k3d-first-cluster(*) k3d-dev k3d-rancher-test &lt;Exit&gt;--------- Info ----------Name: k3d-first-clusterCluster: k3d-first-clusterUser: admin@k3d-first-cluster å‚è€ƒ k3sï¼šhttps://k3s.io/ k3dï¼šhttps://k3d.io/ kubecmï¼šhttps://github.com/sunny0826/kubecm ä¸‹ä¸€ç¯‡ï¼Œæˆ‘å°†ä»‹ç»ä¸‹å¦‚ä½•åœ¨æˆ‘ä»¬çš„k8sé›†ç¾¤ä¸­ï¼Œéƒ¨ç½² Rancher æ¥ç®€åŒ–æˆ‘ä»¬çš„ k8s æ“ä½œã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>kubernetes</tag>
        <tag>docker</tag>
        <tag>k3d</tag>
        <tag>k3s</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è§£å†³ MacOS BigSur ä½¿ç”¨ pip å®‰è£…ä¾èµ–å¤±è´¥çš„é—®é¢˜]]></title>
    <url>%2F2021%2F03%2F10%2Ffix-error-about-python-package-install-on-big-sur.html</url>
    <content type="text"><![CDATA[å‰è¨€ å¹´åŽåˆ°çŽ°åœ¨ï¼Œæˆ‘å·²ç»è¢«åŸºé‡‘ä¼¤é€äº†å¿ƒðŸ¤• äºŽæ˜¯ä¹Žï¼Œä¸ºäº†äº‰å–ä¸åš éŸ­é›¶åŽï¼Œæˆ‘æ‰“ç®—å­¦ä¹ ä¸€ä¸‹å…³äºŽé‡åŒ–äº¤æ˜“æ–¹é¢çš„å†…å®¹ã€‚ å­¦ä¹ é‡åŒ–äº¤æ˜“ï¼Œé¦–å…ˆå¾—å…ˆæ‹¿åˆ°äº¤æ˜“çš„æ•°æ®ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯ èšå®½æ•°æ® æä¾›çš„æœ¬åœ°æ•°æ®æŽ¥å£ï¼Œå®˜æ–¹æä¾›äº† Python SDKï¼Œæ‰€ä»¥æˆ‘å°±å¼€å§‹ç…§ç€æ–‡æ¡£å®‰è£… SDK â€¦â€¦ ç…§ç€æ–‡æ¡£çš„å®‰è£…æ­¥éª¤ï¼Œå…¶å®žå¾ˆç®€å•ï¼š 1$ pip install jqdatasdk å¦‚æžœä¸€åˆ‡æ­£å¸¸ï¼Œé‚£ä¹ˆä½ å¯ä»¥ç›´æŽ¥å…³æŽ‰æœ¬æ–‡äº†ã€‚ å¯å¦‚æžœä½ çš„çŽ¯å¢ƒå’Œæˆ‘ä¸€æ ·ï¼š ç³»ç»Ÿç‰ˆæœ¬ï¼šMacOS BigSur 11.2.3 Python ç‰ˆæœ¬ï¼š3.9 IDE ç‰ˆæœ¬ï¼šPyCharm Professional 2020.3 é‚£ä¹ˆå¾ˆæœ‰å¯èƒ½ä¼šå®‰è£…å¤±è´¥ï¼Œå¹¶ä¸”é”™è¯¯æ—¥å¿—å¦‚ä¸‹ï¼ˆæˆªå–éƒ¨åˆ†æ—¥å¿—ï¼‰ï¼š 1234567891011121314151617181920$ pip install jqdatasdk Collecting jqdatasdk Using cached jqdatasdk-1.8.8-py3-none-any.whl (151 kB)Requirement already satisfied: six in /usr/local/lib/python3.9/site-packages (from jqdatasdk) (1.15.0)......(çœç•¥éƒ¨åˆ†æ—¥å¿—)Requirement already satisfied: urllib3&lt;1.27,&gt;=1.21.1 in /usr/local/lib/python3.9/site-packages (from requests-&gt;jqdatasdk) (1.26.3)Building wheels for collected packages: thriftpy2 Building wheel for thriftpy2 (setup.py) ... error ERROR: Command errored out with exit status 1: command: /usr/local/opt/python@3.9/bin/python3.9 -u -c 'import sys, setuptools, tokenize; sys.argv[0] = '"'"'/private/var/folders/tx/_rv7b39127d289cpmm3dpylr0000gn/T/pip-install-p9oxcpjv/thriftpy2_42f75cad7b3842908525f1c376f2eb3d/setup.py'"'"'; __file__='"'"'/private/var/folders/tx/_rv7b39127d289cpmm3dpylr0000gn/T/pip-install-p9oxcpjv/thriftpy2_42f75cad7b3842908525f1c376f2eb3d/setup.py'"'"';f=getattr(tokenize, '"'"'open'"'"', open)(__file__);code=f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' bdist_wheel -d /private/var/folders/tx/_rv7b39127d289cpmm3dpylr0000gn/T/pip-wheel-vdjkejow cwd: /private/var/folders/tx/_rv7b39127d289cpmm3dpylr0000gn/T/pip-install-p9oxcpjv/thriftpy2_42f75cad7b3842908525f1c376f2eb3d/ Complete output (93 lines): running bdist_wheel The [wheel] section is deprecated. Use [bdist_wheel] instead.......(çœç•¥éƒ¨åˆ†æ—¥å¿—) creating build/temp.macosx-11-x86_64-3.9/thriftpy2/transport clang -Wno-unused-result -Wsign-compare -Wunreachable-code -fno-common -dynamic -DNDEBUG -g -fwrapv -O3 -Wall -isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk -I/usr/local/include -I/usr/local/opt/openssl@1.1/include -I/usr/local/opt/sqlite/include -I/usr/local/opt/tcl-tk/include -I/usr/local/Cellar/python@3.9/3.9.2_1/Frameworks/Python.framework/Versions/3.9/include/python3.9 -c thriftpy2/transport/cybase.c -o build/temp.macosx-11-x86_64-3.9/thriftpy2/transport/cybase.o clang: error: invalid version number in 'MACOSX_DEPLOYMENT_TARGET=11' error: command '/usr/bin/clang' failed with exit code 1 ---------------------------------------- æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å‘çŽ°æ—¥å¿—é‡Œçš„å…³é”®ä¿¡æ¯ï¼š 1clang: error: invalid version number in 'MACOSX_DEPLOYMENT_TARGET=11' è§£å†³åŠžæ³• 1. æ£€æŸ¥å½“å‰ç³»ç»Ÿ clang ç‰ˆæœ¬ 12345$ clang --versionApple clang version 11.0.3 (clang-1103.0.32.62)Target: x86_64-apple-darwin20.3.0Thread model: posixInstalledDir: /Library/Developer/CommandLineTools/usr/bin 2. å†æ¬¡æ£€æŸ¥ç³»ç»ŸCommandLineToolsç‰ˆæœ¬ 12345$ softwareupdate --all --install --forceSoftware Update ToolFinding available softwareNo updates are available. è¿™é‡Œå…¶å®žæ˜¯ä¸ªå‘ï¼Œé€šè¿‡ softwareupdate å…¶å®žå‘çŽ°ä¸äº†ï¼Œæˆ‘ä»¬é€šè¿‡å¦å¤–ä¸€ä¸ªå·¥å…·æ£€æŸ¥ä¸‹ 1234567891011121314151617$ brew doctorPlease note that these warnings are just used to help the Homebrew maintainerswith debugging if you file an issue. If everything you use Homebrew for isworking fine: please don't worry or file an issue; just ignore this. Thanks!......(çœç•¥éƒ¨åˆ†æ—¥å¿—)Warning: Your Command Line Tools (CLT) does not support macOS 11.It is either outdated or was modified.Please update your Command Line Tools (CLT) or delete it if no updates are available.Update them from Software Update in System Preferences or run: softwareupdate --all --install --forceIf that doesn't show you any updates, run: sudo rm -rf /Library/Developer/CommandLineTools sudo xcode-select --installAlternatively, manually download them from: https://developer.apple.com/download/more/. åŽç”Ÿä½ å‘çŽ°äº†ä¸€ä¸ªç›²ç‚¹ï¼æžœç„¶ï¼Œhomebrew çœŸæ˜¯å¥½ç”¨ï¼ðŸŒ 1Your Command Line Tools (CLT) does not support macOS 11. 3. é‡æ–°å®‰è£…CommandLineTools 12$ sudo rm -rf /Library/Developer/CommandLineTools$ sudo xcode-select --install æ ¹æ®ç½‘ç»œçŽ¯å¢ƒï¼Œç­‰å¾…å®‰è£…æˆåŠŸå³å¯~ 4. å†æ¬¡æ£€æŸ¥ clang ç‰ˆæœ¬ 12345$ clang --versionApple clang version 12.0.0 (clang-1200.0.32.29)Target: x86_64-apple-darwin20.3.0Thread model: posixInstalledDir: /Library/Developer/CommandLineTools/usr/bin 5. é‡æ–°å®‰è£… SDK è¯•è¯•ï¼Ÿ 123$ pip install jqdatasdk......(çœç•¥éƒ¨åˆ†æ—¥å¿—)Successfully installed SQLAlchemy-1.3.23 jqdatasdk-1.8.8 msgpack-1.0.2 pandas-1.2.3 pymysql-1.0.2 requests-2.25.1 thriftpy2-0.4.14 Enjoy~ åŽè®° æµ‹è¯•ä¸€ä¸‹ï¼Œè¸å‡ºç¬¬ä¸€æ­¥ï¼š 1234567from jqdatasdk import *auth('xxxxxx', 'xxxxxx')# æŸ¥è¯¢ è´µå·žèŒ…å°[600519.XSHG] è¿‘5å¤©çš„äº¤æ˜“æ•°æ®df = get_price('600519.XSHG', count=5, end_date='2021-03-10', frequency='daily')print(df) æ­¤æ—¶å¾—åˆ°å¦‚ä¸‹ç»“æžœï¼š 123456789æç¤ºï¼šå½“å‰çŽ¯å¢ƒ pandas ç‰ˆæœ¬é«˜äºŽ 0.25ï¼Œget_price ä¸Ž get_fundamentals_continuously æŽ¥å£ panel å‚æ•°å°†å›ºå®šä¸º Falseæ³¨æ„ï¼š0.25 ä»¥ä¸Šç‰ˆæœ¬ pandas ä¸æ”¯æŒ panelï¼Œå¦‚ä½¿ç”¨è¯¥æ•°æ®ç»“æž„å’Œç›¸å…³å‡½æ•°è¯·æ³¨æ„ä¿®æ”¹auth success open close high low volume money2021-03-04 2095.00 2033.00 2096.00 2010.10 6508829.0 1.329730e+102021-03-05 2000.00 2060.11 2095.00 1988.00 6377920.0 1.310032e+102021-03-08 2074.96 1960.00 2085.00 1960.00 6309959.0 1.272425e+102021-03-09 1955.00 1936.99 2000.00 1900.18 8226581.0 1.610077e+102021-03-10 1977.00 1970.01 1999.87 1967.00 5117174.0 1.013691e+10 å¾—åˆ°æ•°æ®çš„åŒæ—¶ï¼Œè®°å¾—åŽ»ä¸“ä¸šçš„è‚¡ç¥¨äº¤æ˜“ç­‰ç½‘ç«™åŽ»æ ¸å¯¹æŸ¥è¯¢å‡ºæ¥çš„æ•°æ®æ˜¯å¦å‡†ç¡®å“¦~ å› ä¸ºè¿™ä¼šç›´æŽ¥å½±å“åˆ°åŽé¢é‡åŒ–çš„æŒ‡æ ‡ï¼ï¼ å‚è€ƒ https://stackoverflow.com/questions/63972113/big-sur-clang-invalid-version-error-due-to-macosx-deployment-target]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>python</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2020.Q4&å¹´åº¦æ€»ç»“]]></title>
    <url>%2F2021%2F01%2F18%2FQ4-2020-and-year-summary.html</url>
    <content type="text"><![CDATA[æˆ‘ä»¬éƒ½åœ¨ç”¨åŠ›çš„æ´»ç€ å‰è¨€ Q4 ç®—æ˜¯æˆ‘åœ¨æ¶‚é¸¦è¿ŽæŽ¥çš„ç¬¬ä¸€ä¸ªæŒ‘æˆ˜ï¼Œä»Šå¹´çš„ Q4 å¯¹æˆ‘ä¸ªäººæ¥è¯´ä¹Ÿæ˜¯æ„ä¹‰éžå‡¡çš„ã€‚ 2020ï¼Œå½“å®žã€Œé¼ ã€ä¸æ˜“ï¼›2021ï¼Œæœ›ã€Œç‰›ã€è½¬ä¹¾å¤ï¼ 1. æˆ‘çš„ Q4 Q4 æ˜¯æˆ‘åœ¨æ¶‚é¸¦æ‰€ç»åŽ†çš„ç¬¬ä¸€ä¸ªå®Œæ•´çš„ Qï¼Œæ¶‰åŠåˆ°å­£åº¦ KPI çš„è€ƒæ ¸ï¼Œæ‰€ä»¥è¯´ Q4 æ˜¯æˆ‘åœ¨æ¶‚é¸¦è¿ŽæŽ¥çš„ç¬¬ä¸€ä¸ªæŒ‘æˆ˜ã€‚ Q4 æˆ‘ä¹Ÿå®Œæˆäº†ä¸€äº›äººç”Ÿè§’è‰²çš„è½¬å˜ï¼Œæ‰€ä»¥å¯¹æˆ‘ä¸ªäººæ¥è¯´ä¹Ÿæ˜¯æ„ä¹‰éžå‡¡çš„ã€‚ 1.1. å·¥ä½œ Q4 æ˜¯ 2020 å¹´çš„å°¾å·´ï¼Œäº§å“ç»ç†è¦åšå¹´åº¦æ±‡æŠ¥ï¼Œæ”¶å°¾å·¥ä½œè¦åšçš„åˆ°ä½ã€åšçš„æ¼‚äº®ï¼Œå¼€å‘çš„å·¥ä½œé‡å¿…ç„¶å°‘ä¸äº†ã€‚Q4 çš„å·¥ä½œæ˜¯å¯Œæœ‰éš¾åº¦ä¸”æžå…·æŒ‘æˆ˜çš„ã€‚ 10-11 æœˆï¼Œæ ¹æ®åŸ‹ç‚¹æ•°æ®è¿›è¡Œç²¾å‡†è¥é”€çš„åŠŸèƒ½ã€‚11-12 æœˆï¼Œè®¾è®¡å¹¶å®žçŽ°äº†ä¸€å¥—è¥é”€è‡ªåŠ¨åŒ–æµç¨‹çš„åŠŸèƒ½ã€‚ ç›®å‰å‡å·²ä¸Šçº¿æŠ•å…¥ä½¿ç”¨ï¼Œè¥é”€å·¥å…·çš„è¦†ç›–åœºæ™¯å·²è¦†ç›–å…¬å¸ 100% çš„è¿è¥åŒå­¦ï¼ŒåŒæ—¶ä»£ç è´¨é‡æˆ‘è‡ªå·±ä¹Ÿæ˜¯æ¯”è¾ƒæ»¡æ„ï¼ŒQ4 çš„å·¥ä½œæ•´ä½“åº”è¯¥æ˜¯è¾¾æ ‡çŠ¶æ€ã€‚ 1.2. ç”Ÿæ´» å›½åº†åŠ å®Œç­ï¼Œå°±å¸¦ç€è€çˆ¸è€å¦ˆåŽ»äº†è¶Ÿè¥„é˜³ï¼Œå¸¦æˆ‘çˆ¸å¦ˆåŽ»è§å¦žçˆ¸å¦žå¦ˆã€‚æ•´ä½“è¿˜ç®—æ˜¯é¡ºåˆ©ã€‚ åŽé¢é”™è¿‡äº† 10.24ã€11.11ï¼Œç»ˆäºŽæ˜¯åœ¨ 11.22 å¸¦ç€å¦žåŽ»é¢†äº†ä¸ªè¯ï¼Œä»Žæ­¤ä»¥åŽï¼Œxkcoding ä¹Ÿæ˜¯å·²å©šäººå£«å•¦ã€‚ 11.22 è¿™ä¸ªæ—¥å­æˆ‘å’Œå¦žå…¶å®žæ˜¯è®¨è®ºè¿‡çš„ï¼Œä¹Ÿè¢«èµ‹äºˆäº†ä¸€äº›å«ä¹‰ï¼š æˆ‘çš„é˜³åŽ†ç”Ÿæ—¥æ˜¯ 11.22 æˆ‘å¸Œæœ› 1 + 1 = 2 + 2 è¿™ä¸ªç­‰å¼æˆç«‹ï¼Œå°±æ˜¯å¸Œæœ›æˆ‘ä¿©åŽé¢å¯ä»¥ç”Ÿä¿©å®å®çš„æ„æ€ å…¶ä»–çš„ä¸€äº›çºªå¿µç…§å°±ä¸æ™’å•¦ï¼Œå“ˆå“ˆå“ˆ~ 1.3. å…¶ä»– ä»Šå¹´åœ£è¯žï¼ŒåŽ»äº†ä¸€è¶Ÿé•¿æ²™å’Œå¦‚æ¢¦æŠ€æœ¯å›¢é˜Ÿçš„æœ‹å‹çŽ©äº† 3 å¤©ï¼Œå¾ˆå¹¸è¿å¯ä»¥é‡åˆ°è¿™æ ·ä¸€ç¾¤ç‰›é€¼çš„äººï¼Œäº¦å¸ˆäº¦å‹çš„å­˜åœ¨ã€‚è¿™ä¸€æ¬¡èšä¼šï¼Œå‘çŽ°è‡ªå·±ç«™çš„è§†è§’ä¸å¦‚ä»–ä»¬é«˜ï¼Œè¿˜æœ‰å¾ˆå¤šåœ°æ–¹éœ€è¦å­¦ä¹ è¿›æ­¥ï¼ŒåŒæ—¶å¤§å®¶ä¹Ÿç»™äº†ä¸€äº›å‘å±•çš„å»ºè®®ï¼Œæ”¶èŽ·é¢‡ä¸°ï¼Œæˆ‘ä»¬ 21 å¹´å†èšï¼ 2. å¹´åº¦æ€»ç»“ ä»Šå¹´ä¸€å¹´æŠ›å¼€ç–«æƒ…å¯¹æ•´ä¸ªç¤¾ä¼šçš„å½±å“ï¼Œå¯¹æˆ‘æ¥è¯´å…¶å®žæŒºéš¾çš„ï¼Œç¦»èŒçš„æ—¶æœºã€äº²äººçš„ç¦»ä¸–ã€ç»æµŽçš„åŽ‹åŠ›ã€ä¸ªäººçŠ¶æ€çš„ä¸‹æ»‘ã€èº«ä½“çš„ä¸é€‚ç­‰ç­‰ã€‚ ä½†æ˜¯ä¸€åˆ‡éƒ½åœ¨å˜å¥½ä¸æ˜¯å—ï¼Ÿ å…¥èŒæ¶‚é¸¦ã€ç‹¬ç«‹è´Ÿè´£ä¸”è®¾è®¡æŠ€æœ¯æ–¹æ¡ˆã€é¢†è¯æˆå®¶ã€ç»“äº¤ä¸€äº›è´µäººï¼Œæˆ‘çŸ¥é“æˆ‘åœ¨å˜å¾—æ›´å¥½ã€‚ ä»Šå¹´ä¸€å¹´åšæŒä¸‹æ¥æœ€æ­£ç¡®çš„äº‹æƒ…ï¼Œå°±æ˜¯å†™æ—¥è®°ã€‚å†™æ—¥è®°å¯ä»¥å¸®åŠ©æˆ‘å›žå¿†ã€å¤ç›˜ã€æ€»ç»“ï¼Œä¸è‡³äºŽå°†ä¸€äº›æˆ–ç—›è‹¦ã€æˆ–ç¾Žå¥½çš„å›žå¿†æ·¹æ²¡åœ¨æ—¶é—´çš„é•¿æ²³é‡Œã€‚æˆ‘ä¹ŸæŽ¨èå¤§å®¶å°è¯•è®°å½•è‡ªå·±çš„ç‚¹æ»´ï¼Œä¸ç®¡æ˜¯æ—¥è®°ã€ç…§ç‰‡ã€è¿˜æ˜¯ vlog â€¦ â€¦ 3. æ¥å¹´è§„åˆ’ 21 å¹´å¹´åˆï¼ˆ1.4-1.15ï¼‰å°±å·²ç»ç»åŽ†äº†ä¸€åœºã€Œæžé€Ÿã€ç¼–ç¨‹çš„ä½“éªŒï¼Œæ‰€å¹¸åŸºæœ¬åŠŸè¿˜ç®—æ‰Žå®žï¼Œåœ¨å„æ–¹é¢ï¼ˆdeadlineã€éœ€æ±‚å¤æ‚ã€äººæ‰‹ä¸å¤Ÿï¼‰çš„åŽ‹åŠ›ä¸‹ï¼Œä¾ç„¶èƒ½ä¿è´¨ä¿é‡çš„å°†åŠŸèƒ½å®Œæˆå¹¶ä¸Šçº¿ã€‚ 21 å¹´æœ‰ä¸€é¡¹å¾ˆé‡è¦çš„äº‹æƒ…ï¼Œå°±æ˜¯å©šç¤¼ï¼Œåˆæ­¥å®šçš„æ˜¯ 10.3 å·ï¼Œä¸çŸ¥é“åŽé¢ä¼šä¸ä¼šå—åˆ°ç–«æƒ…çš„å½±å“ï¼Œå¥½äº‹å¤šç£¨ã€‚ å¹´åˆç”³è¯·äº†ä¸€ä¸ªåŸŸåï¼šhttps://xkcoding.wiki è¿˜åœ¨èµ°å¤‡æ¡ˆçš„æµç¨‹ä¸­ï¼ŒåŽé¢æ‰“ç®—æ–°å»ºä¸€ä¸ªå°ç«™ï¼Œå‡†å¤‡ç ä¸‹ä¸€äº›æ–‡å­—ï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚ ä¸‹é¢å°±æ˜¯ä¸€äº› FLAG äº†ï¼š å®Œå–„ xkcoding.wiki ç«™ç‚¹ æŒç»­å®Œå–„ spring-boot-demo åšä¸€ä¸ªChat/ä¸“æ /å°å†Œçš„å°è¯• åŠžå©šç¤¼ï¼ˆå¦‚æžœç–«æƒ…å½±å“ä¸å¤§çš„è¯ï¼‰ å­¦ä¹ å¹¶å®žè·µç†è´¢çŸ¥è¯† è¯» 10 æœ¬ä¹¦ï¼ˆ3/10ï¼‰ å‚åŠ å¦‚æ¢¦æŠ€æœ¯çº¿ä¸‹èšä¼š è¿˜é’±/æ”’é’± 2021ï¼Œåšæ­£ç¡®çš„äº‹ï¼Œä¸åšå®¹æ˜“çš„äº‹ï¼]]></content>
      <categories>
        <category>æ€»ç»“å±•æœ›</category>
      </categories>
      <tags>
        <tag>æ€»ç»“å±•æœ›</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¿«é€Ÿè¿è¡Œä¸€ä¸ªä½ è‡ªå·±çš„ã€Œä¸€è¨€ã€ç¨‹åº]]></title>
    <url>%2F2020%2F11%2F02%2Fquick-run-you-own-yiyan.html</url>
    <content type="text"><![CDATA[å‰è¨€ åŠ¨æ¼«ä¹Ÿå¥½ã€å°è¯´ä¹Ÿå¥½ã€ç½‘ç»œä¹Ÿå¥½ï¼Œä¸è®ºåœ¨å“ªé‡Œï¼Œæˆ‘ä»¬æ€»ä¼šçœ‹åˆ°æœ‰é‚£ä¹ˆä¸€ä¸¤ä¸ªå¥å­èƒ½ç©¿é€ä½ çš„å¿ƒã€‚æˆ‘ä»¬æŠŠè¿™äº›å¥å­æ±‡èšèµ·æ¥ï¼Œå½¢æˆä¸€è¨€ç½‘ç»œï¼Œä»¥ä¼ é€’æ›´å¤šçš„æ„ŸåŠ¨ã€‚å¦‚æžœå¯ä»¥ï¼Œæˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬æ²¡æœ‰åœæ­¢æœåŠ¡çš„é‚£ä¸€å¤©ã€‚ ç®€å•æ¥è¯´ï¼Œä¸€è¨€æŒ‡çš„å°±æ˜¯ä¸€å¥è¯ï¼Œå¯ä»¥æ˜¯åŠ¨æ¼«ä¸­çš„å°è¯ï¼Œä¹Ÿå¯ä»¥æ˜¯ç½‘ç»œä¸Šçš„å„ç§å°æ®µå­ã€‚ æˆ–æ˜¯æ„ŸåŠ¨ï¼Œæˆ–æ˜¯å¼€å¿ƒï¼Œæœ‰æˆ–æ˜¯å•çº¯çš„å›žå¿†ã€‚æ¥åˆ°è¿™é‡Œï¼Œç•™ä¸‹ä½ æ‰€å–œæ¬¢çš„é‚£ä¸€å¥å¥è¯ï¼Œä¸Žå¤§å®¶åˆ†äº«ï¼Œè¿™å°±æ˜¯ä¸€è¨€å­˜åœ¨çš„ç›®çš„ã€‚ â€”â€”é€‰è‡ªã€Œä¸€è¨€ã€ç®€ä»‹ 1. ä¸ºä»€ä¹ˆè¦è‡ªå·±æ­å»ºï¼Ÿ ã€Œä¸€è¨€ã€å…¶å®žæä¾›äº†åœ¨çº¿çš„ api åœ°å€è®¿é—®ï¼Œå› ä¸ºã€Œä¸€è¨€ã€æ˜¯ä¸€ä¸ªå…è´¹çš„æœåŠ¡ï¼Œå› æ­¤å¿…ç„¶æ˜¯å¯¹è®¿é—®é¢‘çŽ‡å­˜åœ¨ä¸€å®šçš„é™åˆ¶ï¼ŒåŒæ—¶ä¹Ÿæœ‰å¯èƒ½å­˜åœ¨ä¸€å®šçš„ç½‘ç»œå»¶è¿Ÿï¼ˆè€ƒè™‘åœ°åŸŸ/ç½‘ç»œçŽ¯å¢ƒç­‰å½±å“å› ç´ ï¼‰ã€‚ ã€Œä¸€è¨€ã€å®˜ç½‘ï¼šhttps://hitokoto.cn/ åœ¨çº¿ API åœ°å€ï¼šhttps://v1.hitokoto.cn/ API æ–‡æ¡£ï¼šhttps://developer.hitokoto.cn/ 2. å¿«é€Ÿè¿è¡Œ æœ¬ç€å¿«é€Ÿè¿è¡Œçš„ç›®çš„ï¼ŒDocker è‡ªç„¶ä¼šæˆä¸ºæˆ‘ä»¬çš„é¦–é€‰å·¥å…·ï¼Œå¥½åœ¨ã€Œä¸€è¨€ã€æä¾›äº†å®˜æ–¹çš„ Docker é•œåƒï¼Œç®€ç›´å°±æ˜¯æ‡’äººç¥žå™¨~ é¦–å…ˆæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹å­˜æ”¾ç¨‹åºå¯åŠ¨æ—¶ç›¸å…³çš„æ–‡ä»¶ 12mkdir -p hitokotocd hitokoto æŽ¥ç€æˆ‘ä»¬åˆ›å»ºã€Œä¸€è¨€ã€çš„é…ç½®æ–‡ä»¶ config.yml 12345678910111213141516name: 'demo' # æœåŠ¡åç§°ï¼Œä¾‹å¦‚ï¼šhitokotourl: 'hitokoto_api:8000' # æœåŠ¡åœ°å€ï¼Œä¾‹å¦‚ï¼šhttps://v1.hitokoto.cnapi_name: 'demo_api_name' # æœåŠ¡è¡¨ç¤ºï¼Œä¾‹å¦‚ï¼šcd-01-demoserver: # é…ç½® HTTP æœåŠ¡çš„ä¿¡æ¯ host: hitokoto_api # ç›‘å¬çš„åœ°å€ï¼Œå› ä¸ºæˆ‘ä»¬é‡‡ç”¨ docker-compose å¯åŠ¨ï¼Œå› æ­¤è®¾ç½®ä¸º service åç§°å³å¯ port: '8000' # ç›‘å¬çš„ç«¯å£ compress_body: true # æ˜¯å¦ä½¿ç”¨ GZIP åŽ‹ç¼©redis: # é…ç½® Redis host: hitokoto_db # Redis ä¸»æœºåï¼Œå› ä¸ºæˆ‘ä»¬é‡‡ç”¨ docker-compose å¯åŠ¨ï¼Œå› æ­¤è®¾ç½®ä¸º service åç§°å³å¯ port: 6379 # Redis ç«¯å£ password: '' # Redis å¯†ç  database: 0 # Redis æ•°æ®åº“sentences_ab_switcher: # æœ¬èŠ‚æ˜¯æœåŠ¡ AB å¼‚æ­¥æ›´æ–°çš„é…ç½®ï¼Œå¦‚æžœæ‚¨ä¸çŸ¥é“è¿™ä¸ªæ˜¯ä»€ä¹ˆæ„æ€ï¼Œè¯·ä¿æŒé»˜è®¤ a: 1 # a çŠ¶æ€å¯¹åº”çš„ redis æ•°æ®åº“ b: 2 # b çŠ¶æ€å¯¹åº”çš„ redis æ•°æ®åº“remote_sentences_url: https://cdn.jsdelivr.net/gh/hitokoto-osc/sentences-bundle@latest/ # è¯­å¥åº“åœ°å€ï¼Œé€šå¸¸é»˜è®¤å³å¯ã€‚å¦‚æžœæ‚¨æƒ³ä½¿ç”¨æ‚¨è‡ªå·±æ‰“åŒ…éƒ¨ç½²çš„è¯­å¥åº“ï¼Œæ‚¨å¯ä»¥ä¿®æ”¹æ­¤é¡¹ ç„¶åŽå†åˆ›å»º docker-compose.yml ç¼–æŽ’æ–‡ä»¶ 12345678910111213version: "3.8"services: hitokoto_db: image: redis:6.0.8 hitokoto_api: image: hitokoto/api ports: - 8000:8000 depends_on: - hitokoto_db volumes: - ./config.yml:/usr/src/app/data/config.yml:ro æœ€åŽè¿è¡Œä¸€ä¸‹ docker-compose up ï¼Œå¾…å¾—è¿è¡ŒæˆåŠŸä¹‹åŽï¼Œæˆ‘ä»¬åœ¨ç»ˆç«¯æµ‹è¯•ä¸€ä¸‹æŽ¥å£ 123456789101112131415161718$ curl localhost:8000 | json_pp % Total % Received % Xferd Average Speed Time Time Time Current Dload Upload Total Spent Left Speed100 316 100 316 0 0 11285 0 --:--:-- --:--:-- --:--:-- 11285&#123; "creator_uid" : 5655, "commit_from" : "web", "creator" : "Muzi.è¨€å¯º", "hitokoto" : "æ›¾ç››å¼€è¿‡ä¸€æœµï¼Œæ›¾ä¸ä¼šè´¥è½ï¼Œæ›¾åœ¨ä»–çœ¼ä¸­æµæ·Œè¿‡æµ©ç€šçš„é“¶æ²³ã€‚", "uuid" : "d6e59b5a-6a12-4d14-ac64-fc0977de6853", "created_at" : "1585293655", "reviewer" : 4756, "from" : "ä¸ç—›", "from_who" : "å—è¯­", "type" : "h", "length" : 27, "id" : 5358&#125; æ­¤æ—¶ä¸€ä¸ªå†…ç½‘çš„ã€Œä¸€è¨€ã€ç¨‹åºå°±å·²ç»æ­å»ºæˆåŠŸäº†~ 3. å¿«é€Ÿä½¿ç”¨ å¦‚ä½•åœ¨ html æ–‡ä»¶å¿«é€Ÿé›†æˆï¼Œè¿™é‡Œè´´ä¸ªå®˜æ–¹æ–‡æ¡£ç»™å‡ºçš„ä»£ç ï¼ŒåŒæ—¶è‡ªå·±åšäº†ç‚¹æ”¹é€ ~ åˆ›å»º index.html æ–‡ä»¶ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172&lt;!DOCTYPE html&gt;&lt;html lang="en"&gt; &lt;head&gt; &lt;meta charset="UTF-8" /&gt; &lt;meta name="viewport" content="width=100, initial-scale=1.0" /&gt; &lt;title&gt;ä¸€è¨€&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;p id="hitokoto" style=" text-align: center; border: 2px dashed black; padding: 10%; font-weight: 600; " &gt; :D èŽ·å–ä¸­... &lt;/p&gt; &lt;/body&gt; &lt;script&gt; fetch("http://localhost/api") .then((response) =&gt; response.json()) .then((data) =&gt; &#123; const hitokoto = document.getElementById("hitokoto"); let from; switch (data.type) &#123; case "a": from = `ã€Š$&#123;data.from&#125;ã€‹//åŠ¨ç”»`; break; case "b": from = `ã€Š$&#123;data.from&#125;ã€‹//æ¼«ç”»`; break; case "g": from = `ã€Š$&#123;data.from&#125;ã€‹//å…¶ä»–`; break; case "h": from = `ã€Š$&#123;data.from&#125;ã€‹//å½±è§†`; break; case "i": from = `ã€Š$&#123;data.from&#125;ã€‹//è¯—è¯`; break; case "k": from = `ã€Š$&#123;data.from&#125;ã€‹//å“²å­¦`; break; case "d": from = `ã€Š$&#123;data.from&#125;ã€‹//æ–‡å­¦`; break; case "e": from = `ã€Œ$&#123;data.from&#125;ã€//åŽŸåˆ›`; break; case "c": from = `ã€Œ$&#123;data.from&#125;ã€//æ¸¸æˆ`; break; case "f": from = `ã€Œ$&#123;data.from&#125;ã€//æ¥è‡ªç½‘ç»œ`; break; case "j": from = `ã€Œ$&#123;data.from&#125;ã€//ç½‘æ˜“äº‘`; break; case "l": from = `ã€Œ$&#123;data.from&#125;ã€//æŠ–æœºçµ`; break; default: from = `ã€Œ$&#123;data.from&#125;ã€//å…¶ä»–`; break; &#125; hitokoto.innerText = `$&#123;data.hitokoto&#125; â€”â€” $&#123;from&#125;`; &#125;) .catch(console.error); &lt;/script&gt;&lt;/html&gt; æˆ‘ä»¬ä½¿ç”¨ nginx éƒ¨ç½²è¿™ä¸ªHTML æ–‡ä»¶ï¼ŒåŒæ—¶åå‘ä»£ç†ã€Œä¸€è¨€ã€çš„ API æŽ¥å£ï¼Œæ­¤æ—¶éœ€è¦åˆ›å»º nginx çš„é…ç½®æ–‡ä»¶ default.conf 123456789101112131415161718192021222324252627282930server &#123; listen 80; listen [::]:80; server_name localhost; location / &#123; root /usr/share/nginx/html; index index.html index.htm; &#125; location /api &#123; proxy_pass http://hitokoto_api:8000/; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header Host $http_host; proxy_set_header X-Forwarded-Proto $scheme; proxy_set_header X-Real-IP $remote_addr; proxy_buffering off; sendfile off; proxy_max_temp_file_size 0; client_max_body_size 10m; client_body_buffer_size 128k; proxy_connect_timeout 90; proxy_send_timeout 90; proxy_read_timeout 90; proxy_temp_file_write_size 64k; proxy_http_version 1.1; proxy_request_buffering off; &#125;&#125; åŒæ—¶å°† docker-compose.yml æ–‡ä»¶ä¿®æ”¹ä¸€ä¸‹ï¼ŒåŽ»æŽ‰ api æš´éœ²çš„8000ç«¯å£ï¼ŒåŒæ—¶å¢žåŠ nginxçš„ç¼–æŽ’é…ç½®ï¼š 1234567891011121314151617181920version: "3.8"services: hitokoto_db: image: redis:6.0.8 hitokoto_api: image: hitokoto/api depends_on: - hitokoto_db volumes: - ./config.yml:/usr/src/app/data/config.yml:ro nginx: image: nginx:1.18.0 ports: - 80:80 depends_on: - hitokoto_api volumes: - ./default.conf:/etc/nginx/conf.d/default.conf:ro - ./index.html:/usr/share/nginx/html/index.html å†æ¬¡æ‰§è¡Œ docker-compose up ï¼Œå¾…è¿è¡ŒæˆåŠŸä¹‹åŽï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥ localhost å³å¯æŸ¥çœ‹åˆ°é¡µé¢ï¼ŒåŒæ—¶å› ä¸ºåŽ»æŽ‰äº†8000 ç«¯å£çš„æš´éœ²ï¼Œä¹‹å‰çš„http://localhost:8000çš„æŽ¥å£åœ°å€å°±å˜æ›´ä¸ºäº† http://localhost/apiäº†ï¼Œæ˜¯ä¸æ˜¯å¾ˆæ–¹ä¾¿å‘¢~ ä»£ç ç¤ºä¾‹ https://github.com/xkcoding/practice_demo/tree/master/quick-run-hitokoto]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¦‚ä½•åœ¨ Spring çŽ¯å¢ƒä¸‹ä¼˜é›…çš„å®žçŽ°ç­–ç•¥æ¨¡å¼]]></title>
    <url>%2F2020%2F10%2F11%2Fhow-to-use-strategy-design-pattern-in-spring.html</url>
    <content type="text"><![CDATA[èƒŒæ™¯ æœ€è¿‘åœ¨å¿™ä¸€ä¸ªéœ€æ±‚ï¼Œå¤§è‡´å°±æ˜¯ç»™æ»¡è¶³ç‰¹å®šæ¡ä»¶çš„ç”¨æˆ·å‘è¥é”€é‚®ä»¶ï¼Œä½†æ˜¯ç”¨æˆ·çš„æ¥æºæœ‰å¾ˆå¤šæ–¹å¼ï¼šä»Ž ES æŸ¥è¯¢çš„ã€ä»Ž csv å¯¼å…¥çš„ã€ä»Ž MongoDB æŸ¥è¯¢â€¦â€¦ éœ€æ±‚å¾ˆç®€å•ï¼Œä½†æ˜¯æ€Žä¹ˆå†™çš„ä¼˜é›…ï¼Œæ–¹ä¾¿åŽç»­æ‰©å±•ï¼Œå°±å­˜åœ¨å¾ˆå¤šé—¨é“äº†ã€‚ æˆ‘ä»¬çš„é¡¹ç›®æ˜¯åŸºäºŽ Spring Boot å¼€å‘çš„ï¼Œå› æ­¤è¿™ç¯‡æ–‡ç« ä¹Ÿä¼šåŸºäºŽ Spring Boot ä½œä¸ºåŸºç¡€æ¡†æž¶ï¼Œæ•™ä½ å¦‚ä½•ä½¿ç”¨ Spring ä¾èµ–æ³¨å…¥çš„ç‰¹æ€§ï¼Œä¼˜é›…çš„å®žçŽ°ç­–ç•¥æ¨¡å¼ã€‚ 1. ç®€å•ç²—æš´ æœ€ç®€å•ç²—æš´ç›´æŽ¥çš„æ–¹å¼èŽ«è¿‡äºŽ if...elseâ€¦ äº†ï¼Œä¼ªä»£ç å¦‚ä¸‹ï¼š 1234567if(æ¥æº == ES)&#123; // TODO: ES Query&#125;else if(æ¥æº == CSV)&#123; // TODO: Read CSV File&#125;else if(æ¥æº == MongoDB)&#123; // TODO: MongoDB Query&#125; å¦‚æžœåŽé¢è¿˜éœ€è¦ä»Žå…¶ä»–å¹³å°èŽ·å–ï¼Œé‚£å°±åœ¨æŽ¥ç€æ·»åŠ  else if...ï¼Œè¿™ç§æ–¹å¼å›ºç„¶ç®€å•ç›´æŽ¥ï¼Œä½†æ˜¯å½“åŽç»­æ‰©å±•çš„æ–¹å¼è¶Šæ¥è¶Šå¤šï¼Œç›¸åº”çš„if...else...ä¹Ÿä¼šè¶Šæ¥è¶Šé•¿ï¼Œemmmâ€¦â€¦æ€Žä¹ˆè¯´å‘¢ï¼Œé»‘çŒ«ç™½çŒ«ï¼Œèƒ½æŠ“åˆ°è€é¼ çš„å°±æ˜¯å¥½çŒ«ã€‚ 2. ç­–ç•¥æ¨¡å¼ åœ¨ Spring çŽ¯å¢ƒä¸‹å®žçŽ°ç­–ç•¥æ¨¡å¼å¼‚å¸¸ç®€å•ï¼Œæ¯•ç«Ÿ Spring æä¾›çš„ä¾èµ–æ³¨å…¥ç®€ç›´å°±æ˜¯å¼€å‘åˆ©å™¨~ æ—¢ç„¶æ˜¯ç­–ç•¥æ¨¡å¼ï¼Œé‚£ä¹ˆå®šä¹‰ç­–ç•¥è‚¯å®šæ˜¯é¦–å½“å…¶å†²ï¼Œç­–ç•¥æˆ‘ä»¬ä½¿ç”¨æžšä¸¾å®žçŽ°æœ€ä½³ã€‚ 1234567891011121314public enum GroupType &#123; /** * ä»Ž ES æŸ¥è¯¢ */ ES, /** * ä»Ž MongoDB æŸ¥è¯¢ */ MONGODB, /** * ä»Ž æ–‡ä»¶ è¯»å– */ FILE&#125; ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæŽ¥å£ï¼Œç”¨äºŽæŠ½è±¡é€šç”¨çš„åŠŸèƒ½ã€‚ 123456789101112131415161718192021222324252627282930313233343536public interface IGroupSelect &#123; /** * äººç¾¤èŽ·å–æ–¹å¼ * * @return äººç¾¤é€‰æ‹©æžšä¸¾ */ GroupType type(); /** * æŸ¥è¯¢æ»¡è¶³æ¡ä»¶çš„ç”¨æˆ· * * @param groupQuery æŸ¥è¯¢æ¡ä»¶ * @return æ»¡è¶³æ¡ä»¶çš„ç”¨æˆ· */ default List&lt;GroupUser&gt; queryUser(GroupQuery groupQuery) &#123; checkQueryCondition(groupQuery); return doQuery(groupQuery); &#125; /** * äº‹å‰æ ¡éªŒæŸ¥è¯¢æ¡ä»¶ * * @param groupQuery æŸ¥è¯¢æ¡ä»¶ * @throws IllegalArgumentException å‚æ•°å¼‚å¸¸ */ void checkQueryCondition(GroupQuery groupQuery) throws IllegalArgumentException; /** * çœŸæ­£çš„æŸ¥è¯¢æ–¹æ³• * * @param groupQuery æŸ¥è¯¢æ¡ä»¶ * @return æ»¡è¶³æ¡ä»¶çš„ç”¨æˆ· */ List&lt;GroupUser&gt; doQuery(GroupQuery groupQuery);&#125; è¿™ä¸€æ­¥ï¼Œå°ä¼™ä¼´ä»¬æœ‰æ²¡æœ‰å‘çŽ°é‡Œé¢ä¹ŸåŒ…å«äº†æ¨¡æ¿æ–¹æ³•æ¨¡å¼å‘¢ï¼Ÿ ç„¶åŽå°±æ˜¯ä¸åŒç­–ç•¥çš„å…·ä½“å®žçŽ°äº†ã€‚ ES ç­–ç•¥ 12345678910111213141516171819202122232425262728293031323334353637383940414243@Slf4j@Servicepublic class EsGroupSelect implements IGroupSelect &#123; /** * äººç¾¤èŽ·å–æ–¹å¼ * * @return äººç¾¤é€‰æ‹©æžšä¸¾ */ @Override public GroupType type() &#123; return GroupType.ES; &#125; /** * äº‹å‰æ ¡éªŒæŸ¥è¯¢æ¡ä»¶ * * @param groupQuery æŸ¥è¯¢æ¡ä»¶ * @throws IllegalArgumentException å‚æ•°å¼‚å¸¸ */ @Override public void checkQueryCondition(GroupQuery groupQuery) throws IllegalArgumentException &#123; log.info("groupQuery = &#123;&#125;", groupQuery); &#125; /** * æŸ¥è¯¢æ»¡è¶³æ¡ä»¶çš„ç”¨æˆ· * * @param groupQuery æŸ¥è¯¢æ¡ä»¶ * @return æ»¡è¶³æ¡ä»¶çš„ç”¨æˆ· */ @Override public List&lt;GroupUser&gt; doQuery(GroupQuery groupQuery) &#123; List&lt;GroupUser&gt; result = new ArrayList&lt;&gt;(); // TODO: // 1. å¤æ‚çš„ ES æŸ¥è¯¢é€»è¾‘ // 2. æ ¹æ®æ¡ä»¶ç­›é€‰æ»¡è¶³æ¡ä»¶çš„ç”¨æˆ·æ•°æ® for (int i = 1; i &lt;= 15; i++) &#123; result.add(GroupUser.of("ESç”¨æˆ·" + i, i + "@es.com")); &#125; return result; &#125;&#125; æ–‡ä»¶ç­–ç•¥ 123456789101112131415161718192021222324252627282930313233343536373839404142@Slf4j@Servicepublic class FileGroupSelect implements IGroupSelect &#123; /** * äººç¾¤èŽ·å–æ–¹å¼ * * @return äººç¾¤é€‰æ‹©æžšä¸¾ */ @Override public GroupType type() &#123; return GroupType.FILE; &#125; /** * äº‹å‰æ ¡éªŒæŸ¥è¯¢æ¡ä»¶ * * @param groupQuery æŸ¥è¯¢æ¡ä»¶ * @throws IllegalArgumentException å‚æ•°å¼‚å¸¸ */ @Override public void checkQueryCondition(GroupQuery groupQuery) throws IllegalArgumentException &#123; log.info("groupQuery = &#123;&#125;", groupQuery); &#125; /** * æŸ¥è¯¢æ»¡è¶³æ¡ä»¶çš„ç”¨æˆ· * * @param groupQuery æŸ¥è¯¢æ¡ä»¶ * @return æ»¡è¶³æ¡ä»¶çš„ç”¨æˆ· */ @Override public List&lt;GroupUser&gt; doQuery(GroupQuery groupQuery) &#123; List&lt;GroupUser&gt; result = new ArrayList&lt;&gt;(); // TODO: // 1. å¤æ‚çš„è§£æžã€è¯»æ–‡ä»¶ // 2. æ ¹æ®æ¡ä»¶ç­›é€‰æ»¡è¶³æ¡ä»¶çš„ç”¨æˆ·æ•°æ® for (int i = 1; i &lt;= 3; i++) &#123; result.add(GroupUser.of("æ–‡ä»¶è¯»å–ç”¨æˆ·" + i, i + "@file.com")); &#125; return result; &#125;&#125; MongoDB ç­–ç•¥ 123456789101112131415161718192021222324252627282930313233343536373839404142@Slf4j@Servicepublic class MongoGroupSelect implements IGroupSelect &#123; /** * äººç¾¤èŽ·å–æ–¹å¼ * * @return äººç¾¤é€‰æ‹©æžšä¸¾ */ @Override public GroupType type() &#123; return GroupType.MONGODB; &#125; /** * äº‹å‰æ ¡éªŒæŸ¥è¯¢æ¡ä»¶ * * @param groupQuery æŸ¥è¯¢æ¡ä»¶ * @throws IllegalArgumentException å‚æ•°å¼‚å¸¸ */ @Override public void checkQueryCondition(GroupQuery groupQuery) throws IllegalArgumentException &#123; log.info("groupQuery = &#123;&#125;", groupQuery); &#125; /** * æŸ¥è¯¢æ»¡è¶³æ¡ä»¶çš„ç”¨æˆ· * * @param groupQuery æŸ¥è¯¢æ¡ä»¶ * @return æ»¡è¶³æ¡ä»¶çš„ç”¨æˆ· */ @Override public List&lt;GroupUser&gt; doQuery(GroupQuery groupQuery) &#123; List&lt;GroupUser&gt; result = new ArrayList&lt;&gt;(); // TODO: // 1. å¤æ‚çš„ MongoDB æŸ¥è¯¢é€»è¾‘ // 2. æ ¹æ®æ¡ä»¶ç­›é€‰æ»¡è¶³æ¡ä»¶çš„ç”¨æˆ·æ•°æ® for (int i = 1; i &lt;= 7; i++) &#123; result.add(GroupUser.of("MongoDBç”¨æˆ·" + i, i + "@mongo.com")); &#125; return result; &#125;&#125; çŽ°åœ¨åˆ°äº†æœ€åŽä¸€æ­¥ï¼Œå°±æ˜¯å¦‚ä½•é€šè¿‡ Spring ä¼˜é›…çš„å®žçŽ°ç­–ç•¥æ¨¡å¼çš„é€‰æ‹©å‘¢ï¼Ÿæ•²é»‘æ¿ï¼Œè€ƒè¯•å¿…è€ƒï¼ æˆ‘ä»¬é€šè¿‡å®šä¹‰ä¸€ä¸ªå·¥åŽ‚ç±»ï¼Œç„¶åŽä½¿ç”¨ Spring çš„ä¾èµ–æ³¨å…¥ç‰¹æ€§ï¼Œå¯ä»¥æ³¨å…¥ä¸€ä¸ªæŽ¥å£çš„å¤šä¸ªå®žçŽ°ï¼Œè¿™é‡Œé‡‡ç”¨ List&lt;IGroupSelect&gt; çš„å½¢å¼æ³¨å…¥ï¼ŒSpring ä¹Ÿæ”¯æŒé€šè¿‡ Map&lt;String,IGroupSelect&gt; çš„å½¢å¼æ³¨å…¥ï¼Œå¦‚æžœä½¿ç”¨ Map æ³¨å…¥ï¼Œé‚£ä¹ˆ key å°±æ˜¯ç±»åï¼Œå°ä¼™ä¼´ä»¬è‡ªå·±ä¹Ÿå¯ä»¥æµ‹è¯•ä¸€ä¸‹~ 12345678910111213141516@Servicepublic class GroupSelectFactory &#123; @Autowired private List&lt;IGroupSelect&gt; groupSelectList; /** * æ ¹æ®äººç¾¤ç±»åž‹é€‰æ‹©å…·ä½“çš„å®žçŽ°ç±» * * @param type äººç¾¤ç±»åž‹ * @return äººç¾¤é€‰æ‹©å…·ä½“å®žçŽ°ç±» */ public IGroupSelect getGroupSelect(GroupType type) &#123; Optional&lt;IGroupSelect&gt; groupSelectOptional = groupSelectList.stream().filter(t -&gt; t.type() == type).findAny(); return groupSelectOptional.orElseThrow(() -&gt; new IllegalArgumentException("æš‚ä¸æ”¯æŒè¯¥äººç¾¤æ–¹å¼")); &#125;&#125; æœ€åŽå†™ä¸ªå®šæ—¶ä»»åŠ¡æµ‹è¯•ä¸€ä¸‹å§ã€‚ 1234567891011121314151617181920212223242526272829@Autowiredprivate GroupSelectFactory groupSelectFactory;/** * æ¨¡æ‹Ÿå®šæ—¶å‘é€è¥é”€é‚®ä»¶ */@Scheduled(cron = "0/10 * * * * ?")public void sendEmailTask() &#123; List&lt;SendEmailTask&gt; taskList = new ArrayList&lt;&gt;(); for (GroupType groupType : GroupType.values()) &#123; GroupQuery groupQuery = new GroupQuery("è™šå¤´å·´è„‘çš„ " + groupType.name() + " æŸ¥è¯¢æ¡ä»¶"); taskList.add(SendEmailTask.of(groupType, groupQuery)); &#125; taskList.forEach(task -&gt; &#123; List&lt;GroupUser&gt; groupUsers = groupSelectFactory.getGroupSelect(task.getType()).queryUser(task.getQuery()); log.info("groupUsers = &#123;&#125;", groupUsers); &#125;);&#125;@Data@NoArgsConstructor@AllArgsConstructor(staticName = "of")static class SendEmailTask implements Serializable &#123; private static final long serialVersionUID = -3461263089669779193L; private GroupType type; private GroupQuery query;&#125; è§‚å¯ŸæŽ§åˆ¶å°ï¼Œçœ‹çœ‹æ—¥å¿—è¾“å‡ºå§~ æ€»ç»“ æœ¬æ–‡ä½¿ç”¨ç­–ç•¥æ¨¡å¼å®žçŽ°ä¸åŒäººç¾¤çš„æŸ¥è¯¢ï¼ŒåŽç»­å¦‚æžœè¦å¢žåŠ çŸ­ä¿¡ã€å¾®ä¿¡ã€é’‰é’‰çš„æ¶ˆæ¯å‘é€ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥ç”¨ç­–ç•¥æ¨¡å¼å®žçŽ°å‘¢ï¼Ÿ ä½¿ç”¨ Spring çš„ä¾èµ–æ³¨å…¥ç‰¹æ€§ï¼Œå¯ä»¥æ³¨å…¥ä¸€ä¸ªæŽ¥å£çš„å¤šä¸ªå®žçŽ°ï¼Œå¾ˆå®¹æ˜“å°±å®žçŽ°äº†ç­–ç•¥æ¨¡å¼çš„é€‰æ‹©ï¼Œè¿™æ ·åŽç»­æ·»åŠ ä¸€ç§ç­–ç•¥çš„æ—¶å€™ï¼Œå®Œå…¨ä¸éœ€è¦æ”¹åŠ¨ä¸»è¦é€»è¾‘ï¼Œåªéœ€æ·»åŠ å…·ä½“å®žçŽ°å³å¯ã€‚ ç»†å¿ƒçš„å°ä¼™ä¼´å¯ä»¥å‘çŽ°ï¼Œæœ¬æ–‡è™½ç„¶æ˜¯è®²ç­–ç•¥æ¨¡å¼ï¼Œå…¶å®žé‡Œé¢è¿˜åŒ…å«äº†æ¨¡æ¿æ–¹æ³•ã€å·¥åŽ‚æ¨¡å¼ï¼Œå¤šç§è®¾è®¡æ¨¡å¼çš„ååŒä½œæˆ˜ï¼Œé£Ÿç”¨å‘³é“æ›´ä½³å“Ÿ~ é…å¥—ä»£ç ï¼šhttps://github.com/xkcoding/practice_demo/tree/master/strategy-design-pattern-in-spring]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>spring boot</category>
      </categories>
      <tags>
        <tag>spring boot</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2020.Q2&Q3æ€»ç»“]]></title>
    <url>%2F2020%2F09%2F30%2FQ2-Q3-2020.html</url>
    <content type="text"><![CDATA[ä»Šå¤©å›½åº†èŠ‚ï¼Œé‚£å°±ç¥å¤§å®¶ä¸åŠ ç­çš„ä¸è¦å µè½¦ï¼ŒåŠ ç­çš„ä¸è¦å‡ºç”Ÿäº§äº‹æ•…ã€‚ðŸ˜ è½¬çœ¼ï¼Œä»Šå¹´ä»…å‰©ä¸‹ç™¾å¤©ä¸åˆ°å•¦ã€‚é«˜èƒ½é¢„è­¦ï¼Œçµé­‚å‘é—®çŽ¯èŠ‚ã€‚å„ä½ä»Šå¹´çš„è®¡åˆ’å®Œæˆçš„å’‹æ ·ï¼Ÿæ˜¯è¶…æœŸå®Œæˆè¿˜æ˜¯åˆä¸€æ¬¡å·å·æ‘¸æ‘¸æ”¹æˆäº†æ˜Žå¹´è®¡åˆ’ï¼Ÿè¡ŒåŠ¨èµ·æ¥ï¼Œä»Šå¹´è¯´ä¸å‡†è¿˜æœ‰æœºä¼šçš„ã€‚ 1. æ€»ç»“ æœ¬æ‰“ç®—æ˜¯ Q2ã€Q3 åˆ†åˆ«åšæ€»ç»“çš„ï¼Œæ— å¥ˆ Q2 å®žåœ¨æ˜¯ç³Ÿå¿ƒäº‹éƒ½æ…åœ¨ä¸€å—äº†ï¼ŒQ2 ä¹Ÿå°±é¡ºç†æˆç« çš„æ‹–å»¶åˆ° Q3 æ€»ç»“é‡Œã€‚ æˆ‘çš„ Q2ã€Q3 æ€»ç»“ä¸‹æ¥å°±æ˜¯ä¸€å¥è¯ï¼šè¢«ç³Ÿå¿ƒäº‹åŒ…è£¹çš„ Q2ã€Q3ï¼Œä½†ä»æœ‰ä¸€ä¸ç¾Žå¥½ã€‚ å¤§éƒ¨åˆ†ä¸é¡ºå¿ƒçš„äº‹æƒ…é›†ä¸­åœ¨ Q2ï¼Œå¤–å…¬ç—…æƒ…åŠ é‡å¯¼è‡´é¢è¯•æµç¨‹å»¶æœŸã€é•¿æ—¶é—´çš„å¾…ä¸šä¹Ÿå¸¦æ¥äº†ä¸€äº›è´Ÿé¢æƒ…ç»ªã€‚7 æœˆåˆä¼ æ¥å¤–å…¬ç—…æƒ…å¥½è½¬çš„æ¶ˆæ¯ï¼Œæ²¡æƒ³åˆ° 7 æœˆåº•ï¼Œå¤–å…¬è¿˜æ˜¯èµ°äº†ã€‚ä¸–äº‹æ— å¸¸ï¼Œè°ƒæ•´æƒ…ç»ªä¹‹åŽï¼Œä¹Ÿç»§ç»­ä¹‹å‰çš„ä¸€äº›é¢è¯•æµç¨‹ã€‚ é¢äº†ä¸€äº›å…¬å¸ï¼ŒåŒ…æ‹¬ï¼šæœ‰èµž(æœ‰èµžäº‘)ã€æ¶‚é¸¦(äº‘ç«¯å¼€å‘)ã€é…·å®¶ä¹(æˆ¿ä¼ä¸šåŠ¡)ã€å¤©çŒ«ç²¾çµ(ä¸­å°äº‹ä¸šéƒ¨)ã€å¤©çŒ«æ–°é›¶å”®(å›½é™…åŒ–ä¸­å°)ï¼Œå…¶ä¸­å¤§åŽä½“éªŒæžå·®(è¢«æ”¾é¸½å­)ã€‚å‡ ä¸ª offer æŠ‰æ‹©ä¸‹ï¼Œæœ€ç»ˆé€‰æ‹©äº†æ¶‚é¸¦ï¼Œè¿™é‡Œæ„Ÿè°¢è€åŒå­¦ @hank çš„å†…æŽ¨æ”¯æŒ~ ä»Žå…¥èŒåˆ°çŽ°åœ¨ï¼Œä¹Ÿå·²ç»å¾…äº† 1 ä¸ªæœˆæ—¶é—´ï¼Œä¹Ÿè¯´ä¸‹è‡ªå·±çš„æ„Ÿå—ã€‚ æ°›å›´ï¼šæŠ€æœ¯æ°›å›´+å›¢é˜Ÿæ°›å›´ï¼ŒçœŸçš„å¾ˆé‡è¦ã€‚ ç»„å‘˜ï¼šteam é‡Œçš„å°ä¼™ä¼´äººéƒ½éžå¸¸ niceï¼Œäº¤æµèµ·æ¥ä¸è´¹åŠ²ã€‚ è§„èŒƒï¼šå„ç§æµç¨‹è§„èŒƒåŒ–ï¼Œæžå¤§æå‡å¼€å‘ä½“éªŒã€‚ ä»Žç¦»èŒ(2020.03.19)åˆ°å…¥èŒ(2020.08.17)ï¼Œå·® 2 å¤©æ»¡ 5 ä¸ªæœˆï¼Œä¸­é€”ä¸ä¹å¾ˆå¤šæœ‹å‹çš„é¼“åŠ±ã€å¸®åŠ©ï¼Œæ„Ÿè°¢@äºšä¸œã€å›¾è¿¹å°ä¼™ä¼´@ä¸œå“¥/@æ˜Žå“¥ã€æŠ˜è…¾ç¾¤ç¾¤ä¸» @è‹æ´‹ åœ¨æˆ‘è¿·èŒ«æ—¶æœŸçš„è§£æƒ‘ï¼Œæ„Ÿè°¢å¦‚æ¢¦å¤§ä½¬ä»¬ @æ˜¥å“¥/@å†·å†· å¯¹æˆ‘å¸®åŠ©ï¼Œæ„Ÿè°¢å‰ TL @Rinkã€å‰ HR@ä»Žç‡•çš„å¸®åŠ©ï¼Œæ„Ÿè°¢ä¸€ç¥¨å¤§å­¦åŒå­¦ä»¥åŠä¸€äº›å› ä»£ç ç»“ç¼˜çš„æœ‹å‹(@å²å­¦æ£®/@Harry)çš„é¼“åŠ±ï¼ŒçœŸçš„ååˆ†æ„Ÿè°¢ï¼ 2. å±•æœ› Q4 è¿Žæ¥çš„ç¬¬ä¸€ä¸ªä»»åŠ¡ï¼Œå°±æ˜¯å›½åº†å¸¦æˆ‘çˆ¸å¦ˆåŽ»è§è§æˆ‘å®¶å¦žçš„çˆ¸å¦ˆï¼Œå¸Œæœ›ä¸€åˆ‡é¡ºåˆ©~ å¸Œæœ›åœ¨æ¶‚é¸¦çš„å·¥ä½œä¸€åˆ‡é¡ºåˆ©ï¼ŒåŠªåŠ›å·¥ä½œï¼Œè¿˜æ¸…ä¸ŠåŠå¹´å€ºåŠ¡~ ä¸¢å¤±äº†ä¸€æ®µæ—¶é—´çš„ä¸œè¥¿ï¼Œéœ€è¦é‡æ–°æ‹¾èµ·æ¥ã€‚ 3. æ„Ÿæƒ³ è‡ªå¾‹çš„äººä¸ä¸€å®šä¼˜ç§€,ä½†ä¼˜ç§€çš„äººä¸€å®šè‡ªå¾‹ã€‚ å°†è¿‘åŠå¹´çš„å¾…ä¸šçœŸçš„å¾ˆéœ€è¦å‹‡æ°”ï¼Œç‰¹åˆ«éœ€è¦æ„Ÿè°¢çˆ¶æ¯çš„ç†è§£ï¼Œæ„Ÿè°¢æˆ‘å®¶å¦žçš„åŒ…å®¹ï¼Œæ„Ÿè°¢æœ‹å‹ä»¬çš„é¼“åŠ±ã€‚ PSï¼šå¤§å®¶å¦‚æžœæœ‰é¢ç»éœ€è¦ï¼Œæ¬¢è¿Žç§æˆ‘~ å¦‚æžœæœ‰æ¶‚é¸¦å†…æŽ¨éœ€è¦ï¼Œæ¬¢è¿Žç§æˆ‘~]]></content>
      <categories>
        <category>æ€»ç»“å±•æœ›</category>
      </categories>
      <tags>
        <tag>æ€»ç»“å±•æœ›</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å‘¨æœ«çš„ä¸åŠ¡æ­£ä¸š~]]></title>
    <url>%2F2020%2F09%2F13%2Fwhat-i-like-to-do-0.html</url>
    <content type="text"><![CDATA[å‘¨æœ«çš„ä¸åŠ¡æ­£ä¸š~ èŠ±äº†ä¸€ä¸ªåŠå°æ—¶æŠ˜çš„ç‡•å­]]></content>
      <categories>
        <category>å¿™é‡Œå·é—²</category>
      </categories>
      <tags>
        <tag>å¿™é‡Œå·é—²</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[justauth-spring-boot-starter 1.3.4.beta å‘å¸ƒ]]></title>
    <url>%2F2020%2F08%2F31%2Fjustauth-spring-boot-starter-publish-1.3.4.beta.html</url>
    <content type="text"><![CDATA[å‰è¨€ å¥½ä¹…ä¸è§ï¼Œé¸½äº†é‚£ä¹ˆä¹…ï¼Œæˆ‘å›žæ¥äº†ã€‚Q2&amp;Q3 å‘ç”Ÿäº†æŒºå¤šäº‹æƒ…ï¼Œç­‰åŽé¢æ€»ç»“çš„æ—¶å€™å†è¯¦ç»†è¯´è¯´ã€‚ä»Šå¤©ç»™å¤§å®¶å¸¦æ¥çš„æ˜¯ justauth-spring-boot-starter çš„ 1.3.4.beta æ–°ç‰ˆæœ¬çš„ä¸€äº›æ–°ç‰¹æ€§ã€‚åºŸè¯ä¸å¤šè¯´ï¼Œèµ°èµ· ~ 1. ç‰ˆæœ¬ç‰¹æ€§ æœ¬æ¬¡ç‰ˆæœ¬å‘å¸ƒï¼Œä½¿ç”¨çš„ JustAuth çš„ç‰ˆæœ¬æ˜¯ 1.15.7-beta.3 ç‰ˆæœ¬ï¼Œè¯¥ç‰ˆæœ¬ä¸»è¦æ˜¯å®Œå–„äº† 2 ä¸ªèƒ½åŠ›ï¼š ä½¿ç”¨æ–°ç‰ˆæœ¬çš„ simple-http ï¼Œæ”¯æŒè‡ªå®šä¹‰é…ç½®ä»£ç†çš„åŠŸèƒ½ï¼Œæ–¹ä¾¿æœ‰ç‰¹æ®Šéœ€æ±‚çš„å°ä¼™ä¼´æµ‹è¯• Google/Facebook ç­‰å›½å¤–çš„ä¸€äº›ç¬¬ä¸‰æ–¹ç™»å½•å¹³å° æ”¯æŒè‡ªå®šä¹‰ scopes å‚æ•°ï¼Œæ–¹ä¾¿å°ä¼™ä¼´ä»¬èŽ·å–æ›´å¤šçš„ç”¨æˆ·æƒé™ åŒæ—¶å‡çº§ hutool-core ç‰ˆæœ¬ï¼š5.4.0ï¼Œä¿®å¤ JSONUtil.toJsonStr(obj) æŠ¥é”™çš„é—®é¢˜ï¼Œå‚è§ ISSUE#8 2. å¦‚ä½•ä½¿ç”¨ 2.1. å¼•ç”¨ä¾èµ– 12345&lt;dependency&gt; &lt;groupId&gt;com.xkcoding.justauth&lt;/groupId&gt; &lt;artifactId&gt;justauth-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;1.3.4.beta&lt;/version&gt;&lt;/dependency&gt; 2.2. å¦‚ä½•é…ç½®è‡ªå®šä¹‰ http proxy ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå¢žåŠ å¦‚ä¸‹é…ç½®ï¼š 12345678justauth: http-config: timeout: 30000 proxy: GOOGLE: type: HTTP hostname: 127.0.0.1 port: 10080 æ³¨ï¼šå½“é¡¹ç›®ä¸­ä½¿ç”¨äº†è‡ªå®šä¹‰çš„ç¬¬ä¸‰æ–¹ç™»å½•ï¼Œå¹¶ä¸”éœ€è¦ä½¿ç”¨ä»£ç†æ—¶ï¼Œä¹Ÿè¦åœ¨ http-config èŠ‚ç‚¹ä¸‹æ·»åŠ ç›¸å…³é…ç½®ï¼Œæ ¼å¼å‚è€ƒä¸Šé¢ç¤ºä¾‹ 2.3. è‡ªå®šä¹‰ Scopes ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå¢žåŠ å¦‚ä¸‹é…ç½®ï¼š 1234567891011justauth: enabled: true type: QQ: client-id: 10**********6 client-secret: 1f7d08**********5b7**********29e redirect-uri: http://oauth.xkcoding.com/demo/oauth/qq/callback union-id: false scopes: - get_user_info - xxxx æ³¨ï¼šä½ å¯ä»¥å‰å¾€ me.zhyd.oauth.enums.scope åŒ…ä¸‹æŸ¥çœ‹å„ä¸ªæ¸ é“æ‰€æ”¯æŒçš„ scopesï¼Œå½“ç„¶ä½ å¯ä»¥ä¸é…ç½®è¯¥é¡¹ï¼ŒJustAuth ä¼šé»˜è®¤æ·»åŠ ä¸Šä¸€äº›åŸºç¡€ scope æœ€åŽï¼Œå…³äºŽæ›´å¤šçš„ JustAuth å…¶ä»–çš„åŸºç¡€ç”¨æ³•ï¼Œæ¬¢è¿Žå‰å¾€ https://justauth.wiki/ æŸ¥é˜…]]></content>
      <categories>
        <category>å¼€æº</category>
        <category>JustAuth</category>
      </categories>
      <tags>
        <tag>å¼€æº</tag>
        <tag>JustAuth</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ‚¼å¿µå¤–å…¬]]></title>
    <url>%2F2020%2F07%2F28%2Fmourning-grandpa.html</url>
    <content type="text"><![CDATA[ç»ˆç©¶æ˜¯æ²¡èƒ½ç†¬è¿‡è¿™ä¸ªåºšå­å¹´ã€‚ ä»Šå¹´ä»¥æ¥ï¼Œå¤–å…¬å°±å·²ç»èººåœ¨åºŠä¸Šèµ·ä¸æ¥äº†ï¼Œä¸Šå‘¨å¼€å§‹è¿›ä¸äº†é£Ÿï¼Œä½é™¢æ²»ç–—ã€‚ä»Šå¤©æŽ¥åˆ°çˆ¸çˆ¸çš„ç”µè¯ï¼Œå¤–å…¬æ°¸è¿œåœ°ç¦»å¼€æˆ‘ä»¬äº†ã€‚ æˆ‘ç®—æ˜¯ä»Žå°è¢«å¤–å…¬å¤–å©†å’Œè¡¨å§ç–¼å¤§çš„å­©å­ï¼Œä»–ä»¬ä¸€ç›´é™ªä¼´ç€æˆ‘çš„æˆé•¿ï¼Œç›´åˆ°æˆ‘è¿œèµ´æ¹–åŒ—æ±‚å­¦ï¼Œæ‰å¼€å§‹å˜å¾—èšå°‘ç¦»å¤šã€‚ä»Žæœ‰è®°å¿†å¼€å§‹ï¼Œå¤–å…¬å°±æ˜¯ä¸ªä¸çˆ±è¯´è¯çš„äººï¼Œèƒ½è®©å¤–å…¬è¯´å¾ˆå¤šè¯çš„åœºæ™¯ï¼Œå¤§æ¦‚ä¹Ÿæ˜¯åœ¨è¡¨å¼Ÿå’Œæˆ‘æ‰“é—¹çš„æ—¶å€™çš„ä¸€äº›è®­æ–¥ã€‚å¤–å…¬è¿™è¾ˆå­æ˜¯ä¸ªåŠ³ç¢Œå‘½ï¼Œæ˜¯ä¸€ä¸ªé—²ä¸ä½çš„äººï¼Œå–œæ¬¢å¬æˆï¼Œå–œæ¬¢ç”°åœ°ï¼Œä½†å‡¡è¿˜åŠ¨çš„äº†å°±è¦ä¸‹åœ°å¹²æ´»ï¼Œå•¥éƒ½ç§ä¸€ç‚¹ï¼Œè¿˜å•¥éƒ½ç§çš„å¥½ã€‚å¤–å…¬å–œæ¬¢èŠ±è‰ï¼Œå®¶é‡Œçš„é™¢å­ã€äºŒæ¥¼çš„é˜³å°ï¼Œå…»äº†å¾ˆå¤šç›†æ ½ï¼Œå³ä½¿åˆ°çŽ°åœ¨å›žæƒ³èµ·æ¥ï¼Œæˆ‘ä¾ç„¶è¿˜æ˜¯ç»å¤§éƒ¨åˆ†éƒ½ä¸è®¤è¯†ã€‚ å…¶å®žæˆ‘æ˜¯ä¸ªæŒºæ€•å¤–å…¬çš„äººï¼Œå¤–å…¬æ˜¯ä¸ªä¸è‹Ÿè¨€ç¬‘çš„äººï¼Œè™½ç„¶å¤–å…¬ç˜¦ç˜¦çš„è¿˜æœ‰äº›ä½å»ç€èƒŒï¼Œä½†æ˜¯è¿˜æ˜¯æžå…·å¨ä¸¥ã€‚è®°å¾—19å¹´ç¬¬ä¸€æ¬¡å¸¦å¦žåŽ»è§å¤–å…¬å¤–å©†çš„æ—¶å€™ï¼Œé‚£æ—¶å€™å¤–å…¬è¿˜ä¸‹å¾—äº†åºŠï¼Œä½†æ˜¯å¾—é æ”¯æž¶æ”¯æ’‘ï¼Œæˆ‘æŒºæ€•ä»–ä»¬ä¼šå› ä¸ºå¤–åœ°å¥³å­©å„¿çš„èº«ä»½å¯¹å¦žæœ‰åè§ï¼Œæ²¡æƒ³åˆ°ä»–ä»¬å¾ˆå¼€å¿ƒï¼Œé‚£æ˜¯æˆ‘å°‘æœ‰çš„å‡ æ¬¡è§åˆ°å¤–å…¬ç¬‘çš„åœºæ™¯ã€‚ æŽ¥åˆ°æ¶ˆæ¯çš„æ—¶å€™ï¼Œè„‘æµ·æ˜¯ä¸€ç‰‡ç©ºç™½çš„ï¼Œè™½ç„¶æ—©å·²åšå¥½äº†å‡†å¤‡ï¼Œä½†æ˜¯å½“ä¸å¹¸åˆ°æ¥çš„æ—¶å€™ï¼Œè‡ªå·±è¿˜æ˜¯æœ‰äº›æ‰›ä¸ä½ã€‚å¤–å­™æœªèƒ½å¦‚æ„¿å°½å­ï¼Œå­æ¬²å…»è€Œäº²ä¸å¾…çš„ç—›æ¥šèŽ«è¿‡å¦‚æ­¤ã€‚æ„¿æ‚¨åœ¨å¦ä¸€ä¸ªä¸–ç•Œé‡Œèƒ½å¤Ÿå¥½å¥½ä¼‘æ¯ï¼Œæ„¿é‚£å„¿æœ‰æ‚¨å–œæ¬¢çš„èŠ±èŠ±è‰è‰ï¼Œæ„¿é‚£å„¿æœ‰æ‚¨çˆ±å¬çš„æˆï¼Œæ„¿æ‚¨ä¸å†æœ‰ç—…ç—›çš„æŠ˜ç£¨ã€‚ è°¨ä»¥æ­¤æ–‡æ‚¼å¿µåŽ»ä¸–çš„å¤–å…¬ æ¨æ˜¥ä»™ æ‚¨çš„å¤–å­™ æ‰¬å‡¯]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>éšç¬”</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[spring-boot-demo é…å¥—è§†é¢‘æ•™ç¨‹]]></title>
    <url>%2F2020%2F06%2F28%2Fvideo-tutorial-of-spring-boot-demo.html</url>
    <content type="text"><![CDATA[spring-boot-demo é¡¹ç›®åœ°å€ï¼šhttps://github.com/xkcoding/spring-boot-demo spring boot demo æ˜¯ä¸€ä¸ªç”¨æ¥æ·±åº¦å­¦ä¹ å¹¶å®žæˆ˜ spring boot çš„é¡¹ç›®ï¼Œç›®å‰æ€»å…±åŒ…å« 66 ä¸ªé›†æˆdemoï¼Œå·²ç»å®Œæˆ 54 ä¸ªã€‚ çŽ°åœ¨ï¼Œé…å¥—è§†é¢‘æ­£å¼æ¥è¢­~ é…å¥—è§†é¢‘ä»‹ç» è®²å¸ˆï¼šå†·å†· ä»‹ç»ï¼šå›½å†…çŸ¥åå¼€æºé¡¹ç›® pig ä½œè€…ï¼ŒSpring Boot çš„ committerï¼ŒSpring Security Oauth çš„ committerï¼ŒSpring Cloud Alibaba çš„ committerï¼ŒSpring Cloud Gateway çš„ committerï¼ŒNacosã€Sentinel çš„ committerï¼ŒFeign çš„ commiter è§†é¢‘åœ°å€ï¼šhttps://www.bilibili.com/video/BV1Nf4y117W6 è§†é¢‘ç®€ä»‹ï¼šæœ¬ç³»åˆ—è§†é¢‘è¯¾ç¨‹å…¨éƒ¨å¼€æºå…è´¹ï¼Œè¯¾ç¨‹å†…å®¹ä¿æŒå’Œ spring-boot-demo å®Œå…¨ä¸€è‡´ï¼Œæ‰€æœ‰ Spring Boot ç‰ˆæœ¬é‡‡ç”¨å®˜ç½‘æœ€æ–°ç‰ˆæœ¬ï¼Œæ‰€æœ‰ä¸­é—´ä»¶éƒ¨ç½²å‡é‡‡ç”¨ Docker å®‰è£…å½¢å¼ã€‚ æ›´æ–°è®¡åˆ’ï¼šé¢„æœŸä¸€ä¸ªæœˆå†…å®Œæˆ æœ€åŽ å“Žå“Ÿï¼Œè‡ªå·±æ‹–æ›´äº†è¿™ä¹ˆä¹…ï¼Œååˆ†æŠ±æ­‰ï¼Œè¿™æ¬¡å†·ç¥žèŠ±å¤§ç²¾åŠ›åˆ¶ä½œé…å¥—è§†é¢‘ï¼Œxkcodingï¼Œå†²å†²å†²ï¼Œè·Ÿä¸Šè¿›åº¦ï¼Œä¸æ‹–å†·ç¥žåŽè…¿ï¼ ç›†å‹ä»¬ï¼Œç­”åº”æˆ‘ï¼Œè¿™æ¬¡ä¸€å®šå¥½å˜›~]]></content>
      <categories>
        <category>å¼€æº</category>
        <category>spring-boot-demo</category>
      </categories>
      <tags>
        <tag>spring boot</tag>
        <tag>å¼€æº</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¦‚ä½•è§£å†³ Quartz Job ä¸­æ— æ³•æ³¨å…¥ Spring Bean]]></title>
    <url>%2F2020%2F06%2F05%2Ffix-quartz-job-cannot-autowired-spring-beans.html</url>
    <content type="text"><![CDATA[1. é—®é¢˜ ä¸çŸ¥é“å°ä¼™ä¼´ä»¬åœ¨ Spring é›†æˆ Quartz çš„æ—¶å€™æœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åœ¨ Quartz çš„ Job ä¸­ @Autowired ä¸€ä¸ª Spring Bean çš„æ—¶å€™ä¼šæŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚å¦‚æžœåœ¨ Spring ä¸­æ— æ³•ä½¿ç”¨ @Autowired è¿›è¡Œæ³¨å…¥ä¸€ä¸ª Bean çš„è¯ï¼Œè¿™æ— ç–‘æ˜¯ä¸€ä¸ªå™©è€—ï¼Œé‚£ä¹ˆé‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œè¯¥å¦‚ä½•è§£å†³å‘¢ï¼Ÿ 2. åŽŸå›  å‡ºçŽ°è¿™ä¸ªé—®é¢˜æ˜¯å› ä¸ºå®šæ—¶ä»»åŠ¡çš„ Job å¯¹è±¡å®žä¾‹åŒ–çš„è¿‡ç¨‹æ˜¯é€šè¿‡ Quartz å†…éƒ¨è‡ªå·±å®Œæˆçš„ï¼Œä½†æ˜¯æˆ‘ä»¬é€šè¿‡ Spring è¿›è¡Œæ³¨å…¥çš„ Bean å´æ˜¯ç”± Spring å®¹å™¨ç®¡ç†çš„ï¼ŒQuartz å†…éƒ¨æ— æ³•æ„ŸçŸ¥åˆ° Spring å®¹å™¨ç®¡ç†çš„ Beanï¼Œæ‰€ä»¥æ²¡æœ‰åŠžæ³•åœ¨åˆ›å»º Job çš„æ—¶å€™å°±ç»™è£…é…è¿›åŽ»ã€‚ 3. æºç åˆ†æž ä¼ ç»Ÿçš„ Spring é¡¹ç›®ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° Schedule çš„åˆ›å»ºæ˜¯é€šè¿‡ SchedulerFactoryBean è¿›è¡Œåˆ›å»ºçš„ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹ SchedulerFactoryBean æºç ï¼Œè¯¥ç±»å®žçŽ°äº† InitializingBean æŽ¥å£ï¼Œä¼šåœ¨ Bean å±žæ€§åˆå§‹åŒ–ä¹‹åŽè°ƒç”¨ afterPropertiesSet() æ–¹æ³•ã€‚ 12345678@Overridepublic void afterPropertiesSet() throws Exception &#123; // çœç•¥éƒ¨åˆ†ä»£ç ... // Initialize the Scheduler instance... this.scheduler = prepareScheduler(prepareSchedulerFactory()); // çœç•¥éƒ¨åˆ†ä»£ç ...&#125; æŽ¥ç€æŸ¥çœ‹ prepareScheduler() æ–¹æ³•ï¼Œå¯ä»¥å‘çŽ°å¦‚æžœ jobFactory ä¸å­˜åœ¨çš„è¯ï¼Œé»˜è®¤ä¼šä½¿ç”¨ AdaptableJobFactory å®žçŽ°å¯¹ Job å¯¹è±¡çš„åˆ›å»ºã€‚ 123456789101112131415161718192021222324252627private Scheduler prepareScheduler(SchedulerFactory schedulerFactory) throws SchedulerException &#123; // çœç•¥éƒ¨åˆ†ä»£ç ... // Get Scheduler instance from SchedulerFactory. try &#123; Scheduler scheduler = createScheduler(schedulerFactory, this.schedulerName); populateSchedulerContext(scheduler); if (!this.jobFactorySet &amp;&amp; !(scheduler instanceof RemoteScheduler)) &#123; // Use AdaptableJobFactory as default for a local Scheduler, unless when // explicitly given a null value through the "jobFactory" bean property. this.jobFactory = new AdaptableJobFactory(); &#125; if (this.jobFactory != null) &#123; if (this.applicationContext != null &amp;&amp; this.jobFactory instanceof ApplicationContextAware) &#123; ((ApplicationContextAware) this.jobFactory).setApplicationContext(this.applicationContext); &#125; if (this.jobFactory instanceof SchedulerContextAware) &#123; ((SchedulerContextAware) this.jobFactory).setSchedulerContext(scheduler.getContext()); &#125; scheduler.setJobFactory(this.jobFactory); &#125; return scheduler; &#125; // çœç•¥éƒ¨åˆ†ä»£ç ...&#125; æ—¢ç„¶æ‰¾åˆ°äº†æºç ï¼Œé‚£ä¹ˆå¤„ç†èµ·æ¥å°±æ–¹ä¾¿äº†ï¼Œæˆ‘ä»¬å¦‚æžœå¯ä»¥è‡ªå®šä¹‰ JobFactory çš„è¯ï¼Œåœ¨åˆ›å»ºå®Œ Job å®žä¾‹ä¹‹åŽï¼Œå†å°† Job æ³¨å…¥åˆ° Spring å®¹å™¨ä¸­å³å¯è§£å†³è¯¥é—®é¢˜ã€‚ 4. è§£å†³ é¦–å…ˆè‡ªå®šä¹‰ä¸€ä¸ª JobFactoryï¼Œé€šè¿‡ AutowireCapableBeanFactory å°†åˆ›å»ºå¥½çš„ Job å¯¹è±¡äº¤ç»™ Spring ç®¡ç† 123456789101112131415161718@Configurationpublic class CustomJobFactory extends AdaptableJobFactory &#123; @Autowired private AutowireCapableBeanFactory autowireCapableBeanFactory; /** * Create the job instance, populating it with property values taken * from the scheduler context, job data map and trigger data map. * * @param bundle */ @Override protected Object createJobInstance(TriggerFiredBundle bundle) throws Exception &#123; Object jobInstance = super.createJobInstance(bundle); autowireCapableBeanFactory.autowireBean(jobInstance); return jobInstance; &#125;&#125; å†åˆ›å»ºä¸€ä¸ªé…ç½®ç±»ï¼Œå°†è‡ªå®šä¹‰çš„ JobFactory è®¾ç½®åˆ° Schedule ä¸­ 1234567891011121314151617@Configurationpublic class QuartzConfig &#123; @Autowired private CustomJobFactory customJobFactory; @SneakyThrows @Bean public Scheduler scheduler()&#123; SchedulerFactory schedulerFactory = new StdSchedulerFactory(); Scheduler scheduler = schedulerFactory.getScheduler(); // è‡ªå®šä¹‰ JobFactory ä½¿å¾—åœ¨ Quartz Job ä¸­å¯ä»¥ä½¿ç”¨ @Autowired scheduler.setJobFactory(customJobFactory); scheduler.start(); return scheduler; &#125; &#125; è¿™æ ·ä½ å°±å¯ä»¥æ„‰å¿«çš„åœ¨å®šæ—¶ä»»åŠ¡ä¸­ä½¿ç”¨ @Autowiredæ³¨å…¥ Spring ç®¡ç†çš„ Bean äº†ã€‚ 12345678910@Slf4jpublic class JobDemo2 implements Job &#123; @Autowired private DemoService demoService; @Override public void execute(JobExecutionContext jobExecutionContext) throws JobExecutionException &#123; demoService.echo("JobDemo2"); &#125;&#125; 5. çŸ¥è¯†æ‹“å±• 5.1. é€šè¿‡ SpringUtil å®žçŽ°ç›¸åŒæ•ˆæžœ å½“ç„¶äº†ï¼Œå¦‚æžœä¸æƒ³é€šè¿‡è¿™ç§æ–¹æ³•å®žçŽ°çš„è¯ï¼Œè¿˜æœ‰å¦å¤–ä¸€ç§æ–¹å¼ã€‚ åˆ›å»ºä¸€ä¸ª Spring å·¥å…·ç±» 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394/** * &lt;p&gt; * Spring å·¥å…·ç±» * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2020-06-05 11:13 */@Slf4j@Componentpublic class SpringUtil implements ApplicationContextAware &#123; private static ApplicationContext context; @Override public void setApplicationContext(ApplicationContext context) throws BeansException &#123; SpringUtil.context = context; &#125; /** * èŽ·å– Spring Bean * * @param clazz ç±» * @param &lt;T&gt; æ³›åž‹ * @return å¯¹è±¡ */ public static &lt;T&gt; T getBean(Class&lt;T&gt; clazz) &#123; if (clazz == null) &#123; return null; &#125; return context.getBean(clazz); &#125; /** * èŽ·å– Spring Bean * * @param bean åç§° * @param &lt;T&gt; æ³›åž‹ * @return å¯¹è±¡ */ @SuppressWarnings("unchecked") public static &lt;T&gt; T getBean(String bean) &#123; if (bean == null) &#123; return null; &#125; return (T) context.getBean(bean); &#125; /** * èŽ·å– Spring Bean * * @param beanName åç§° * @param clazz ç±» * @param &lt;T&gt; æ³›åž‹ * @return å¯¹è±¡ */ public static &lt;T&gt; T getBean(String beanName, Class&lt;T&gt; clazz) &#123; if (null == beanName || "".equals(beanName.trim())) &#123; return null; &#125; if (clazz == null) &#123; return null; &#125; return (T) context.getBean(beanName, clazz); &#125; /** * èŽ·å–ä¸Šä¸‹æ–‡ * * @return ä¸Šä¸‹æ–‡ */ public static ApplicationContext getContext() &#123; if (context == null) &#123; throw new RuntimeException("There has no Spring ApplicationContext!"); &#125; return context; &#125; /** * å‘å¸ƒäº‹ä»¶ * * @param event äº‹ä»¶ */ public static void publishEvent(ApplicationEvent event) &#123; if (context == null) &#123; return; &#125; try &#123; context.publishEvent(event); &#125; catch (Exception ex) &#123; log.error(ex.getMessage()); &#125; &#125;&#125; ç„¶åŽåœ¨å®šæ—¶ä»»åŠ¡ä¸­é€šè¿‡è¯¥å·¥å…·ç±»èŽ·å– Spring Beanï¼Œä¹Ÿå¯ä»¥å®žçŽ°åŒæ ·çš„æ•ˆæžœã€‚ 123456789@Slf4jpublic class JobDemo1 implements Job &#123; @Override public void execute(JobExecutionContext jobExecutionContext) throws JobExecutionException &#123; DemoService demoService = SpringUtil.getBean(DemoService.class); demoService.echo("JobDemo1"); &#125;&#125; 5.2. Spring Boot 2.x ä¸­çš„å®žçŽ° äº†è§£ Spring Boot è‡ªåŠ¨è£…é…æœºåˆ¶çš„å°ä¼™ä¼´åº”è¯¥éƒ½çŸ¥é“ï¼Œå½“æˆ‘ä»¬å¼•å…¥äº† spring-boot-starter-quartz è¿™æ ·ä¸€ä¸ª starter ä¾èµ–ä¹‹åŽï¼Œæœ€ç»ˆå…¶å®žæ˜¯é€šè¿‡ Spring Boot çš„ SPI æœºåˆ¶ï¼Œè‡ªåŠ¨åŠ è½½äº†ä¸€ä¸ª QuartzAutoConfiguration é…ç½®ç±»ï¼Œè¯¥é…ç½®ç±»æ˜¯å¯¹ Quartz ä¸­çš„ä¸€äº›å¯¹è±¡åŠé…ç½®è¿›è¡Œä¸€ç³»åˆ—çš„åˆå§‹åŒ–æ“ä½œã€‚ åœ¨è¿™ä¸ªé…ç½®ç±»ä¸­ï¼Œå®šä¹‰äº†ä¸€ä¸ª SchedulerFactoryBeanï¼Œè¿™ä¸ªç±»ä¸»è¦æ˜¯å®žçŽ°åœ¨ Spring ä¸­è¿›è¡Œå¯¹ä»»åŠ¡çš„è°ƒåº¦ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ Spring Boot ä¸­ï¼Œè¯¥ç±»é»˜è®¤æ˜¯é€šè¿‡ SpringBeanJobFactory å®žçŽ°å¯¹ Job å¯¹è±¡çš„åˆ›å»ºã€‚æºç å¦‚ä¸‹ï¼š 123456789101112@Bean@ConditionalOnMissingBeanpublic SchedulerFactoryBean quartzScheduler(QuartzProperties properties, ObjectProvider&lt;SchedulerFactoryBeanCustomizer&gt; customizers, ObjectProvider&lt;JobDetail&gt; jobDetails, Map&lt;String, Calendar&gt; calendars, ObjectProvider&lt;Trigger&gt; triggers, ApplicationContext applicationContext) &#123; SchedulerFactoryBean schedulerFactoryBean = new SchedulerFactoryBean(); SpringBeanJobFactory jobFactory = new SpringBeanJobFactory(); jobFactory.setApplicationContext(applicationContext); schedulerFactoryBean.setJobFactory(jobFactory); // çœç•¥å…¶ä½™ä»£ç .... return schedulerFactoryBean;&#125; é‚£ä¹ˆè¿™ä¸ª SpringBeanJobFactory æœ‰ä»€ä¹ˆç‰¹æ®Šçš„å‘¢ï¼Ÿè¯¥ç±»ç»§æ‰¿äº† AdaptableJobFactory åŒæ—¶ä¹Ÿå®žçŽ°äº† ApplicationContextAware æŽ¥å£ 1234567891011@Overrideprotected Object createJobInstance(TriggerFiredBundle bundle) throws Exception &#123; // å…³é”®ä»£ç  Object job = (this.applicationContext != null ? this.applicationContext.getAutowireCapableBeanFactory().createBean( bundle.getJobDetail().getJobClass(), AutowireCapableBeanFactory.AUTOWIRE_CONSTRUCTOR, false) : super.createJobInstance(bundle)); // çœç•¥å…¶ä½™ä»£ç .... return job;&#125; æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¯¥ç±»åœ¨é‡å†™ createJobInstance() æ–¹æ³•ä¸­ï¼Œåˆ›å»º Job å¯¹è±¡çš„æ—¶å€™ï¼Œä¼šå…ˆåˆ¤æ–­æ˜¯å¦åœ¨ Spring ä¸Šä¸‹æ–‡ä¸­ï¼Œå¦‚æžœæ˜¯åœ¨ Spring çŽ¯å¢ƒä¸­ï¼Œä¹Ÿæ˜¯é€šè¿‡ AutowireCapableBeanFactory å°† Job å¯¹è±¡æ”¾åœ¨ Spring å®¹å™¨ä¸­ï¼Œå¦‚æžœæ²¡æœ‰ï¼Œåˆ™ä¼šè°ƒç”¨çˆ¶ç±» AdaptableJobFactory è¿›è¡Œåå°„åˆ›å»º Job å¯¹è±¡ã€‚ ä»Žè¿™å„¿å¯ä»¥çœ‹å‡ºï¼ŒSpring Boot 2.x ç‰ˆæœ¬é€šè¿‡ spring-boot-starter-quartz é›†æˆä¹‹åŽï¼Œé»˜è®¤å°±æ˜¯å¯ä»¥åœ¨ Job å¯¹è±¡ä¸­ä½¿ç”¨ @Autowired çš„ï¼Œå¹¶ä¸”å®žçŽ°çš„æ€è·¯å’Œæˆ‘ä»¬æ˜¯ä¸€è‡´çš„ï¼Œé€šè¿‡ AutowireCapableBeanFactory å°† Job å¯¹è±¡æ”¾å…¥ Spring å®¹å™¨ä¸­æ‰æ˜¯æ­£ç¡®åšæ³•ã€‚ 6. ä»£ç  Spring é›†æˆ Quartzï¼šhttps://github.com/xkcoding/practice_demo/tree/master/quartz-demo-spring Spring Boot é›†æˆ Quartzï¼šhttps://github.com/xkcoding/practice_demo/tree/master/quartz-demo-spring-boot]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>spring boot</category>
      </categories>
      <tags>
        <tag>spring boot</tag>
        <tag>quartz</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æˆ‘çš„åšå®¢æ˜¯å¦‚ä½•é›†æˆCICDçš„ï¼Ÿ]]></title>
    <url>%2F2020%2F06%2F01%2Fhow-does-my-blog-integrate-cicd.html</url>
    <content type="text"><![CDATA[1. å‰è¨€ åšå®¢çŽ°åœ¨è²Œä¼¼æˆä¸ºäº†ä¸€ä¸ªæŠ€æœ¯äººçš„æ ‡é…ï¼Œä»Žæœ€åˆçš„ç‚«æŠ€åˆ°å•çº¯çš„è®°å½•è‡ªå·±çš„æˆé•¿åŽ†ç¨‹ã€‚æˆ‘çš„åšå®¢ä¹Ÿç»åŽ†äº†å¾ˆå¤šæ¬¡ã€Œèœ•å˜ã€ã€‚ å½“ä¸‹åšå®¢çš„é€‰åž‹ååˆ†å¤šï¼Œè¿™é‡Œæˆ‘åˆ—ä¸¾ä¸€äº›ï¼š åŠ¨æ€åšå®¢ WordPressï¼šhttp://www.wordpress.com/ Ghostï¼šhttps://ghost.org/ Haloï¼šhttps://halo.run/ â€¦ é™æ€åšå®¢ jekyllï¼šhttp://jekyllcn.com/ hexoï¼šhttps://hexo.io/ hugoï¼šhttps://gohugo.io/ å…³äºŽåŠ¨æ€å’Œé™æ€çš„åŒºåˆ«ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹: èµ„æºå ç”¨ï¼šé™æ€åšå®¢ç›¸æ¯”åŠ¨æ€åšå®¢å ç”¨æœåŠ¡å™¨èµ„æºæ›´å°‘ï¼› å‘å¸ƒæ›´æ–°ï¼šç”±äºŽé™æ€åšå®¢æ²¡æœ‰ç®¡ç†åŽå°ï¼Œæ‰€ä»¥å‘å¸ƒæ›´æ–°å†…å®¹è¦æ¯”åŠ¨æ€åšå®¢ç¹çï¼› è®¿é—®é€Ÿåº¦ï¼šé™æ€åšå®¢æ²¡æœ‰æ•°æ®åº“çš„è®¿é—®è¿žæŽ¥ï¼Œæ‰€ä»¥é™æ€åšå®¢è®¿é—®é€Ÿåº¦æ›´å¿«ï¼› æœ¬ç«™ä½¿ç”¨çš„å°±æ˜¯é™æ€åšå®¢ hexo åŠ ä¸Š Next ä¸»é¢˜æ­å»ºçš„ï¼ŒåŒæ—¶ä¹Ÿè‡ªå®šä¹‰äº†ä¸€äº›æ ·å¼å’ŒåŠŸèƒ½ã€‚ä¸Šé¢è¯´åˆ°é™æ€åšå®¢å‘å¸ƒæ›´æ–°æ–‡ç« æ¯”è¾ƒç¹çï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥ç®€åŒ–å‘å¸ƒæµç¨‹ï¼Œæå‡æ•´ä¸ªå†™ä½œä½“éªŒå‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯ CICDã€‚ 2. ä»€ä¹ˆæ˜¯ CICDï¼Ÿ CIï¼šæŒç»­é›†æˆ CDï¼šæŒç»­äº¤ä»˜ã€æŒç»­éƒ¨ç½² å…·ä½“æ¦‚å¿µï¼Œå¤§å®¶å¯ä»¥è‡ªè¡Œç™¾åº¦æŸ¥é˜…ã€‚ 3. ã€Œä»£ç æ—¥è®°ã€çš„å¿ƒè·¯åŽ†ç¨‹ è¿™é‡Œå°±ç•¥è¿‡äº†ä»Ž QZoneã€WordPress çš„é‚£äº›ç»åŽ†ï¼Œç›´æŽ¥ä»Ž hexo å¼€å§‹ 3.1. åŽŸå§‹é˜¶æ®µ æœ€å¼€å§‹æŽ¥è§¦ hexoï¼Œè¿˜æ˜¯æ‡µæ‡‚çš„å­¦ç”Ÿé˜¶æ®µï¼Œå› ä¸ºæ˜¯é™æ€åšå®¢ï¼ŒåŒæ—¶åˆå¯ä»¥æ‰˜ç®¡åˆ° GitHubï¼Œä½¿ç”¨ GitHub Pages æœåŠ¡å‘å¸ƒç½‘ç«™ï¼Œé¿å…äº†å¤§é¢çš„æœåŠ¡å™¨èŠ±é”€ï¼Œè¿™è®©æˆ‘æ·±æ·±çš„å–œæ¬¢ä¸Šäº† hexoã€‚ é‚£æ—¶å€™æˆ‘æ¯æ¬¡å†™å®Œæ–‡ç« ï¼Œå°±æœ¬åœ° hexo g ä¸€ä¸‹ï¼Œå°†æ‰“åŒ…ç”Ÿæˆçš„ public ç›®å½•ï¼Œæ”¾ç½®åœ¨ pages åˆ†æ”¯ï¼Œç„¶åŽæäº¤åˆ° GitHubï¼Œå°±ç®—ä¸€æ¬¡åšæ–‡çš„å‘å¸ƒã€‚ ç¼ºç‚¹ å°†åšå®¢æ‰˜ç®¡åœ¨ GitHubï¼Œæ²¡æœ‰äº†æœåŠ¡å™¨çš„å¼€é”€ï¼Œä½†æ˜¯å› ä¸ºç½‘ç»œçŽ¯å¢ƒçš„é—®é¢˜ï¼Œæ˜Žæ˜Žå·²ç»æ˜¯é™æ€èµ„æºçš„åšå®¢ï¼Œå±…ç„¶ç»å¸¸æ€§çš„è®¿é—®ä¸åˆ°ã€‚ åŽé¢é€šè¿‡åœ¨ coding.net éƒ¨ç½²è§£å†³å›½å†…è®¿é—®æ…¢çš„é—®é¢˜ï¼Œé€šè¿‡é˜¿é‡Œäº‘ DNS è§£æžé…ç½®ï¼Œå›½å¤–é»˜è®¤åˆ° xkcoding.github.ioï¼Œå›½å†…é»˜è®¤åˆ° xkcoding.coding.me 3.2. æŠ˜è…¾ v1.0 16 å¹´å·¥ä½œä¹‹åŽï¼Œåœ¨ 618 å…¥æ‰‹äº†ä¸€å°å¤§ç±³äº‘æœåŠ¡å™¨ã€‚é‚£æ—¶ï¼Œcoding.net å¼ºåˆ¶è¦æ±‚ Pages æœåŠ¡åº•éƒ¨å¢žåŠ ç‰ˆæƒï¼Œå¦åˆ™ä¼šå¼¹å‡ºå¹¿å‘Šä¿¡æ¯ï¼ŒäºŽæ˜¯å°±æƒ³ç€å°†åšå®¢éƒ¨ç½²åœ¨è‡ªå·±æœåŠ¡å™¨ä¸Šã€‚ å› ä¸ºåšå®¢éƒ½æ˜¯é™æ€èµ„æºï¼Œä»…éœ€è¦å®‰è£… nginx å³å¯è§£å†³ã€‚ä½†æ˜¯éƒ¨ç½²åœ¨è‡ªå·±æœåŠ¡å™¨ï¼Œå¦‚æžœæ¯æ¬¡å†™å®Œæ–‡ç« éƒ½éœ€è¦ ftp ä¼ åˆ°æŒ‡å®šç›®å½•ï¼Œé‚£ä¹Ÿå¤ªéº»çƒ¦äº†ã€‚v1.0 å°±æ˜¯åœ¨è¿™æ ·çš„å‰æä¸‹è¯žç”Ÿäº†ã€‚ æˆ‘åœ¨è‡ªå·±çš„æœåŠ¡å™¨æ­å»ºäº† Jenkinsï¼ŒåŒæ—¶åœ¨ GitHub å¼€å¯ webhookï¼Œå½“æœ‰æ–°çš„ push æ“ä½œçš„æ—¶å€™ï¼Œå°±ä¼šè§¦å‘ Jenkins ä»»åŠ¡ã€‚Jenkins æµæ°´çº¿ä»»åŠ¡ä¸»è¦å°±æ˜¯èŽ·å–ä»£ç ã€ä¸‹è½½ä¾èµ–ã€æ‰“åŒ…åŽ‹ç¼©ã€æœ€åŽå°†æ‰“åŒ…å¥½çš„èµ„æºæ–‡ä»¶æ”¾åœ¨ nginx ç›®å½•ã€‚ åŒæ—¶é›†æˆäº† Travis-ciï¼Œè‡ªåŠ¨å¾€ pages åˆ†æ”¯æäº¤å†…å®¹ï¼Œä¸ºäº†ç»´æŠ¤ pages çš„ç«™ç‚¹ï¼Œé¿å…å¶å°”è‡ªå·±æœåŠ¡å™¨å®•æœºå¯¼è‡´æˆ‘è‡ªå·±æ— æ³•æŸ¥é˜…åšå®¢å†…å®¹ã€‚ Jenkins å’Œ Travis éƒ½ä¼šåœ¨éƒ¨ç½²å®Œæˆä¹‹åŽè§¦å‘é‚®ä»¶æé†’ï¼Œé€šçŸ¥æˆ‘åšå®¢æ˜¯å¦éƒ¨ç½²æˆåŠŸï¼Œå¦‚æžœå¤±è´¥ï¼Œä¼šé™„å¸¦å¤±è´¥æ—¥å¿—ã€‚ ç¼ºç‚¹ v1.0 çš„ç‰ˆæœ¬åŸºæœ¬å·²ç»å¯ä»¥æ»¡è¶³è¦æ±‚äº†ï¼Œä¹Ÿé™ªä¼´äº†æˆ‘å°†è¿‘ 3 å¹´çš„æ—¶å…‰ã€‚ä½†æ˜¯ä¸ä¹è¿˜æ˜¯å­˜åœ¨ç¼ºç‚¹ï¼š éšç€æˆ‘çš„ä¸æ–­æŠ˜è…¾ï¼ŒæœåŠ¡å™¨è·‘çš„æœåŠ¡è¶Šæ¥è¶Šå¤šï¼Œå¯¼è‡´æœåŠ¡å™¨èµ„æºä¸å¤Ÿï¼Œæœ‰æ—¶å€™ä¼šå‡ºçŽ° Jenkins æŒ‚æŽ‰çš„æƒ…å†µï¼Œå¯¼è‡´éƒ¨ç½²å¤±è´¥ å› ä¸ºå¯¹åšå®¢åšäº†å†™å®šåˆ¶åŒ–æ”¹é€ ï¼Œé›†æˆäº†ä¸€äº›ç¬¬ä¸‰æ–¹æ’ä»¶ï¼Œåšå®¢é…ç½®æ–‡ä»¶æºå¸¦äº†æ¯”è¾ƒæ•æ„Ÿçš„ key/secret ä¿¡æ¯ï¼Œå¼€å§‹å˜å¾—ä¸å¤ªé€‚åˆæ”¾åœ¨ GitHub åˆ†äº« â‘  Jenkinsfile æºç åœ°å€ï¼šhttps://github.com/xkcoding/MyBlog/blob/master/.jenkins/Jenkinsfile 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138#!/usr/bin/env groovy Jenkinsfilepipeline &#123; agent any environment &#123; CONFIG_FILE = "_config.yml" BLOG_DIR = "/data/xkcoding.com" GIT_REPO = "https://github.com/xkcoding/MyBlog.git" USERMAIL = "237497819@qq.com" &#125; stages &#123; stage("èŽ·å–/æ›´æ–°ä»£ç ä»£ç ") &#123; steps &#123; echo "Gitä»“åº“ä»£ç : $&#123;GIT_REPO&#125;" echo "æ ¡éªŒæ˜¯å¦å·²å­˜åœ¨ä»£ç " script &#123; if (fileExists(file:"$&#123;CONFIG_FILE&#125;")) &#123; echo "é¡¹ç›®å­˜åœ¨ï¼Œå‡†å¤‡æ›´æ–°ä»£ç " sh "git pull origin master" &#125;else&#123; echo "é¡¹ç›®ä¸å­˜åœ¨ï¼Œå‡†å¤‡æ‹‰å–ä»£ç " git 'https://github.com/xkcoding/MyBlog.git' &#125; &#125; &#125; &#125; stage("ä¸‹è½½ä¾èµ–") &#123; steps &#123; echo "å¼€å§‹ä¸‹è½½NPMä¾èµ–" sh "npm install" &#125; &#125; stage("æ‰“åŒ…/åŽ‹ç¼©åšå®¢") &#123; steps &#123; echo "å¼€å§‹æ‰“åŒ…Hexoåšå®¢" sh "hexo clean &amp;&amp; hexo g" echo "å¼€å§‹åŽ‹ç¼©Hexoåšå®¢" sh "export PATH=/apps/node-v8.0.0-linux-x64/bin:$PATH &amp;&amp; gulp" &#125; &#125; stage("éƒ¨ç½²") &#123; steps &#123; echo "åˆ é™¤æ—§ç›®å½•" sh "rm -rf $&#123;BLOG_DIR&#125;" echo "éƒ¨ç½²é™æ€é¡µé¢åˆ°nginxç›®å½•" sh "mv public $&#123;BLOG_DIR&#125;" echo "åˆ é™¤ä¾èµ–ç›®å½•" sh "rm -rf node_modules" &#125; &#125; stage("ä¸Šçº¿") &#123; steps &#123; echo "é‡å¯Nginx" sh "nginx -s reload" &#125; &#125; &#125; post &#123; always &#123; emailext ( subject: '''æž„å»ºé€šçŸ¥ï¼š$&#123;JOB_NAME&#125; [$&#123;BUILD_NUMBER&#125;] $&#123;BUILD_STATUS&#125;''', body: ''' &lt;!DOCTYPE html&gt; &lt;html&gt; &lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;$&#123;JOB_NAME&#125;-ç¬¬$&#123;BUILD_NUMBER&#125;æ¬¡æž„å»ºæ—¥å¿—&lt;/title&gt; &lt;/head&gt; &lt;body leftmargin="8" marginwidth="0" topmargin="8" marginheight="4" offset="0"&gt; &lt;table width="95%" cellpadding="0" cellspacing="0" style="font-size: 11pt; font-family: Tahoma, Arial, Helvetica, sans-serif"&gt; &lt;tr&gt; &lt;td&gt;(æœ¬é‚®ä»¶æ˜¯ç¨‹åºè‡ªåŠ¨ä¸‹å‘çš„ï¼Œè¯·å‹¿å›žå¤ï¼)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;&lt;h2&gt; &lt;font color="#0000FF"&gt;æž„å»ºç»“æžœ - $&#123;BUILD_STATUS&#125;&lt;/font&gt; &lt;/h2&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;&lt;br /&gt; &lt;b&gt;&lt;font color="#0B610B"&gt;æž„å»ºä¿¡æ¯&lt;/font&gt;&lt;/b&gt; &lt;hr size="2" width="100%" align="center" /&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt; &lt;ul&gt; &lt;li&gt;é¡¹ç›®åç§°ï¼š $&#123;JOB_NAME&#125;&lt;/li&gt; &lt;li&gt;æž„å»ºç¼–å·ï¼š ç¬¬$&#123;BUILD_NUMBER&#125;æ¬¡æž„å»º&lt;/li&gt; &lt;li&gt;æž„å»ºçŠ¶æ€ï¼š $&#123;BUILD_STATUS&#125;&lt;/li&gt; &lt;li&gt;æž„å»ºæ—¥å¿—ï¼š &lt;a href="$&#123;BUILD_URL&#125;console"&gt;$&#123;BUILD_URL&#125;console&lt;/a&gt;&lt;/li&gt; &lt;li&gt;æž„å»ºUrlï¼š &lt;a href="$&#123;BUILD_URL&#125;"&gt;$&#123;BUILD_URL&#125;&lt;/a&gt;&lt;/li&gt; &lt;li&gt;å·¥ä½œç›®å½•ï¼š &lt;a href="$&#123;BUILD_URL&#125;ws"&gt;$&#123;BUILD_URL&#125;ws&lt;/a&gt;&lt;/li&gt; &lt;li&gt;é¡¹ç›®Urlï¼š &lt;a href="$&#123;PROJECT_URL&#125;"&gt;$&#123;PROJECT_URL&#125;&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;&lt;b&gt;&lt;font color="#0B610B"&gt;Changes Since Last Successful Build:&lt;/font&gt;&lt;/b&gt; &lt;hr size="2" width="100%" align="center" /&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt; &lt;ul&gt; &lt;li&gt;åŽ†å²å˜æ›´è®°å½• : &lt;a href="$&#123;PROJECT_URL&#125;changes"&gt;$&#123;PROJECT_URL&#125;changes&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; $&#123;CHANGES_SINCE_LAST_SUCCESS,reverse=true, format="Changes for Build #%n:&lt;br /&gt;%c&lt;br /&gt;",showPaths=true,changesFormat="&lt;pre&gt;[%a]&lt;br /&gt;%m&lt;/pre&gt;",pathFormat=" %p"&#125; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;&lt;b&gt;Test Informations&lt;/b&gt; &lt;hr size="2" width="100%" align="center" /&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;&lt;pre style="font-size: 11pt; font-family: Tahoma, Arial, Helvetica, sans-serif"&gt;Total:$&#123;TEST_COUNTS,var="total"&#125;,Pass:$&#123;TEST_COUNTS,var="pass"&#125;,Failed:$&#123;TEST_COUNTS,var="fail"&#125;,Skiped:$&#123;TEST_COUNTS,var="skip"&#125;&lt;/pre&gt; &lt;br /&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;&lt;b&gt;&lt;font color="#0B610B"&gt;æž„å»ºæ—¥å¿— (æœ€åŽ 100è¡Œ):&lt;/font&gt;&lt;/b&gt; &lt;hr size="2" width="100%" align="center" /&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;&lt;textarea cols="80" rows="30" readonly="readonly" style="font-family: Courier New"&gt;$&#123;BUILD_LOG, maxLines=100&#125;&lt;/textarea&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;/body&gt; &lt;/html&gt; ''', to: "$&#123;USERMAIL&#125;", recipientProviders: [[$class: 'DevelopersRecipientProvider']] ) &#125; &#125;&#125; â‘¡ .travis.yml æºç åœ°å€ï¼šhttps://github.com/xkcoding/MyBlog/blob/master/.travis.yml 123456789101112131415161718192021222324252627282930313233343536language: node_jsnode_js: - "8.16.0"cache: directories: - node_modulesbefore_install: - npm install -g hexo-cli - npm install -g gulpinstall: - npm installscript: - hexo clean - hexo g &amp;&amp; gulpafter_success: - cd ./public - git init - git config user.name "Yangkai.Shen" - git config user.email "237497819@qq.com" - git add . - git commit -m "TravisCI è‡ªåŠ¨éƒ¨ç½²" # Github Pages - git push --force --quiet "https://$&#123;GITHUB_TOKEN&#125;@$&#123;GITHUB_PAGE&#125;" master:master # Coding Pages - git push --force --quiet "https://xkcoding:$&#123;CODING_TOKEN&#125;@$&#123;CODING_PAGE&#125;" master:masterenv: global: - GITHUB_PAGE: github.com/xkcoding/xkcoding.github.io.git - CODING_PAGE: git.dev.tencent.com/xkcoding/xkcoding.git# é€šçŸ¥notifications: email: recipients: - 237497819@qq.com on_success: always # default: change on_failure: always # default: always â‘¢ ç›¸å…³æˆªå›¾ 3.3. æŠ˜è…¾ v2.0 å¤§ç±³äº‘çš„æœåŠ¡å™¨å°†äºŽä»Šå¹´çš„ 6 æœˆä»½è¿‡æœŸï¼ŒäºŽæ˜¯æŽç€è¿™ä¸ªæ—¶é—´ç‚¹ï¼Œæˆ‘å¼€å§‹äº†æŠ˜è…¾ v2.0 ç‰ˆæœ¬ã€‚ æœåŠ¡å™¨æ˜¯åŽ»å¹´åŒåä¸€ä»¥æ–°äººçš„èº«ä»½è´­å…¥çš„äº¬ä¸œäº‘ä¸»æœºï¼ŒåŒæ—¶è¿˜æœ‰è¿”çŽ°äº¬è±†ï¼Œç¾Šæ¯›è¿™ä¸œè¥¿ï¼Œè¯¥è–…è¿˜å¾—è–…ï¼ŒäºŽæ˜¯ä¸€å¹¶è´­å…¥ 3 å°ï¼Œè¿™æ¬¡å°±è¶ç€æ— ä¸šäººå‘˜åŒæ—¶åˆè¿«äºŽå¤§ç±³äº‘çš„åˆ°æœŸï¼ŒæŠŠå®ƒä»¬åˆ©ç”¨èµ·æ¥ã€‚ v2.0 ç‰ˆæœ¬ä¸»è¦æ˜¯åšäº†ä»£ç ç§æœ‰åŒ–ã€åŒæ—¶æ”¯æŒå®¹å™¨åŒ–çš„éƒ¨ç½²ã€‚åœ¨ 3 å°æœåŠ¡å™¨ä¸Šæ­å»ºäº† Docker Swarm ä½œä¸ºå®¹å™¨é›†ç¾¤ï¼Œæž¶æž„æ˜¯ 1 ä¸» 2 ä»Žï¼Œç„¶åŽæ‹¿å‡ºä¸€å°æœåŠ¡å™¨ä¸“é—¨æ­å»ºäº† GitLabï¼Œä½œä¸ºåŽç»­çš„ä¸ªäººä»£ç æ‰˜ç®¡å¹³å°ï¼Œåœ¨æ¯ä¸ªèŠ‚ç‚¹å®‰è£… GitLab Runner æœåŠ¡ï¼Œå¦å¤–åœ¨ä¸»èŠ‚ç‚¹æ­å»º Traefik ä½œä¸ºå®¹å™¨çš„åå‘ä»£ç†ã€‚ Traefik å’Œ nginx ä½œç”¨ç±»ä¼¼ï¼Œä¸»è¦ç”¨äºŽåå‘ä»£ç†ï¼Œä½†æ˜¯åœ¨ swarm æ¨¡å¼ä¸‹ï¼Œtraefik å¯ä»¥åšåˆ° 0 é…ç½®å®žçŽ°è´Ÿè½½å‡è¡¡ï¼ŒåŒæ—¶å¯ä»¥åšåˆ°ä¸éœ€è¦å®¹å™¨åœ¨å®¿ä¸»æœºæš´éœ²ç«¯å£ï¼Œç›´æŽ¥ä»£ç†åˆ°å®¹å™¨é‡Œçš„æœåŠ¡ã€‚ è¿™é‡Œæˆ‘é€‰æ‹©äº† swarm è€Œæ²¡æœ‰é€‰æ‹© k8sï¼Œä¸»è¦æ˜¯å› ä¸º k8s å¯¹æˆ‘æ¥è¯´å®žåœ¨ç”¨ä¸ä¸Šï¼Œè€Œä¸” k8s å ç”¨èµ„æºå¤ªå¤§ï¼Œå› æ­¤é€‰æ‹©äº†æ›´è½»é‡çº§çš„ swarmã€‚ ä¸»è¦æµç¨‹å°±æ˜¯ï¼Œæœ¬åœ°å†™å¥½æ–‡ç« ï¼Œpush åˆ° GitLabï¼Œç„¶åŽ GitLab ä¼šè§¦å‘ Pipeline ä»»åŠ¡ã€‚ pipeline ä»»åŠ¡ä¸»è¦æœ‰ä»¥ä¸‹å‡ æ­¥ï¼š ä¸‹è½½ä¾èµ–ï¼ˆå¯é€‰ï¼Œå¦‚æžœ package.json æ–‡ä»¶æœªæ”¹åŠ¨ï¼Œåˆ™è·³è¿‡ï¼‰ ç¼–è¯‘æž„å»ºï¼ŒåŒæ—¶åŽ‹ç¼©é™æ€èµ„æº å°†é™æ€èµ„æºç›®å½•æ‰“åŒ…æˆ docker é•œåƒï¼Œpush åˆ°é˜¿é‡Œäº‘é•œåƒä»“åº“ éƒ¨ç½²ä¸Šçº¿ï¼Œè°ƒç”¨ swarm ä¸»èŠ‚ç‚¹ä¸Šçš„ runner æ¥æ‰§è¡Œ docker stack deploy æ¥éƒ¨ç½² ä¸‹çº¿ï¼ˆæ‰‹åŠ¨æ“ä½œï¼Œå¦‚æžœæˆ‘æƒ³å‘ä¸‹ï¼Œå¯ä»¥ç›´æŽ¥æ“ä½œï¼‰ åˆ†äº« â‘  .gitlab-ci.yml æºç åœ°å€ï¼šhttps://github.com/xkcoding/MyBlog/blob/master/.gitlab-ci.yml 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495variables: DOCKER_REGION: "registry.cn-hangzhou.aliyuncs.com" DOCKER_NAMESPACE: "xkcoding" APP_NAME: "myblog" BUILD_IMAGE: "$DOCKER_REGION/$DOCKER_NAMESPACE/nodebuild:8.17.0-alpine3.11" IMAGE_NAME: "$DOCKER_REGION/$DOCKER_NAMESPACE/$APP_NAME:$CI_COMMIT_REF_NAME-$CI_COMMIT_SHORT_SHA" DOCKER_FILE_PATH: "./Dockerfile" APP_DOMAIN: "xkcoding.com" CONTAINER_PORT: 80stages: - ä¸‹è½½ä¾èµ– - ç¼–è¯‘æž„å»º - æ‰“åŒ…é•œåƒ - éƒ¨ç½²æœåŠ¡ - æœåŠ¡ä¸‹çº¿cache: key: $&#123;CI_COMMIT_REF_SLUG&#125; paths: - public/ - node_modules/ä¸‹è½½ä¾èµ–: stage: ä¸‹è½½ä¾èµ– image: $&#123;BUILD_IMAGE&#125; tags: - docker script: - ls -a - npm install - ls -a rules: - changes: - package.jsonç¼–è¯‘æž„å»º: stage: ç¼–è¯‘æž„å»º image: $&#123;BUILD_IMAGE&#125; tags: - docker script: - ls -a - echo "å¼€å§‹æ‰“åŒ…Hexoåšå®¢" - hexo clean &amp;&amp; hexo g - echo "å¼€å§‹åŽ‹ç¼©Hexoåšå®¢" - gulp - ls -a public/æ‰“åŒ…é•œåƒ: stage: æ‰“åŒ…é•œåƒ image: docker:latest services: - name: docker:dind tags: - docker script: - ls -a - docker login -u $&#123;DOCKER_USERNAME&#125; -p $&#123;DOCKER_PASSWORD&#125; $&#123;DOCKER_REGION&#125; - docker build -t $&#123;IMAGE_NAME&#125; -f $&#123;DOCKER_FILE_PATH&#125; . - docker push $&#123;IMAGE_NAME&#125; - docker rmi $&#123;IMAGE_NAME&#125;éƒ¨ç½²æœåŠ¡: stage: éƒ¨ç½²æœåŠ¡ tags: - deploy script: - ls -a - sed -i "s#__IMAGE_NAME__#$&#123;IMAGE_NAME&#125;#g" $&#123;APP_NAME&#125;.yml - sed -i "s#__APP_NAME__#$&#123;APP_NAME&#125;#g" $&#123;APP_NAME&#125;.yml - sed -i "s#__APP_DOMAIN__#$&#123;APP_DOMAIN&#125;#g" $&#123;APP_NAME&#125;.yml - sed -i "s#__CONTAINER_PORT__#$&#123;CONTAINER_PORT&#125;#g" $&#123;APP_NAME&#125;.yml - cat $&#123;APP_NAME&#125;.yml - docker login -u $&#123;DOCKER_USERNAME&#125; -p $&#123;DOCKER_PASSWORD&#125; $&#123;DOCKER_REGION&#125; - docker stack deploy -c $&#123;APP_NAME&#125;.yml $&#123;APP_NAME&#125; cache: policy: pullæœåŠ¡ä¸‹çº¿: stage: æœåŠ¡ä¸‹çº¿ tags: - deploy script: - ls -a - sed -i "s#__IMAGE_NAME__#$&#123;IMAGE_NAME&#125;#g" $&#123;APP_NAME&#125;.yml - sed -i "s#__APP_NAME__#$&#123;APP_NAME&#125;#g" $&#123;APP_NAME&#125;.yml - sed -i "s#__APP_DOMAIN__#$&#123;APP_DOMAIN&#125;#g" $&#123;APP_NAME&#125;.yml - sed -i "s#__CONTAINER_PORT__#$&#123;CONTAINER_PORT&#125;#g" $&#123;APP_NAME&#125;.yml - cat $&#123;APP_NAME&#125;.yml - docker login -u $&#123;DOCKER_USERNAME&#125; -p $&#123;DOCKER_PASSWORD&#125; $&#123;DOCKER_REGION&#125; - docker stack rm $&#123;APP_NAME&#125; when: manual cache: policy: pull â‘¡ Dockerfile 12345FROM nginx:1.18.0LABEL maintainer="xkcoding &lt;237497819@qq.com&gt;"COPY public/ /usr/share/nginx/htmlCOPY default.conf /etc/nginx/conf.d/default.conf â‘¢ myblog.yml è¯¥æ–‡ä»¶æ˜¯ Docker Stack çš„éƒ¨ç½²æ–‡ä»¶ æºç åœ°å€ï¼šhttps://github.com/xkcoding/MyBlog/blob/master/myblog.yml 12345678910111213141516171819202122232425262728293031323334353637version: "3.8"services: nginx: image: __IMAGE_NAME__ networks: - traefik deploy: mode: replicated # 2ä¸ªå‰¯æœ¬ replicas: 2 # æ›´æ–°ç­–ç•¥ update_config: # åŒæ—¶åªèƒ½æ›´æ–°ä¸€ä¸ªèŠ‚ç‚¹ parallelism: 1 delay: 10s order: stop-first placement: # æ¯ä¸ªèŠ‚ç‚¹æœ€å¤šå‰¯æœ¬æ•°é‡ä¸º 1 max_replicas_per_node: 1 constraints: - "node.labels.deploy==common" labels: - "traefik.enable=true" - "traefik.docker.network=traefik" - "traefik.http.routers.__APP_NAME__0.middlewares=https-redirect@file" - "traefik.http.routers.__APP_NAME__0.entrypoints=http" - "traefik.http.routers.__APP_NAME__0.rule=Host(`__APP_DOMAIN__`)" - "traefik.http.routers.__APP_NAME__1.middlewares=content-compress@file" - "traefik.http.routers.__APP_NAME__1.entrypoints=https" - "traefik.http.routers.__APP_NAME__1.tls=true" - "traefik.http.routers.__APP_NAME__1.rule=Host(`__APP_DOMAIN__`)" - "traefik.http.services.__APP_NAME__backend.loadbalancer.server.scheme=http" - "traefik.http.services.__APP_NAME__backend.loadbalancer.server.port=__CONTAINER_PORT__"networks: traefik: external: true â‘£ ç›¸å…³æˆªå›¾ 4. åŽè®° åˆ°è¿™é‡Œï¼Œæˆ‘åšå®¢ç®—æ˜¯èµ°ä¸Šäº†ä¸€ä¸ªæˆ‘è§‰å¾—è¿˜è¡Œçš„ CICD é“è·¯ï¼Œè‡³å°‘ç›®å‰æˆ‘åªéœ€è¦å…³å¿ƒæ–‡ç« å†…å®¹å³å¯ï¼Œå…¶ä»–çš„äº¤ç»™æœºå™¨åŽ»åšå§ã€‚ æŠ˜è…¾ä¹‹æ—…åˆ°è¿™å„¿å°±ç»“æŸäº†ï¼Œæˆ‘æƒ³åº”è¯¥ä¸ä¼šï¼Œæœªæ¥ä¹Ÿä¼šåŽ»å°è¯•æ€§èƒ½æ›´å¥½çš„ hugoï¼Œå¦‚æžœæˆ‘æ‰¾åˆ°ä¸€ä¸ªæˆ‘å–œæ¬¢çš„ä¸»é¢˜çš„è¯ã€‚ æ€»çš„æ¥è¯´ï¼ŒæŠ˜è…¾æ‰æ˜¯æŠ€æœ¯äººæ°¸æ’ä¸å˜çš„ä¹è¶£ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>devops</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¦‚ä½•å®žçŽ°ä¸€ä¸ªä½ è‡ªå·±çš„ RPC æ¡†æž¶ï¼ˆ3ï¼‰]]></title>
    <url>%2F2020%2F05%2F26%2Fhow-to-design-your-own-rpc-framework-3.html</url>
    <content type="text"><![CDATA[å‰è¨€ åœ¨å‰é¢çš„æ–‡ç« ã€Šå¦‚ä½•å®žçŽ°ä¸€ä¸ªä½ è‡ªå·±çš„ RPC æ¡†æž¶ï¼ˆ1ï¼‰ã€‹ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ BIO åŽ»å®žçŽ°äº†ä¸€ä¸ªç®€å•çš„ RPC é€šä¿¡æ¡ˆä¾‹ï¼ŒåŒæ—¶åœ¨ã€Šå¦‚ä½•å®žçŽ°ä¸€ä¸ªä½ è‡ªå·±çš„ RPC æ¡†æž¶ï¼ˆ2ï¼‰ã€‹ä¸­æˆ‘ä»¬å°† BIO æ”¹é€ æˆäº† NIOï¼Œä»Šå¤©æˆ‘ä»¬å°†ä¼šåŸºäºŽç¬¬ä¸€æ¬¡ BIO çš„æ¡ˆä¾‹è¿›è¡Œæ”¹é€ ï¼Œå°† BIO æ”¹é€ ä¸º AIO é€šä¿¡ã€‚ 1. ä»€ä¹ˆæ˜¯ AIO åœ¨ã€Šå¦‚ä½•å®žçŽ°ä¸€ä¸ªä½ è‡ªå·±çš„ RPC æ¡†æž¶ï¼ˆ2ï¼‰ã€‹ä¸­å·²ç»ä»‹ç»äº† BIOã€NIOã€AIOï¼Œä¸çŸ¥é“çš„å°ä¼™ä¼´å¯ä»¥å‰å¾€æŸ¥çœ‹ï¼Œåœ¨æ­¤ä¸åšèµ˜è¿°äº†ã€‚ 2. é€‰åž‹ æœ¬æ–‡å°†é€‰ç”¨å›½äº§ AIO æ¡†æž¶ smart-socket æ¥å®žçŽ° AIO æ”¹é€ ã€‚ 3. å®žæˆ˜ æœ¬æ¬¡ä»£ç æ˜¯åŸºäºŽã€Šå¦‚ä½•å®žçŽ°ä¸€ä¸ªä½ è‡ªå·±çš„ RPC æ¡†æž¶ï¼ˆ1ï¼‰ã€‹è¿›è¡Œé‡æž„çš„ï¼Œå› æ­¤æ¨¡å—åˆ’åˆ†ä¿æŒä¸€è‡´ï¼Œå¯ä»¥åœ¨ä¸Šä¸€æ¬¡çš„åŸºç¡€ä¸Šè¿›è¡Œä¿®æ”¹ã€‚æœ¬æ–‡ä¸ºäº†å‡¸æ˜¾åŒºåˆ«ï¼Œæ¨¡å—åå‡è¿›è¡Œä¿®æ”¹ï¼Œç”± bio å˜æ›´ä¸º aioã€‚ æ¨¡å—åˆ’åˆ†ï¼š 123456rpc-demo-3 â”œâ”€â”€ rpc-client-aio // å®¢æˆ·ç«¯ â”œâ”€â”€ rpc-common-aio // é€šç”¨æ¨¡å—ï¼Œå°è£… RPC è¯·æ±‚å‚æ•° â””â”€â”€ rpc-server-aio // æœåŠ¡ç«¯ â”œâ”€â”€ rpc-server-aio-api //æŽ¥å£å®šä¹‰ â””â”€â”€ rpc-server-aio-provider // æŽ¥å£å®žçŽ° 3.1. ä¿®æ”¹ common æ¨¡å— é¦–å…ˆå¼•å…¥ smart-socket ä¾èµ– 12345678910&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.smartboot.socket&lt;/groupId&gt; &lt;artifactId&gt;aio-core&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.slf4j&lt;/groupId&gt; &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt; &lt;/dependency&gt;&lt;/dependencies&gt; ç„¶åŽåœ¨ common æ¨¡å—ä¸­åˆ›å»ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½éœ€è¦éµå®ˆçš„ç¼–è§£ç åè®® 1234567891011121314151617181920212223242526public class RpcProtocol implements Protocol&lt;byte[]&gt; &#123; private static final int INTEGER_BYTES = Integer.SIZE / Byte.SIZE; /** * å¯¹äºŽä»ŽSocketæµä¸­èŽ·å–åˆ°çš„æ•°æ®é‡‡ç”¨å½“å‰Protocolçš„å®žçŽ°ç±»åè®®è¿›è¡Œè§£æžã€‚ * * @param readBuffer å¾…å¤„ç†çš„è¯»buffer * @param session æœ¬æ¬¡éœ€è¦è§£ç çš„session * @return æœ¬æ¬¡è§£ç æˆåŠŸåŽå°è£…çš„ä¸šåŠ¡æ¶ˆæ¯å¯¹è±¡, è¿”å›žnullåˆ™è¡¨ç¤ºè§£ç æœªå®Œæˆ */ @Override public byte[] decode(ByteBuffer readBuffer, AioSession&lt;byte[]&gt; session) &#123; int remaining = readBuffer.remaining(); if (remaining &lt; INTEGER_BYTES) &#123; return null; &#125; int messageSize = readBuffer.getInt(readBuffer.position()); if (messageSize &gt; remaining) &#123; return null; &#125; byte[] data = new byte[messageSize - INTEGER_BYTES]; readBuffer.getInt(); readBuffer.get(data); return data; &#125;&#125; 3.2. ä¿®æ”¹ rpc-server-aio-provider æ¨¡å— å°†ä¹‹å‰çš„ RpcServer ä¸­çš„ ServerSocket æ”¹é€ ä¸º AioQuickServer 12345678910111213141516public class RpcServer &#123; public void start(Object service, int port) &#123; RpcServerMessageProcessor messageProcessor = new RpcServerMessageProcessor(service); AioQuickServer&lt;byte[]&gt; server = new AioQuickServer&lt;&gt;(port, new RpcProtocol(), messageProcessor); try &#123; server.start(); System.out.println(service + " æœåŠ¡å‘å¸ƒåœ¨ " + port + " ç«¯å£"); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125;&#125; å°†åŽŸå…ˆçš„ RpcRequestHandler é‡å‘½åä¸º RpcServerMessageProcessorï¼ŒåŒæ—¶å®žçŽ° MessageProcessor æŽ¥å£ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990@AllArgsConstructorpublic class RpcServerMessageProcessor implements MessageProcessor&lt;byte[]&gt; &#123; private Object service; /** * å¤„ç†æŽ¥æ”¶åˆ°çš„æ¶ˆæ¯ * * @param session é€šä¿¡ä¼šè¯ * @param msg å¾…å¤„ç†çš„ä¸šåŠ¡æ¶ˆæ¯ */ @Override public void process(AioSession&lt;byte[]&gt; session, byte[] msg) &#123; ObjectInput objectInput = null; ObjectOutput objectOutput = null; try &#123; objectInput = new ObjectInputStream(new ByteArrayInputStream(msg)); RpcRequest rpcRequest = (RpcRequest) objectInput.readObject(); // åå°„è°ƒç”¨ Object invoke = invoke(rpcRequest); // å†™å›žå®¢æˆ·ç«¯ ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream(); objectOutput = new ObjectOutputStream(byteArrayOutputStream); objectOutput.writeObject(invoke); byte[] data = byteArrayOutputStream.toByteArray(); session.writeBuffer().writeInt(data.length + 4); session.writeBuffer().write(data); session.writeBuffer().flush(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; catch (InvocationTargetException e) &#123; e.printStackTrace(); &#125; catch (NoSuchMethodException e) &#123; e.printStackTrace(); &#125; catch (IllegalAccessException e) &#123; e.printStackTrace(); &#125; catch (ClassNotFoundException e) &#123; e.printStackTrace(); &#125; finally &#123; if (objectInput != null) &#123; try &#123; objectInput.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; if (objectOutput != null) &#123; try &#123; objectOutput.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; &#125; &#125; /** * çŠ¶æ€æœºäº‹ä»¶,å½“æžšä¸¾äº‹ä»¶å‘ç”Ÿæ—¶ç”±æ¡†æž¶è§¦å‘è¯¥æ–¹æ³• * * @param session æœ¬æ¬¡è§¦å‘çŠ¶æ€æœºçš„AioSessionå¯¹è±¡ * @param stateMachineEnum çŠ¶æ€æžšä¸¾ * @param throwable å¼‚å¸¸å¯¹è±¡ï¼Œå¦‚æžœå­˜åœ¨çš„è¯ * @see StateMachineEnum */ @Override public void stateEvent(AioSession&lt;byte[]&gt; session, StateMachineEnum stateMachineEnum, Throwable throwable) &#123; &#125; private Object invoke(RpcRequest rpcRequest) throws ClassNotFoundException, NoSuchMethodException, InvocationTargetException, IllegalAccessException &#123; // è¯·æ±‚å‚æ•° Object[] params = rpcRequest.getParams(); // è¯·æ±‚å‚æ•°ç±»åž‹ Class&lt;?&gt;[] paramTypes = new Class[params.length]; for (int i = 0; i &lt; params.length; i++) &#123; paramTypes[i] = params[i].getClass(); &#125; // èŽ·å–è¯·æ±‚çš„ç±»å Class&lt;?&gt; clazz = Class.forName(rpcRequest.getClassName()); // èŽ·å–è¯·æ±‚çš„æ–¹æ³•å Method method = clazz.getMethod(rpcRequest.getMethodName(), paramTypes); // è°ƒç”¨ Object result = method.invoke(service, params); return result; &#125;&#125; æ­¤æ—¶æœåŠ¡ç«¯é‡æž„å°±å®Œæˆäº†~ 3.3. ä¿®æ”¹ rpc-client-aio æ¨¡å— åŽŸå…ˆçš„ RpcTransport æ˜¯é€šè¿‡ Socket åŽ»è¿žæŽ¥ ServerSocketï¼Œè¿™é‡Œæ”¹é€ ä¸º AioQuickClient 12345678910111213141516171819202122232425262728293031323334353637383940@AllArgsConstructorpublic class RpcTransport &#123; private String host; private int port; public Object call(RpcRequest rpcRequest) &#123; // é€šè¿‡ CompletableFuture é˜»å¡žèŽ·å–è¿”å›žç»“æžœ CompletableFuture&lt;Object&gt; waitForResult = new CompletableFuture&lt;&gt;(); RpcClientMessageProcessor messageProcessor = new RpcClientMessageProcessor(waitForResult); AioQuickClient&lt;byte[]&gt; consumer = new AioQuickClient&lt;&gt;(host, port, new RpcProtocol(), messageProcessor); try &#123; consumer.start(); ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream(); ObjectOutput objectOutput = new ObjectOutputStream(byteArrayOutputStream); objectOutput.writeObject(rpcRequest); byte[] data = byteArrayOutputStream.toByteArray(); messageProcessor.getAioSession().writeBuffer().writeInt(data.length + 4); messageProcessor.getAioSession().writeBuffer().write(data); messageProcessor.getAioSession().writeBuffer().flush(); // é˜»å¡ž 3s èŽ·å–è¿”å›žç»“æžœ return waitForResult.get(3, TimeUnit.SECONDS); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; catch (ExecutionException e) &#123; e.printStackTrace(); &#125; catch (TimeoutException e) &#123; e.printStackTrace(); &#125; finally &#123; consumer.shutdown(); &#125; return null; &#125;&#125; åˆ›å»º RpcClientMessageProcessor å®žçŽ° SimpleChannelInboundHandler æŽ¥å£ï¼ŒèŽ·å–æœåŠ¡ç«¯è¿”å›žå€¼ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354@Getterpublic class RpcClientMessageProcessor implements MessageProcessor&lt;byte[]&gt; &#123; private AioSession&lt;byte[]&gt; aioSession; private CompletableFuture&lt;Object&gt; waitForResult; public RpcClientMessageProcessor(CompletableFuture&lt;Object&gt; waitForResult) &#123; this.waitForResult = waitForResult; &#125; /** * å¤„ç†æŽ¥æ”¶åˆ°çš„æ¶ˆæ¯ * * @param session é€šä¿¡ä¼šè¯ * @param msg å¾…å¤„ç†çš„ä¸šåŠ¡æ¶ˆæ¯ */ @Override public void process(AioSession&lt;byte[]&gt; session, byte[] msg) &#123; ObjectInput objectInput = null; try &#123; objectInput = new ObjectInputStream(new ByteArrayInputStream(msg)); // èŽ·å–åˆ°ç»“æžœï¼Œå¹¶é€šçŸ¥ä¸»çº¿ç¨‹èŽ·å–ç»“æžœ waitForResult.complete(objectInput.readObject()); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; finally &#123; if (objectInput != null) &#123; try &#123; objectInput.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; &#125; &#125; /** * çŠ¶æ€æœºäº‹ä»¶,å½“æžšä¸¾äº‹ä»¶å‘ç”Ÿæ—¶ç”±æ¡†æž¶è§¦å‘è¯¥æ–¹æ³• * * @param session æœ¬æ¬¡è§¦å‘çŠ¶æ€æœºçš„AioSessionå¯¹è±¡ * @param stateMachineEnum çŠ¶æ€æžšä¸¾ * @param throwable å¼‚å¸¸å¯¹è±¡ï¼Œå¦‚æžœå­˜åœ¨çš„è¯ * @see StateMachineEnum */ @Override public void stateEvent(AioSession&lt;byte[]&gt; session, StateMachineEnum stateMachineEnum, Throwable throwable) &#123; switch (stateMachineEnum) &#123; case NEW_SESSION: this.aioSession = session; break; &#125; &#125;&#125; æ­¤æ—¶å®¢æˆ·ç«¯ä¹Ÿä¿®æ”¹å®Œæ¯•~ 3.5. æµ‹è¯• å¯ä»¥å’Œä¹‹å‰ä¿æŒä¸€è‡´ï¼Œè¿™é‡Œä¸ºäº†çœ‹å‡ºåŒºåˆ«ï¼Œæˆ‘å°†è¯·æ±‚å‚æ•°ç”± rpc simple demo æ”¹ä¸º rpc aio demo å…ˆè¿è¡Œ ServerMain ç±»ï¼ŒæŸ¥çœ‹æŽ§åˆ¶å°æ—¥å¿—ã€‚ 123456// smart socket çš„ bannerï¼Œçœç•¥äº†ã€‚ã€‚ã€‚ :: smart-socket :: (v1.4.11)smart-socket server started on port 8080,threadNum:16smart-socket server config is IoServerConfig&#123;readBufferSize=512, writeQueueCapacity=16, host='null', monitor=null, port=8080, processor=com.xkcoding.rpc.nio.RpcServerMessageProcessor@f34cad02, protocol=com.xkcoding.rpc.nio.RpcProtocol@6c14ef0a, bannerEnabled=true, socketOptions=null, threadNum=16, writeBufferSize=128&#125;com.xkcoding.rpc.nio.HelloServiceImpl@ecadb3cc æœåŠ¡å‘å¸ƒåœ¨ 8080 ç«¯å£request is coming: rpc aio demo å†è¿è¡Œ ClientMain ç±»ï¼ŒæŸ¥çœ‹æŽ§åˆ¶å°æ—¥å¿—ã€‚ 12éœ€è¦åŠ¨æ€ä»£ç†ç”Ÿæˆè¯·æ±‚å¯¹è±¡content = hello rpc aio demo 4. æ€»ç»“ æœ¬æ–‡ä¸»è¦æ˜¯å°†åŽŸå…ˆçš„ BIO å®žçŽ°æ”¹é€ ä¸º AIO å®žçŽ°ï¼Œä¸»è¦æ˜¯åŸºäºŽ smart-socket é‡æž„ç½‘ç»œé€šä¿¡éƒ¨åˆ†ã€‚ å› ä¸º AIO ç›®å‰åº”ç”¨ä»ç„¶ä¸æ˜¯ååˆ†å¹¿æ³›ï¼Œå› æ­¤åŽç»­ RPC çš„æ”¹é€ ä¼šåœ¨ NIO çš„åŸºç¡€ä¸Šæ¬¡è¿›è¡Œä¼˜åŒ–ã€‚æ•¬è¯·æœŸå¾…~ å‚è€ƒ smart-socket ä½¿ç”¨æ‰‹å†Œï¼šhttps://smartboot.gitee.io/book/smart-socket/ ç¤ºä¾‹ä»£ç  https://github.com/xkcoding/practice_demo/tree/master/rpc-demo-3]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>rpc</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>rpc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¦‚ä½•å®žçŽ°ä¸€ä¸ªä½ è‡ªå·±çš„ RPC æ¡†æž¶ï¼ˆ2ï¼‰]]></title>
    <url>%2F2020%2F05%2F11%2Fhow-to-design-your-own-rpc-framework-2.html</url>
    <content type="text"><![CDATA[å‰è¨€ åœ¨ä¸Šä¸€ç¯‡ã€Šå¦‚ä½•å®žçŽ°ä¸€ä¸ªä½ è‡ªå·±çš„ RPC æ¡†æž¶ï¼ˆ1ï¼‰ã€‹ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ BIO åŽ»å®žçŽ°äº†ä¸€ä¸ªç®€å•çš„ RPC é€šä¿¡æ¡ˆä¾‹ï¼Œä»Šå¤©æˆ‘ä»¬å°†ä¼šåŸºäºŽä¸Šæ¬¡çš„æ¡ˆä¾‹è¿›è¡Œæ”¹é€ ï¼Œå°†é€šä¿¡ç”± BIO æ”¹é€ ä¸º NIOã€‚ 1. ä»€ä¹ˆæ˜¯ NIO è¯´åˆ° NIOï¼Œå°±éœ€è¦ä¸€èµ·èŠèŠå®ƒçš„ä¿©å…„å¼Ÿï¼ŒBIO ä»¥åŠ AIOã€‚ BIOï¼šBlocking IOï¼ŒåŒæ­¥é˜»å¡ž IOã€‚ç®€å•çš„è¯´å°±æ˜¯æœåŠ¡ç«¯åˆ›å»ºä¸€ä¸ª ServerSocketï¼Œå®¢æˆ·ç«¯é€šè¿‡ Socket åŽ»è¿žæŽ¥ ServerSocketï¼ŒæœåŠ¡ç«¯ä¼šé€šè¿‡ accept åŽ»é˜»å¡žç­‰å¾…å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚BIO å­˜åœ¨ä¸€ä¸ªååˆ†æ˜Žæ˜¾çš„é—®é¢˜ï¼Œå°±æ˜¯æ¯å½“å­˜åœ¨ä¸€ä¸ªå®¢æˆ·ç«¯è¿žæŽ¥æœåŠ¡ç«¯æ—¶ï¼ŒæœåŠ¡ç«¯éƒ½ä¼šå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œä¸“é—¨çš„åŽ»æœåŠ¡è¿™ä¸ªå®¢æˆ·ç«¯ï¼Œè¿™å°†å¯¼è‡´å¦‚æžœå‡ºçŽ°å¤§é‡çš„å®¢æˆ·ç«¯è¿žæŽ¥æ—¶ï¼ŒæœåŠ¡ç«¯å°†ä¼šäº§ç”Ÿå¤§é‡çš„çº¿ç¨‹å¼€é”€ï¼Œå¯¼è‡´å´©æºƒã€‚ï¼ˆå› æ­¤ï¼Œåœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬åœ¨æœåŠ¡ç«¯ä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹å¼‚æ­¥çš„åŽ»å¤„ç†è¿™äº›è¯·æ±‚ï¼Œå°½é‡å¢žå¤§æœåŠ¡ç«¯æ¯ä¸ªçº¿ç¨‹å¯ä»¥å¤„ç†çš„è¯·æ±‚æ•°ï¼Œæ¥è¾¾åˆ°ç•¥å¾®ä¼˜åŒ–çš„ç›®çš„ã€‚ï¼‰ NIOï¼šNonBlocking IOï¼ŒåŒæ­¥éžé˜»å¡ž IOã€‚åœ¨ Java 1.4 ä¸­å¼•å…¥ï¼ŒNIO æ˜¯åŸºäºŽ Reactor æ¨¡åž‹ã€‚NIO ä¸­å¼•å…¥äº† Selectorã€Channelã€Buffer ç­‰æ¦‚å¿µã€‚Bufferï¼ˆç¼“å†²åŒºï¼‰ä¸»è¦ç”¨æ¥å­˜ã€å–æ•°æ®ï¼ŒChannelï¼ˆé€šé“ï¼‰ä¸€ä¸ª Channel å¯¹åº”ä¸€ä¸ªå®¢æˆ·ç«¯ï¼ŒSelectorï¼ˆè°ƒåº¦å™¨ï¼‰ä¸æ–­è½®è¯¢ Channelï¼Œå¤„ç† Channel å‘ç”Ÿçš„äº‹ä»¶ã€‚åœ¨ NIO æ¨¡åž‹ä¸­ï¼Œåªæœ‰å½“å®¢æˆ·ç«¯å‘ç”Ÿä¸€æ¬¡è¯·æ±‚æ—¶ï¼Œæ‰ä¼šåˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œè¯·æ±‚ç»“æŸï¼Œçº¿ç¨‹é”€æ¯ï¼Œç›¸æ¯”äºŽ BIO æ¨¡åž‹ä¸€ä¸ªçº¿ç¨‹ä¸€ç›´é˜»å¡žç­‰å¾…ä¸€ä¸ªå®¢æˆ·ç«¯æ‰€æœ‰è¯·æ±‚è€Œè¨€ï¼Œå‡å°‘äº†çº¿ç¨‹çš„å¼€é”€ã€‚NIO çš„æ ¸å¿ƒæ˜¯åŒæ­¥éžé˜»å¡žï¼Œæ— è®ºå¤šå°‘å®¢æˆ·ç«¯éƒ½å¯ä»¥æŽ¥å…¥æœåŠ¡ç«¯ï¼Œå®¢æˆ·ç«¯æŽ¥å…¥å¹¶ä¸ä¼šè€—è´¹ä¸€ä¸ªçº¿ç¨‹ï¼Œåªä¼šåˆ›å»ºä¸€ä¸ªè¿žæŽ¥ç„¶åŽæ³¨å†Œåˆ° Selector ä¸ŠåŽ»ï¼Œä¸€ä¸ª Selector çº¿ç¨‹ä¸æ–­çš„è½®è¯¢æ‰€æœ‰çš„ Socket è¿žæŽ¥ï¼Œå‘çŽ°æœ‰æ–°çš„äº‹ä»¶å°±è§¦å‘é€šçŸ¥ï¼Œç„¶åŽå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ä¸“é—¨å¤„ç†ä¸€ä¸ªè¯·æ±‚å³å¯ï¼Œå¤„ç†å®Œæ¯•é‡Šæ”¾çº¿ç¨‹ï¼Œä½†æ˜¯è¿™ä¸ªå¤„ç†çš„è¿‡ç¨‹ä¸­ï¼Œè¦å…ˆè¯»å–æ•°æ®ã€å¤„ç†æ•°æ®ã€å†è¿”å›žæ•°æ®ï¼Œè¿™æ˜¯ä¸ªåŒæ­¥çš„è¿‡ç¨‹ã€‚ AIOï¼šAsynchronous NonBlocking IOï¼Œå¼‚æ­¥éžé˜»å¡ž IOã€‚AIO æ˜¯åŸºäºŽ Proactor æ¨¡åž‹çš„ã€‚åœ¨ NIO æ¨¡åž‹ä¸­ï¼Œå·¥ä½œçº¿ç¨‹ä»Ž Channel ä¸­è¯»å†™æ•°æ®æ˜¯åŒæ­¥çš„ã€‚ä½†æ˜¯åœ¨ AIO ä¸­ï¼Œæ¯ä¸ªè¿žæŽ¥è¯·æ±‚ä¼šç»‘å®šä¸€ä¸ª Bufferï¼Œç„¶åŽé€šè¿‡æ“ä½œç³»ç»Ÿå¼‚æ­¥åŽ»å®Œæˆï¼Œç­‰æ“ä½œç³»ç»Ÿå®Œæˆä¹‹åŽï¼Œä¼šè§¦å‘ä¸€ä¸ªå›žè°ƒé€šçŸ¥ä½ å®Œæˆäº†ã€‚ 2. é€‰åž‹ åœ¨ Java 1.4 å°±å¼•å…¥äº† NIOï¼Œä½†æ˜¯åŸºäºŽåŽŸç”Ÿçš„ API æ“ä½œæ¯”è¾ƒç¹çï¼Œå› æ­¤æœ¬æ–‡ä¸ä¼šä½¿ç”¨åŽŸç”Ÿ API æ¥é‡æž„ä¹‹å‰çš„ RPC æ¡ˆä¾‹ã€‚ Netty æ˜¯ä¸€æ¬¾åŸºäºŽ NIO å¼€å‘çš„é«˜æ€§èƒ½ç½‘ç»œé€šä¿¡æ¡†æž¶ï¼ŒåŒæ—¶æ”¯æŒè‡ªå®šä¹‰é€šä¿¡åè®®ã€‚ä¸‹å›¾æ˜¯ Netty å®˜ç½‘çš„ä¸€å¼  Netty ç»„ä»¶å›¾ã€‚ æœ¬æ–‡å°†ä½¿ç”¨ Netty åŽ»é‡æž„ä¹‹å‰çš„ RPC æ¡ˆä¾‹ã€‚ 3. å®žæˆ˜ æœ¬æ¬¡ä»£ç æ˜¯åŸºäºŽã€Šå¦‚ä½•å®žçŽ°ä¸€ä¸ªä½ è‡ªå·±çš„ RPC æ¡†æž¶ï¼ˆ1ï¼‰ã€‹è¿›è¡Œé‡æž„çš„ï¼Œå› æ­¤æ¨¡å—åˆ’åˆ†ä¿æŒä¸€è‡´ï¼Œå¯ä»¥åœ¨ä¸Šä¸€æ¬¡çš„åŸºç¡€ä¸Šè¿›è¡Œä¿®æ”¹ã€‚æœ¬æ–‡ä¸ºäº†å‡¸æ˜¾åŒºåˆ«ï¼Œæ¨¡å—åå‡è¿›è¡Œä¿®æ”¹ï¼Œç”± bio å˜æ›´ä¸º nioã€‚ æ¨¡å—åˆ’åˆ†ï¼š 123456rpc-demo-2 â”œâ”€â”€ rpc-client-nio // å®¢æˆ·ç«¯ â”œâ”€â”€ rpc-common-nio // é€šç”¨æ¨¡å—ï¼Œå°è£… RPC è¯·æ±‚å‚æ•° â””â”€â”€ rpc-server-nio // æœåŠ¡ç«¯ â”œâ”€â”€ rpc-server-nio-api //æŽ¥å£å®šä¹‰ â””â”€â”€ rpc-server-nio-provider // æŽ¥å£å®žçŽ° 3.1. ä¿®æ”¹ RpcServer å°†ä¹‹å‰çš„ ServerSocket æ”¹é€ ä¸º Netty çš„ ServerBootstrap 123456789101112131415161718192021222324252627282930public class RpcServer &#123; public void start(Object service, int port) &#123; ServerBootstrap serverBootstrap = new ServerBootstrap(); EventLoopGroup bossGroup = new NioEventLoopGroup(); EventLoopGroup workerGroup = new NioEventLoopGroup(); serverBootstrap.group(bossGroup, workerGroup).channel(NioServerSocketChannel.class) .childHandler(new ChannelInitializer&lt;SocketChannel&gt;() &#123; @Override protected void initChannel(SocketChannel socketChannel) throws Exception &#123; socketChannel.pipeline() .addLast(new ObjectDecoder(Integer.MAX_VALUE, ClassResolvers.cacheDisabled(null))) .addLast(new ObjectEncoder()) // è‡ªå®šä¹‰å¤„ç†å™¨ .addLast(new RpcRequestServerHandler(service)); &#125; &#125;); try &#123; serverBootstrap.bind(port).sync(); System.out.println(service + " æœåŠ¡å‘å¸ƒåœ¨ " + port + " ç«¯å£"); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125;&#125; 3.2. ä¿®æ”¹ RpcRequestHandler å°†åŽŸå…ˆçš„ RpcRequestHandler é‡å‘½åä¸º RpcRequestServerHandlerï¼ŒåŒæ—¶å®žçŽ° SimpleChannelInboundHandler æŽ¥å£ 12345678910111213141516171819202122232425262728293031323334@AllArgsConstructorpublic class RpcRequestServerHandler extends SimpleChannelInboundHandler&lt;RpcRequest&gt; &#123; private Object service; @Override protected void channelRead0(ChannelHandlerContext channelHandlerContext, RpcRequest rpcRequest) throws Exception &#123; // åå°„è°ƒç”¨ Object invoke = invoke(rpcRequest); channelHandlerContext.writeAndFlush(invoke).addListener(ChannelFutureListener.CLOSE); &#125; private Object invoke(RpcRequest rpcRequest) throws ClassNotFoundException, NoSuchMethodException, InvocationTargetException, IllegalAccessException &#123; // è¯·æ±‚å‚æ•° Object[] params = rpcRequest.getParams(); // è¯·æ±‚å‚æ•°ç±»åž‹ Class&lt;?&gt;[] paramTypes = new Class[params.length]; for (int i = 0; i &lt; params.length; i++) &#123; paramTypes[i] = params[i].getClass(); &#125; // èŽ·å–è¯·æ±‚çš„ç±»å Class&lt;?&gt; clazz = Class.forName(rpcRequest.getClassName()); // èŽ·å–è¯·æ±‚çš„æ–¹æ³•å Method method = clazz.getMethod(rpcRequest.getMethodName(), paramTypes); // è°ƒç”¨ Object result = method.invoke(service, params); return result; &#125;&#125; æ­¤æ—¶æœåŠ¡ç«¯é‡æž„å°±å®Œæˆäº†~ 3.3. ä¿®æ”¹ RpcTransport åŽŸå…ˆçš„ RpcTransport æ˜¯é€šè¿‡ Socket åŽ»è¿žæŽ¥ ServerSocketï¼Œè¿™é‡Œæ”¹é€ ä¸º Netty çš„ Bootstrap å½¢å¼ 1234567891011121314151617181920212223242526272829303132333435363738394041@AllArgsConstructorpublic class RpcTransport &#123; private String host; private int port; public Object call(RpcRequest rpcRequest) &#123; Bootstrap bootstrap = new Bootstrap(); EventLoopGroup eventGroup = new NioEventLoopGroup(); RpcRequestClientHandler rpcRequestClientHandler = new RpcRequestClientHandler(); bootstrap.group(eventGroup).channel(NioSocketChannel.class).handler(new ChannelInitializer&lt;SocketChannel&gt;() &#123; @Override protected void initChannel(SocketChannel socketChannel) throws Exception &#123; socketChannel.pipeline() .addLast(new ObjectDecoder(Integer.MAX_VALUE, ClassResolvers.cacheDisabled(null))) .addLast(new ObjectEncoder()) // æ·»åŠ è‡ªå®šä¹‰å¤„ç†å™¨ .addLast(rpcRequestClientHandler); &#125; &#125;).option(ChannelOption.TCP_NODELAY, true); try &#123; ChannelFuture channelFuture = bootstrap.connect(host, port).sync(); // å‘é€ RPC è¯·æ±‚å‚æ•° channelFuture.channel().writeAndFlush(rpcRequest).sync(); // ç­‰å¾…è¿žæŽ¥å…³é—­ channelFuture.channel().closeFuture().sync(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; finally &#123; eventGroup.shutdownGracefully(); &#125; return rpcRequestClientHandler.getResult(); &#125;&#125; 3.4. åˆ›å»º RpcRequestClientHandler å®žçŽ° SimpleChannelInboundHandler æŽ¥å£ï¼ŒèŽ·å–æœåŠ¡ç«¯è¿”å›žå€¼ 1234567891011121314151617@Getterpublic class RpcRequestClientHandler extends SimpleChannelInboundHandler&lt;Object&gt; &#123; private Object result; @Override protected void channelRead0(ChannelHandlerContext ctx, Object msg) throws Exception &#123; this.result = msg; &#125; @Override public void exceptionCaught(ChannelHandlerContext ctx, Throwable cause) throws Exception &#123; System.out.println("è°ƒç”¨å‡ºçŽ°å¼‚å¸¸ï¼š" + cause); ctx.close(); &#125;&#125; æ­¤æ—¶å®¢æˆ·ç«¯ä¹Ÿä¿®æ”¹å®Œæ¯•~ 3.5. æµ‹è¯• å¯ä»¥å’Œä¹‹å‰ä¿æŒä¸€è‡´ï¼Œè¿™é‡Œä¸ºäº†çœ‹å‡ºåŒºåˆ«ï¼Œæˆ‘å°†è¯·æ±‚å‚æ•°ç”± rpc simple demo æ”¹ä¸º rpc nio demo å…ˆè¿è¡Œ ServerMain ç±»ï¼ŒæŸ¥çœ‹æŽ§åˆ¶å°æ—¥å¿—ã€‚ 12com.xkcoding.rpc.nio.HelloServiceImpl@5ab35abe æœåŠ¡å‘å¸ƒåœ¨ 8080 ç«¯å£request is coming: rpc nio demo å†è¿è¡Œ ClientMain ç±»ï¼ŒæŸ¥çœ‹æŽ§åˆ¶å°æ—¥å¿—ã€‚ 12éœ€è¦åŠ¨æ€ä»£ç†ç”Ÿæˆè¯·æ±‚å¯¹è±¡content = hello rpc nio demo 4. æ€»ç»“ æœ¬æ–‡ä¸»è¦æ˜¯å°†åŽŸå…ˆçš„ BIO å®žçŽ°æ”¹é€ ä¸º NIO å®žçŽ°ï¼Œä¸»è¦æ˜¯åŸºäºŽ Netty é‡æž„ç½‘ç»œé€šä¿¡éƒ¨åˆ†ã€‚ ä½†æ˜¯ Netty çš„ç²¾é«“è¿œä¸æ­¢äºŽæ­¤ï¼Œæœ¬æ–‡åªæ˜¯ç²—æµ…çš„ä½¿ç”¨ Hello World è€Œå·²ã€‚ ç¤ºä¾‹ä»£ç  https://github.com/xkcoding/practice_demo/tree/master/rpc-demo-2]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>rpc</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>rpc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¦‚ä½•å®žçŽ°ä¸€ä¸ªä½ è‡ªå·±çš„ RPC æ¡†æž¶ï¼ˆ1ï¼‰]]></title>
    <url>%2F2020%2F04%2F20%2Fhow-to-design-your-own-rpc-framework-1.html</url>
    <content type="text"><![CDATA[å‰è¨€ RPCï¼Œå…¨ç§°ï¼šRemote Procedure Callï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯ï¼šè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ã€‚ä¸»è¦ç”¨æ¥åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œè§£å†³ä¸åŒç³»ç»Ÿé—´çš„æœåŠ¡è°ƒç”¨é—®é¢˜ã€‚RPC ä¸ä»…è¦è®©å®žçŽ°æœåŠ¡é—´çš„é€šä¿¡ï¼Œè¿˜æœ‰ä¸€ç‚¹å°±æ˜¯è¦è®©ç”¨æˆ·åœ¨è¿œç¨‹è°ƒç”¨çš„è¿‡ç¨‹ä¸­åƒæ˜¯åœ¨æœ¬åœ°è°ƒç”¨ä¸€æ ·æ–¹ä¾¿ã€‚å¦‚ä½•å®žçŽ°ä¸€ä¸ªç®€æ˜“çš„ RPC é€šä¿¡å‘¢ï¼Ÿè¿™ä¸ªç³»åˆ—çš„æ–‡ç« å°†ä¼šä¸€ä¸€è§£ç­”ã€‚ 1. è®¾è®¡ é¦–å…ˆæˆ‘ä»¬çœ‹çœ‹æœ¬åœ°è°ƒç”¨çš„æµç¨‹ï¼Œæœ¬åœ°è°ƒç”¨ï¼Œæˆ‘ä»¬ç›¸å½“äºŽæ˜¯ç›´æŽ¥é€šè¿‡ new çš„æ–¹å¼åŽ»åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åŽè°ƒç”¨å¯¹è±¡çš„æ–¹æ³•åŽ»èŽ·å–æ•°æ®ã€‚ å¦‚æžœæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿï¼ŒæœåŠ¡è°ƒç”¨æ–¹å’ŒæœåŠ¡æä¾›æ–¹ï¼Œåˆ†å¸ƒåœ¨ä¸åŒçš„æœåŠ¡ä¸Šï¼Œæ­¤æ—¶è°ƒç”¨å…³ç³»å°±å˜æˆäº†è¿™æ ·å­ï¼Œæˆ‘ä»¬å°†è°ƒç”¨æ–¹å’Œæä¾›æ–¹åˆ†åˆ«ç”¨ client å’Œ server ä»£æ›¿ã€‚ æ—¢ç„¶æ˜¯è¿œç¨‹è°ƒç”¨ï¼Œå¿…ç„¶æ¶‰åŠåˆ° IO é€šä¿¡ã€ä¼ è¾“å†…å®¹åºåˆ—åŒ– / ååºåˆ—åŒ– ç­‰æŠ€æœ¯ã€‚ IO é€šä¿¡åˆ†ä¸º BIOã€NIOã€AIO åºåˆ—åŒ–åˆåˆ†ä¸º JDK è‡ªå¸¦çš„åºåˆ—åŒ–æœºåˆ¶ã€XMLã€JSONã€äºŒè¿›åˆ¶ç­‰ç­‰ XML Jsonï¼šjacksonã€fastjsonã€Gson äºŒè¿›åˆ¶æ–¹å¼ï¼šhessianã€avroã€kyroã€protobuf å„åºåˆ—åŒ–æ–¹å¼æ€§èƒ½æ¯”è¾ƒï¼šhttps://github.com/eishay/jvm-serializers/wiki æœ¬æ–‡æ˜¯ RPC ç³»åˆ—æ–‡ç« çš„ç¬¬ä¸€ç¯‡ï¼Œå°†ä¼šä½¿ç”¨æœ€ç®€å•çš„ BIOã€jdk è‡ªå¸¦çš„åºåˆ—åŒ–æœºåˆ¶ï¼Œå®žçŽ°ä¸€ä¸ªç®€æ˜“çš„ RPCã€‚åŽç»­çš„æ–‡ç« ï¼Œå°†ä¼šåœ¨è¿™ä¸€ç¯‡çš„åŸºç¡€ä¸Šå¯¹ RPC è¿›è¡Œä¼˜åŒ–å‡çº§æ”¹é€ ã€‚ 2. å®žæˆ˜ æ¨¡å—ç»“æž„ï¼š 123456rpc-demo-1 â”œâ”€â”€ rpc-client-bio // å®¢æˆ·ç«¯ â”œâ”€â”€ rpc-common-bio // é€šç”¨æ¨¡å—ï¼Œå°è£… RPC è¯·æ±‚å‚æ•° â””â”€â”€ rpc-server-bio // æœåŠ¡ç«¯ â”œâ”€â”€ rpc-server-bio-api //æŽ¥å£å®šä¹‰ â””â”€â”€ rpc-server-bio-provider // æŽ¥å£å®žçŽ° 2.1. å®šä¹‰ API é¦–å…ˆæˆ‘ä»¬åœ¨ rpc-server-bio-api æ¨¡å—ä¸‹å®šä¹‰è¿œç¨‹è°ƒç”¨çš„æŽ¥å£ã€‚ 123public interface IHelloService &#123; String sayHello(String content);&#125; 2.2. å®žçŽ° API ç„¶åŽæˆ‘ä»¬åœ¨ rpc-server-bio-provider ä¸­å¼•å…¥ rpc-server-bio-api è¿™ä¸ªæ¨¡å—ï¼Œç„¶åŽå®žçŽ° IHelloServiceã€‚ 123456789public class HelloServiceImpl implements IHelloService &#123; @Override public String sayHello(String content) &#123; System.out.println("request is coming: " + content); return "hello " + content; &#125;&#125; 2.3. RpcServer å®žçŽ° RPC æœåŠ¡æä¾›æ–¹æš´éœ²æœåŠ¡ï¼Œæ—¢ç„¶æ˜¯æä¾›æ–¹ï¼Œè‚¯å®šä¹Ÿæ˜¯åœ¨ rpc-server-bio-provider æ¨¡å—å®žçŽ°ã€‚ 1234567891011121314151617181920212223public class RpcServer &#123; // é˜¿é‡Œ P3C ä¸å»ºè®®ç›´æŽ¥è°ƒç”¨ Executorsï¼Œæ­¤å¤„ä¸ºäº†å·æ‡’ private final ExecutorService executorService = Executors.newCachedThreadPool(); public void start(Object service, int port) &#123; try (ServerSocket serverSocket = new ServerSocket(port)) &#123; System.out.println(service + " æœåŠ¡å‘å¸ƒåœ¨ " + port + " ç«¯å£"); while (true) &#123; // ä¸æ–­é˜»å¡žï¼Œç­‰å¾…è¯·æ±‚ Socket socket = serverSocket.accept(); // é€šè¿‡çº¿ç¨‹æ± å¼‚æ­¥å¤„ç†ï¼Œæå‡æ€§èƒ½ executorService.execute(new RpcRequestHandler(socket, service)); &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125;&#125; çœŸæ­£çš„å¤„ç†é€»è¾‘æ˜¯é€šè¿‡çº¿ç¨‹å¼‚æ­¥å¤„ç†çš„ï¼Œè¿™æ ·çš„åšæ³•æ˜¯å¯ä»¥æå‡æœåŠ¡ç«¯æ€§èƒ½ã€‚ å¤„ç†é€»è¾‘äº¤ç»™ RpcRequestHandler åŽ»å®žçŽ°ã€‚ä¸»è¦å®žçŽ°æ€è·¯å°±æ˜¯èŽ·å– socket ä¼ è¿‡æ¥çš„å‚æ•°ï¼Œé€šè¿‡åå°„è°ƒç”¨æœ¬åœ°å¯¹è±¡çš„æ–¹æ³•ï¼Œæ‹¿åˆ°è¿”å›žç»“æžœä¹‹åŽï¼Œå†é€šè¿‡ socket å†™ä¼šå®¢æˆ·ç«¯å³å¯ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081@AllArgsConstructorpublic class RpcRequestHandler implements Runnable &#123; private Socket socket; private Object service; @Override public void run() &#123; ObjectInputStream ois = null; ObjectOutputStream oos = null; try &#123; ois = new ObjectInputStream(socket.getInputStream()); // æ ¹æ®è¾“å…¥æµæ‹¿åˆ° RpcRequest RpcRequest rpcRequest = (RpcRequest) ois.readObject(); // åå°„è°ƒç”¨æœ¬åœ°æœåŠ¡ Object result = invoke(rpcRequest); oos = new ObjectOutputStream(socket.getOutputStream()); // é€šè¿‡è¾“å‡ºæµè¾“å‡ºç»“æžœ oos.writeObject(result); oos.flush(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; catch (ClassNotFoundException e) &#123; e.printStackTrace(); &#125; catch (NoSuchMethodException e) &#123; e.printStackTrace(); &#125; catch (IllegalAccessException e) &#123; e.printStackTrace(); &#125; catch (InvocationTargetException e) &#123; e.printStackTrace(); &#125; finally &#123; if (ois != null) &#123; try &#123; ois.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; if (oos != null) &#123; try &#123; oos.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; &#125; &#125; private Object invoke(RpcRequest rpcRequest) throws ClassNotFoundException, NoSuchMethodException, InvocationTargetException, IllegalAccessException &#123; // è¯·æ±‚å‚æ•° Object[] params = rpcRequest.getParams(); // è¯·æ±‚å‚æ•°ç±»åž‹ Class&lt;?&gt;[] paramTypes = new Class[params.length]; for (int i = 0; i &lt; params.length; i++) &#123; paramTypes[i] = params[i].getClass(); &#125; // èŽ·å–è¯·æ±‚çš„ç±»å Class&lt;?&gt; clazz = Class.forName(rpcRequest.getClassName()); // èŽ·å–è¯·æ±‚çš„æ–¹æ³•å Method method = clazz.getMethod(rpcRequest.getMethodName(), paramTypes); // è°ƒç”¨ Object result = method.invoke(service, params); return result; &#125;&#125; 2.4. RpcRequest ä¸Šè¿°ä»£ç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬è°ƒç”¨ä¸€ä¸ª RPCï¼Œéœ€è¦çŸ¥é“ç±»åã€æ–¹æ³•åã€è¯·æ±‚å‚æ•°è¿™äº›ä¿¡æ¯ï¼Œå› æ­¤æˆ‘å°è£…äº† RpcRequest ç±»åŽ»ä¿å­˜è¿™äº›ä¿¡æ¯ã€‚è¿™ä¸ªå¯¹è±¡åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½éœ€è¦ç”¨åˆ°ï¼Œå› æ­¤ï¼Œæ”¾åœ¨ rpc-common-bio æ¨¡å—ä¸­ã€‚åŒæ—¶åœ¨ rpc-server-bio-provider ä¸­å¼•å…¥ rpc-common-bio æ¨¡å—ã€‚ 12345678910@Datapublic class RpcRequest implements Serializable &#123; private String className; private String methodName; private Object[] params;&#125; 2.5. RpcClient æ—¢ç„¶ RPC æ˜¯è§£å†³æœåŠ¡é—´çš„è¿œç¨‹è°ƒç”¨ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯è‚¯å®šä¹Ÿå¿…é¡»çŸ¥é“è‡ªå·±éœ€è¦è°ƒç”¨å“ªä¸ªå†…å®¹ï¼Œåªæ˜¯å…·ä½“å†…å®¹çš„å®žçŽ°äº¤ç»™æœåŠ¡ç«¯è€Œå·²ã€‚å› æ­¤ï¼Œåœ¨ rpc-client-bio æ¨¡å—ä¸­éœ€è¦å¼•å…¥ rpc-server-bio-api èŽ·å–æŽ¥å£å®šä¹‰ï¼ŒåŒæ—¶ä¹Ÿéœ€è¦å¼•å…¥ rpc-common-bio ç”¨æ¥å°è£… RPC è¯·æ±‚ã€‚ Java ä¸­æŽ¥å£æ˜¯ä¸å¯ä»¥å®žä¾‹åŒ–çš„ï¼Œä½†æ˜¯æˆ‘ä»¬æƒ³è¦è®©ç”¨æˆ·å¯¹ RPC çš„è¿‡ç¨‹æ— æ„ŸçŸ¥ï¼Œé‚£ä¹ˆè°ƒç”¨çš„æ–¹å¼æœ€å¥½å’Œæœ¬åœ°è°ƒç”¨ä¸€æ ·ï¼Œå¯ä»¥é€šè¿‡ Object.method çš„å½¢å¼èŽ·å–ç»“æžœã€‚æ­¤æ—¶åŠ¨æ€ä»£ç†ï¼Œå°±æˆäº†æœ€ä½³çš„è§£å†³æ–¹æ¡ˆã€‚ 12345678910111213141516public class RpcClient &#123; /** * åŠ¨æ€ä»£ç† * @param interfaceClass æŽ¥å£ç±» * @param host IP * @param port ç«¯å£ * @param &lt;T&gt; ä»£ç†å¯¹è±¡ç±»åž‹ * @return ä»£ç†å¯¹è±¡ */ public &lt;T&gt; T proxy(Class&lt;T&gt; interfaceClass, String host, int port) &#123; return (T) Proxy.newProxyInstance(interfaceClass.getClassLoader(), new Class[] &#123; interfaceClass &#125;, new RemoteInvocationHandler(host, port)); &#125;&#125; 2.6. RemoteInvocationHandler JDK æä¾›äº† Proxy.newProxyInstance çš„æ–¹æ³•å¯ä»¥åŠ¨æ€ä»£ç†å¯¹è±¡ï¼Œå…·ä½“çš„æ‰§è¡Œé€»è¾‘æ”¾åœ¨ RemoteInvocationHandler ä¸­ï¼ŒRemoteInvocationHandler æ˜¯å®žçŽ° InvocationHandler æŽ¥å£ï¼Œå…·ä½“æ‰§è¡Œçš„æ—¶å€™ï¼Œä¼šèµ°åˆ°è¯¥ç±»çš„ invoke æ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦åœ¨ invoke æ–¹æ³•é‡Œè¿›è¡Œè¿œç¨‹è°ƒç”¨å³å¯ã€‚ 1234567891011121314151617181920212223@AllArgsConstructorpublic class RemoteInvocationHandler implements InvocationHandler &#123; private String host; private int port; @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123; System.out.println("éœ€è¦åŠ¨æ€ä»£ç†ç”Ÿæˆè¯·æ±‚å¯¹è±¡"); // æž„å»º RpcRequest RpcRequest rpcRequest = new RpcRequest(); rpcRequest.setClassName(method.getDeclaringClass().getName()); rpcRequest.setMethodName(method.getName()); rpcRequest.setParams(args); // è¿œç¨‹è°ƒç”¨ RpcTransport rpcTransport = new RpcTransport(host, port); Object result = rpcTransport.call(rpcRequest); return result; &#125;&#125; 2.7. RpcTransport è¿œç¨‹è°ƒç”¨ï¼Œè¿™é‡Œæˆ‘ä¹Ÿåšäº†ä¸€å±‚å°è£…ï¼Œè¿œç¨‹è°ƒç”¨çš„è¿‡ç¨‹é€šè¿‡ RpcTransport åŽ»æ‰§è¡Œ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253@AllArgsConstructorpublic class RpcTransport &#123; private String host; private int port; public Object call(RpcRequest rpcRequest) &#123; Object result = null; ObjectInputStream ois = null; ObjectOutputStream oos = null; try (Socket socket = new Socket(host, port);) &#123; oos = new ObjectOutputStream(socket.getOutputStream()); // åºåˆ—åŒ– oos.writeObject(rpcRequest); oos.flush(); ois = new ObjectInputStream(socket.getInputStream()); // èŽ·å–æœåŠ¡ç«¯è¿”å›žç»“æžœ result = ois.readObject(); &#125; catch (UnknownHostException e) &#123; e.printStackTrace(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; catch (ClassNotFoundException e) &#123; e.printStackTrace(); &#125; finally &#123; if (ois != null) &#123; try &#123; ois.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; if (oos != null) &#123; try &#123; oos.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; &#125; return result; &#125;&#125; 2.8. æµ‹è¯•ç±» æœåŠ¡ç«¯æµ‹è¯• 12345678910public class ServerMain &#123; public static void main(String[] args) &#123; IHelloService helloService = new HelloServiceImpl(); RpcServer rpcServer = new RpcServer(); rpcServer.start(helloService, 8080); &#125;&#125; å®¢æœç«¯æµ‹è¯• 12345678910public class ClientMain &#123; public static void main(String[] args) &#123; RpcClient rpcClient = new RpcClient(); IHelloService helloService = rpcClient.proxy(IHelloService.class, "0.0.0.0", 8080); String content = helloService.sayHello("rpc simple demo"); System.out.println("content = " + content); &#125;&#125; 2.9. æµ‹è¯•ç»“æžœ å…ˆè¿è¡Œ ServerMain ç±»ï¼ŒæŸ¥çœ‹æŽ§åˆ¶å°æ—¥å¿—ã€‚ 12com.xkcoding.rpc.HelloServiceImpl@7b019026 æœåŠ¡å‘å¸ƒåœ¨ 8080 ç«¯å£request is coming: rpc simple demo å†è¿è¡Œ ClientMain ç±»ï¼ŒæŸ¥çœ‹æŽ§åˆ¶å°æ—¥å¿—ã€‚ 12éœ€è¦åŠ¨æ€ä»£ç†ç”Ÿæˆè¯·æ±‚å¯¹è±¡content = hello rpc simple demo 3. æ€»ç»“ å…¶å®ž RPC çš„å®žçŽ°è¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸‰ä¸ªæŠ€æœ¯ç‚¹è‡³å…³é‡è¦ï¼š ç½‘ç»œé€šä¿¡ åºåˆ—åŒ–å’Œååºåˆ—åŒ– åŠ¨æ€ä»£ç†ï¼ˆPSï¼šåŠ¨æ€ä»£ç†ä¸ç†Ÿæ‚‰çš„åŒå­¦ï¼Œå¯ä»¥ å‰å¾€è¿™é‡Œå­¦ä¹ ï¼‰ ç¤ºä¾‹ä»£ç  https://github.com/xkcoding/practice_demo/tree/master/rpc-demo-1]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>rpc</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>rpc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2020.Q1æ€»ç»“ & ç¦»èŒæ„Ÿæƒ³]]></title>
    <url>%2F2020%2F04%2F01%2Fsomewords-about-dissmission-2020.html</url>
    <content type="text"><![CDATA[è¿™é‡Œå…ˆç¥å¤§å®¶æ„šäººèŠ‚å¿«ä¹ã€‚ çœ‹äº†çœ¼ä¸Šæ¬¡åšå®¢æ›´æ–°çš„æ—¶é—´ï¼Œä¹Ÿå·²ç»è¿‡åŽ»äº†ä¸€ä¸ªå­£åº¦ï¼ŒçœŸæ˜¯å°†â€œæ‹–å­—è¯€â€å‘æŒ¥çš„æ·‹æ¼“å°½è‡´ã€‚ä»Šå¤©èŠèŠæˆ‘å¯¹è¿™ä¸ªå­£åº¦çš„æ€»ç»“ä»¥åŠè‡ªå·±çš„ä¸€äº›ç¦»èŒæ„Ÿæƒ³ã€‚ 2020 æ³¨å®šæ˜¯ä¸ªä¸å¹³å‡¡çš„ä¸€å¹´ï¼ 1. Q1 æ€»ç»“ è½¬çœ¼é—´ï¼Œ2020 å·²ç»è¿‡åŽ» 1/4ï¼Œè¯´å®žè¯ï¼Œè¿™ä¸ªå­£åº¦æˆ‘æ„Ÿè§‰è‡ªå·±æ˜¯è™šåº¦çš„ã€‚ æ„Ÿæƒ… åŽŸè®¡åˆ’äºŽä»Šå¹´å¸¦çˆ¸å¦ˆåŽ»è¥„é˜³ä¸Žå¦žçš„çˆ¸å¦ˆèŠèŠå©šç¤¼çš„äº‹æƒ…ï¼Œå› ä¸ºç–«æƒ…çš„åŽŸå› ï¼Œè¿˜ä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™æ‰§è¡Œï¼Œä¸Žä¹‹ç›´æŽ¥å­˜åœ¨å½±å“çš„åº”è¯¥å°±æ˜¯ä»Šå¹´çš„ç»“å©šè®¡åˆ’ã€‚ æˆ‘å’Œå¦žå¤«äººå·²ç»æºæ‰‹èµ°è¿‡äº† 6 å¹´æ—¶å…‰ï¼Œç­‰å¾…æ˜¯ä¸ºäº†æ›´å¥½çš„å‰è¡Œã€‚ å·¥ä½œ æˆ‘å·²äºŽ 2020.03.19 æ­£å¼ç¦»å¼€ç¾Žåˆ›ï¼Œå‘Šåˆ«äº†2 å¹´æœå¤•ç›¸å¤„çš„é¢†å¯¼åŠåŒäº‹ï¼Œæ„Ÿè°¢é¢†å¯¼ä»¬çš„åŸ¹å…»ä¸Žä¿¡ä»»ï¼Œä¹Ÿæ„Ÿè°¢åŒäº‹ä»¬çš„åŒ…å®¹ä¸Žç…§é¡¾ã€‚ åœ¨ç¾Žåˆ›çš„è¿™æ®µæ—¶é—´é‡Œï¼Œæˆ‘å­¦åˆ°äº†å¾ˆå¤šï¼Œå°¤å…¶æ˜¯å›¢é˜Ÿç®¡ç†æ–¹é¢çš„çŸ¥è¯†ï¼Œç¬¬ä¸€æ¬¡å¸¦å›¢é˜Ÿï¼Œæ„Ÿè°¢ Team å°ä¼™ä¼´çš„ä¿¡ä»»ã€‚è¿™ 2 å¹´æ—¶é—´ï¼Œæˆ‘å‘å›¢é˜Ÿè¾“å‡ºäº†ä¸€äº›å†…å®¹ï¼ŒåŒ…æ‹¬å¼€å‘è§„èŒƒã€å¾®æœåŠ¡æž¶æž„ã€å®¹å™¨åŒ–éƒ¨ç½²ã€åŸºç¡€ä¾èµ–æž¶æž„ç­‰ï¼Œå¯¹æˆ‘æ¥è¯´ä¹Ÿæ˜¯ä¸€ç§æˆé•¿ã€‚ ç¾Žåˆ›æ˜¯ä¸€å®¶ä¸é”™çš„å…¬å¸ï¼Œå½“ä½ å±•çŽ°å‡ºè¶³å¤Ÿçš„å®žåŠ›çš„æ—¶å€™ï¼Œç¾Žåˆ›çš„é¢†å¯¼ä»¬æ„¿æ„èŠ±æ—¶é—´åŸ¹å…»ä½ ã€ç»™ä½ åŒ¹é…çš„èµ„æºã€‚ è‡³äºŽæˆ‘ä¸ºä»€ä¹ˆè¦ç¦»èŒï¼Ÿ é©¬äº‘çˆ¸çˆ¸æ›¾ç»è¯´è¿‡ï¼Œç¦»èŒæ— éž 2 ä¸ªåŽŸå› ï¼Œâ‘ é’±ç»™å°‘äº† â‘¡å¿ƒå§”å±ˆäº† æˆ‘ç¦»èŒçš„åŽŸå› æŒºå¤šï¼Œæ€»ç»“ä¸‹æ¥å°±æ˜¯éƒ½å äº†ï¼š æˆ‘å–œæ¬¢åšæŠ€æœ¯ï¼Œæˆ‘æƒ³åœ¨æŠ€æœ¯çš„å±‚é¢æ›´è¿›ä¸€æ­¥ï¼Œæˆ‘å°è¯•åšäº†ä¸€äº›æŽ¨å¹¿ï¼Œä½†æ˜¯â€œå†…éƒ¨åŽŸå› â€è®©æˆ‘æœ‰äº›æœ‰å¿ƒæ— åŠ›ã€‚ è¿™ 2 å¹´æ—¶é—´ï¼Œæˆ‘è¶Šæ¥è¶Šå¤šçš„æ—¶é—´è€—åœ¨äº†ä¼šè®®ä¸Šï¼Œè®©æˆ‘å¼€å§‹ææ…Œã€‚éœ€æ±‚ä¸æ˜Žç¡®çš„éœ€æ±‚ä¼šè®®ã€å°å°ç”©é”…åˆ†é”…çš„å®žæ–½é—®é¢˜åé¦ˆä¼šè®®ã€ä¸»é¢˜è·‘åçš„æŠ€æœ¯æ–¹æ¡ˆåˆ¶å®šä¼šè®®â€¦â€¦è¿™äº›ä¼šè®®ï¼Œæ²¡ 2-3 ä¸ªå°æ—¶æ ¹æœ¬ç»“æŸä¸äº†ï¼Œå°±ç®—ç»“æŸäº†ä¹Ÿå¾—ä¸åˆ°æœ‰æ•ˆç­”æ¡ˆä¸Žåé¦ˆã€‚ é¢†å¯¼ä»¬çœ¼ä¸­å¥½çš„äº§å“ï¼ŒåŸºäºŽå¸‚é¢ä¸Šå¼€æºçš„äº§å“è¿›è¡ŒäºŒæ¬¡å¼€å‘çš„äº§å“å°±æ˜¯å¥½äº§å“ðŸ¤”ï¼Œæ—¶é—´å°±æ˜¯é‡‘é’±ï¼Œäººå¤šåŠ›é‡å¤§ï¼ŒåŠ ä¸€å€çš„äººæ‰‹ï¼Œæ—¶é—´å°±å¿…é¡»å¾—å‡åŠðŸ¤” ç›´ç³»é¢†å¯¼çš„â€œæƒåˆ©æ–—äº‰â€ã€‚ 2 å¹´æ—¶é—´ï¼Œæˆ‘æ˜¯ 4 ä¸ªäº§å“çš„åŽç«¯ç ”å‘è´Ÿè´£äººã€‚ä¸€æ¬¾å¥½çš„äº§å“ï¼Œåº”å½“åŒ…å«å®Œæ•´ä¸”å®žé™…çš„éœ€æ±‚é¢„ç ”ã€ç¨³å®šä¸”é«˜æ•ˆçš„ç ”å‘å›¢é˜Ÿã€ä¼˜ç§€ä¸”ç›´è§‚çš„äº¤äº’è®¾è®¡ã€ç®€å•çš„éƒ¨ç½²ä½“éªŒã€çœå¿ƒçš„è¿ç»´ã€ç‰›æ‰¹çš„é”€å”®ã€‚æ‰‹é‡Œçš„ 4 ä¸ªäº§å“ï¼Œæˆ‘è®¤ä¸ºæ²¡æœ‰ä¸€é¡¹è¾¾æ ‡ï¼Œéœ€æ±‚ä¸æ˜Žç¡®ã€ä»£ç ä¸ä¼˜é›…ã€æ‡µé€¼çš„äº¤äº’ã€å¤æ‚çš„éƒ¨ç½²ã€‚ æˆ‘åšè¿‡çš„åŠªåŠ›ï¼š éœ€æ±‚ä¸æ˜Žç¡®ï¼Œæˆ‘ä»¬ç»„ç»‡ä¼šè®®è¯¢é—®éœ€æ±‚ ä»£ç ä¸ä¼˜é›…ï¼Œå‰æœŸæˆ‘ä»¬ 2 å‘¨ä¸€æ¬¡çš„ Code Reviewï¼ŒåŽæœŸå›¢é˜Ÿæˆå‘˜å›ºå®šï¼Œå‡å°‘åˆ° 1 æœˆä¸€æ¬¡ æ‡µé€¼çš„äº¤äº’ï¼Œæˆ‘ä»¬ç«™åœ¨ç”¨æˆ·çš„è§’åº¦ç»™äº§å“ç»ç†ç†æ¸…ä½¿ç”¨æµç¨‹ï¼ŒæŸ¥æ‰¾å„ç§ UI ç»„ä»¶ï¼Œå¸®å¿™å¯»æ‰¾è§£å†³æ–¹æ¡ˆï¼Œå¯¹äº†ï¼Œæˆ‘ä»¬æ˜¯åŽç«¯ç¨‹åºçŒ¿ðŸ¤“ å¤æ‚çš„éƒ¨ç½²ï¼Œæ—¢ç„¶éƒ½æœåŠ¡åŒ–äº†ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬æäº† Docker å®¹å™¨åŒ–éƒ¨ç½²æ–¹æ¡ˆï¼Œæœ€åŽå´è¢«å¦å®šäº†ï¼Ÿ â€¦â€¦ å½“ä½ çš„åŠªåŠ›å¾—ä¸åˆ°ç¬¦åˆä½ ä»˜å‡ºçš„å›žæŠ¥çš„æ—¶å€™ï¼Œäººå°±ä¼šå¾ˆç´¯ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©ç¦»èŒä¼‘æ¯ä¸€æ®µæ—¶é—´ï¼Œæœ€åŽç¥ç¾Žåˆ›è¶Šæ¥è¶Šå¥½ï¼ 2. Q2 è®¡åˆ’ æ‰¾åˆ°ä¸€ä»½æ»¡æ„çš„å·¥ä½œï¼ˆ4 - 5 æœˆï¼‰ å®Œæˆå¹¶å‘å¸ƒâ€œç®€Â·è®°â€åˆç‰ˆ ä¸ªäººäº‘å¹³å°è¿ç§»ï¼Œå¤§ç±³äº‘ â†’ äº¬ä¸œäº‘ï¼Œå°è¯• k3sï¼Œè¾“å‡ºç›¸å…³åšæ–‡ï¼ˆ6 æœˆå‰ï¼‰ è‡³äºŽæˆ‘ä»€ä¹ˆæ—¶å€™å¼€å§‹ä¸‹ä¸€ä»½å·¥ä½œï¼Ÿ æŸ¥çœ‹æˆ‘çš„å®Œæ•´ç®€åŽ†ï¼Œå¸Œæœ›å¯ä»¥ä¸Žæ‚¨å…±äº‹ï¼]]></content>
      <categories>
        <category>æ€»ç»“å±•æœ›</category>
      </categories>
      <tags>
        <tag>æ€»ç»“å±•æœ›</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åˆæ˜¯ä¸€å¹´æ€»ç»“æ—¶]]></title>
    <url>%2F2019%2F12%2F31%2Fbye2019-hello2020.html</url>
    <content type="text"><![CDATA[We are all in the gutter,but some of us are looking at the stars. 2019 å¹´è½¬çœ¼å°±è¿‡åŽ»äº†ï¼Œè¿Žæ¥äº†æ–°ä¸€è½®çš„ decadeã€‚åå¹´åŒ†åŒ†è€Œè¿‡ï¼Œæˆ‘æƒ³å€Ÿè¿™æ¬¡æœºä¼šï¼Œå¥½å¥½çš„æ€»ç»“ä¸‹è¿™åå¹´ã€‚ å¿†å¾€æ˜” æ‚è®° 2010 å¹´ï¼Œæˆ‘ç»åŽ†äº†ä¸­è€ƒï¼Œ2013 å¹´ï¼Œæˆ‘ç»åŽ†äº†é«˜è€ƒï¼Œ2 åœºå†³å®šå‘½è¿èµ·ç‚¹çš„è€ƒè¯•ã€‚ 10 å¹´çš„ä¸­è€ƒï¼ŒåŠè½¦å°¾çš„æŒ¤ä¸Šäº†ã€Œä»™ä¸­ã€ï¼Œä¸€å¹´ä¸æ‡ˆçš„åŠªåŠ›ï¼Œç»ˆäºŽæŒ¤è¿›äº†ã€Œäº”ç­ã€ã€‚ é«˜ä¸­ï¼Œæœ€ä¸æ„¿æ„å›žå¿†çš„ä¸€ä¸ªç‰‡æ®µï¼Œä¸€æ‰‹å¥½ç‰Œï¼Œè¢«è‡ªå·±çŽ©çš„ç¨€çƒ‚ã€‚ 13 å¹´çš„é«˜è€ƒï¼Œç­é‡Œå°‘æ•°çš„å‡ ä¸ªäºŒæœ¬ï¼ŒçœŸæ˜¯ä¸ªéš¾å¿˜çš„å¤å¤©ã€‚äº”åå¤šä¸ªäººçš„å®žéªŒç­ï¼Œ10 ä¸ªä»¥ä¸‹çš„äºŒæœ¬ï¼Œå…¶ä½™å…¨æ˜¯ä¸€æœ¬ã€‚ã€Œä½œæ­»ã€è¿™ä¸ªè¯å¯ä»¥ååˆ†å®Œç¾Žçš„å½¢å®¹é«˜ä¸­çš„è‡ªå·±ã€‚åœ¨åˆé€‚çš„æ—¶é—´åšåˆé€‚çš„äº‹æƒ…ï¼Œæ˜¯æˆ‘å¤šå¹´åŽçš„æ€»ç»“ã€‚å­¦ä¹ å¦‚æ­¤ï¼Œæ¸¸æˆå¦‚æ­¤ï¼Œæ‹çˆ±ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ æŽ¥ä¸‹æ¥å°±æ˜¯æˆ‘çš„å¤§å­¦ï¼Œåœ¨ã€Œæ¹–åŒ—æ–‡ç†å­¦é™¢ã€çš„æ—¥å­äº†ã€‚å¯èƒ½æ˜¯çªç„¶é•¿å¤§äº†ï¼Œä¹Ÿå¯èƒ½æ˜¯é«˜è€ƒå¯¹è‡ªå·±çš„å½±å“å¤ªå¤§äº†ï¼Œè‡ªå°Šå¿ƒä¸æ–­é©±ä½¿ç€è‡ªå·±åŽ»å­¦ä¹ ã€‚æˆªæ­¢åˆ°æˆ‘å¤§ä¸‰åŽ»åŒ—äº¬å·¥ä½œä¹‹å‰ï¼Œæˆç»©å§‹ç»ˆåœ¨æœ¬ä¸“ä¸šå‰ä¸‰ï¼ŒèŽ·å¾—è¿‡ã€Œæ ¡äºŒçº§å¥–å­¦é‡‘ã€ï¼Œä¹ŸèŽ·å¾—è¿‡ã€Œå›½å®¶åŠ±å¿—å¥–å­¦é‡‘ã€ã€‚é™¤äº†æ ¡çº§ç«žèµ›ï¼Œä¹Ÿå‚åŠ äº†ã€Œè½¯ä»¶æ¯ã€æœ¬ç§‘ç»„ä¼˜ç§€å¥–ã€ã€Œè“æ¡¥æ¯ã€æ¹–åŒ—èµ›åŒºä¸‰ç­‰å¥–ã€ã€Œå…¨å›½ç‰©è”ç½‘å¤§èµ›ã€äºŒç­‰å¥–ï¼Œè¿˜ç”³è¯·äº†ã€Œå†œäº§å“ä¾›åº”é“¾ã€çš„è½¯è‘—ã€‚ æ­£æ˜¯å‡­å€Ÿè‡ªå·±çš„åŠªåŠ›ï¼Œåœ¨å¤§ä¸‰çš„æ—¶å€™ï¼Œæˆ‘èŽ·å¾—äº†ç­ä¸»ä»»åŠé™¢è¾…å¯¼å‘˜çš„æ‰¹å‡†ï¼Œå…è®¸æˆ‘ç¦»æ ¡æ‰¾å·¥ä½œã€‚ï¼ˆè¿™é‡Œéœ€è¦è¯´æ˜Žä¸€ä¸‹ï¼Œæˆ‘å¤§å­¦å­¦çš„æ˜¯ã€Œç‰©è”ç½‘å·¥ç¨‹ã€ä¸“ä¸šï¼ŒåŒæ—¶æˆ‘ä»¬è¿™ä¸€å±Šæ˜¯ç¬¬ä¸€å±Šè¿™ä¸ªä¸“ä¸šçš„å­¦ç”Ÿï¼Œæ‰€ä»¥å½“æ—¶ä¸“ä¸šè¯¾å·²ç»åœ¨å¤§äºŒå…¨éƒ¨ç»“æŸï¼Œæ‰€ä»¥æˆ‘å¤§ä¸‰å¯ä»¥ç”³è¯·ç¦»æ ¡æ‰¾å·¥ä½œï¼Œå­¦æ ¡çš„æ—¶å…‰å¼‚å¸¸çè´µï¼Œå¸Œæœ›å­¦å¼Ÿå­¦å¦¹ä»¬å¥½å¥½çæƒœï¼ï¼‰2016 å¹´ 7 æœˆ 28 å·ï¼Œæˆ‘å°†è‡ªå·±çš„ç¬¬ä¸€ç«™é€‰æ‹©äº†ã€ŒåŒ—äº¬ã€ï¼Œä¹Ÿæ­£æ˜¯å› ä¸ºè‡ªå·±çš„è‡ªä¿¡å’Œèƒ½åŠ›ï¼Œä»¥åŠã€Œå¤§å«å“¥ã€çš„ä¿¡ä»»ï¼Œæˆ‘åœ¨ 2016 å¹´ 8 æœˆ 2 å·æ­£å¼å…¥èŒï¼ˆä¸æ˜¯å®žä¹ å“¦ï¼‰æˆ‘çš„ç¬¬ä¸€å®¶å…¬å¸ â€”â€”ã€Œå›¾è¿¹ç§‘æŠ€ã€ã€‚æˆ‘çš„å·¥ä½œç”Ÿæ¶¯ï¼Œä¹Ÿä»Žæ­¤å¼€å§‹ã€‚åœ¨å›¾è¿¹çš„ä¸€å¹´åŠæ—¶é—´ï¼Œæˆ‘é‡åˆ°äº†å¥½é¢†å¯¼ã€å¥½åŒäº‹ï¼Œæ„Ÿè°¢ä»–ä»¬å¯¹æˆ‘åˆå…¥èŒåœºçš„ç…§é¡¾ä¸ŽåŒ…å®¹ï¼Œæ„Ÿæ©ðŸ™ æˆ‘çš„ 2019 æŽ¥ä¸‹æ¥è®²è®²æˆ‘çš„ 2019 å¹´å§ï¼š å·¥ä½œ ä»Šå¹´èŒèƒ½è½¬å˜ï¼ŒTeam æ€»å…± 4 ä¸ªäººå•¦ã€‚äººæ•°ä¸å¤šï¼Œä¸€å¹´é‡Œå´ä¹Ÿæ‰¿æ‹…äº† 3 ä¸ªäº§å“çš„ç ”å‘å·¥ä½œã€‚ ç¬¬ä¸€æ¬¡å¸¦å›¢é˜Ÿï¼Œå·¥ä½œå®‰æŽ’ä¼šæœ‰äº›ä¸åˆç†ï¼Œä¼šå‡ºçŽ°å»¶æœŸçš„æƒ…å†µã€‚æ€»ç»“ï¼šå·¥ä½œé‡è¯„ä¼°ä¸èƒ½ä»¥è‡ªå·±çš„æ ‡å‡†è¯„ä¼°ï¼Œéœ€è¦å› äººè€Œå¼‚ã€‚ æ—¢ç„¶æ˜¯å¸¦é¢†å›¢é˜Ÿï¼Œå›¢é˜Ÿä¸Žå›¢é˜Ÿä¹‹é—´çš„åä½œï¼Œå°±å¾—å¥½å¥½æ²Ÿé€šã€‚æ€»ç»“ï¼šæˆ‘å·²ç»è¢«å·¥ä½œç£¨å¹³äº†æ£±è§’ã€‚ å›¢é˜Ÿå»ºè®¾ï¼Œä¸€ä¸ªå›¢é˜Ÿï¼Œéœ€è¦æœ‰ä¸€ä¸ªå›¢é˜Ÿçš„æ ‡ç­¾ã€‚æ€»ç»“ï¼šè®¤çœŸè´Ÿè´£ã€æŠ€æœ¯ä¼˜ç§€ã€ä»£ç è§„èŒƒï¼Œè¿™ä¸‰ä¸ªè¯æ˜¯æˆ‘å¯¹æˆ‘ä»¬å›¢é˜Ÿæ‰“çš„æ ‡ç­¾ã€‚ æŠ€æœ¯ ä»Šå¹´ä¸€ä¸ªäº§å“ç”±å•ä½“æž¶æž„è½¬å‘å¾®æœåŠ¡æž¶æž„ï¼Œæˆ‘å‡ ä¹Žä¸€äººå¯¹å…¶æ‹†åˆ†ã€é‡æž„ï¼ŒåˆæœŸè¿˜æ˜¯ Spring Cloud Netflix ç³»åˆ—ï¼ŒåŽæœŸå…¨çº¿åˆ‡åˆ° Spring Cloud Alibaba ç³»åˆ—ã€‚å…¶ä¸­å‘ç‚¹æ— æ•°ï¼Œä¸è¿‡è‡ªå·±çš„è¿›æ­¥ä¹Ÿæ˜¯æžå…¶æ˜Žæ˜¾ã€‚ ç®€å•åˆ—ä¸‹é‡åˆ°çš„ä¸€äº›å‘ï¼Œä¸çŸ¥é“å°ä¼™ä¼´ä»¬æœ‰æ²¡æœ‰é‡åˆ°è¿™äº›é—®é¢˜å‘¢ï¼š Spring Boot 1.x å‡çº§ Spring Boot 2.x (éœ€è¦å‚è€ƒæ–‡æ¡£ï¼Œä¿®æ”¹éƒ¨åˆ†é…ç½®) Eureka è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ï¼Œå¼€å‘çŽ¯å¢ƒå¯¼è‡´æœåŠ¡è°ƒç”¨å¤±è´¥ (å¼€å‘è¿‡ç¨‹ä¸­å°†å…¶å…³é—­) å¤šä¸ª FeignClient å¯¼è‡´å‡ºçŽ°å¤šä¸ª Bean æ— æ³•å¯åŠ¨é¡¹ç›®(é€šè¿‡é…ç½® contextId è§£å†³) Eureka å‡çº§åˆ° Nacosï¼Œå¯¹ Nacos çš„å‰ç«¯é¡µé¢è¿›è¡ŒäºŒå¼€ äºŒå¼€ xxl-job-adminï¼Œä½¿å…¶æ”¯æŒ SimpleJobï¼ŒåŒæ—¶æ³¨å†Œåˆ° Nacos è‡ªå®šä¹‰ xxl-job-starterï¼Œè‡ªåŠ¨è¿žæŽ¥ xxl-job-admin â€¦ å¥åº· ä»Šå¹´èº«ä½“ä¸é”™ï¼Œæ€»çš„æ¥è¯´æ¯”è¾ƒæŠ—é€ äº†ï¼Œä¸è¿‡è‚ èƒƒç¡®å®žæ˜¯ç¡¬ä¼¤ã€‚ å¼€æº ä»Šå¹´ç®—æ˜¯åšåˆ°äº†åŽ»å¹´ç«‹çš„ä¸€ä¸ª Flagï¼Œå°±æ˜¯å°½é‡ä¿è¯æ¯å¤©éƒ½å¯ä»¥åœ¨ GitHub ä¸Šå†™ç‚¹ä¸œè¥¿ã€‚ è´´ä¸€å¼ æ‰“å¡å›¾ï¼š è¿™é‡Œè¦è¯´æ˜Žä¸€ä¸‹ 4.13 - 4.17 è¿™äº”å¤©ï¼Œä½œä¸ºå…¬å¸çš„ä¼˜ç§€å‘˜å·¥ï¼Œå‰å¾€æ¡‚æž—æ—…æ¸¸åŽ»äº† 5.11 - 5.12 è¿™ä¸¤å¤©æœ‰ç‚¹åŽ‹æŠ‘ï¼ŒåŽ»åƒå²›æ¹–æ•£å¿ƒåŽ»äº† 6.6 - 6.11 è¿™å…­å¤©ï¼Œæˆ‘å’Œå‘å°ï¼Œ2 å¯¹å®¶åº­åœ¨æ³°å›½ï¼Œè¨ç“¦è¿ªå¡ðŸ‡¹ðŸ‡­ 10.1 - 10.7 è¿™ä¸€å‘¨ï¼Œå¤§å­¦çš„æœ‹å‹æ¥æ­å·žç›¸èšï¼Œå¿…é¡»å¥½åƒå¥½å–æ‹›å¾…ï¼ åœ¨ä»‹ç»ä¸€ä¸‹ä»Šå¹´åšçš„ä¸€äº›å¼€æºè´¡çŒ®å§ï¼š spring-boot-demo spring-boot-demo æ˜¯ä¸€ä¸ªç”¨æ¥æ·±åº¦å­¦ä¹ å¹¶å®žæˆ˜ spring boot çš„é¡¹ç›®ï¼Œç›®å‰æ€»å…±åŒ…å« 63 ä¸ªé›†æˆ demoï¼Œå·²ç»å®Œæˆ 52 ä¸ªã€‚ è¿™ä¸ªé¡¹ç›®è¯´å®žè¯ï¼Œä»Šå¹´æ˜¯å®ƒæœ€è¾‰ç…Œçš„å²æœˆï¼ŒèŽ·å¾— GitHub çƒ­é—¨ Java æ¦œå• 8 æœˆä»½ç¬¬ä¸€åã€9 æœˆä»½ç¬¬å…«åã€12 æœˆä»½ç¬¬ä¸‰åçš„æˆç»©ã€‚å”¯ä¸€é—æ†¾çš„æ˜¯ï¼Œä»Šå¹´ä»ç„¶æ²¡æœ‰ç»™å®ƒå®Œç»“æŽ‰ã€‚ä½†å¥½åœ¨ï¼Œä»Šå¹´ä¸æ˜¯æˆ‘ä¸€ä¸ªäººåœ¨æˆ˜æ–—äº†ï¼Œæœ‰ä¸å°‘çƒ­å¿ƒçš„å°ä¼™ä¼´æäº†å¾ˆå¤šæœ‰ç”¨çš„æ„è§ã€ä¹Ÿå…±äº«äº†ä¸€äº› demo çš„ä»£ç ï¼ŒçœŸå¿ƒæ„Ÿè°¢ä½ ä»¬ï¼ä¸‹é¢æ™’ä¸€æ³¢æˆ˜ç»©ï¼ JustAuth JustAuthæ˜¯ ðŸ’¯ å²ä¸Šæœ€å…¨çš„æ•´åˆç¬¬ä¸‰æ–¹ç™»å½•çš„å¼€æºåº“ã€‚ è¿™ä¸ªé¡¹ç›®æ˜¯æˆ‘ç¬¬ä¸€æ¬¡ä»¥ä¸»è¦è´¡çŒ®è€…çš„èº«ä»½å‚ä¸Žè¿›æ¥çš„é¡¹ç›®ï¼Œä¸»è¦åšäº†ä»¥ä¸‹çš„è´¡çŒ®ï¼š é›†æˆå¾®ä¿¡ç™»å½•(åŒ…æ‹¬å…¬ä¼—å·å’Œå¼€æ”¾å¹³å°)ã€QQç™»å½•ã€Googleç™»å½•ã€å¾®è½¯ç™»å½•ã€å°ç±³ç™»å½•ã€ä¼ä¸šå¾®ä¿¡ç™»å½• ä¼˜åŒ–ä»£ç ã€æž¶æž„ï¼Œå¢žåŠ è‡ªå®šä¹‰ State ç¼“å­˜åŠŸèƒ½ æä¾› jFinal ç‰ˆ demo æä¾› ActFramework ç‰ˆ demo æä¾› SpringBoot å¿«é€Ÿé›†æˆçš„ justauth-spring-boot-starter æŠ½å– HTTP æ¨¡å—ï¼Œä½¿å…¶ä¸Ž hutool-http è§£è€¦ï¼Œæ”¯æŒä»»æ„ Http Client æŽ¥å…¥ é€šè¿‡å‚ä¸Žè¿™ä¸ªé¡¹ç›®ï¼Œè®©æˆ‘æ„è¯†åˆ°ï¼Œå·¥å…·ç±»åž‹çš„å¼€æºé¡¹ç›®è®¾è®¡ä¸€ä¸ªæ˜“ç”¨çš„ API çš„é‡è¦æ€§ä»¥åŠä»£ç å°è£…é€šç”¨æ€§çš„å¥½å¤„ã€‚ magic-starter magic-starter ä¸€å¥—ç¥žå¥‡çš„starterï¼Œåªä¸ºçˆ±â€œå·æ‡’â€çš„ä½ ~ è¿™ä¸ªé¡¹ç›®çš„ç›®çš„æ˜¯å¯¹é¡¹ç›®å¼€å‘ä¸­å¸¸è§çš„åŠŸèƒ½çš„å°è£…ï¼Œåšä¸€å¥— starterï¼Œæ–¹ä¾¿ Spring Boot é¡¹ç›®å¿«é€Ÿå¼•ç”¨é›†æˆã€‚ä¸»è¦åŒ…æ‹¬ï¼š è‡ªåŠ¨è£…é…ç»„ä»¶æ¨¡å—ï¼šmagic-core-auto æ ¸å¿ƒå·¥å…·åŒ…æ¨¡å—ï¼šmagic-core-tool ä¾èµ–ç‰ˆæœ¬æŽ§åˆ¶æ¨¡å—ï¼šmagic-starter-bom æžç®€çš„æƒé™æŽ§åˆ¶æ¨¡å—ï¼šmagic-starter-secure é€šç”¨æ“ä½œæ—¥å¿—å°è£…æ¨¡å—ï¼šmagic-starter-log é€šç”¨æ¶ˆæ¯é€šçŸ¥å°è£…æ¨¡å—ï¼šmagic-starter-message é™æµç»„ä»¶æ¨¡å—ï¼šmagic-starter-ratelimiter åˆ†å¸ƒå¼é”æ¨¡å—ï¼šmagic-starter-locker é€šç”¨å¯¹è±¡å­˜å‚¨å°è£…æ¨¡å—ï¼šmagic-starter-oss åˆ†å¸ƒå¼ä¸»é”®ç”Ÿæˆå™¨æ¨¡å—ï¼šmagic-starter-id è¿™å¥—ç»„ä»¶æš‚æ—¶è¿˜æœªæ­£å¼ Releaseï¼Œéƒ½è¿˜æ˜¯å¿«ç…§ç‰ˆæœ¬ã€‚æ¯ä¸ªæ¨¡å—éƒ½é…æœ‰å¯¹åº”çš„æ–‡æ¡£åŠ demoï¼Œå°ä¼™ä¼´ä»¬æ•¬è¯·æœŸå¾…å§ design-pattern è¿™ä¸ªé¡¹ç›®æ˜¯è®¾è®¡æ¨¡å¼å­¦ä¹ é…å¥—ä»£ç ï¼Œå¯¹åº”åšæ–‡åœ¨è¿™é‡ŒðŸ‘‰ å…¶ä»– ä»Šå¹´ä¹Ÿå‚ä¸Žäº†ä¸€äº›å…¶ä»–å¼€æºé¡¹ç›®çš„å»ºè®¾ï¼š nacos: æäº¤äº† 3 ä¸ª BUG ISSUEï¼Œ1 ä¸ª PR mica: æäº¤äº† 2 ä¸ª PR hutool: æäº¤äº† 1 ä¸ª PR æ€»ç»“ï¼šå¦ç™½è¯´æˆ‘å¯¹äºŽç¤¾åŒºçš„è´¡çŒ®ä¸å€¼ä¸€æï¼Œå¼€æºäºŽæˆ‘è€Œè¨€ï¼Œæ›´åƒæ˜¯ä¸€ç§å¸®åŠ©ä»–äººæå‡è‡ªå·±çš„ä¸€ä¸ªè¿‡ç¨‹ï¼Œæˆ‘å¾ˆå¼€å¿ƒï¼Œä¹Ÿå¾ˆäº«å—ã€‚çœ‹ç€ spring-boot-demo å¯ä»¥ä¸ºå¾ˆå¤šåˆšåˆšå…¥é—¨çš„æœ‹å‹ä»¬æä¾›å¸®åŠ©ï¼Œçœ‹ç€è‡ªå·±å‚ä¸Žçš„ JustAuth èƒ½è¢«å¥½å¤šçš„äººå¤¸å¥½ç”¨ï¼Œæˆ‘è§‰å¾—ä¸€åˆ‡éƒ½å¾ˆå€¼å¾—ã€‚ç¤¾åŒºè®©æˆ‘é‡åˆ°å¾ˆå¤šæœ‹å‹ï¼Œ@æ˜¥å“¥ã€@äºšä¸œã€@ç¿¼ç¥žï¼Œä»–ä»¬å¯¹æˆ‘çš„å¸®åŠ©éƒ½éžå¸¸å¤§ï¼Œæ„Ÿè°¢ä½ ä»¬ï¼ å…¶ä»– 6.22å–œæé˜¿ç‰¹å…¹ä¸€æžš~ çœ‹ä»Šæœ è·¨å…¥æ–°çš„ 10 å¹´ï¼Œè¿ŽæŽ¥æ–°çš„è‡ªå·±ï¼ æˆ‘çš„ 2020 å­¦ä¹  å­¦ä¹  Flink å­¦ä¹ éžé˜»å¡žç¼–ç¨‹ï¼Œäº†è§£ WebFlux æŠ€æœ¯ å­¦ä¹ ä¸€äº›å›¢é˜Ÿç®¡ç†çš„çŸ¥è¯† å¼€æº ç»§ç»­ç»´æŠ¤ JustAuth ä¸€å®šè¦æŠŠ spring-boot-demo å®Œç»“äº† å‘å¸ƒ Magic-Starter Release ç‰ˆæœ¬ å†™ä¸ªå¾®ä¿¡å°ç¨‹åº å®Œæˆæˆ‘çš„èµž(ä¹ž)èµ(è®¨)ç³»ç»Ÿ å†™ä¸€ä¸ªåŽç«¯ç®¡ç†è„šæ‰‹æž¶åŒæ—¶é…å¥—å‰ç«¯ä»£ç  æƒ…æ„Ÿ æ˜¯æ—¶å€™åŽ»å®Œæˆäººç”Ÿå¤§äº‹äº†ï¼ å·¥ä½œ æ©ï¼Œä¸–ç•Œé‚£ä¹ˆå¤§ï¼Œæˆ‘æƒ³åŽ»å¤§åŽ‚çœ‹çœ‹ï¼ åŽè®° æœ¬æ¥è¿™ç¯‡æ€»ç»“æ˜¯æƒ³åœ¨å…ƒæ—¦çš„æ—¶å€™å†™çš„ï¼Œè¿™ä¸€å¹´ç»åŽ†çš„æŒºå¤šï¼Œå´æ„£æ˜¯æ†‹ä¸å‡ºæ¥ã€‚æ‹–æ¥æ‹–åŽ»ï¼Œæ‹–åˆ°ä»Šæ™š(2020.01.17)ï¼Œå°å¹´å¤œï¼Œç»ˆäºŽæ˜¯ç»™å†™å®Œäº†ï¼Œä¹Ÿç®—æ˜¯å¯¹è‡ªå·±çš„ 2019 å¹´æœ‰äº†ä¸€ä¸ªäº¤ä»£ï¼Œ2020 å¹´åŠ æ²¹ï¼ é™„ä¸Šå¸…ç…§ä¸€å¼ ï¼š]]></content>
      <categories>
        <category>æ€»ç»“å±•æœ›</category>
      </categories>
      <tags>
        <tag>æ€»ç»“å±•æœ›</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç®€å• HTTP å·¥å…·]]></title>
    <url>%2F2019%2F12%2F26%2Fxkcoding-simple-http.html</url>
    <content type="text"><![CDATA[1. å‰è¨€ å› ä¸ºæœ¬äººæ˜¯ JustAuth çš„ä¸»è¦è´¡çŒ®è€…ä¹‹ä¸€ï¼ŒJustAuth é‡Œéœ€è¦å’Œå„å¤§å¹³å°åš HTTP äº¤äº’æ¥æ¢å– Tokenã€ç”¨æˆ·ä¿¡æ¯ç­‰æ•°æ®ï¼Œä½¿ç”¨çš„æ˜¯ hutool-httpæ¥å®žçŽ° HTTP è¯·æ±‚çš„å‘é€ã€‚å‰æ®µæ—¶é—´ï¼Œæœ‰æœ‹å‹æå‡ºä¸€ä¸ªéœ€æ±‚ï¼šèƒ½å¦ä½¿ç”¨ OkHttp3 ç­‰æ›´ä¼˜ç§€çš„ HTTP è¯·æ±‚å·¥å…·æ¥æ›¿æ¢é»˜è®¤çš„ hutool-http ï¼ŸäºŽæ˜¯å†™ä¸€ä¸ª simple-http çš„æƒ³æ³•å°±è¯žç”Ÿäº†ã€‚ 2. è®¾è®¡æ€è·¯ 2.1. è§£è€¦ simple-http è®¾è®¡å‡ºæ¥å°±æ˜¯ä¸ºäº†è§£å†³ JustAuth ä¸­å¯¹ hutool-http çš„å¼ºè€¦åˆï¼Œæ‰€ä»¥éœ€è¦å…ˆæ‰¾åˆ° JustAuth ä¸­åˆ°åº•ä½¿ç”¨åˆ°äº†éœ€è¦å“ªäº› HTTP è¯·æ±‚ï¼Œæ‰¾åˆ°å®ƒä»¬çš„å…±æ€§ï¼Œæ‰èƒ½è§£è€¦ã€‚å…·ä½“å‚è§ä¸‹è¡¨ï¼š è¯·æ±‚ç±»åž‹ è¯·æ±‚å‚æ•°ç±»åž‹ å“åº”æ•°æ®ç±»åž‹ å…¶ä»– GET query JSONã€TEXT Headerã€URL Encode POST Formã€JSON JSONã€TEXT Headerã€URL Encode å“åº”çš„æ•°æ®ç±»åž‹ï¼Œæœ‰äº›æ˜¯æ ¼å¼åŒ–çš„ JSON æ•°æ®ï¼Œæœ‰äº›åªæ˜¯ç®€å•çš„æ–‡æœ¬ä¿¡æ¯ï¼Œä½†æ€»çš„æ¥è¯´éƒ½æ˜¯å­—ç¬¦ä¸²æ•°æ®ï¼Œå…·ä½“çš„è§£æžï¼Œäº¤ç»™ä½¿ç”¨æ–¹åŽ»å¤„ç†ã€‚æ‰€ä»¥ï¼Œæ­¤æ—¶é€šç”¨HTTPçš„æŽ¥å£å°±å·²ç»å¯ä»¥è®¾è®¡å‡ºæ¥äº†ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586/** * &lt;p&gt; * HTTP æŽ¥å£ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019/12/24 18:21 */public interface Http &#123; /** * GET è¯·æ±‚ * * @param url URL * @return ç»“æžœ */ String get(String url); /** * GET è¯·æ±‚ * * @param url URL * @param params å‚æ•° * @param encode æ˜¯å¦éœ€è¦ url encode * @return ç»“æžœ */ String get(String url, Map&lt;String, String&gt; params, boolean encode); /** * GET è¯·æ±‚ * * @param url URL * @param params å‚æ•° * @param header è¯·æ±‚å¤´ * @param encode æ˜¯å¦éœ€è¦ url encode * @return ç»“æžœ */ String get(String url, Map&lt;String, String&gt; params, HttpHeader header, boolean encode); /** * POST è¯·æ±‚ * * @param url URL * @return ç»“æžœ */ String post(String url); /** * POST è¯·æ±‚ * * @param url URL * @param data JSON å‚æ•° * @return ç»“æžœ */ String post(String url, String data); /** * POST è¯·æ±‚ * * @param url URL * @param data JSON å‚æ•° * @param header è¯·æ±‚å¤´ * @return ç»“æžœ */ String post(String url, String data, HttpHeader header); /** * POST è¯·æ±‚ * * @param url URL * @param params form å‚æ•° * @param encode æ˜¯å¦éœ€è¦ url encode * @return ç»“æžœ */ String post(String url, Map&lt;String, String&gt; params, boolean encode); /** * POST è¯·æ±‚ * * @param url URL * @param params form å‚æ•° * @param header è¯·æ±‚å¤´ * @param encode æ˜¯å¦éœ€è¦ url encode * @return ç»“æžœ */ String post(String url, Map&lt;String, String&gt; params, HttpHeader header, boolean encode);&#125; 2.2. é›å½¢ æ—¢ç„¶é€šç”¨æŽ¥å£å·²ç»è®¾è®¡å‡ºæ¥äº†ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯éœ€è¦é€‰æ‹©å…·ä½“å‘é€ HTTP çš„å·¥å…·åŒ…ã€‚è¿™ä¸€æ­¥æœ‰ 2 ä¸ªè¦æ±‚ï¼Œæ—¢éœ€è¦æ ¹æ®å¸¸è§çš„ HTTP å·¥å…·ä¾èµ–æ¥è‡ªåŠ¨å†³å®šï¼Œä¹Ÿéœ€è¦æä¾›ç”¨æˆ·è‡ªå®šä¹‰çš„é…ç½®çš„ä¾¿æ·æ€§ã€‚ æ ¹æ®å¼•å…¥çš„ä¾èµ–åˆ¤æ–­ä½¿ç”¨å“ªä¸€ä¸ª HTTP å·¥å…·ï¼Œå¯ä»¥ä½¿ç”¨ Class.forName() æ¥åˆ¤æ–­ ç”¨æˆ·è‡ªå®šä¹‰ï¼Œç®€å•çš„è¯´å°±æ˜¯æä¾› set æ–¹æ³• 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145/** * &lt;p&gt; * è¯·æ±‚å·¥å…·ç±» * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019/12/24 18:15 */@UtilityClasspublic class HttpUtil &#123; private static Http proxy; static &#123; Http defaultProxy = null; ClassLoader classLoader = HttpUtil.class.getClassLoader(); // åŸºäºŽ java 11 HttpClient if (ClassUtil.isPresent("java.net.http.HttpClient", classLoader)) &#123; defaultProxy = new com.xkcoding.http.support.java11.HttpClientImpl(); &#125; // åŸºäºŽ okhttp3 else if (ClassUtil.isPresent("okhttp3.OkHttpClient", classLoader)) &#123; defaultProxy = new OkHttp3Impl(); &#125; // åŸºäºŽ httpclient else if (ClassUtil.isPresent("org.apache.http.impl.client.HttpClients", classLoader)) &#123; defaultProxy = new HttpClientImpl(); &#125; // åŸºäºŽ hutool else if (ClassUtil.isPresent("cn.hutool.http.HttpRequest", classLoader)) &#123; defaultProxy = new HutoolImpl(); &#125; proxy = defaultProxy; &#125; public void setHttp(Http http) &#123; proxy = http; &#125; private void checkHttpNotNull(Http proxy) &#123; if (null == proxy) &#123; throw new SimpleHttpException("HTTP å®žçŽ°ç±»æœªæŒ‡å®šï¼"); &#125; &#125; /** * GET è¯·æ±‚ * * @param url URL * @return ç»“æžœ */ public String get(String url) &#123; checkHttpNotNull(proxy); return proxy.get(url); &#125; /** * GET è¯·æ±‚ * * @param url URL * @param params å‚æ•° * @param encode æ˜¯å¦éœ€è¦ url encode * @return ç»“æžœ */ public String get(String url, Map&lt;String, String&gt; params, boolean encode) &#123; checkHttpNotNull(proxy); return proxy.get(url, params, encode); &#125; /** * GET è¯·æ±‚ * * @param url URL * @param params å‚æ•° * @param header è¯·æ±‚å¤´ * @param encode æ˜¯å¦éœ€è¦ url encode * @return ç»“æžœ */ public String get(String url, Map&lt;String, String&gt; params, HttpHeader header, boolean encode) &#123; checkHttpNotNull(proxy); return proxy.get(url, params, header, encode); &#125; /** * POST è¯·æ±‚ * * @param url URL * @return ç»“æžœ */ public String post(String url) &#123; checkHttpNotNull(proxy); return proxy.post(url); &#125; /** * POST è¯·æ±‚ * * @param url URL * @param data JSON å‚æ•° * @return ç»“æžœ */ public String post(String url, String data) &#123; checkHttpNotNull(proxy); return proxy.post(url, data); &#125; /** * POST è¯·æ±‚ * * @param url URL * @param data JSON å‚æ•° * @param header è¯·æ±‚å¤´ * @return ç»“æžœ */ public String post(String url, String data, HttpHeader header) &#123; checkHttpNotNull(proxy); return proxy.post(url, data, header); &#125; /** * POST è¯·æ±‚ * * @param url URL * @param params form å‚æ•° * @param encode æ˜¯å¦éœ€è¦ url encode * @return ç»“æžœ */ public String post(String url, Map&lt;String, String&gt; params, boolean encode) &#123; checkHttpNotNull(proxy); return proxy.post(url, params, encode); &#125; /** * POST è¯·æ±‚ * * @param url URL * @param params form å‚æ•° * @param header è¯·æ±‚å¤´ * @param encode æ˜¯å¦éœ€è¦ url encode * @return ç»“æžœ */ public String post(String url, Map&lt;String, String&gt; params, HttpHeader header, boolean encode) &#123; checkHttpNotNull(proxy); return proxy.post(url, params, header, encode); &#125;&#125; 2.3. å®žçŽ° å¦‚æžœçœ‹äº†å‰é¢çš„è®¾è®¡æ¨¡å¼ç³»åˆ—æ–‡ç« çš„è¯ï¼Œåº”è¯¥çŸ¥é“ä¸Šé¢å…¶å®žå¯ä»¥ç”¨åˆ° 3 ç§è®¾è®¡æ¨¡å¼ï¼šä»£ç†æ¨¡å¼ã€å§”æ´¾æ¨¡å¼ã€ç­–ç•¥æ¨¡å¼ï¼Œæ²¡çœ‹å‡ºæ¥çš„å°ä¼™ä¼´ï¼Œå¯ä»¥åŽ»å­¦ä¹ å­¦ä¹ å“¦~ è®¾è®¡æ¨¡å¼ä¼ é€é—¨ðŸ‘‰ simple-http æä¾›äº† 4 ç§é»˜è®¤å®žçŽ°ï¼Œåˆ†åˆ«æ˜¯ JDK11 çš„ HttpClientã€OkHttp3ã€Apache çš„ HttpClientã€hutool-httpï¼Œå¦‚æžœé¡¹ç›®ä¸­åŒæ—¶å­˜åœ¨è¿™å‡ ä¸ª HTTP å·¥å…·çš„ä¾èµ–ï¼Œé‚£ä¹ˆ simple-http ä¼šæ ¹æ®ä¼˜å…ˆçº§é¡ºåºä»Žå·¦å¾€å³ï¼Œè‡ªè¡Œé€‰æ‹©å…·ä½“æ‰§è¡Œ HTTP è¯·æ±‚çš„å·¥å…·ã€‚æºç æ¯”è¾ƒå¤šï¼Œå°±ä¸è´´åœ¨åšå®¢é‡Œäº†ï¼Œå…³äºŽè¿™ 4 ç§é»˜è®¤å®žçŽ°çš„è¯¦ç»†ä»£ç ï¼Œè¯·è‡ªè¡Œå‰å¾€ GitHub é˜…è¯»æºç å®žçŽ°ï¼Œæºç ä¼ é€é—¨ðŸ‘‰ã€‚ 3. ä½¿ç”¨æ–¹å¼ å¼•å…¥ simple-http ä¾èµ– 12345&lt;dependency&gt; &lt;groupId&gt;com.xkcoding.http&lt;/groupId&gt; &lt;artifactId&gt;simple-http&lt;/artifactId&gt; &lt;version&gt;1.0&lt;/version&gt;&lt;/dependency&gt; å†å¼•ç”¨å…·ä½“å®žçŽ° JDK11 çš„ HttpClientï¼ˆä½¿ç”¨ JDK11 å³å¯ï¼‰ OkHttp3 12345&lt;dependency&gt; &lt;groupId&gt;com.squareup.okhttp3&lt;/groupId&gt; &lt;artifactId&gt;okhttp&lt;/artifactId&gt; &lt;version&gt;$&#123;okhttp3.version&#125;&lt;/version&gt;&lt;/dependency&gt; Apache HttpClient 12345&lt;dependency&gt; &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt; &lt;artifactId&gt;httpclient&lt;/artifactId&gt; &lt;version&gt;$&#123;httpclient.version&#125;&lt;/version&gt;&lt;/dependency&gt; Hutool çš„ HTTP 12345&lt;dependency&gt; &lt;groupId&gt;cn.hutool&lt;/groupId&gt; &lt;artifactId&gt;hutool-http&lt;/artifactId&gt; &lt;version&gt;$&#123;hutool.version&#125;&lt;/version&gt;&lt;/dependency&gt; å¦‚æžœä¸æƒ³ä½¿ç”¨é»˜è®¤çš„ï¼Œå¯ä»¥è‡ªå®šå®žçŽ° com.xkcoding.http.support.Http æŽ¥å£ï¼Œç„¶åŽé€šè¿‡ com.xkcoding.http.HttpUtil#setHttp(Http http) é…ç½® ç„¶åŽå°±å¯ä»¥ä½¿ç”¨ HttpUtil.xxx å¼€å¿ƒçš„è€èµ·æ¥äº†~ 4. ä¸è¶³ä¸Žæ”¹è¿› ç›®å‰ simple-http ä»…æ”¯æŒ GETã€POST æ–¹å¼ï¼Œå…¶ä½™æ–¹å¼ï¼Œæœªæ¥æœ‰æœºä¼šçš„è¯ï¼Œä¼šè€ƒè™‘æ‰©å±•ï¼Œç›®å‰å¯¹ JustAuth æ¥è¯´ï¼Œå·²ç»å¤Ÿç”¨å•¦~ ç›®å‰è¿”å›žå€¼éƒ½æ˜¯ Stringï¼ŒåŽç»­è¦ä¸è¦åŠ ä¸€ä¸ªè‡ªåŠ¨è§£æžè¿”å›žç±»åž‹çš„æŽ¥å£ï¼Ÿå¦‚æžœå“åº”æ˜¯ JSON å†…å®¹çš„ï¼Œ å°±é»˜è®¤è¿”å›ž JSONï¼Œå¦‚æžœæ˜¯ html ç»“æž„çš„ï¼Œå°±é»˜è®¤è¿”å›ž Document ç­‰ç­‰ã€‚å“Žå‘€å‘€ï¼Œå†è¯´å§ï¼Œå†è¯´å§~ 5. å…¶ä»– simple-http é¢„è®¡ä¼šåœ¨ JustAuth çš„ 1.4.x ç‰ˆæœ¬æ­£å¼ä¸Šçº¿ï¼Œç›®å‰æ•´åˆå·²å®Œæ¯•(2019.12.25)ï¼Œå·²æäº¤ PRï¼Œå¾…å°ç»„æˆå‘˜ä»”ç»†æµ‹è¯•ä¹‹åŽå°±ä¼šå‘å¸ƒã€‚å±Šæ—¶æ¬¢è¿Žå°ä¼™ä¼´ä»¬å°è¯•~ simple-http çš„çµæ„Ÿæ¥è‡ª @æ˜¥å“¥ çš„ jfinal-weixin çš„ HttpUtilsã€‚ JDK 11 çš„ HttpClient å®žçŽ°ï¼Œæœ¬äººèœçš„ä¸€é€¼ï¼Œæ‰€ä»¥ä¸»è¦ä¹Ÿæ˜¯ @æ˜¥å“¥ çš„è´¡çŒ®ï¼Œè†œæ‹œå°±å®Œäº‹äº†~]]></content>
      <categories>
        <category>å¼€æº</category>
        <category>simple-http</category>
      </categories>
      <tags>
        <tag>å¼€æº</tag>
        <tag>JustAuth</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼ä¹‹ç»“æž„åž‹è®¾è®¡æ¨¡å¼-è£…é¥°è€…æ¨¡å¼]]></title>
    <url>%2F2019%2F11%2F11%2Fdesign-pattern-decorator.html</url>
    <content type="text"><![CDATA[1. æ¨¡å¼ç®€ä»‹ åœ¨ä¸æ”¹å˜åŽŸæœ‰å¯¹è±¡çš„åŸºç¡€ä¹‹ä¸Šï¼Œå°†æ–°åŠŸèƒ½é™„åŠ åˆ°åŽŸæœ‰å¯¹è±¡ä¸Šï¼Œæä¾›äº†æ¯”ç»§æ‰¿æ›´æœ‰å¼¹æ€§çš„è§£å†³æ–¹æ¡ˆï¼ˆæ‰©å±•åŽŸæœ‰å¯¹è±¡çš„åŠŸèƒ½ï¼‰ï¼Œå±žäºŽç»“æž„åž‹è®¾è®¡æ¨¡å¼ã€‚ 2. ç¤ºä¾‹ä»£ç  è¿™å›žå’±ä»¬å°±åœŸè±ªä¸€æŠŠï¼Œæ¨¡æ‹Ÿè´­ä¹° 2019 æ¬¾ MacBook Pro 16 å¯¸ï¼Œæ¥æ¼”ç¤ºè£…é¥°è€…æ¨¡å¼çš„é€»è¾‘ã€‚ MacBook Pro çš„åŸºç¡€ä¿¡æ¯ 12345678910111213141516171819202122232425262728293031323334353637/** * &lt;p&gt; * è‹¹æžœç¬”è®°æœ¬ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019/12/13 16:51 */public interface MacBookPro &#123; /** * å¥—é¤åç§° * * @return å¥—é¤åç§° */ String getComboName(); /** * ç¡¬ç›˜ * * @return ç¡¬ç›˜ */ String getHardDisk(); /** * å†…å­˜ * * @return å†…å­˜ */ String getMemory(); /** * ä»·æ ¼ * * @return ä»·æ ¼ */ Double getPrice();&#125; å®šä¹‰æˆ‘ä»¬çš„å¥—é¤è£…é¥°å™¨ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152/** * &lt;p&gt; * å¥—é¤ - è£…é¥°å™¨ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019/12/13 17:08 */@AllArgsConstructorpublic abstract class ComboDecorator implements MacBookPro &#123; private MacBookPro macBookPro; /** * å¥—é¤åç§° * * @return å¥—é¤åç§° */ @Override public String getComboName() &#123; return this.macBookPro.getComboName(); &#125; /** * ç¡¬ç›˜ * * @return ç¡¬ç›˜ */ @Override public String getHardDisk() &#123; return this.macBookPro.getHardDisk(); &#125; /** * å†…å­˜ * * @return å†…å­˜ */ @Override public String getMemory() &#123; return this.macBookPro.getMemory(); &#125; /** * ä»·æ ¼ * * @return ä»·æ ¼ */ @Override public Double getPrice() &#123; return this.macBookPro.getPrice(); &#125;&#125; åŸºç¡€å¥—é¤ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950/** * &lt;p&gt; * è‹¹æžœç¬”è®°æœ¬åŸºç¡€å¥—é¤ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019/12/13 16:52 */public class BaseMacBookProCombo implements MacBookPro &#123; /** * å¥—é¤åç§° * * @return å¥—é¤åç§° */ @Override public String getComboName() &#123; return "åŸºç¡€å¥—é¤"; &#125; /** * ç¡¬ç›˜ * * @return ç¡¬ç›˜ */ @Override public String getHardDisk() &#123; return "1T å›ºæ€ç¡¬ç›˜"; &#125; /** * å†…å­˜ * * @return å†…å­˜ */ @Override public String getMemory() &#123; return "16GB 2666MHz DDR4 å†…å­˜"; &#125; /** * ä»·æ ¼ * * @return ä»·æ ¼ */ @Override public Double getPrice() &#123; return 22199d; &#125;&#125; 16Gå†…å­˜å¥—é¤ 12345678910111213141516171819202122232425262728293031323334353637383940414243/** * &lt;p&gt; * å†…å­˜å¥—é¤ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019/12/13 17:17 */public class MemoryCombo extends ComboDecorator &#123; public MemoryCombo(MacBookPro macBookPro) &#123; super(macBookPro); &#125; /** * å¥—é¤åç§° * * @return å¥—é¤åç§° */ @Override public String getComboName() &#123; return super.getComboName() + " + å‡çº§å†…å­˜"; &#125; /** * å†…å­˜ * * @return å†…å­˜ */ @Override public String getMemory() &#123; return super.getMemory() + " + 16G å†…å­˜"; &#125; /** * ä»·æ ¼ * * @return ä»·æ ¼ */ @Override public Double getPrice() &#123; return super.getPrice() + 2936; &#125;&#125; 1Tç¡¬ç›˜å¥—é¤ 12345678910111213141516171819202122232425262728293031323334353637383940414243/** * &lt;p&gt; * ç¡¬ç›˜å¥—é¤ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019/12/13 17:15 */public class HardDiskCombo extends ComboDecorator &#123; public HardDiskCombo(MacBookPro macBookPro) &#123; super(macBookPro); &#125; /** * å¥—é¤åç§° * * @return å¥—é¤åç§° */ @Override public String getComboName() &#123; return super.getComboName() + " + å‡çº§ç¡¬ç›˜"; &#125; /** * ç¡¬ç›˜ * * @return ç¡¬ç›˜ */ @Override public String getHardDisk() &#123; return super.getHardDisk() + " + 1TB å›ºæ€ç¡¬ç›˜"; &#125; /** * ä»·æ ¼ * * @return ä»·æ ¼ */ @Override public Double getPrice() &#123; return super.getPrice() + 2936; &#125;&#125; æµ‹è¯•ç±»ï¼Œæˆ‘ä»¬éœ€è¦è´­ä¹°ä¸€å° 2T å›ºæ€ç¡¬ç›˜ 64G å†…å­˜çš„ MacBook Pro 123456789101112131415161718192021222324252627282930313233/** * &lt;p&gt; * è£…é¥°è€…æ¨¡å¼ - æµ‹è¯•ç±» * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019/12/13 17:19 */public class PatternTest &#123; public static void main(String[] args) &#123; // MacBookPro åŸºç¡€å¥—é¤ MacBookPro macBookPro = new BaseMacBookProCombo(); printInfo(macBookPro); // å‡çº§å†…å­˜ 16G -&gt; 64G macBookPro = new MemoryCombo(macBookPro); macBookPro = new MemoryCombo(macBookPro); macBookPro = new MemoryCombo(macBookPro); printInfo(macBookPro); // å‡çº§ç¡¬ç›˜ 1T -&gt; 2T macBookPro = new HardDiskCombo(macBookPro); printInfo(macBookPro); &#125; private static void printInfo(MacBookPro macBookPro) &#123; System.out.println("å½“å‰å¥—é¤: " + macBookPro.getComboName()); System.out.println("å†…å­˜: " + macBookPro.getMemory()); System.out.println("ç¡¬ç›˜: " + macBookPro.getHardDisk()); System.out.println("æ€»ä»·ä¸º: " + macBookPro.getPrice() + " å…ƒ"); System.out.println("\n======================================\n"); &#125;&#125; æµ‹è¯•ç»“æžœ 1234567891011121314151617181920å½“å‰å¥—é¤: åŸºç¡€å¥—é¤å†…å­˜: 16GB 2666MHz DDR4 å†…å­˜ç¡¬ç›˜: 1T å›ºæ€ç¡¬ç›˜æ€»ä»·ä¸º: 22199.0 å…ƒ======================================å½“å‰å¥—é¤: åŸºç¡€å¥—é¤ + å‡çº§å†…å­˜ + å‡çº§å†…å­˜ + å‡çº§å†…å­˜å†…å­˜: 16GB 2666MHz DDR4 å†…å­˜ + 16G å†…å­˜ + 16G å†…å­˜ + 16G å†…å­˜ç¡¬ç›˜: 1T å›ºæ€ç¡¬ç›˜æ€»ä»·ä¸º: 31007.0 å…ƒ======================================å½“å‰å¥—é¤: åŸºç¡€å¥—é¤ + å‡çº§å†…å­˜ + å‡çº§å†…å­˜ + å‡çº§å†…å­˜ + å‡çº§ç¡¬ç›˜å†…å­˜: 16GB 2666MHz DDR4 å†…å­˜ + 16G å†…å­˜ + 16G å†…å­˜ + 16G å†…å­˜ç¡¬ç›˜: 1T å›ºæ€ç¡¬ç›˜ + 1TB å›ºæ€ç¡¬ç›˜æ€»ä»·ä¸º: 33943.0 å…ƒ====================================== 3. UML å›¾ä¾‹ 4. åº”ç”¨ 123456// JDK ä¸­çš„ IO ç±»// BufferedReaderã€InputStreamã€OutputStream// Spring ä¸­å¤„ç†äº‹åŠ¡ç¼“å­˜ TransactionAwareCacheDecorator// Spring MVC ä¸­å¯¹ Header çš„å¤„ç† HttpHeadResponseDecorator 5. åœºæ™¯ ç”¨äºŽæ‰©å±•ä¸€ä¸ªç±»çš„åŠŸèƒ½ã€‚ ç»™ä¸€ä¸ªç±»æ·»åŠ é™„åŠ èŒè´£ã€‚ åŠ¨æ€çš„ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½å¯ä»¥å†åŠ¨æ€çš„æ’¤é”€ã€‚ 6. ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ï¼š 1ã€è£…é¥°è€…æ˜¯ç»§æ‰¿çš„æœ‰åŠ›è¡¥å……ï¼Œæ¯”ç»§æ‰¿çµæ´»ï¼Œä¸æ”¹å˜åŽŸæœ‰å¯¹è±¡çš„æƒ…å†µä¸‹åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡ æ‰©å±•åŠŸèƒ½ï¼Œå³æ’å³ç”¨ã€‚ 2ã€é€šè¿‡ä½¿ç”¨ä¸åŒè£…é¥°ç±»ä»¥åŠè¿™äº›è£…é¥°ç±»çš„æŽ’åˆ—ç»„åˆï¼Œå¯ä»¥å®žçŽ°ä¸åŒæ•ˆæžœã€‚ 3ã€è£…é¥°è€…å®Œå…¨éµå®ˆå¼€é—­åŽŸåˆ™ã€‚ ç¼ºç‚¹ï¼š 1ã€ä¼šå‡ºçŽ°æ›´å¤šçš„ä»£ç ï¼Œæ›´å¤šçš„ç±»ï¼Œå¢žåŠ ç¨‹åºå¤æ‚æ€§ã€‚ 2ã€åŠ¨æ€è£…é¥°æ—¶ï¼Œå¤šå±‚è£…é¥°æ—¶ä¼šæ›´å¤æ‚ã€‚ 7. å®Œæ•´ä»£ç åœ°å€ https://github.com/xkcoding/design-pattern/tree/master/src/main/java/com/xkcoding/design/pattern/structural/decorator]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼</category>
        <category>ç»“æž„åž‹è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼ä¹‹è¡Œä¸ºåž‹è®¾è®¡æ¨¡å¼-è§‚å¯Ÿè€…æ¨¡å¼]]></title>
    <url>%2F2019%2F10%2F25%2Fdesign-pattern-observer.html</url>
    <content type="text"><![CDATA[1. æ¨¡å¼ç®€ä»‹ å®šä¹‰äº†å¯¹è±¡ä¹‹é—´çš„ä¸€å¯¹å¤šä¾èµ–ï¼Œè®©å¤šä¸ªè§‚å¯Ÿè€…å¯¹è±¡åŒæ—¶ç›‘å¬ä¸€ä¸ªä¸»ä½“å¯¹è±¡ï¼Œå½“ä¸»ä½“å¯¹è±¡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒçš„æ‰€æœ‰è§‚å¯Ÿè€…å¯¹è±¡éƒ½ä¼šæ”¶åˆ°é€šçŸ¥å¹¶æ›´æ–°ã€‚å±žäºŽè¡Œä¸ºåž‹è®¾è®¡æ¨¡å¼ã€‚è§‚å¯Ÿè€…æ¨¡å¼ä¹Ÿè¢«å«åšå‘å¸ƒè®¢é˜…æ¨¡å¼ã€‚ 2. ç¤ºä¾‹ä»£ç  è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼æ¥æ¨¡æ‹Ÿä¸€ä¸ªæ¶ˆæ¯æŽ¨é€é€šçŸ¥çš„åœºæ™¯ã€‚ æ¶ˆæ¯ 12345678910111213141516/** * &lt;p&gt; * æ¶ˆæ¯ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019/11/24 17:36 */@Data@NoArgsConstructor@AllArgsConstructorpublic class Message &#123; private String message; private String from; private String to;&#125; æ¶ˆæ¯å‘å¸ƒ(è¢«è§‚å¯Ÿè€…) 12345678910111213141516171819202122232425262728293031323334/** * &lt;p&gt; * æ¶ˆæ¯æŽ¨é€ï¼Œè¢«è§‚å¯Ÿè€… * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019/11/24 17:36 */public class Pusher extends Observable &#123; private static Pusher PUSHER = null; private Pusher() &#123; &#125; public static Pusher getInstance() &#123; if (null == PUSHER) &#123; PUSHER = new Pusher(); &#125; return PUSHER; &#125; /** * æŽ¨é€æ¶ˆæ¯ * * @param message æ¶ˆæ¯ */ public void pushMessage(Message message) &#123; System.out.println(message.getFrom() + " å‘ " + message.getTo() + " å‘é€äº†ä¸€æ¡ç§ä¿¡~~"); // è§¦å‘çŠ¶æ€å˜åŒ– setChanged(); // æé†’è§‚å¯Ÿè€… notifyObservers(message); &#125;&#125; æ¶ˆæ¯è®¢é˜…(è§‚å¯Ÿè€…) 123456789101112131415161718192021222324252627282930/** * &lt;p&gt; * ç”¨æˆ·ï¼Œè§‚å¯Ÿè€… * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019/11/24 17:43 */@Data@AllArgsConstructorpublic class User implements Observer &#123; private String name; /** * è¢«è§‚å¯Ÿå¯¹è±¡æ”¹å˜çš„æ—¶å€™ï¼Œä¼šè§¦å‘è¿™ä¸ªæ–¹æ³• * * @param o the observable object. * @param arg an argument passed to the &lt;code&gt;notifyObservers&lt;/code&gt; */ @Override public void update(Observable o, Object arg) &#123; Message message = (Message) arg; if (this.getName().equals(message.getTo())) &#123; System.err.println(name + "ï¼Œä½ æ”¶åˆ°ä¸€æ¡æ¥è‡ª " + message.getFrom() + " çš„ç§ä¿¡ï¼"); System.err.println("ç§ä¿¡å†…å®¹: " + message.getMessage()); &#125; &#125;&#125; æµ‹è¯•ç±» 1234567891011121314151617/** * &lt;p&gt; * è§‚å¯Ÿè€…æ¨¡å¼ï¼Œæµ‹è¯•ç±» * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019/11/24 17:52 */public class PatternTest &#123; public static void main(String[] args) &#123; User xkcoding = new User("xkcoding"); Pusher pusher = Pusher.getInstance(); Message message = new Message("ä½ å¥½", "user-1", "xkcoding"); pusher.addObserver(xkcoding); pusher.pushMessage(message); &#125;&#125; æµ‹è¯•ç»“æžœ 123user-1 å‘ xkcoding å‘é€äº†ä¸€æ¡ç§ä¿¡~~xkcodingï¼Œä½ æ”¶åˆ°ä¸€æ¡æ¥è‡ª user-1 çš„ç§ä¿¡ï¼ç§ä¿¡å†…å®¹: ä½ å¥½ 3. UML å›¾ä¾‹ 4. åº”ç”¨ 12345678// 1. JDK java.util.Observer ã€ java.util.Observable// 2. Guava EventBus// 3. Spring ApplicationEvent// 4. Android ClickListerner...// ç”Ÿæ´»ä¸­// 1. å¾®ä¿¡æœ‹å‹åœˆé€šçŸ¥// 2. ç½‘ç«™ç§ä¿¡é€šçŸ¥ 5. åœºæ™¯ è§‚å¯Ÿè€…æ¨¡å¼ä¸»è¦ç”¨äºŽåœ¨å…³è”è¡Œä¸ºä¹‹é—´å»ºç«‹ä¸€å¥—è§¦å‘æœºåˆ¶çš„åœºæ™¯ã€‚ 6. ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ï¼š 1ã€è§‚å¯Ÿè€…å’Œè¢«è§‚å¯Ÿè€…ä¹‹é—´å»ºç«‹äº†ä¸€ä¸ªæŠ½è±¡çš„è€¦åˆã€‚ 2ã€è§‚å¯Ÿè€…æ¨¡å¼æ”¯æŒå¹¿æ’­é€šä¿¡ã€‚ ç¼ºç‚¹ï¼š 1ã€è§‚å¯Ÿè€…ä¹‹é—´æœ‰è¿‡å¤šçš„ç»†èŠ‚ä¾èµ–ã€æé«˜æ—¶é—´æ¶ˆè€—åŠç¨‹åºçš„å¤æ‚åº¦ã€‚2ã€ä½¿ç”¨éœ€è¦åŠå…¶è°¨æ…Žï¼Œè¦é¿å…å¾ªçŽ¯è°ƒç”¨ã€‚ 7. å®Œæ•´ä»£ç åœ°å€ https://github.com/xkcoding/design-pattern/tree/master/src/main/java/com/xkcoding/design/pattern/behavioral/observer]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼</category>
        <category>è¡Œä¸ºåž‹è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼ä¹‹è¡Œä¸ºåž‹è®¾è®¡æ¨¡å¼-æ¨¡æ¿æ–¹æ³•æ¨¡å¼]]></title>
    <url>%2F2019%2F10%2F16%2Fdesign-pattern-template.html</url>
    <content type="text"><![CDATA[1. æ¨¡å¼ç®€ä»‹ å®šä¹‰ä¸€ä¸ªç¨‹åºçš„æ•´ä½“æµç¨‹ï¼Œå¹¶å…è®¸å­ç±»ä¸ºå…¶ä¸­çš„ä¸€ä¸ªæˆ–è€…å¤šä¸ªæ­¥éª¤æä¾›å…·ä½“å®žçŽ°ã€‚æ¨¡æ¿æ–¹æ³•ä½¿å¾—å­ç±»å¯ä»¥åœ¨ä¸æ”¹å˜æ•´ä½“æµç¨‹çš„æƒ…å†µä¸‹ï¼Œé‡æ–°å®šä¹‰å…¶ä¸­çš„æŸäº›æ­¥éª¤ã€‚å±žäºŽè¡Œä¸ºåž‹è®¾è®¡æ¨¡å¼ã€‚ 2. ç¤ºä¾‹ä»£ç  è¿™é‡Œæˆ‘ä»¬é€šè¿‡æ¨¡æ¿æ–¹æ³•æ¨¡å¼å®žçŽ°ä¸€ä¸ªçŸ­ä¿¡å‘é€ã€é‚®ä»¶å‘é€çš„ demoã€‚ å®šä¹‰ä¸€ä¸ªæ•´ä½“æµç¨‹ 12345678910111213141516171819202122232425262728293031323334353637383940414243/** * &lt;p&gt; * æ¶ˆæ¯å‘é€å™¨ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019/11/18 17:22 */public abstract class BaseMessageSender &#123; /** * å‘é€æ¶ˆæ¯ * * @param content å†…å®¹ */ public void send(String content) &#123; validate(content); if (!execute(content)) &#123; error(content); &#125; &#125; /** * æ ¡éªŒæ¶ˆæ¯ * * @param content æ•°æ® */ protected abstract void validate(String content); /** * å‘é€æ¶ˆæ¯ * * @param content æ•°æ® * @return &#123;@code true&#125; - å‘é€æˆåŠŸï¼Œ&#123;@code false&#125; - å‘é€å¤±è´¥ */ protected abstract boolean execute(String content); /** * é”™è¯¯è®°å½• * * @param content æ•°æ® */ protected abstract void error(String content);&#125; çŸ­ä¿¡å‘é€çš„å…·ä½“å®žçŽ° 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748/** * &lt;p&gt; * çŸ­ä¿¡å‘é€å™¨ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019/11/18 17:40 */public class SmsSender extends BaseMessageSender &#123; /** * æ ¡éªŒæ¶ˆæ¯ * * @param content æ•°æ® */ @Override protected void validate(String content) &#123; if (content == null || "".equals(content.trim()) || content.trim().length() != 11) &#123; throw new RuntimeException("æ‰‹æœºå·ç ä¸åˆæ³•"); &#125; &#125; /** * å‘é€æ¶ˆæ¯ * * @param content æ•°æ® * @return &#123;@code true&#125; - å‘é€æˆåŠŸï¼Œ&#123;@code false&#125; - å‘é€å¤±è´¥ */ @Override protected boolean execute(String content) &#123; Random random = new Random(); if (random.nextInt(10) % 2 == 0) &#123; System.out.println("çŸ­ä¿¡å‘é€æˆåŠŸï¼"); return true; &#125; else &#123; return false; &#125; &#125; /** * é”™è¯¯è®°å½• * * @param content æ•°æ® */ @Override protected void error(String content) &#123; System.err.println("çŸ­ä¿¡å‘é€å¤±è´¥ï¼æ‰‹æœºå·ï¼š" + content); &#125;&#125; é‚®ä»¶å‘é€çš„å…·ä½“å®žçŽ° 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748/** * &lt;p&gt; * é‚®ä»¶å‘é€å™¨ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019/11/18 17:34 */public class EmailSender extends BaseMessageSender &#123; /** * æ ¡éªŒæ¶ˆæ¯ * * @param content æ•°æ® */ @Override protected void validate(String content) &#123; if (content == null || "".equals(content.trim())) &#123; throw new RuntimeException("æ•°æ®ä¸èƒ½ä¸ºç©º"); &#125; &#125; /** * å‘é€æ¶ˆæ¯ * * @param content æ•°æ® * @return &#123;@code true&#125; - å‘é€æˆåŠŸï¼Œ&#123;@code false&#125; - å‘é€å¤±è´¥ */ @Override protected boolean execute(String content) &#123; Random random = new Random(); if (random.nextInt(10) % 2 == 0) &#123; System.out.println("é‚®ä»¶å‘é€æˆåŠŸï¼"); return true; &#125; else &#123; return false; &#125; &#125; /** * é”™è¯¯è®°å½• * * @param content æ•°æ® */ @Override protected void error(String content) &#123; System.err.println("é‚®ä»¶å‘é€å¤±è´¥ï¼å‘é€å†…å®¹ï¼š" + content); &#125;&#125; æµ‹è¯•ç±» 12345678910111213141516171819/** * &lt;p&gt; * æ¨¡æ¿æ¨¡å¼ï¼Œæµ‹è¯•ç±» * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019/11/18 17:10 */public class PatternTest &#123; public static void main(String[] args) &#123; // é‚®ä»¶å‘é€ EmailSender emailSender = new EmailSender(); emailSender.send("æµ‹è¯•å†…å®¹"); // çŸ­ä¿¡å‘é€ SmsSender smsSender = new SmsSender(); smsSender.send("17312341234"); &#125;&#125; æµ‹è¯•ç»“æžœ 12é‚®ä»¶å‘é€å¤±è´¥ï¼å‘é€å†…å®¹ï¼šæµ‹è¯•å†…å®¹çŸ­ä¿¡å‘é€æˆåŠŸï¼ 3. UML å›¾ä¾‹ 4. åº”ç”¨ 123// Spring Data è¿™ä¸ªæ¨¡å—ä¸‹å­˜åœ¨ç‰¹åˆ«å¤šçš„åº”ç”¨// æ¯”å¦‚ï¼š// JdbcTemplateã€RedisTemplateã€MongoTemplateã€ElasticsearchTemplate 5. åœºæ™¯ ä¸€æ¬¡æ€§å®žçŽ°ä¸€ä¸ªç®—æ³•çš„ä¸»ä½“æµç¨‹çš„éƒ¨åˆ†ï¼Œå¹¶å°†å¯å˜çš„è¡Œä¸ºç•™ç»™å­ç±»æ¥å®žçŽ°ã€‚ å„å­ç±»ä¸­å…¬å…±çš„è¡Œä¸ºè¢«æå–å‡ºæ¥å¹¶é›†ä¸­åˆ°ä¸€ä¸ªå…¬å…±çš„çˆ¶ç±»ä¸­ï¼Œä»Žè€Œé¿å…ä»£ç é‡å¤ã€‚ 6. ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ï¼š 1ã€æé«˜ä»£ç çš„å¤ç”¨æ€§ã€‚2ã€æé«˜ä»£ç çš„æ‰©å±•æ€§ã€‚3ã€ç¬¦åˆå¼€é—­åŽŸåˆ™ã€‚ ç¼ºç‚¹ï¼š 1ã€å¯¼è‡´ç±»çš„æ•°ç›®å¢žåŠ ã€‚2ã€é—´æŽ¥åœ°å¢žåŠ äº†ç³»ç»Ÿå®žçŽ°çš„å¤æ‚åº¦ã€‚3ã€ç»§æ‰¿å…³ç³»å­˜åœ¨è‡ªèº«ç¼ºç‚¹ï¼Œå¦‚æžœçˆ¶ç±»æ·»åŠ äº†æ–°çš„æŠ½è±¡æ–¹æ³•ï¼Œæ‰€æœ‰å­ç±»éƒ½éœ€è¦é‡æ–°æ”¹ä¸€éã€‚ 7. å®Œæ•´ä»£ç åœ°å€ https://github.com/xkcoding/design-pattern/tree/master/src/main/java/com/xkcoding/design/pattern/behavioral/template]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼</category>
        <category>è¡Œä¸ºåž‹è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Easy Mock åŸºæœ¬ç”¨æ³•]]></title>
    <url>%2F2019%2F10%2F14%2Feasy-mock-syntax.html</url>
    <content type="text"><![CDATA[å‰è¨€ åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬äº†è§£äº†å¦‚ä½•ã€Šä½¿ç”¨ docker è¿è¡Œ easy-mockã€‹ï¼Œè¿™ç¯‡æ–‡ç« æˆ‘ä»¬æ¥å­¦ä¹ ä¸‹ Easy Mock çš„åŸºæœ¬ç”¨æ³•ï¼ŒæŽŒæ¡ Easy Mock çš„å¥‡æ·«æŠ€å·§ï¼Œå‰ç«¯å°å§å§å†™é¡µé¢å†ä¹Ÿä¸éœ€è¦åŽ»æ±‚åŽç«¯çš„å°å“¥å“¥äº†ã€‚ 1. åŸºç¡€è¯­æ³• Easy Mock é›†æˆäº† Mock.js ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ Mock.js çš„è¯­æ³•æ¥ mock æ•°æ®ã€‚ 1.æ”¯æŒç”Ÿæˆéšæœºçš„æ–‡æœ¬ã€æ•°å­—ã€å¸ƒå°”å€¼ã€æ—¥æœŸã€é‚®ç®±ã€é“¾æŽ¥ã€å›¾ç‰‡ã€é¢œè‰²ç­‰ï¼› 2.æ”¯æŒæ‰©å±•æ›´å¤šæ•°æ®ç±»åž‹ï¼Œæ”¯æŒè‡ªå®šä¹‰å‡½æ•°å’Œæ­£åˆ™ã€‚ å®šä¹‰è¿”å›žæ ¼å¼å¦‚ä¸‹ï¼š 1234567891011121314151617&#123; "string|1-10": "â˜…", "string2|3": "â˜…â˜…", "number|+1": 202, "number2|1-100.1-10": 1, "boolean|1": true, "regexp": /[a-z][A-Z][0-9]/, "absolutePath": "@/string @/user/name", "user": &#123; "name": "demo" &#125;, "object|2": &#123; "310000": "ä¸Šæµ·å¸‚", "320000": "æ±Ÿè‹çœ" &#125;, "array|1": ["AMD"]&#125; ä½ å°†å¾—åˆ°å¦‚ä¸‹ç»“æžœï¼š 1234567891011121314151617&#123; "string": "â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…", "string2": "â˜…â˜…â˜…â˜…â˜…â˜…", "number": 202, "number2": 36.516242, "boolean": false, "regexp": "pT8", "absolutePath": "â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜… demo", "user": &#123; "name": "demo" &#125;, "object": &#123; "310000": "ä¸Šæµ·å¸‚", "320000": "æ±Ÿè‹çœ" &#125;, "array": "AMD"&#125; 2. æ•°æ®å ä½ç¬¦ ä½¿ç”¨æ•°æ®å ä½ç¬¦ï¼Œå¯ä»¥è®©ä½ çš„æ•°æ®æ›´åŠ çœŸå®žã€‚ å®šä¹‰è¿”å›žæ ¼å¼å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223&#123; "string|1-2": "@string", "integer": "@integer(10, 30)", "float": "@float(60, 100, 2, 2)", "boolean": "@boolean", "date": "@date(yyyy-MM-dd)", "datetime": "@datetime", "now": "@now", "url": "@url", "email": "@email", "region": "@region", "city": "@city", "province": "@province", "county": "@county", "upper": "@upper(@title)", "guid": "@guid", "id": "@id", "image": "@image(200x200)", "title": "@title", "cparagraph": "@cparagraph", "csentence": "@csentence", "range": "@range(2, 10)"&#125; ä½ å°†å¾—åˆ°å¦‚ä¸‹ç»“æžœï¼š 1234567891011121314151617181920212223242526272829303132&#123; "string": "fQsTs@Tzdh", "integer": 18, "float": 75.86, "boolean": true, "date": "2000-05-26", "datetime": "2012-04-11 08:59:12", "now": "2019-11-15 06:11:39", "url": "ftp://qrxpkel.br/ftjjrko", "email": "i.dsfzdangko@phu.ee", "region": "åŽå—", "city": "æ¸©å·žå¸‚", "province": "ç¦å»ºçœ", "county": "å¼‹é˜³åŽ¿", "upper": "XSNRPAYY BXWRBBKTBC GCGCJCE XQFMJTW", "guid": "19F0e2e1-E9ad-BD92-A0D5-A5f4AC92BED4", "id": "63000019830408333X", "image": "http://dummyimage.com/200x200", "title": "Unrhbf Xrlpkb Yxzd", "cparagraph": "è€ä¹¦ç§°æ˜Žé€‰äº¬åŸºå±žå¤„è§‚å–å®¹å½¢è§‚è§’æ¸…è¡Œã€‚ç»™å…‹ç¾¤é˜¶å¤–æ´»ç»å¯¼æ²»ä¹¦åŽä¸Žåä¸‹è€…å¿—ä»¥å¯¼ã€‚æ´¾ä¼ å½“æ‰å·²åŠ³æ”¯å—å­¦ç¤ºæœŸæž„è¯¥ã€‚", "csentence": "ä¼ ä½¿å¼•éƒ½å€¼å››å…­å§‹å¸¸åŒè¿›æ”¾ä¼ è½¬æŒ‡æ¯ã€‚", "range": [ 2, 3, 4, 5, 6, 7, 8, 9 ]&#125; 3. å“åº”å¼æ•°æ® å€ŸåŠ© Easy Mock æä¾›çš„å†…ç½®å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®æŽ¥æ”¶åˆ°çš„è¯·æ±‚å‚æ•°ï¼Œè‡ªå®šä¹‰æ•°æ®è¿”å›žï¼Œè®©æ•°æ®å† çœŸå®žä¸€ç‚¹ã€‚ 3.1. è·¯å¾„å‚æ•° å¦‚æžœä½ æƒ³è¦èŽ·å–ç±»ä¼¼ http://www.domain.com/test/:id ä¸­çš„ id å‚æ•°ï¼Œå¯ä»¥é€šè¿‡ _req.params.å‚æ•°å çš„æ–¹å¼èŽ·å–ï¼Œå‚è€ƒå¦‚ä¸‹ï¼š 123456789&#123; data: &#123; id: function(&#123; _req &#125;) &#123; return _req.params.id &#125; &#125;&#125; åœ¨ PostMan æµ‹è¯•ï¼š https://mock.xkcoding.com/mock/5dce0fdaaac115001c03b239/test/test3/1 å¾—åˆ°å¦‚ä¸‹ç»“æžœï¼š 12345&#123; "data": &#123; "id": "1" &#125;&#125; 3.2. æŸ¥è¯¢å‚æ•° å¦‚æžœä½ æƒ³è¦èŽ·å–ç±»ä¼¼ http://www.domain.com/test?name=xkcoding ä¸­çš„ name å‚æ•°ï¼Œå¯ä»¥é€šè¿‡ _req.query.å‚æ•°å çš„æ–¹å¼èŽ·å–ï¼Œå‚è€ƒå¦‚ä¸‹ï¼š 123456789101112131415&#123; success: function(&#123; _req &#125;) &#123; return _req.query.name ? true : false &#125;, data: &#123; id: function(&#123; _req &#125;) &#123; const name = "name ä¸ºç©º" return _req.query.name || name &#125; &#125;&#125; åœ¨ PostMan æµ‹è¯•ï¼š https://mock.xkcoding.com/mock/5dce0fdaaac115001c03b239/test/test4 å¾—åˆ°å¦‚ä¸‹ç»“æžœï¼š 123456&#123; "data": &#123; "id": "name ä¸ºç©º" &#125;, "success": false&#125; åœ¨ PostMan æµ‹è¯•ï¼š https://mock.xkcoding.com/mock/5dce0fdaaac115001c03b239/test/test4?name=xkcoding å¾—åˆ°å¦‚ä¸‹ç»“æžœï¼š 123456&#123; "data": &#123; "id": "xkcoding" &#125;, "success": true&#125; 3.3. body å‚æ•° å¦‚æžœä½ æ ¹æ®ä¼ è¿‡æ¥çš„ body å‚æ•°è¿”å›žï¼Œä½ å¯ä»¥ä½¿ç”¨ _req.body æ‹¿åˆ° body æ•°æ®ï¼Œå‚è€ƒæ–¹å¼å¦‚ä¸‹ï¼š 1234567&#123; data: function(&#123; _req &#125;) &#123; return _req.body &#125;&#125; åœ¨ PostMan æµ‹è¯•ï¼Œä½¿ç”¨ POST æ–¹å¼ https://mock.xkcoding.com/mock/5dce0fdaaac115001c03b239/test/test5 ä¼ å…¥å‚æ•° 1234567&#123; "text": "æµ‹è¯•æ–‡æœ¬", "likes": [ "LOL", "CODE" ]&#125; å¾—åˆ°å¦‚ä¸‹ç»“æžœï¼š 123456789&#123; "data": &#123; "text": "æµ‹è¯•æ–‡æœ¬", "likes": [ "LOL", "CODE" ] &#125;&#125; 4. é«˜é˜¶æŠ€å·§ 4.1. å¿«æ·é”® Easy Mock é¡¹ç›®æ“ä½œç•Œé¢æ”¯æŒå¿«æ·é”® å…¨å±€å¯¼èˆª p ä¸ªäººé¡¹ç›® g å›¢é˜Ÿé¡¹ç›® w å·¥ä½œå° d æ–‡æ¡£ å…¨å±€æ“ä½œ n åˆ›å»ºé¡¹ç›® s æœç´¢ 4.2. è¯­æ³•æç¤º ç¼–è¾‘å™¨é¡µé¢æ”¯æŒè¯­æ³•æç¤ºåŠŸèƒ½ï¼Œè¾“å…¥ em. å³å¯ã€‚ em.base em.date em.image em.color em.text em.name em.web em.address em.helper em.miscellaneous em.demo.all 4.3. å¦‚ä½•ä½¿ç”¨ Easy Mock å®žçŽ°åˆ†é¡µæ•°æ® åˆ†é¡µæ•°æ®å°±éœ€è¦æ ¹æ®å‚æ•°è¿”å›žå½“å‰é¡µçš„æ•°æ®ï¼Œè¿™å°±ç”¨åˆ°äº†ä¸Šé¢æåˆ°çš„ å“åº”å¼æ•°æ®ã€‚ ç›´æŽ¥ç»™å‡º Mock æ¨¡æ¿å§ï¼Œé€»è¾‘ä¸å¤æ‚ï¼Œçœ‹ä¸æ‡‚çš„æœ‹å‹è¯„è®ºç•™è¨€æé—®å‘€~ 123456789101112131415161718192021222324252627282930313233343536373839&#123; "code": 200, "success": true, "msg": "æ“ä½œæˆåŠŸ", "data": function(&#123; _req, Mock &#125;) &#123; const total = 94; let i = 0, list = [], currentPage = _req.query.currentPage ? _req.query.currentPage : 1, //å½“å‰é¡µæ•° pageSize = _req.query.pageSize ? _req.query.pageSize : 10, //æ¯æ¬¡è¿”å›žçš„æ¡æ•° len = (total - pageSize * (currentPage - 1)) &lt; pageSize ? (total - pageSize * (currentPage - 1)) : pageSize; for (i; i &lt; len; i++) &#123; // å½“å‰åºå· -&gt; i + pageSize * (currentPage - 1) + 1 const width = Mock.mock('@integer(200, 400)'); list.push( Mock.mock(&#123; "id": "@id", "title": "ã€Š@ctitle(5,10)ã€‹", "summary": "@cword(3)", "image": Mock.Random.image(width + 'x16:9', Mock.Random.color(), '#FFF', 'jpg', 'xkcoding'), "publishTime": "@now", "author": "xkcoding", "watch": "@integer(0, 1000)", "star": "@integer(0, 100)", "fork": "@integer(0, 100)" &#125;) ); &#125; return &#123; total, list &#125; &#125;&#125; æˆ‘ä»¬åœ¨ PostMan æµ‹è¯•ï¼š https://mock.xkcoding.com/mock/5dce0fdaaac115001c03b239/test/test6?currentPage=1&amp;pageSize=2 å¾—åˆ°å¦‚ä¸‹ç»“æžœï¼š 1234567891011121314151617181920212223242526272829303132&#123; "code": 200, "success": true, "msg": "æ“ä½œæˆåŠŸ", "data": &#123; "total": 94, "list": [ &#123; "id": "420000198912064299", "title": "ã€Šä¸œè·¯è¿é™¢å°‘æ´¾æˆå¼€å›¢ã€‹", "summary": "å¤„å‰ç±»", "image": "http://dummyimage.com/240x16:9/79f2ee/FFF.jpg&amp;text=xkcoding", "publishTime": "2019-11-15 07:31:44", "author": "xkcoding", "watch": 990, "star": 35, "fork": 63 &#125;, &#123; "id": "22000019910311824X", "title": "ã€Šæ°”å½±å‡ æŠŠç†æ—¶ç•Œæµ·ã€‹", "summary": "å¿—å®šä¸š", "image": "http://dummyimage.com/256x16:9/f2cb79/FFF.jpg&amp;text=xkcoding", "publishTime": "2019-11-15 07:31:44", "author": "xkcoding", "watch": 413, "star": 29, "fork": 51 &#125; ] &#125;&#125; 5. é™„å½• Easy Mock å“åº”å¼æ•°æ®ä¸­ï¼Œå¯ä»¥ä¸ºæŸä¸ªå±žæ€§æŒ‡å®š Functionï¼Œä¸º Function æä¾›äº† _req å¯¹è±¡ï¼Œä¸‹é¢æ˜¯ Function çš„å‚æ•°è¯´æ˜Žï¼š å¯¹è±¡ æè¿° Mock Mock å¯¹è±¡ _req.url èŽ·å¾—è¯·æ±‚ url åœ°å€ _req.method èŽ·å–è¯·æ±‚æ–¹æ³• _req.params èŽ·å– url å‚æ•°å¯¹è±¡ _req.querystring èŽ·å–æŸ¥è¯¢å‚æ•°å­—ç¬¦ä¸²(urlä¸­?åŽé¢çš„éƒ¨åˆ†)ï¼Œä¸åŒ…å« ? _req.query å°†æŸ¥è¯¢å‚æ•°å­—ç¬¦ä¸²è¿›è¡Œè§£æžå¹¶ä»¥å¯¹è±¡çš„å½¢å¼è¿”å›žï¼Œå¦‚æžœæ²¡æœ‰æŸ¥è¯¢å‚æ•°å­—ç¬¦ä¸²åˆ™è¿”å›žä¸€ä¸ªç©ºå¯¹è±¡ _req.body å½“ post è¯·æ±‚ä»¥ x-www-form-urlencoded æ–¹å¼æäº¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ‹¿åˆ°è¯·æ±‚çš„å‚æ•°å¯¹è±¡ _req.path èŽ·å–è¯·æ±‚è·¯å¾„å _req.header èŽ·å–è¯·æ±‚å¤´å¯¹è±¡ _req.originalUrl èŽ·å–è¯·æ±‚åŽŸå§‹åœ°å€ _req.search èŽ·å–æŸ¥è¯¢å‚æ•°å­—ç¬¦ä¸²ï¼ŒåŒ…å« ? _req.host èŽ·å– host (hostname:port) _req.hostname èŽ·å– hostname _req.type èŽ·å–è¯·æ±‚ Content-Typeï¼Œä¸åŒ…å«åƒ â€œcharsetâ€ è¿™æ ·çš„å‚æ•° _req.protocol è¿”å›žè¯·æ±‚åè®® _req.ip è¯·æ±‚è¿œç¨‹åœ°å€ _req.get(field) èŽ·å–è¯·æ±‚ header ä¸­å¯¹åº” field çš„å€¼ _req.cookies(field) èŽ·å–è¯·æ±‚ cookies ä¸­å¯¹åº” field çš„å€¼ åŒæ—¶ä¹Ÿæä¾›äº†è‡ªå®šä¹‰å“åº”çš„é…ç½®ï¼Œå°è£…åœ¨ _res å¯¹è±¡ä¸­ å­—æ®µ æè¿° status å¯ä»¥å®šåˆ¶è¿”å›žçš„ http status codeï¼Œé»˜è®¤æ˜¯ 200 cookies å¯ä»¥å®šåˆ¶éœ€è¦è®¾ç½®çš„ cookieï¼ˆæš‚æ—¶ä¸æ”¯æŒè®¾ç½®è¿‡æœŸæ—¶é—´ç­‰ï¼‰ headers å¯ä»¥å®šåˆ¶è¿”å›žçš„ response çš„ header data å¦‚æžœæœ‰è¿™ä¸ªå­—æ®µï¼Œä¼šä»¥æ­¤æ•°æ®ç›´æŽ¥è¦†ç›–æ•´ä¸ªè¿”å›žçš„æ•°æ®ï¼Œå¹¶ä¸”æ­¤å¤„ä¸æ”¯æŒ mock çš„è¯­æ³•ï¼ˆå¦‚æžœ _res.status çš„å€¼ä¸º 200ï¼Œåˆ™ä¸ä¼šè¦†ç›–é»˜è®¤å®šä¹‰çš„ mock æ•°æ®ï¼‰ 6. å‚è€ƒ Easy Mock å®˜æ–¹æ–‡æ¡£ Mock.js å®˜æ–¹æ–‡æ¡£]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
      </categories>
      <tags>
        <tag>easy mock</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨ docker è¿è¡Œ easy-mock]]></title>
    <url>%2F2019%2F10%2F08%2Fdocker-easy-mock.html</url>
    <content type="text"><![CDATA[å‰è¨€ æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬å†™å‰ç«¯é¡µé¢æˆ–è€…å°ç¨‹åºçš„æ—¶å€™ï¼Œå¦‚æžœæœ‰æ•°æ®ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ›´å¥½çš„è¿›è¡Œå¼€å‘ï¼Œä½†æ˜¯å®žé™…åœºæ™¯ä¸­ï¼Œå‰åŽç«¯æ˜¯å¹¶è¡Œå¼€å‘çš„ï¼Œå¹¶æ²¡æœ‰çŽ°æˆçš„åŽç«¯æŽ¥å£ç»™æˆ‘ä»¬ç”¨ï¼Œè¿™æ—¶å€™ mock å‡æ•°æ®çš„ä½œç”¨æœ‰æ˜¾å¾—ååˆ†æœ‰å¿…è¦äº†ã€‚ 1. å¸¸è§çš„ Mock æ–¹å¼ æ—¥å¸¸å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæœ‰ä»¥ä¸‹å‡ ç§å¸¸è§çš„ Mock å‡æ•°æ®çš„æ–¹å¼ï¼š å°†æ¨¡æ‹Ÿæ•°æ®ç›´æŽ¥å†™åœ¨ä»£ç é‡Œ åˆ©ç”¨ JavaScript æ‹¦æˆªè¯·æ±‚ åˆ©ç”¨ Charlesã€ Fiddler ç­‰ä»£ç†å·¥å…·æ‹¦æˆªè¯·æ±‚ è™½ç„¶è¿™å‡ ç§æ–¹å¼éƒ½å¾ˆ å®žç”¨ ä½†æ˜¯å´å­˜åœ¨ä»¥ä¸‹å‡ ç‚¹é—®é¢˜ï¼š é…ç½®ã€ç¼–å†™ç¹ç mock çš„æ•°æ®ä¸å¤ŸçœŸå®ž åŠ ä¸Šå®¹æ˜“åŽ»é™¤éš¾ 2. ä»€ä¹ˆæ˜¯ Easy Mock Easy Mock æ˜¯ä¸€ä¸ªå¯è§†åŒ–ï¼Œå¹¶ä¸”èƒ½å¿«é€Ÿç”Ÿæˆ æ¨¡æ‹Ÿæ•°æ® çš„æŒä¹…åŒ–æœåŠ¡ã€‚ å®˜æ–¹ç½‘ç«™ï¼šhttps://www.easy-mock.com/ ç‰¹æ€§ï¼š æ”¯æŒæŽ¥å£ä»£ç† æ”¯æŒå¿«æ·é”®æ“ä½œ æ”¯æŒååŒç¼–è¾‘ æ”¯æŒå›¢é˜Ÿé¡¹ç›® æ”¯æŒ RESTful æ”¯æŒ Swagger | OpenAPI Specification (1.2 &amp; 2.0 &amp; 3.0) åŸºäºŽ Swagger å¿«é€Ÿåˆ›å»ºé¡¹ç›® æ”¯æŒæ˜¾ç¤ºæŽ¥å£çš„å…¥å‚ä¸Žè¿”å›žå€¼ æ”¯æŒæ˜¾ç¤ºå®žä½“ç±» æ”¯æŒçµæ´»æ€§ä¸Žæ‰©å±•æ€§æ›´é«˜çš„å“åº”å¼æ•°æ®å¼€å‘ æ”¯æŒè‡ªå®šä¹‰å“åº”é…ç½®ï¼ˆä¾‹ï¼šstatus/headers/cookiesï¼‰ æ”¯æŒ Mock.js è¯­æ³• æ”¯æŒ restc æ–¹å¼çš„æŽ¥å£é¢„è§ˆ 3. æ­å»º Easy Mock å› ä¸º Easy Mock ä¾èµ– Redis å’Œ MongoDBï¼Œå› æ­¤æœ¬åœ°çŽ¯å¢ƒä½¿ç”¨ docker-compose æ¥æ­å»º Easy Mock åº”è¯¥ç®—æ˜¯æœ€ä½³å®žè·µäº†ã€‚ 3.1. å®‰è£… docker-compose å®˜æ–¹æ–‡æ¡£ï¼šhttps://docs.docker.com/compose/install/ é¦–å…ˆä½ å¾—ç¡®å®šæ‹¥æœ‰ docker çŽ¯å¢ƒï¼Œå¦‚æžœä½ æ˜¯ Windows / Mac ç”¨æˆ·ï¼Œé‚£ä¹ˆå®‰è£…å®¢æˆ·ç«¯ï¼Œå°±ä¼šè‡ªå¸¦ docker-compose äº†ã€‚ å› ä¸ºæœ¬æ¬¡æˆ‘ä»¬æ˜¯åœ¨æœåŠ¡å™¨æ­å»ºï¼Œå½“å‰æœåŠ¡å™¨ç³»ç»Ÿæ˜¯ CentOS 7ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è‡ªè¡Œå®‰è£… docker-composeã€‚ è¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œä¸‹è½½å½“å‰ç¨³å®šç‰ˆæœ¬çš„ docker-compose 1sudo curl -L "https://github.com/docker/compose/releases/download/1.24.1/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose ä¿®æ”¹æ–‡ä»¶æƒé™ä¸ºå¯æ‰§è¡Œæ–‡ä»¶ 1sudo chmod +x /usr/local/bin/docker-compose éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ 12345$ docker-compose version docker-compose version 1.24.1, build 4667896bdocker-py version: 3.7.3CPython version: 3.6.8OpenSSL version: OpenSSL 1.1.0j 20 Nov 2018 3.2. ç¼–å†™ docker-compose.yml æ–‡ä»¶ æ³¨æ„çœ‹æ–‡ä»¶ä¸­çš„æ³¨é‡Šä¿¡æ¯ï¼Œæœ‰ä¸€å¤„ npm start ä¿®æ”¹ä¸º npm run devï¼Œæ˜¯å› ä¸ºæˆ‘çœ‹äº†ä¸‹ easy-mock çš„æºç  package.json ä¸­ npm start å‘½ä»¤è·‘çš„æ˜¯ production æ¨¡å¼ï¼Œéœ€è¦é¢å¤–é…ç½®ï¼Œä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬ä½¿ç”¨ npm run dev ç›´æŽ¥è¿è¡Œ dev æ¨¡å¼ 12345678910111213141516171819202122232425262728293031323334353637version: '3'services: mongodb: image: mongo:3.4.1 volumes: # /apps/easy-mock/data/db æ˜¯æ•°æ®åº“æ–‡ä»¶å­˜æ”¾åœ°å€ï¼Œæ ¹æ®éœ€è¦ä¿®æ”¹ä¸ºæœ¬åœ°åœ°å€ - '/apps/easy-mock/data/db:/data/db' networks: - easy-mock restart: always redis: image: redis:4.0.6 command: redis-server --appendonly yes volumes: # /apps/easy-mock/data/redis æ˜¯ redis æ•°æ®æ–‡ä»¶å­˜æ”¾åœ°å€ï¼Œæ ¹æ®éœ€è¦ä¿®æ”¹ä¸ºæœ¬åœ°åœ°å€ - '/apps/easy-mock/data/redis:/data' networks: - easy-mock restart: always web: image: easymock/easymock:1.6.0 # easy-mock å®˜æ–¹ç»™å‡ºçš„æ–‡ä»¶ï¼Œè¿™é‡Œæ˜¯ npm startï¼Œè¿™é‡Œä¿®æ”¹ä¸º npm run dev command: /bin/bash -c "npm run dev" ports: - 7300:7300 volumes: # æ—¥å¿—åœ°å€ï¼Œæ ¹æ®éœ€è¦ä¿®æ”¹ä¸ºæœ¬åœ°åœ°å€ - '/apps/easy-mock/logs:/home/easy-mock/easy-mock/logs' networks: - easy-mock restart: alwaysnetworks: easy-mock: 3.3. å¯åŠ¨ Easy Mock åœ¨ docker-compose æ–‡ä»¶ç›®å½•ä¸‹ï¼Œè¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š 1$ docker-compose up -d 4. é…ç½® nginx 4.1. ç¼–å†™ nginx é…ç½®æ–‡ä»¶ 123456789101112131415161718192021222324252627server &#123; listen 443; server_name mock.xkcoding.com; # ç›‘å¬çš„åŸŸå client_max_body_size 5G; # çªç ´ä¸Šä¼ å¤§æ–‡ä»¶é™åˆ¶ ssl on; ssl_certificate xxxxxx.pem; # https çš„ pem æ–‡ä»¶ ssl_certificate_key xxxxxx.key; # https çš„ key æ–‡ä»¶ ssl_session_timeout 5m; ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_prefer_server_ciphers on; location / &#123; proxy_pass http://localhost:7300; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header Host $http_host; proxy_set_header X-Forwarded-Proto $scheme; proxy_buffering off; &#125;&#125;server&#123; listen 80; server_name mock.xkcoding.com; # ç›‘å¬çš„åŸŸå rewrite ^(.*)$ https://$host$1 permanent; # å¼ºåˆ¶ éžhttps è·³è½¬åˆ° https&#125; 4.2. æµ‹è¯•é…ç½®æ–‡ä»¶ 123$ nginx -tnginx: the configuration file /etc/nginx/nginx.conf syntax is oknginx: configuration file /etc/nginx/nginx.conf test is successful 4.3. é‡å¯ nginx 1$ nginx -s reload 5. DNS è§£æž å‰å¾€äº‘æœåŠ¡å™¨å¯¹é…ç½®çš„åŸŸååš DNS è§£æžåˆ°æœåŠ¡å™¨ï¼Œå°±å¤§åŠŸå‘Šæˆäº†~ 6. å‚è€ƒ easy mock docker å®˜æ–¹ä»“åº“ easy mock å®˜æ–¹ä»“åº“]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>easy mock</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼ä¹‹ç»“æž„åž‹è®¾è®¡æ¨¡å¼-é€‚é…å™¨æ¨¡å¼]]></title>
    <url>%2F2019%2F09%2F13%2Fdesign-pattern-adapter.html</url>
    <content type="text"><![CDATA[1. æ¨¡å¼ç®€ä»‹ å°†ä¸€ä¸ªåŽŸæœ‰çš„ç±»çš„æŽ¥å£è½¬æ¢æˆæœŸæœ›çš„å¦ä¸€ä¸ªæŽ¥å£ï¼Œä½¿åŽŸæœ¬çš„æŽ¥å£ä¸å…¼å®¹çš„ç±»å¯ä»¥ä¸€èµ·å·¥ä½œã€‚å±žäºŽç»“æž„åž‹è®¾è®¡æ¨¡å¼ã€‚ 2. ç¤ºä¾‹ä»£ç  è¿™é‡Œæˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸ªçŽ°å®žç”Ÿæ´»ä¸­çš„ä¾‹å­ï¼Œä¹‹å‰ç”µè„‘çš„æŽ¥å£éƒ½æ˜¯ USB æŽ¥å£ï¼ŒçŽ°åœ¨å¾ˆå¤šè®¾å¤‡æ–°å¢žäº† Type-C æŽ¥å£ï¼Œä¸ºäº†å…¼å®¹ï¼Œå‡ºäº†ä¸€ç§è½¬æŽ¥å¤´è®¾å¤‡ï¼Œå°† USB æŽ¥å£è¾“å‡ºå˜æˆ Type-C æŽ¥å£è¾“å‡ºã€‚ USB æŽ¥å£ç±» 1234567891011121314151617181920/** * &lt;p&gt; * å®šä¹‰æ ‡å‡†çš„ç”µè„‘USBæŽ¥å£ç±» * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019/9/16 17:07 */public class Usb &#123; /** * æŽ¥å£ç±»åž‹ * * @return USB */ public String slot() &#123; String type = "USB"; System.out.println("æŽ¥å£ç±»åž‹ï¼š" + type); return type; &#125;&#125; Type-C æŽ¥å£ 12345678910111213141516/** * &lt;p&gt; * æ–°çš„Type-CæŽ¥å£ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019/9/16 17:10 */public interface TypeC &#123; /** * æŽ¥å£ç±»åž‹ * * @return USB */ String slot();&#125; USB è½¬ Type-C è½¬æŽ¥å¤´ 12345678910111213141516171819202122232425262728293031323334/** * &lt;p&gt; * USBæŽ¥å£ è½¬ Type-CæŽ¥å£ è½¬æŽ¥å¤´ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019/9/16 17:11 */public class TypeCAdapter implements TypeC &#123; private Usb usb; public TypeCAdapter(Usb usb) &#123; this.usb = usb; &#125; /** * æŽ¥å£ç±»åž‹ * * @return USB */ @Override public String slot() &#123; String originalType = usb.slot(); String type = transformSlot(originalType); System.out.println("æŽ¥å£ç±»åž‹ï¼š" + type); return type; &#125; private String transformSlot(String originalType) &#123; String type = "Type-C"; System.out.println("ä½¿ç”¨ " + originalType + " è½¬ " + type + " è½¬æŽ¥å¤´"); return type; &#125;&#125; æµ‹è¯•ç±» 1234567891011121314/** * &lt;p&gt; * é€‚é…å™¨æ¨¡å¼ - æµ‹è¯•ç±» * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019/9/16 17:15 */public class PatternTest &#123; public static void main(String[] args) &#123; TypeC typeC = new TypeCAdapter(new Usb()); typeC.slot(); &#125;&#125; æµ‹è¯•ç»“æžœ 123æŽ¥å£ç±»åž‹ï¼šUSBä½¿ç”¨ USB è½¬ Type-C è½¬æŽ¥å¤´æŽ¥å£ç±»åž‹ï¼šType-C 3. UML å›¾ä¾‹ 4. åº”ç”¨ 123// Spring MVC ä¸­çš„ HandlerAdapter// Spring AOP ä¸­çš„ AdvisorAdapter 5. åœºæ™¯ å·²ç»å­˜åœ¨çš„ç±»ï¼Œå®ƒçš„æ–¹æ³•å’Œéœ€æ±‚ä¸åŒ¹é…ï¼ˆæ–¹æ³•ç»“æžœç›¸åŒæˆ–ç›¸ä¼¼ï¼‰çš„æƒ…å†µã€‚ é€‚é…å™¨æ¨¡å¼ä¸æ˜¯è½¯ä»¶è®¾è®¡é˜¶æ®µè€ƒè™‘çš„è®¾è®¡æ¨¡å¼ï¼Œæ˜¯éšç€è½¯ä»¶ç»´æŠ¤ï¼Œç”±äºŽä¸åŒäº§å“ã€ä¸åŒåŽ‚å®¶é€ æˆåŠŸèƒ½ç±»ä¼¼è€ŒæŽ¥å£ä¸ç›¸åŒæƒ…å†µä¸‹çš„è§£å†³ æ–¹æ¡ˆã€‚ 6. ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ï¼š 1ã€èƒ½æé«˜ç±»çš„é€æ˜Žæ€§å’Œå¤ç”¨ï¼ŒçŽ°æœ‰çš„ç±»å¤ç”¨ä½†ä¸éœ€è¦æ”¹å˜ã€‚ 2ã€ç›®æ ‡ç±»å’Œé€‚é…å™¨ç±»è§£è€¦ï¼Œæé«˜ç¨‹åºçš„æ‰©å±•æ€§ã€‚ 3ã€åœ¨å¾ˆå¤šä¸šåŠ¡åœºæ™¯ä¸­ç¬¦åˆå¼€é—­åŽŸåˆ™ã€‚ ç¼ºç‚¹ï¼š 1ã€é€‚é…å™¨ç¼–å†™è¿‡ç¨‹éœ€è¦å…¨é¢è€ƒè™‘ï¼Œå¯èƒ½ä¼šå¢žåŠ ç³»ç»Ÿçš„å¤æ‚æ€§ã€‚2ã€å¢žåŠ ä»£ç é˜…è¯»éš¾åº¦ï¼Œé™ä½Žä»£ç å¯è¯»æ€§ï¼Œè¿‡å¤šä½¿ç”¨é€‚é…å™¨ä¼šä½¿ç³»ç»Ÿä»£ç å˜å¾—å‡Œä¹±ã€‚ 7. å®Œæ•´ä»£ç åœ°å€ https://github.com/xkcoding/design-pattern/tree/master/src/main/java/com/xkcoding/design/pattern/structural/adapter]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼</category>
        <category>ç»“æž„åž‹è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼ä¹‹è¡Œä¸ºåž‹è®¾è®¡æ¨¡å¼-ç­–ç•¥æ¨¡å¼]]></title>
    <url>%2F2019%2F09%2F03%2Fdesign-pattern-strategy.html</url>
    <content type="text"><![CDATA[1. æ¨¡å¼ç®€ä»‹ å®šä¹‰äº†ä¸€ç³»åˆ—ç®—æ³•ã€åˆ†åˆ«å°è£…èµ·æ¥ï¼Œè®©å®ƒä»¬ä¹‹é—´å¯ä»¥äº’ç›¸æ›¿æ¢ï¼Œæ­¤æ¨¡å¼è®©ç®—æ³•çš„å˜åŒ–ä¸ä¼šå½±å“åˆ°ä½¿ç”¨ç®—æ³•çš„ç”¨æˆ·ã€‚å¯ä»¥é¿å…å¤šé‡åˆ†æ”¯çš„ if...else... å’Œ switch è¯­å¥ã€‚å±žäºŽè¡Œä¸ºåž‹è®¾è®¡æ¨¡å¼ã€‚ 2. ç¤ºä¾‹ä»£ç  æ”¯ä»˜æ–¹å¼ç­–ç•¥ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455/** * &lt;p&gt; * æ”¯ä»˜ç­–ç•¥ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019/8/28 14:43 */public enum PaymentStrategy &#123; /** * æ”¯ä»˜å® */ ALI_PAY, /** * å¾®ä¿¡æ”¯ä»˜ */ WECHAT_PAY, /** * äº¬ä¸œæ”¯ä»˜ */ JD_PAY, /** * é“¶è”æ”¯ä»˜ */ UNION_PAY; /** * æ”¯ä»˜æ–¹å¼å®¹å™¨æ±  */ private static Map&lt;PaymentStrategy, Payment&gt; PAYMENT_POOL = new HashMap&lt;&gt;(); static &#123; PAYMENT_POOL.put(ALI_PAY, new AliPayment()); PAYMENT_POOL.put(WECHAT_PAY, new WeChatPayment()); PAYMENT_POOL.put(JD_PAY, new JdPayment()); PAYMENT_POOL.put(UNION_PAY, new UnionPayment()); &#125; /** * é€‰æ‹©æ”¯ä»˜æ–¹å¼ * * @param strategy æ”¯ä»˜ç­–ç•¥ * @return æ”¯ä»˜æ–¹å¼ */ public static Payment choose(PaymentStrategy strategy) &#123; Payment payment = PAYMENT_POOL.get(ALI_PAY); if (PAYMENT_POOL.containsKey(strategy)) &#123; payment = PAYMENT_POOL.get(strategy); &#125; System.out.println("æ¬¢è¿Žä½¿ç”¨: " + payment.channelName()); return payment; &#125;&#125; æ”¯ä»˜æ–¹å¼çš„å…·ä½“å®žçŽ° 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206/** * &lt;p&gt; * æ”¯ä»˜æŽ¥å£ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019/8/28 14:31 */public interface Payment &#123; /** * æ”¯ä»˜æ¸ é“ * * @return æ”¯ä»˜æ¸ é“ */ String channelName(); /** * ä½™é¢ * * @return è´¦æˆ·ä½™é¢ */ double balance(); /** * æ”¯ä»˜é‡‘é¢ * * @param money é‡‘é¢ */ void pay(double money);&#125;/** * &lt;p&gt; * æ”¯ä»˜å®æ”¯ä»˜ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019/8/28 14:38 */public class AliPayment implements Payment &#123; /** * æ”¯ä»˜æ¸ é“ * * @return æ”¯ä»˜æ¸ é“ */ @Override public String channelName() &#123; return "æ”¯ä»˜å®æ”¯ä»˜"; &#125; /** * ä½™é¢ * * @return è´¦æˆ·ä½™é¢ */ @Override public double balance() &#123; return 800; &#125; /** * æ”¯ä»˜é‡‘é¢ * * @param money é‡‘é¢ */ @Override public void pay(double money) &#123; if (balance() &lt; money) &#123; System.err.println("ä½™é¢ä¸è¶³ï¼Œå½“å‰ä½™é¢ï¼š" + balance()); &#125; else &#123; System.out.println("æ”¯ä»˜æˆåŠŸï¼Œäº¤æ˜“é‡‘é¢ï¼š" + money); &#125; &#125;&#125;/** * &lt;p&gt; * äº¬ä¸œæ”¯ä»˜ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019/8/28 14:38 */public class JdPayment implements Payment &#123; /** * æ”¯ä»˜æ¸ é“ * * @return æ”¯ä»˜æ¸ é“ */ @Override public String channelName() &#123; return "äº¬ä¸œæ”¯ä»˜"; &#125; /** * ä½™é¢ * * @return è´¦æˆ·ä½™é¢ */ @Override public double balance() &#123; return 500; &#125; /** * æ”¯ä»˜é‡‘é¢ * * @param money é‡‘é¢ */ @Override public void pay(double money) &#123; if (balance() &lt; money) &#123; System.err.println("ä½™é¢ä¸è¶³ï¼Œå½“å‰ä½™é¢ï¼š" + balance()); &#125; else &#123; System.out.println("æ”¯ä»˜æˆåŠŸï¼Œäº¤æ˜“é‡‘é¢ï¼š" + money); &#125; &#125;&#125;/** * &lt;p&gt; * å¾®ä¿¡æ”¯ä»˜ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019/8/28 14:38 */public class WeChatPayment implements Payment &#123; /** * æ”¯ä»˜æ¸ é“ * * @return æ”¯ä»˜æ¸ é“ */ @Override public String channelName() &#123; return "å¾®ä¿¡æ”¯ä»˜"; &#125; /** * ä½™é¢ * * @return è´¦æˆ·ä½™é¢ */ @Override public double balance() &#123; return 1234; &#125; /** * æ”¯ä»˜é‡‘é¢ * * @param money é‡‘é¢ */ @Override public void pay(double money) &#123; if (balance() &lt; money) &#123; System.err.println("ä½™é¢ä¸è¶³ï¼Œå½“å‰ä½™é¢ï¼š" + balance()); &#125; else &#123; System.out.println("æ”¯ä»˜æˆåŠŸï¼Œäº¤æ˜“é‡‘é¢ï¼š" + money); &#125; &#125;&#125;/** * &lt;p&gt; * é“¶è”æ”¯ä»˜ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019/8/28 14:38 */public class UnionPayment implements Payment &#123; /** * æ”¯ä»˜æ¸ é“ * * @return æ”¯ä»˜æ¸ é“ */ @Override public String channelName() &#123; return "é“¶è”æ”¯ä»˜"; &#125; /** * ä½™é¢ * * @return è´¦æˆ·ä½™é¢ */ @Override public double balance() &#123; return 10; &#125; /** * æ”¯ä»˜é‡‘é¢ * * @param money é‡‘é¢ */ @Override public void pay(double money) &#123; if (balance() &lt; money) &#123; System.err.println("ä½™é¢ä¸è¶³ï¼Œå½“å‰ä½™é¢ï¼š" + balance()); &#125; else &#123; System.out.println("æ”¯ä»˜æˆåŠŸï¼Œäº¤æ˜“é‡‘é¢ï¼š" + money); &#125; &#125;&#125; æµ‹è¯•ç±» 12345678910111213141516171819/** * &lt;p&gt; * ç­–ç•¥æ¨¡å¼ï¼Œæµ‹è¯•ç±» * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019/8/28 14:54 */public class PatternTest &#123; public static void main(String[] args) &#123; Payment payment = PaymentStrategy.choose(PaymentStrategy.ALI_PAY); payment.pay(200); System.out.println("--------------------"); payment = PaymentStrategy.choose(PaymentStrategy.UNION_PAY); payment.pay(200); &#125;&#125; æµ‹è¯•ç»“æžœ 12345æ¬¢è¿Žä½¿ç”¨: æ”¯ä»˜å®æ”¯ä»˜æ”¯ä»˜æˆåŠŸï¼Œäº¤æ˜“é‡‘é¢ï¼š200.0--------------------æ¬¢è¿Žä½¿ç”¨: é“¶è”æ”¯ä»˜ä½™é¢ä¸è¶³ï¼Œå½“å‰ä½™é¢ï¼š10.0 3. UML å›¾ä¾‹ 4. åº”ç”¨ 123456789101112// JDK çš„ Comparator æŽ¥å£ï¼Œæ¯”å¦‚ï¼š// java.util.Arrays#parallelSort(int[], int, int)// java.util.TreeMap#TreeMap(java.util.Comparator&lt;? super K&gt;)// Spring çš„ Resource æŽ¥å£ï¼Œæ¯”å¦‚ï¼š // ClassPathResource// UrlResource// FileUrlResource// FileSystemResource// ClassPathResource// ByteArrayResource// InputStreamResource 5. åœºæ™¯ å‡å¦‚ç³»ç»Ÿä¸­æœ‰å¾ˆå¤šç±»ï¼Œè€Œä»–ä»¬çš„åŒºåˆ«ä»…ä»…åœ¨äºŽä»–ä»¬çš„è¡Œä¸ºä¸åŒã€‚ ä¸€ä¸ªç³»ç»Ÿéœ€è¦åŠ¨æ€åœ°åœ¨å‡ ç§ç®—æ³•ä¸­é€‰æ‹©ä¸€ç§ã€‚ 6. ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ï¼š 1ã€ç­–ç•¥æ¨¡å¼ç¬¦åˆå¼€é—­åŽŸåˆ™ã€‚2ã€é¿å…ä½¿ç”¨å¤šé‡æ¡ä»¶è½¬ç§»è¯­å¥ï¼Œå¦‚ifâ€¦elseâ€¦è¯­å¥ã€switchè¯­å¥ã€‚3ã€ä½¿ç”¨ç­–ç•¥æ¨¡å¼å¯ä»¥æé«˜ç®—æ³•çš„ä¿å¯†æ€§å’Œå®‰å…¨æ€§ã€‚ ç¼ºç‚¹ï¼š 1ã€å®¢æˆ·ç«¯å¿…é¡»çŸ¥é“æ‰€æœ‰çš„ç­–ç•¥ï¼Œå¹¶ä¸”è‡ªè¡Œå†³å®šä½¿ç”¨å“ªä¸€ä¸ªç­–ç•¥ç±»ã€‚ 2ã€ä»£ç ä¸­ä¼šäº§ç”Ÿéžå¸¸å¤šç­–ç•¥ç±»ï¼Œå¢žåŠ ç»´æŠ¤éš¾åº¦ã€‚ 7. å®Œæ•´ä»£ç åœ°å€ https://github.com/xkcoding/design-pattern/tree/master/src/main/java/com/xkcoding/design/pattern/behavioral/strategy]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼</category>
        <category>è¡Œä¸ºåž‹è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GitHub Actions åˆä½“éªŒ]]></title>
    <url>%2F2019%2F08%2F29%2Fearly-experience-about-github-actions.html</url>
    <content type="text"><![CDATA[å‰è¨€ å‰æ®µæ—¶é—´åŒæ€§äº¤å‹ç½‘ç«™ GitHub æŽ¨å‡ºäº†è‡ªå®¶çš„ Registry æœåŠ¡ï¼Œæ”¯æŒå¤šç§è¯­è¨€çš„é•œåƒæœåŠ¡ï¼Œå…·ä½“å‚è§ï¼šhttps://help.github.com/en/articles/about-github-package-registry éšåŽï¼ŒåˆæŽ¨å‡ºäº†è‡ªå®¶çš„è‡ªåŠ¨åŒ–æž„å»ºæœåŠ¡ï¼šGithub Actionsï¼Œå…·ä½“å‚è§ï¼šhttps://help.github.com/en/articles/about-github-actions è¿™ä¿©æœåŠ¡æˆ‘éƒ½åœ¨ç¬¬ä¸€æ—¶é—´ç”³è¯·ä½¿ç”¨äº†ï¼Œä¹Ÿéƒ½å·²ç»å®¡æ ¸é€šè¿‡äº†ï¼Œä½†æ˜¯ç”±äºŽ Registry æµ‹è¯•æœ‰äº›ä¸ç¨³å®šï¼Œè¿˜å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œæ‰€ä»¥ï¼Œå¹¶æœªå‘å¸ƒä½“éªŒæ–‡ç« ï¼Œä¸è¿‡ å…³äºŽGitHub Actions æˆ‘å·²ç»æˆåŠŸä½“éªŒäº†ä¸€æŠŠã€‚ 1. GitHub Actions GitHub Actions enables you to create custom software development lifecycle workflows directly in your GitHub repository. â€”â€” https://help.github.com/en/articles/about-github-actions åœŸå‘³è‹±è¯­ç¿»è¯‘ä¸€ä¸‹ï¼š GitHub Actions å…è®¸ä½ ç›´æŽ¥åœ¨ GitHub ä»“åº“ä¸­åŽ»åˆ›å»ºè‡ªå®šä¹‰è½¯ä»¶å¼€å‘ç”Ÿå‘½å‘¨æœŸå·¥ä½œæµã€‚ å®˜ç½‘ä¸‹é¢è¿˜æœ‰æ›´ä¸ºè¯¦ç»†çš„ä»‹ç»ï¼Œæˆ‘å°±ä¸å¥½æ„æ€ç§€æˆ‘çš„åœŸå‘³è‹±è¯­äº†ã€‚ç®€è€Œè¨€ä¹‹ï¼ŒGitHub Actions å…è®¸ç”¨æˆ·è‡ªå®šä¹‰ä¸€ä¸ªå®Œæ•´æµç¨‹çš„ CI/CD å·¥ä½œæµï¼ŒåŒæ—¶ä¸éœ€è¦å€ŸåŠ©ç±»ä¼¼Jenkinsã€Travis-CI å’Œ Circle-CI ç­‰ç¬¬ä¸‰æ–¹è‡ªåŠ¨åŒ–æœåŠ¡ï¼Œåœ¨ GitHub ä¸Šçš„å¼€æºé¡¹ç›®éƒ½å¯ä»¥å…è´¹ä½¿ç”¨çš„ï¼Œå””ï¼Œå¥½å—¨å“Ÿ~ å¯¹äºŽï¼Œå·¥å…·ç±»è¿™ç§çš„å¼€æºé¡¹ç›®ï¼ŒåŽæœŸå¯ä»¥é€šè¿‡ GitHub Actions å’Œ Registry å®žçŽ°è‡ªåŠ¨æ‰“åŒ…å‘å¸ƒç‰ˆæœ¬ã€‚ 2. åˆä½“éªŒ 2.1. ç”³è¯· ç‚¹å‡»é“¾æŽ¥ https://github.com/features/actions/signup åŽ»ç”³è¯· 2.2. å‡†å¤‡å¥½ä¸€ä¸ªä»“åº“åœ°å€ å½“ä½ ç”³è¯·é€šè¿‡ä¹‹åŽï¼Œæ‰“å¼€ä½ çš„ä»»æ„ä¸€ä¸ª GitHub ä»“åº“ï¼Œä¸Šæ–¹ä¼šå‡ºçŽ° Actions çš„é€‰é¡¹å¡ï¼Œç‚¹å‡»å³å¯è¿›å…¥ã€‚ 2.3. é€‰æ‹©ä¸€ä¸ªé»˜è®¤çš„æ¨¡æ¿ å› ä¸ºè¿™é‡Œæˆ‘çš„æ˜¯ Spring Boot é¡¹ç›®ï¼ŒåŸºäºŽ Maven æ¥æž„å»ºï¼Œæ‰€ä»¥æˆ‘é€‰æ‹© Maven çš„æ¨¡æ¿ã€‚é€‰æ‹©ä¹‹åŽï¼Œè¿›å…¥ä¸‹é¢çš„é¡µé¢ã€‚ 2.4. è§¦å‘ å½“æˆ‘ä»¬çš„ä»£ç  push çš„æ—¶å€™å°±ä¼šè‡ªåŠ¨è§¦å‘ï¼Œå½“ç„¶ä¹Ÿæœ‰åˆ«çš„è§¦å‘ç­–ç•¥ï¼Œè¿™ä¸ªåŽé¢å†è®²ã€‚ ç‚¹å‡»å¯ä»¥æŸ¥çœ‹å…·ä½“çš„æž„å»ºæƒ…å†µï¼Œé»‘æ¡†é‡Œçš„æ¯ä¸€é¡¹éƒ½å¯ä»¥ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…ã€‚ 3. é…ç½®è¯­æ³• å…·ä½“çš„é…ç½®è¯­æ³•ï¼Œè¿˜æ˜¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼šhttps://help.github.com/en/articles/workflow-syntax-for-github-actions 4. é™„å½• .github/workflows/maven.yml 1234567891011121314151617name: GitHub CIon: push: branches: - master pull_request:jobs: build: runs-on: ubuntu-latest steps: - uses: actions/checkout@v1 - name: Set up JDK 1.8 uses: actions/setup-java@v1 with: java-version: 1.8 - name: Build with Maven run: mvn clean package -DskipTests=true -Dmaven.javadoc.skip=true -B -V 5. å‚è€ƒ å®˜æ–¹æ–‡æ¡£ï¼šhttps://help.github.com/en/articles/workflow-syntax-for-github-actions]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>devops</tag>
        <tag>ci</tag>
        <tag>GitHub</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼ä¹‹è¡Œä¸ºåž‹è®¾è®¡æ¨¡å¼-å§”æ´¾æ¨¡å¼]]></title>
    <url>%2F2019%2F08%2F27%2Fdesign-pattern-delegate.html</url>
    <content type="text"><![CDATA[1. æ¨¡å¼ç®€ä»‹ è´Ÿè´£ä»»åŠ¡çš„è°ƒåº¦å’Œåˆ†é…ä»»åŠ¡ï¼Œè·Ÿä»£ç†æ¨¡å¼å¾ˆåƒï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸€ç§ç‰¹æ®Šæƒ…å†µä¸‹çš„é™æ€ä»£ç†çš„å…¨æƒä»£ç†ï¼Œä½†æ˜¯ä»£ç†æ¨¡å¼æ³¨é‡è¿‡ç¨‹ï¼Œè€Œå§”æ´¾æ¨¡å¼æ³¨é‡ç»“æžœï¼›å±žäºŽè¡Œä¸ºåž‹è®¾è®¡æ¨¡å¼ï¼›ä¸å±žäºŽ23ç§è®¾è®¡æ¨¡å¼ã€‚ 2. ç¤ºä¾‹ä»£ç  ä¸šåŠ¡æ‰§è¡Œè€…(Worker)çš„å…·ä½“å®žçŽ° 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556/** * &lt;p&gt; * å·¥äººæŽ¥å£ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019/8/28 11:17 */public interface Worker &#123; /** * åšäº‹æƒ… * * @param thing ä»»åŠ¡ */ void doing(String thing);&#125;/** * &lt;p&gt; * åŽ¨å¸ˆå·¥ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019/8/28 11:19 */public class ChefWorker implements Worker &#123; /** * åšäº‹æƒ… * * @param thing ä»»åŠ¡ */ @Override public void doing(String thing) &#123; System.out.println("æˆ‘æ˜¯åŽ¨å¸ˆï¼Œæˆ‘æŽ¥åˆ°ä»»åŠ¡ï¼Œéœ€è¦åšç¾Žé£Ÿã€‚"); &#125;&#125;/** * &lt;p&gt; * ç¼çº«å·¥ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019/8/28 11:19 */public class TailorWorker implements Worker &#123; /** * åšäº‹æƒ… * * @param thing ä»»åŠ¡ */ @Override public void doing(String thing) &#123; System.out.println("æˆ‘æ˜¯ç¼çº«å·¥ï¼Œæˆ‘æŽ¥åˆ°ä»»åŠ¡ï¼Œéœ€è¦åšè¡£æœã€‚"); &#125;&#125; ä»»åŠ¡æ´¾å‘è€…(Leader)çš„å…·ä½“å®žçŽ° 12345678910111213141516171819202122232425262728293031/** * &lt;p&gt; * ç»„é•¿ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019/8/28 11:21 */public class Leader implements Worker &#123; private static Map&lt;String, Worker&gt; OFFICE = new HashMap&lt;&gt;(); public Leader() &#123; OFFICE.put("cooking", new ChefWorker()); OFFICE.put("sewing", new TailorWorker()); &#125; /** * åšäº‹æƒ… * * @param thing ä»»åŠ¡ */ @Override public void doing(String thing) &#123; System.out.println("æˆ‘æ˜¯ç»„é•¿ï¼Œé¢†å¯¼éœ€è¦: " + thing + "ï¼Œæˆ‘æ¥å®‰æŽ’ä»»åŠ¡: " + thing); if (OFFICE.containsKey(thing)) &#123; OFFICE.get(thing).doing(thing); &#125; else &#123; System.err.println("ç›®å‰åŠžå…¬å®¤æ²¡æœ‰å¯¹åº”èŒä½çš„å·¥äºº"); &#125; &#125;&#125; å¤§é¢†å¯¼(Boss)çš„å…·ä½“å®žçŽ° 1234567891011121314151617181920/** * &lt;p&gt; * é¢†å¯¼ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019/8/28 11:26 */public class Boss &#123; /** * ä¸‹å‘½ä»¤ * * @param thing éœ€è¦å¤„ç†çš„äº‹æƒ… * @param leader å®‰æŽ’ç»™ä¸€ä¸ªç»„é•¿ */ public void command(String thing, Leader leader) &#123; System.out.println("æˆ‘æ˜¯é¢†å¯¼ï¼Œæˆ‘çŽ°åœ¨éœ€è¦å¤„ç†: " + thing); leader.doing(thing); &#125;&#125; æµ‹è¯•ç±» 123456789101112131415161718/** * &lt;p&gt; * å§”æ´¾æ¨¡å¼ï¼Œæµ‹è¯•ç±» * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019/8/28 11:28 */public class PatternTest &#123; public static void main(String[] args) &#123; Boss boss = new Boss(); boss.command("cooking", new Leader()); System.out.println("------------------- "); boss.command("sewing", new Leader()); System.out.println("------------------- "); boss.command("selling", new Leader()); &#125;&#125; æµ‹è¯•ç»“æžœ 1234567891011æˆ‘æ˜¯é¢†å¯¼ï¼Œæˆ‘çŽ°åœ¨éœ€è¦å¤„ç†: cookingæˆ‘æ˜¯ç»„é•¿ï¼Œé¢†å¯¼éœ€è¦: cookingï¼Œæˆ‘æ¥å®‰æŽ’ä»»åŠ¡: cookingæˆ‘æ˜¯åŽ¨å¸ˆï¼Œæˆ‘æŽ¥åˆ°ä»»åŠ¡ï¼Œéœ€è¦åšç¾Žé£Ÿã€‚------------------- æˆ‘æ˜¯é¢†å¯¼ï¼Œæˆ‘çŽ°åœ¨éœ€è¦å¤„ç†: sewingæˆ‘æ˜¯ç»„é•¿ï¼Œé¢†å¯¼éœ€è¦: sewingï¼Œæˆ‘æ¥å®‰æŽ’ä»»åŠ¡: sewingæˆ‘æ˜¯ç¼çº«å·¥ï¼Œæˆ‘æŽ¥åˆ°ä»»åŠ¡ï¼Œéœ€è¦åšè¡£æœã€‚------------------- æˆ‘æ˜¯é¢†å¯¼ï¼Œæˆ‘çŽ°åœ¨éœ€è¦å¤„ç†: sellingæˆ‘æ˜¯ç»„é•¿ï¼Œé¢†å¯¼éœ€è¦: sellingï¼Œæˆ‘æ¥å®‰æŽ’ä»»åŠ¡: sellingç›®å‰åŠžå…¬å®¤æ²¡æœ‰å¯¹åº”èŒä½çš„å·¥äºº 3. UML å›¾ä¾‹ 4. åº”ç”¨ 1234// åœ¨ Spring ä¸­ä»¥ Delegate ç»“å°¾çš„ä¸€èˆ¬éƒ½æ˜¯å®žçŽ°äº†å§”æ´¾æ¨¡å¼çš„// ä¾‹å¦‚ï¼šBeanDefinitionParserDelegate// Spring MVC ä¸­çš„ DispatcherServlet æ ¹æ® handlerMapping è½¬å‘å…·ä½“æ‰§è¡Œé€»è¾‘åˆ° Controller 5. ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ï¼š å¯¹å†…éšè—å®žçŽ°, ç®€åŒ–è°ƒç”¨ã€‚ ç¼ºç‚¹ï¼š å½“å®žé™…å¤„ç†ä¸šåŠ¡çš„ç±»éœ€è¦æ‰©å±•æ—¶ï¼Œæ´¾å‘å‘½ä»¤çš„ç±»ä¹Ÿéœ€è¦å¯¹åº”åšè°ƒæ•´ï¼Œä¸ç¬¦åˆå¼€é—­åŽŸåˆ™ã€‚ 6. å®Œæ•´ä»£ç åœ°å€ https://github.com/xkcoding/design-pattern/tree/master/src/main/java/com/xkcoding/design/pattern/behavioral/delegate]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼</category>
        <category>è¡Œä¸ºåž‹è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼ä¹‹ç»“æž„åž‹è®¾è®¡æ¨¡å¼-ä»£ç†æ¨¡å¼]]></title>
    <url>%2F2019%2F08%2F20%2Fdesign-pattern-proxy.html</url>
    <content type="text"><![CDATA[1. æ¨¡å¼ç®€ä»‹ ä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ï¼Œä»¥æŽ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ï¼›ä»£ç†å¯¹è±¡å°±ç±»ä¼¼ç”Ÿæ´»ä¸­çš„ä¸­ä»‹ï¼›å±žäºŽç»“æž„åž‹è®¾è®¡æ¨¡å¼ã€‚ 2. ç¤ºä¾‹ä»£ç  2.1. é™æ€ä»£ç† æ˜¾å¼å£°æ˜Žè¢«ä»£ç†å¯¹è±¡ï¼Œä»…å¯ä»¥ä»£ç†æŸäº›å¯¹è±¡ 2.1.1. ä»£ç å®žçŽ° å…·ä½“å®žçŽ° 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970/** * &lt;p&gt; * å”®ç¥¨æŽ¥å£ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019-08-20 22:12 */public interface Ticket &#123; /** * å–ç¥¨ */ void sell();&#125;/** * &lt;p&gt; * æ¼”å”±ä¼šé—¨ç¥¨ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019-08-20 22:16 */public class MusicTicket implements Ticket &#123; /** * å–ç¥¨ */ @Override public void sell() &#123; System.out.println("å–æ¼”å”±ä¼šé—¨ç¥¨"); &#125;&#125;/** * &lt;p&gt; * é™æ€ä»£ç†ç±»ï¼Œæ¼”å”±ä¼šå”®ç¥¨å‘˜(åªå–æ¼”å”±ä¼šé—¨ç¥¨) * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019-08-20 22:24 */public class MusicConductor implements Ticket &#123; private MusicTicket ticket; /** * åªä»£ç† æ¼”å”±ä¼šé—¨ç¥¨ * @param ticket æ¼”å”±ä¼šé—¨ç¥¨ */ public MusicConductor(MusicTicket ticket) &#123; this.ticket = ticket; &#125; /** * å–ç¥¨ */ @Override public void sell() &#123; before(); this.ticket.sell(); after(); &#125; private void before() &#123; System.out.println("é™æ€ä»£ç† - æ–¹æ³•å‰å¢žå¼º"); &#125; private void after() &#123; System.out.println("é™æ€ä»£ç† - æ–¹æ³•åŽå¢žå¼º"); &#125;&#125; æµ‹è¯•ç±» 1234567891011121314/** * &lt;p&gt; * ä»£ç†æ¨¡å¼ - é™æ€ä»£ç†ï¼Œæµ‹è¯•ç±» * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019-08-20 22:29 */public class PatternTest &#123; public static void main(String[] args) &#123; MusicConductor conductor = new MusicConductor(new MusicTicket()); conductor.sell(); &#125;&#125; æµ‹è¯•ç»“æžœ 123é™æ€ä»£ç† - æ–¹æ³•å‰å¢žå¼ºå–æ¼”å”±ä¼šé—¨ç¥¨é™æ€ä»£ç† - æ–¹æ³•åŽå¢žå¼º 2.1.2. UML å›¾ä¾‹ 2.2. åŠ¨æ€ä»£ç† åŠ¨æ€é…ç½®å’Œæ›¿æ¢è¢«ä»£ç†å¯¹è±¡ï¼Œé€šä¿—çš„è¯´å°±æ˜¯å¯ä»¥ä»£ç†ä»»æ„ä¸€ç±»å¯¹è±¡ï¼Œç”šè‡³æ˜¯ä»»æ„å¯¹è±¡ 2.2.1. JDK åŠ¨æ€ä»£ç† æ³¨æ„ï¼šJDKä»£ç†æ—¶è¢«ä»£ç†ç±»å¿…é¡»å®žçŽ°æŽ¥å£ 2.2.1.1. ä»£ç å®žçŽ° å…·ä½“å®žçŽ° 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102/** * &lt;p&gt; * å”®ç¥¨æŽ¥å£ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019-08-20 22:12 */public interface Ticket &#123; /** * å–ç¥¨ */ void sell();&#125;/** * &lt;p&gt; * æ¼”å”±ä¼šé—¨ç¥¨ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019-08-20 22:16 */public class MusicTicket implements Ticket &#123; /** * å–ç¥¨ */ @Override public void sell() &#123; System.out.println("å–æ¼”å”±ä¼šé—¨ç¥¨"); &#125;&#125;/** * &lt;p&gt; * ä½“è‚²æ¯”èµ›é—¨ç¥¨ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019-08-20 23:07 */public class SportTicket implements Ticket &#123; /** * å–ç¥¨ */ @Override public void sell() &#123; System.out.println("ä½“è‚²æ¯”èµ›é—¨ç¥¨"); &#125;&#125;/** * &lt;p&gt; * JDKåŠ¨æ€ä»£ç†ç±»ï¼Œå”®ç¥¨å‘˜(ä¸è®ºä»€ä¹ˆç¥¨éƒ½å–) * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019-08-20 22:35 */public class Conductor implements InvocationHandler &#123; /** * è¢«ä»£ç†å¯¹è±¡ */ private Object target; /** * å¯ä»¥ä»£ç†ä»»æ„é—¨ç¥¨ï¼Œæ‰€ä»¥ä¸º &#123;@link Object&#125; * * @param target è¢«ä»£ç†å¯¹è±¡ï¼Œä½†æ˜¯å¿…é¡»æœ‰ç»Ÿä¸€çš„æŽ¥å£ * @return è¢«ä»£ç†å¯¹è±¡ */ public Object getInstance(Object target) &#123; this.target = target; Class&lt;?&gt; clazz = target.getClass(); return Proxy.newProxyInstance(clazz.getClassLoader(), clazz.getInterfaces(), this); &#125; /** * åå°„è°ƒç”¨çš„æ–¹æ³• * * @param proxy ä»£ç†å¯¹è±¡ * @param method è¢«ä»£ç†å¯¹è±¡éœ€è¦æ‰§è¡Œçš„æ–¹æ³• * @param args è¢«ä»£ç†å¯¹è±¡éœ€è¦æ‰§è¡Œçš„æ–¹æ³• çš„å‚æ•° * @return è¢«ä»£ç†å¯¹è±¡éœ€è¦æ‰§è¡Œçš„æ–¹æ³• çš„è¿”å›žå€¼ * @throws Throwable æŠ›å‡ºå¼‚å¸¸ */ @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123; before(); Object result = method.invoke(target, args); after(); return result; &#125; private void before() &#123; System.out.println("åŠ¨æ€ä»£ç† - JDKåŠ¨æ€ä»£ç† - æ–¹æ³•å‰å¢žå¼º"); &#125; private void after() &#123; System.out.println("åŠ¨æ€ä»£ç† - JDKåŠ¨æ€ä»£ç† - æ–¹æ³•åŽå¢žå¼º"); &#125;&#125; æµ‹è¯•ç±» 12345678910111213141516171819/** * &lt;p&gt; * ä»£ç†æ¨¡å¼ - åŠ¨æ€ä»£ç† - JDKåŠ¨æ€ä»£ç†ï¼Œæµ‹è¯•ç±» * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019-08-20 23:04 */public class PatternTest &#123; public static void main(String[] args) &#123; // ä»£ç†æ¼”å”±ä¼šé—¨ç¥¨ Ticket musicTicket = (Ticket) new Conductor().getInstance(new MusicTicket()); musicTicket.sell(); // ä»£ç†è¿åŠ¨ä¼šé—¨ç¥¨ Ticket sportTicket = (Ticket) new Conductor().getInstance(new SportTicket()); sportTicket.sell(); &#125;&#125; æµ‹è¯•ç»“æžœ 123456åŠ¨æ€ä»£ç† - JDKåŠ¨æ€ä»£ç† - æ–¹æ³•å‰å¢žå¼ºå–æ¼”å”±ä¼šé—¨ç¥¨åŠ¨æ€ä»£ç† - JDKåŠ¨æ€ä»£ç† - æ–¹æ³•åŽå¢žå¼ºåŠ¨æ€ä»£ç† - JDKåŠ¨æ€ä»£ç† - æ–¹æ³•å‰å¢žå¼ºä½“è‚²æ¯”èµ›é—¨ç¥¨åŠ¨æ€ä»£ç† - JDKåŠ¨æ€ä»£ç† - æ–¹æ³•åŽå¢žå¼º 2.2.1.2. UML å›¾ä¾‹ 2.2.2. CGLIB åŠ¨æ€ä»£ç† æ³¨æ„ï¼šCGLIBä¸èƒ½ä»£ç† final ä¿®é¥°çš„ç±»/æ–¹æ³• 2.2.2.1. ä»£ç å®žçŽ° å…·ä½“å®žçŽ° 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162/** * &lt;p&gt; * ç«è½¦ç¥¨ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019-08-20 23:18 */public class TrainTicket &#123; public void sell() &#123; System.out.println("ç«è½¦ç¥¨"); &#125;&#125;/** * &lt;p&gt; * CGLIBåŠ¨æ€ä»£ç†ç±»ï¼Œå”®ç¥¨å‘˜(ä¸è®ºä»€ä¹ˆç¥¨éƒ½å–) * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019-08-20 22:35 */public class Conductor implements MethodInterceptor &#123; public Object getInstance(Class&lt;?&gt; clazz) &#123; // Enhancer ç›¸å½“äºŽ JDK åŠ¨æ€ä»£ç†çš„ Proxy ç±» Enhancer enhancer = new Enhancer(); // è®¾ç½®åŠ¨æ€ç”Ÿæˆçš„å¯¹è±¡çš„çˆ¶ç±»ä¸ºä¼ è¿›æ¥çš„ è¢«ä»£ç†ç±» enhancer.setSuperclass(clazz); // MethodInterceptor ç»§æ‰¿ Callback æŽ¥å£ enhancer.setCallback(this); return enhancer.create(); &#125; /** * ä»£ç†å¯¹è±¡æ‰§è¡Œçš„æ‰€æœ‰æ–¹æ³•éƒ½ä¼šèµ°è¿™ä¸ªæ–¹æ³• * * @param o è¢«ä»£ç†çš„å¯¹è±¡ * @param method è¢«ä»£ç†å¯¹è±¡éœ€è¦æ‰§è¡Œçš„æ–¹æ³• * @param objects è¢«ä»£ç†å¯¹è±¡éœ€è¦æ‰§è¡Œçš„æ–¹æ³• å‚æ•° * @param methodProxy è§¦å‘çˆ¶ç±»çš„æ–¹æ³•å¯¹è±¡ * @return è¢«ä»£ç†å¯¹è±¡éœ€è¦æ‰§è¡Œçš„æ–¹æ³• è¿”å›žå€¼ * @throws Throwable æŠ›å‡ºçš„å¼‚å¸¸ä¿¡æ¯ */ @Override public Object intercept(Object o, Method method, Object[] objects, MethodProxy methodProxy) throws Throwable &#123; before(); // è°ƒç”¨ç”Ÿæˆä»£ç†å¯¹è±¡çš„çˆ¶ç±»æ–¹æ³• Object result = methodProxy.invokeSuper(o, objects); after(); return result; &#125; private void before() &#123; System.out.println("åŠ¨æ€ä»£ç† - CGLIBåŠ¨æ€ä»£ç† - æ–¹æ³•å‰å¢žå¼º"); &#125; private void after() &#123; System.out.println("åŠ¨æ€ä»£ç† - CGLIBåŠ¨æ€ä»£ç† - æ–¹æ³•åŽå¢žå¼º"); &#125;&#125; æµ‹è¯•ç±» 12345678910111213141516171819/** * &lt;p&gt; * ä»£ç†æ¨¡å¼ - åŠ¨æ€ä»£ç† - CGLIBåŠ¨æ€ä»£ç†ï¼Œæµ‹è¯•ç±» * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019-08-20 23:16 */public class PatternTest &#123; public static void main(String[] args) &#123; // ä»£ç†ç«è½¦ç¥¨ TrainTicket trainTicket = (TrainTicket) new Conductor().getInstance(TrainTicket.class); trainTicket.sell(); // ä»£ç†æ¼”å”±ä¼šé—¨ç¥¨ MusicTicket musicTicket = (MusicTicket) new Conductor().getInstance(MusicTicket.class); musicTicket.sell(); &#125;&#125; æµ‹è¯•ç»“æžœ 123456åŠ¨æ€ä»£ç† - CGLIBåŠ¨æ€ä»£ç† - æ–¹æ³•å‰å¢žå¼ºç«è½¦ç¥¨åŠ¨æ€ä»£ç† - CGLIBåŠ¨æ€ä»£ç† - æ–¹æ³•åŽå¢žå¼ºåŠ¨æ€ä»£ç† - CGLIBåŠ¨æ€ä»£ç† - æ–¹æ³•å‰å¢žå¼ºå–æ¼”å”±ä¼šé—¨ç¥¨åŠ¨æ€ä»£ç† - CGLIBåŠ¨æ€ä»£ç† - æ–¹æ³•åŽå¢žå¼º 2.2.2.2. UML å›¾ä¾‹ 3. åº”ç”¨ 1// Spring AOP 4. åœºæ™¯ ä¿æŠ¤ç›®æ ‡å¯¹è±¡ å¢žå¼ºç›®æ ‡å¯¹è±¡ 5. ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ï¼š ä»£ç†æ¨¡å¼èƒ½å°†ä»£ç†å¯¹è±¡ä¸ŽçœŸå®žè¢«è°ƒç”¨çš„ç›®æ ‡å¯¹è±¡åˆ†ç¦»ï¼›ä¸€å®šç¨‹åº¦ä¸Šé™ä½Žäº†ç³»ç»Ÿçš„è€¦åˆç¨‹åº¦ï¼Œæ˜“äºŽæ‰©å±•ï¼›ä»£ç†å¯ä»¥èµ·åˆ°ä¿æŠ¤ç›®æ ‡å¯¹è±¡çš„ä½œç”¨ï¼› å¢žå¼ºç›®æ ‡å¯¹è±¡çš„èŒè´£ ç¼ºç‚¹ï¼š ä»£ç†æ¨¡å¼ä¼šé€ æˆç³»ç»Ÿè®¾è®¡ä¸­ç±»çš„æ•°ç›®å¢žåŠ ï¼›åœ¨å®¢æˆ·ç«¯å’Œç›®æ ‡å¯¹è±¡ä¹‹é—´å¢žåŠ äº†ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œä¼šé€ æˆè¯·æ±‚å¤„ ç†é€Ÿåº¦å˜æ…¢ï¼›å¢žåŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦ 6. æ‹“å±• 6.1. JDK åŠ¨æ€ä»£ç†çš„åŽŸç†åˆ†æž åŽŸç†ç®€ä»‹ 123456789// 1. æ‹¿åˆ°è¢«ä»£ç†çš„å¯¹è±¡çš„å¼•ç”¨ï¼Œåå°„èŽ·å–æ‰€æœ‰æŽ¥å£// 2. JDK çš„ Proxy ç±»é‡æ–°ç”Ÿæˆä¸€ä¸ªæ–°çš„ç±»ï¼Œå®žçŽ°äº†è¢«ä»£ç†å¯¹è±¡çš„æ‰€æœ‰æŽ¥å£// 3. Proxy æ ¹æ®å­—èŠ‚ç åŠ¨æ€ç”Ÿæˆ Java ä»£ç ï¼ŒæŠŠå¢žå¼ºçš„é€»è¾‘åŠ å…¥åˆ°æ–°ç”Ÿæˆçš„ä»£ç ä¸­// 4. ç¼–è¯‘ç”Ÿæˆçš„ Java ä»£ç å¯¹åº”çš„ class æ–‡ä»¶// 5. é€šè¿‡ ClassLoader åŠ è½½å¹¶é‡æ–°è¿è¡Œæ–°çš„ class æ–‡ä»¶ï¼ˆæ³¨æ„è¿™ä¸ª class æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªå…¨æ–°çš„ç±»ï¼‰ æºç å‰–æž é¦–å…ˆæˆ‘ä»¬å°†æ–­ç‚¹æ‰“åœ¨ è¿™ä¸ªä½ç½® å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¯ä»¥å‘çŽ°ï¼Œæ­¤æ—¶è¿™ä¸ª musicTicket å¯¹è±¡çš„å¼•ç”¨æœ‰ç‚¹å¥‡æ€ªï¼Œå±…ç„¶æ˜¯ $Proxy0@554ï¼Œè¯æ˜Žè¯¥å¯¹è±¡æ˜¯é€šè¿‡ä»£ç†ç”Ÿæˆçš„æ–°çš„ä»£ç†ç±»åˆ›å»ºçš„ï¼Œè€Œä¸æ˜¯ç”±åŽŸç”Ÿçš„ MusicTicket ç±»åˆ›å»ºçš„ã€‚ ä¸ºä»€ä¹ˆå˜žï¼Ÿæˆ‘ä»¬æ¥çž„ä¸€æ³¢æºç ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478479480481482483484485486487488489490491492493494495496497498499500501502503504505506507508509510511512513514515516517518// 1. musicTicket æ˜¯é€šè¿‡æˆ‘ä»¬å®šä¹‰çš„ getInstance æ–¹æ³•è¿”å›žçš„ï¼Œåœ¨ getInstance æ–¹æ³•é‡Œï¼Œæˆ‘ä»¬é€šè¿‡è°ƒç”¨ Proxy.newProxyInstance(clazz.getClassLoader(), clazz.getInterfaces(), this)// 2. æˆ‘ä»¬çœ‹çœ‹ java.lang.reflect.Proxy#newProxyInstance(ClassLoader loader,Class&lt;?&gt;[] interfaces,InvocationHandler h) // java.lang.reflect.Proxy#newProxyInstance ä¸»è¦å·¥ä½œå°±æ˜¯â‘ ç”Ÿæˆä»£ç†ç±»â‘¡æ ¹æ®ä»£ç†ç±»èŽ·å–æž„é€ æ–¹æ³•â‘¢é€šè¿‡æž„é€ æ–¹æ³•ç”Ÿæˆä»£ç†å¯¹è±¡// â‘ ç”Ÿæˆä»£ç†ç±» -&gt; Class&lt;?&gt; cl = getProxyClass0(loader, intfs);// â‘¡æ ¹æ®ä»£ç†ç±»èŽ·å–æž„é€ æ–¹æ³• -&gt; final Constructor&lt;?&gt; cons = cl.getConstructor(constructorParams);// â‘¢é€šè¿‡æž„é€ æ–¹æ³•ç”Ÿæˆä»£ç†å¯¹è±¡ -&gt; return cons.newInstance(new Object[]&#123;h&#125;);// 3. è¿™é‡Œçš„é‡ç‚¹åœ¨äºŽç”Ÿæˆä»£ç†ç±»ï¼Œæ‰€ä»¥æˆ‘ä»¬çœ‹çœ‹ getProxyClass0 è¿™ä¸ªæ–¹æ³• -&gt; java.lang.reflect.Proxy#getProxyClass0(ClassLoader loader,Class&lt;?&gt;... interfaces)/** * Generate a proxy class. Must call the checkProxyAccess method * to perform permission checks before calling this. * ç”Ÿæˆä»£ç†ç±»ï¼Œè°ƒç”¨è¯¥æ–¹æ³•å‰ï¼Œå¿…é¡»å…ˆæ‰§è¡ŒcheckProxyAccessæ–¹æ³•æ ¡éªŒæ˜¯å¦å¯ä»¥ç”Ÿæˆä»£ç†ç±»ã€‚ */private static Class&lt;?&gt; getProxyClass0(ClassLoader loader,Class&lt;?&gt;... interfaces) &#123; // è¿™é‡Œéœ€è¦æ³¨æ„ï¼šæŽ¥å£çš„æ•°é‡æœ‰æœ€å¤§é™åˆ¶ï¼Œä¸å¯ä»¥è¶…è¿‡ 65535 if (interfaces.length &gt; 65535) &#123; throw new IllegalArgumentException("interface limit exceeded"); &#125; // If the proxy class defined by the given loader implementing // the given interfaces exists, this will simply return the cached copy; // otherwise, it will create the proxy class via the ProxyClassFactory // å¦‚æžœç¼“å­˜ä¸­å­˜åœ¨ä»£ç†ç±»ï¼Œåˆ™ç›´æŽ¥è¿”å›žï¼Œå¦‚æžœä¸å­˜åœ¨ï¼Œåˆ™ä¼šè°ƒç”¨ProxyClassFactoryç±»ç”Ÿæˆä»£ç†ç±» return proxyClassCache.get(loader, interfaces);&#125;// 4. æˆ‘ä»¬é¦–æ¬¡è°ƒç”¨çš„æ—¶å€™ï¼Œç¼“å­˜é‡Œè‚¯å®šæ˜¯ä¸å­˜åœ¨çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆçœ‹çœ‹è¿™ä¸ª proxyClassCache åˆ°åº•æ˜¯ä½•æ–¹ç¥žåœ£ï¼Ÿprivate static final WeakCache&lt;ClassLoader, Class&lt;?&gt;[], Class&lt;?&gt;&gt; proxyClassCache = new WeakCache&lt;&gt;(new KeyFactory(), new ProxyClassFactory());// 4.1. è¿™é‡Œçš„ WeakCache æ˜¯JDKè‡ªå·±é€šè¿‡ ConcurrentMap å®žçŽ°çš„ä¸€ä¸ªç¼“å­˜// 4.2. é”®ï¼šKeyFactory å°±æ˜¯ ClassLoader ç±»åŠ è½½å™¨// 4.3. å€¼ï¼šProxyClassFactory å°±æ˜¯ä»£ç†ç±»çš„å·¥åŽ‚ç±»å¯¹è±¡//5. æˆ‘ä»¬æŸ¥çœ‹ä¸‹ java.lang.reflect.WeakCache#get(K key, P parameter) è¿™ä¸ªæ–¹æ³•é‡Œåˆ°åº•æ˜¯æ€Žä¹ˆå¤„ç†çš„/** * @param key ç±»åŠ è½½å™¨ * @param parameter æŽ¥å£æ•°ç»„ */public V get(K key, P parameter) &#123; // æ ¡éªŒæŽ¥å£æ•°ç»„ï¼Œå¿…é¡»å­˜åœ¨æŽ¥å£ï¼Œå¦åˆ™ç›´æŽ¥æŠ›å‡º NPE Objects.requireNonNull(parameter); // æ¸…é™¤å·²ç»è¢«GCå›žæ”¶çš„å¯¹è±¡å¼•ç”¨ expungeStaleEntries(); // å°† ClassLoader è½¬åŒ–ä¸º CacheKeyï¼Œæ­¤æ—¶cacheKeyä¸ºä¸€çº§ç¼“å­˜çš„key Object cacheKey = WeakCache.CacheKey.valueOf(key, refQueue); // lazily install the 2nd level valuesMap for the particular cacheKey // æ ¹æ®ä¸€çº§ç¼“å­˜çš„keyèŽ·å–äºŒçº§ç¼“å­˜ ConcurrentMap&lt;Object, Supplier&lt;V&gt;&gt; valuesMap = map.get(cacheKey); // äºŒçº§ç¼“å­˜ä¸å­˜åœ¨ï¼Œåˆ›å»ºä¸€ä¸ªç©ºçš„äºŒçº§ç¼“å­˜ if (valuesMap == null) &#123; ConcurrentMap&lt;Object, Supplier&lt;V&gt;&gt; oldValuesMap = map.putIfAbsent(cacheKey, valuesMap = new ConcurrentHashMap&lt;&gt;()); if (oldValuesMap != null) &#123; valuesMap = oldValuesMap; &#125; &#125; // create subKey and retrieve the possible Supplier&lt;V&gt; stored by that // subKey from valuesMap // æ ¹æ® ClassLoader å’Œ æŽ¥å£æ•°ç»„ï¼Œåˆ›å»ºäºŒçº§ç¼“å­˜çš„key Object subKey = Objects.requireNonNull(subKeyFactory.apply(key, parameter)); // é€šè¿‡äºŒçº§ç¼“å­˜çš„keyèŽ·å–å€¼ Supplier&lt;V&gt; supplier = valuesMap.get(subKey); WeakCache.Factory factory = null; // æ­»å¾ªçŽ¯é‡è¯•ï¼Œç›´åˆ°è¿”å›žå¯¹è±¡ä¸ºæ­¢ while (true) &#123; // ç¨‹åºçš„å‡ºå£åˆ†æ”¯ if (supplier != null) &#123; // supplier might be a Factory or a CacheValue&lt;V&gt; instance // æ ¹æ®ä¸‹æ–¹çš„æ–¹æ³•å¯ä»¥çœ‹å‡º supplier å¯èƒ½æ˜¯ WeakCache.Factory ä¹Ÿå¯èƒ½æ˜¯ CacheValue // å…·ä½“éªŒè¯çš„ç»†èŠ‚ï¼Œåœ¨ supplier çš„å®žçŽ°ç±»é‡ŒåŽ»åˆ¤æ–­æ˜¯ä»€ä¹ˆç±»åž‹ï¼Œç„¶åŽå°†å€¼è¿”å›ž V value = supplier.get(); // å¦‚æžœæ‹¿åˆ°å¯¹è±¡ï¼Œåˆ™é€€å‡ºå¾ªçŽ¯ï¼Œæ‹¿ä¸åˆ°å¯¹è±¡ï¼Œç»§ç»­èµ°å¾ªçŽ¯é‡è¯• if (value != null) &#123; return value; &#125; &#125; // else no supplier in cache // or a supplier that returned null (could be a cleared CacheValue // or a Factory that wasn't successful in installing the CacheValue) // lazily construct a Factory // å¦‚æžœäºŒçº§ç¼“å­˜çš„keyå–ä¸åˆ°å€¼ï¼Œå¹¶ä¸”Factoryä¸å­˜åœ¨ï¼Œåˆ™åŽ»åˆ›å»ºFactoryå¯¹è±¡ï¼Œè¿™ä¸€æ¡ä»¶åˆ†æ”¯ï¼Œè‹¥æ‰§è¡Œï¼Œä»…ä¼šæ‰§è¡Œä¸€æ¬¡ // åœ¨ä¸‹æ–¹ä»£ç å¯è§ï¼Œåˆ›å»ºçš„Factoryå¯¹è±¡ä¼šåŽ»å……å½“äºŒçº§ç¼“å­˜çš„å€¼ if (factory == null) &#123; factory = new WeakCache.Factory(key, parameter, subKey, valuesMap); &#125; if (supplier == null) &#123; // å¦‚æžœäºŒçº§ç¼“å­˜çš„keyå–ä¸åˆ°å€¼, å°±å°†factoryä½œä¸ºäºŒçº§ç¼“å­˜å¯¹åº”çš„å€¼æ”¾å…¥ // é˜²æ­¢è¢«å…¶ä»–çº¿ç¨‹ä¿®æ”¹ï¼Œæ‰€ä»¥ä½¿ç”¨ putIfAbsent æ–¹æ³•æ˜¯å¦‚æžœå­˜åœ¨ subKeyï¼Œå°±å–å‡ºæ¥ç›´æŽ¥ç”¨ï¼Œå¦‚æžœä¸å­˜åœ¨ï¼Œåˆ™å°† factory æ”¾å…¥ supplier = valuesMap.putIfAbsent(subKey, factory); // å­˜æ”¾å¤±è´¥çš„æƒ…å†µï¼Œå¼ºåˆ¶å°† supplier = factoryï¼Œæ­¤æ—¶factoryæˆåŠŸåŠ å…¥äºŒçº§ç¼“å­˜ if (supplier == null) &#123; // successfully installed Factory supplier = factory; &#125; // else retry with winning supplier &#125; else &#123; // å¦‚æžœè¢«å…¶ä»–çº¿ç¨‹ä¿®æ”¹ï¼Œå°±å°è¯•å°†factoryæ›¿æ¢æ—§å€¼ if (valuesMap.replace(subKey, supplier, factory)) &#123; // successfully replaced // cleared CacheEntry / unsuccessful Factory // with our Factory // æ›¿æ¢æˆåŠŸ supplier = factory; &#125; else &#123; // retry with current supplier // æ›¿æ¢å¤±è´¥ï¼Œåˆ™ç»§ç»­ä½¿ç”¨æ—§å€¼ supplier = valuesMap.get(subKey); &#125; &#125; &#125;&#125;// 6. æ ¹æ®å¦‚ä¸Šä»£ç ï¼Œè¿™é‡Œå…³é”®å°±2ç‚¹ï¼šâ‘ äºŒçº§ç¼“å­˜keyçš„åˆ›å»ºâ‘¡äºŒçº§ç¼“å­˜åªçš„èŽ·å–// â‘ äºŒçº§ç¼“å­˜keyçš„åˆ›å»º -&gt; Object subKey = Objects.requireNonNull(subKeyFactory.apply(key, parameter));// â‘¡äºŒçº§ç¼“å­˜å€¼çš„èŽ·å– -&gt; V value = supplier.get();// 7. é¦–å…ˆæˆ‘ä»¬æ¥çœ‹çœ‹äºŒçº§ç¼“å­˜keyçš„åˆ›å»ºï¼Œè¿™é‡Œé€šè¿‡ subKeyFactory.apply() èŽ·å–ï¼Œé‚£ä¹ˆè¿™ä¸ª subKeyFactory æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥è·Ÿè¸ªæºç å‘çŽ°ï¼Œè¿™æ˜¯é€šè¿‡ WeakCache çš„æž„é€ æ–¹æ³•ä¼ å…¥çš„å‚æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ˜¯åœ¨ Proxy ç±»é‡Œåˆ›å»º proxyClassCache çš„æ˜¯ä¼ å…¥çš„ï¼Œæ‰€ä»¥è¿™ä¸ª subKeyFactory å°±æ˜¯ java.lang.reflect.Proxy.KeyFactory ç±»çš„å¯¹è±¡/** * A function that maps an array of interfaces to an optimal key where * Class objects representing interfaces are weakly referenced. * å°†æŽ¥å£æ•°ç»„æ˜ å°„ä¸ºä¸€ä¸ªæœ€ä¼˜çš„é”®åŽ»ä»£è¡¨æŽ¥å£çš„å®žçŽ°ç±»çš„å¼±å¼•ç”¨çš„æ–¹æ³• */private static final class KeyFactory implements BiFunction&lt;ClassLoader, Class&lt;?&gt;[], Object&gt;&#123; @Override public Object apply(ClassLoader classLoader, Class&lt;?&gt;[] interfaces) &#123; switch (interfaces.length) &#123; // è¿™é‡Œçš„ Proxy.key1....è¿™äº›å°±æ˜¯æ ¹æ®å“ˆå¸Œå€¼è®¡ç®—key case 1: return new Proxy.Key1(interfaces[0]); // the most frequent case 2: return new Proxy.Key2(interfaces[0], interfaces[1]); case 0: return key0; default: return new Proxy.KeyX(interfaces); &#125; &#125;&#125;// 8. ç„¶åŽæˆ‘ä»¬åˆ°äº†å…³é”®çš„åœ°æ–¹ï¼Œæ•²é»‘æ¿ï¼Œåˆ’é‡ç‚¹äº†ï¼ï¼ï¼æˆ‘ä»¬æ¥çœ‹ä¸‹äºŒçº§ç¼“å­˜å€¼çš„èŽ·å–ï¼Œåœ¨WeakCacheä¸­æ˜¯é€šè¿‡ supplier.get() èŽ·å–çš„ï¼Œé‚£ä¹ˆå…³é”®å°±æ˜¯è¿™ä¸ª supplier äº†ã€‚// è¿˜è®°å¾—ä¸Šé¢è¯´è¿‡çš„ï¼ŒV value = supplier.get() å–åˆ°çš„å¯èƒ½æ˜¯ WeakCache.Factory ä¹Ÿå¯èƒ½æ˜¯ CacheValue// é‚£æˆ‘ä»¬çœ‹çœ‹ WeakCache.Factory /** * A factory &#123;@link Supplier&#125; that implements the lazy synchronized * construction of the value and installment of it into the cache. * å°†å€¼è®¾ç½®è¿›ç¼“å­˜çš„å·¥åŽ‚ç±»ï¼Œçº¿ç¨‹å®‰å…¨ */private final class Factory implements Supplier&lt;V&gt; &#123; private final K key; private final P parameter; private final Object subKey; private final ConcurrentMap&lt;Object, Supplier&lt;V&gt;&gt; valuesMap; Factory(K key, P parameter, Object subKey, ConcurrentMap&lt;Object, Supplier&lt;V&gt;&gt; valuesMap) &#123; this.key = key; this.parameter = parameter; this.subKey = subKey; this.valuesMap = valuesMap; &#125; @Override public synchronized V get() &#123; // serialize access // re-check // åŒé‡æ£€æŸ¥ï¼Œç¼“å­˜ä¸­æ˜¯å¦å·²å­˜åœ¨äºŒçº§ç¼“å­˜key Supplier&lt;V&gt; supplier = valuesMap.get(subKey); // ä¹‹æ‰€ä»¥ä¹‹å‰ä¸åŽ»æ ¡éªŒï¼Œæ˜¯å› ä¸ºè¿™é‡Œä¼šåŽ»åˆ¤æ–­ï¼Œæ˜¯å¦æ˜¯ WeakCache.Factory å¯¹è±¡è¿˜æ˜¯ CacheValue // æœ‰å¯èƒ½è¢«æ›¿æ¢æˆäº† CacheValue æˆ–è€…è¢«ç§»é™¤äº† // æ€»ä¹‹å¦‚æžœæ˜¯ä¸æ˜¯ Factory å¯¹è±¡æœ¬èº«ï¼Œå°±è¿”å›ž nullï¼Œç»§ç»­ä¹‹å‰çš„æ­»å¾ªçŽ¯ if (supplier != this) &#123; // something changed while we were waiting: // might be that we were replaced by a CacheValue // or were removed because of failure -&gt; // return null to signal WeakCache.get() to retry // the loop return null; &#125; // else still us (supplier == this) // create new value V value = null; try &#123; // è¿™é‡Œè°ƒç”¨ valueFactory.apply(key, parameter) èŽ·å–å€¼ value = Objects.requireNonNull(valueFactory.apply(key, parameter)); &#125; finally &#123; if (value == null) &#123; // remove us on failure valuesMap.remove(subKey, this); &#125; &#125; // the only path to reach here is with non-null value assert value != null; // wrap value with CacheValue (WeakReference) // å°†è¿”å›žçš„å¯¹è±¡ï¼ŒåŒ…è£…æˆ CacheValue(å¼±å¼•ç”¨) WeakCache.CacheValue&lt;V&gt; cacheValue = new WeakCache.CacheValue&lt;&gt;(value); // put into reverseMap reverseMap.put(cacheValue, Boolean.TRUE); // try replacing us with CacheValue (this should always succeed) if (!valuesMap.replace(subKey, this, cacheValue)) &#123; throw new AssertionError("Should not reach here"); &#125; // successfully replaced us with new CacheValue -&gt; return the value // wrapped by it return value; &#125;&#125;// è§‚å¯Ÿ java.lang.reflect.WeakCache.Factory è¿™ä¸ªç±»çš„ get æ–¹æ³•å¯ä»¥å‘çŽ°ï¼Œè¿™é‡Œè§£å†³å‰é¢æ²¡æœ‰åŽ»åˆ¤æ–­è¿”å›žå€¼ç±»åž‹çš„å‘// å¦‚æžœä¸æ˜¯ Factory å¯¹è±¡æœ¬èº«ï¼Œå°±è¿”å›ž null,ç»§ç»­ä¹‹å‰çš„æ­»å¾ªçŽ¯// å¦‚æžœæ˜¯ Factory å¯¹è±¡ï¼Œå°±é€šè¿‡ value = Objects.requireNonNull(valueFactory.apply(key, parameter)) èŽ·å–å€¼// æ‰€ä»¥è¿™ä¸ª valueFactory å°±æ˜¯å…³é”®çš„åœ°æ–¹ï¼Œæœ‰äº†ä¸Šé¢ subKeyFactory çš„ç»éªŒï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå¿«çŸ¥é“è¿™ä¸ª valueFactory ä¹Ÿæ˜¯åœ¨æž„é€  WeakCache ä¼ è¿›æ¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ˜¯åœ¨ Proxy ç±»é‡Œåˆ›å»º proxyClassCache çš„æ˜¯ä¼ å…¥çš„ï¼Œæ‰€ä»¥è¿™ä¸ª valueFactory å°±æ˜¯ java.lang.reflect.Proxy.ProxyClassFactory ç±»çš„å¯¹è±¡// 9. æŽ¥ä¸‹æ¥å°±éœ€è¦æ¥æ‹œè¯»ä¸‹è¿™ä¸ª java.lang.reflect.Proxy.ProxyClassFactory è¿™ä¸ªç±»çš„æºç äº†/** * A factory function that generates, defines and returns the proxy class given * the ClassLoader and array of interfaces. * æ ¹æ® ClassLoader å’Œ æŽ¥å£æ•°ç»„ç”Ÿæˆã€å®šä¹‰å’Œè¿”å›žç»™å®šçš„ä»£ç†ç±»çš„å·¥åŽ‚å‡½æ•° */private static final class ProxyClassFactory implements BiFunction&lt;ClassLoader, Class&lt;?&gt;[], Class&lt;?&gt;&gt;&#123; // prefix for all proxy class names // å®šä¹‰äº†æ‰€æœ‰ä»£ç†ç±»çš„åç§°å‰ç¼€ä¸ºã€Œ$Proxyã€ private static final String proxyClassNamePrefix = "$Proxy"; // next number to use for generation of unique proxy class names // ä¸ºä»£ç†ç±»å¯¹è±¡ç”Ÿæˆç¼–å·ï¼Œä»Ž0é€’å¢žï¼Œå¦‚ $Proxy0ã€$Proxy1 ç­‰ // ä½¿ç”¨ AtomicLong åŽŸå­ç±»ä¿è¯çº¿ç¨‹å®‰å…¨ private static final AtomicLong nextUniqueNumber = new AtomicLong(); @Override public Class&lt;?&gt; apply(ClassLoader loader, Class&lt;?&gt;[] interfaces) &#123; Map&lt;Class&lt;?&gt;, Boolean&gt; interfaceSet = new IdentityHashMap&lt;&gt;(interfaces.length); for (Class&lt;?&gt; intf : interfaces) &#123; /* * Verify that the class loader resolves the name of this * interface to the same Class object. * æ£€æŸ¥æŒ‡å®šçš„ClassLoaderåŠ è½½æŽ¥å£å¾—åˆ°çš„Classå¯¹è±¡æ˜¯å¦å’ŒæŽ¥å£æ•°ç»„éåŽ†å¾—åˆ°çš„Classå¯¹è±¡ç›¸åŒ */ Class&lt;?&gt; interfaceClass = null; try &#123; interfaceClass = Class.forName(intf.getName(), false, loader); &#125; catch (ClassNotFoundException e) &#123; &#125; // ä¸ç›¸åŒåˆ™æŠ›å‡ºå¼‚å¸¸ if (interfaceClass != intf) &#123; throw new IllegalArgumentException( intf + " is not visible from class loader"); &#125; /* * Verify that the Class object actually represents an * interface. * æ£€æŸ¥å½“å‰ Class å¯¹è±¡ä¸æ˜¯ä¸€ä¸ªæŽ¥å£ */ if (!interfaceClass.isInterface()) &#123; throw new IllegalArgumentException( interfaceClass.getName() + " is not an interface"); &#125; /* * Verify that this interface is not a duplicate. * æ£€æŸ¥å½“å‰æŽ¥å£æ˜¯å¦é‡å¤ */ if (interfaceSet.put(interfaceClass, Boolean.TRUE) != null) &#123; throw new IllegalArgumentException( "repeated interface: " + interfaceClass.getName()); &#125; &#125; // å£°æ˜Žä»£ç†ç±»æ‰€åœ¨çš„åŒ… String proxyPkg = null; // package to define proxy class in int accessFlags = Modifier.PUBLIC | Modifier.FINAL; /* * Record the package of a non-public proxy interface so that the * proxy class will be defined in the same package. Verify that * all non-public proxy interfaces are in the same package. * è®°å½•æ‰€æœ‰éžpublicçš„ä»£ç†æŽ¥å£çš„åŒ…è·¯å¾„ï¼ŒéªŒè¯æ˜¯å¦ä»£ç†æŽ¥å£å†åŒä¸€ä¸ªåŒ…ä¸‹ã€‚ * å…¬å…±æŽ¥å£æ— éœ€å¤„ç†ï¼ŒåªéªŒè¯éžpublicæŽ¥å£ */ for (Class&lt;?&gt; intf : interfaces) &#123; int flags = intf.getModifiers(); if (!Modifier.isPublic(flags)) &#123; accessFlags = Modifier.FINAL; String name = intf.getName(); int n = name.lastIndexOf('.'); // å­—ç¬¦ä¸²æˆªå–åŒ…å String pkg = ((n == -1) ? "" : name.substring(0, n + 1)); if (proxyPkg == null) &#123; proxyPkg = pkg; &#125; else if (!pkg.equals(proxyPkg)) &#123; throw new IllegalArgumentException( "non-public interfaces from different packages"); &#125; &#125; &#125; // å¦‚æžœéƒ½æ˜¯ public ä¿®é¥°çš„æŽ¥å£ï¼Œé‚£ä¹ˆå°±å°†ä»£ç†ç±»çš„åŒ…åè®¾ç½®ä¸º ReflectUtil.PROXY_PACKAGE -&gt; com.sun.proxy // æ³¨æ„ï¼šä¸‡ä¸€å‡ºçŽ° java.io.FileNotFoundException: com\sun\proxy\$Proxy0.class è¿™ä¸ªå¼‚å¸¸ï¼Œå¯ä»¥é€šè¿‡åœ¨é¡¹ç›®è·¯å¾„æ‰‹åŠ¨åˆ›å»º com.sun.proxy åŒ…è§£å†³ if (proxyPkg == null) &#123; // if no non-public proxy interfaces, use com.sun.proxy package proxyPkg = ReflectUtil.PROXY_PACKAGE + "."; &#125; /* * Choose a name for the proxy class to generate. * ç”Ÿæˆä»£ç†ç±»åºå· */ long num = nextUniqueNumber.getAndIncrement(); // ä»£ç†ç±»åç§°ï¼Œç±»ä¼¼ï¼šcom.sun.proxy.$Proxy0.class String proxyName = proxyPkg + proxyClassNamePrefix + num; /* * Generate the specified proxy class. * ç”Ÿæˆå…·ä½“çš„ç±»å­—èŠ‚ç ï¼Œé‡ç‚¹ï¼ï¼ï¼ */ byte[] proxyClassFile = ProxyGenerator.generateProxyClass( proxyName, interfaces, accessFlags); try &#123; return defineClass0(loader, proxyName, proxyClassFile, 0, proxyClassFile.length); &#125; catch (ClassFormatError e) &#123; /* * A ClassFormatError here means that (barring bugs in the * proxy class generation code) there was some other * invalid aspect of the arguments supplied to the proxy * class creation (such as virtual machine limitations * exceeded). */ throw new IllegalArgumentException(e.toString()); &#125; &#125;&#125;// å¥½äº†ï¼Œé‡å¤´æˆå¼€å§‹äº†ï¼Œç”Ÿæˆä»£ç†ç±»æ–‡ä»¶çš„å…·ä½“ä»£ç å°±è¦å‡ºçŽ°äº†byte[] proxyClassFile = ProxyGenerator.generateProxyClass(proxyName, interfaces, accessFlags);// 10. æˆ‘ä»¬æ¥çœ‹çœ‹ sun.misc.ProxyGenerator#generateProxyClass(final String var0, Class&lt;?&gt;[] var1, int var2)è¿™ä¸ªæ–¹æ³•åˆ°åº•åšäº†ä»€ä¹ˆç¥žå¥‡çš„äº‹æƒ…public static byte[] generateProxyClass(final String var0, Class&lt;?&gt;[] var1, int var2) &#123; ProxyGenerator var3 = new ProxyGenerator(var0, var1, var2); // è¿™é‡Œæ‰çœŸæ­£è°ƒç”¨äº†ç”Ÿæˆç±»å­—èŠ‚ç çš„æ–¹æ³• final byte[] var4 = var3.generateClassFile(); // å¦‚æžœéœ€è¦å°†ç”Ÿæˆçš„å­—èŠ‚ç ä¿å­˜ä¸‹æ¥çš„è¯ï¼Œå°±éœ€è¦åœ¨è¿™é‡Œè®¾ç½® saveGeneratedFiles -&gt; true if (saveGeneratedFiles) &#123; AccessController.doPrivileged(new PrivilegedAction&lt;Void&gt;() &#123; public Void run() &#123; try &#123; int var1 = var0.lastIndexOf(46); Path var2; if (var1 &gt; 0) &#123; Path var3 = Paths.get(var0.substring(0, var1).replace('.', File.separatorChar)); Files.createDirectories(var3); var2 = var3.resolve(var0.substring(var1 + 1, var0.length()) + ".class"); &#125; else &#123; var2 = Paths.get(var0 + ".class"); &#125; Files.write(var2, var4, new OpenOption[0]); return null; &#125; catch (IOException var4x) &#123; throw new InternalError("I/O exception saving generated file: " + var4x); &#125; &#125; &#125;); &#125; return var4;&#125;// 11. å¾—ï¼Œç”Ÿæˆå­—èŠ‚ç çš„ä»£ç è¿˜è—äº†ä¸€å±‚ï¼ä¸è¿‡ä¹Ÿç®—æ˜¯ç»ˆäºŽè§åˆ°åºå±±çœŸé¢ç›®äº†ï¼ŒåŒæ—¶æˆ‘ä»¬è¿˜å‘çŽ°äº†ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡è®¾ç½®å‚æ•°saveGeneratedFileså°†ç”Ÿæˆçš„ä»£ç†ç±»ä¿å­˜ä¸‹æ¥ã€‚// 12. æœ€åŽçœ‹çœ‹ç”Ÿæˆå­—èŠ‚ç çš„æ–¹æ³•å§ï¼Œsun.misc.ProxyGenerator#generateClassFileprivate byte[] generateClassFile() &#123; // æ·»åŠ  hashCode ä»£ç†æ–¹æ³• this.addProxyMethod(hashCodeMethod, Object.class); // æ·»åŠ  equals ä»£ç†æ–¹æ³• this.addProxyMethod(equalsMethod, Object.class); // æ·»åŠ  toString ä»£ç†æ–¹æ³• this.addProxyMethod(toStringMethod, Object.class); Class[] var1 = this.interfaces; int var2 = var1.length; int var3; Class var4; // éåŽ†æ‰€æœ‰æŽ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•ï¼Œå¹¶å°†æ‰€æœ‰æ–¹æ³•æ·»åŠ ä»£ç†æ–¹æ³• for(var3 = 0; var3 &lt; var2; ++var3) &#123; var4 = var1[var3]; Method[] var5 = var4.getMethods(); int var6 = var5.length; for(int var7 = 0; var7 &lt; var6; ++var7) &#123; Method var8 = var5[var7]; this.addProxyMethod(var8, var4); &#125; &#125; Iterator var11 = this.proxyMethods.values().iterator(); List var12; // æ ¡éªŒæ–¹æ³•è¿”å›žå€¼ while(var11.hasNext()) &#123; var12 = (List)var11.next(); checkReturnTypes(var12); &#125; Iterator var15; try &#123; // æ·»åŠ ä»£ç†ç±»çš„æž„é€ æ–¹æ³• this.methods.add(this.generateConstructor()); var11 = this.proxyMethods.values().iterator(); while(var11.hasNext()) &#123; var12 = (List)var11.next(); var15 = var12.iterator(); while(var15.hasNext()) &#123; ProxyGenerator.ProxyMethod var16 = (ProxyGenerator.ProxyMethod)var15.next(); this.fields.add(new ProxyGenerator.FieldInfo(var16.methodFieldName, "Ljava/lang/reflect/Method;", 10)); // ç”Ÿæˆä»£ç†ç±»çš„ä»£ç†æ–¹æ³• this.methods.add(var16.generateMethod()); &#125; &#125; // ç”Ÿæˆé™æ€ä»£ç å—ç­‰åˆå§‹åŒ–ä¿¡æ¯ this.methods.add(this.generateStaticInitializer()); &#125; catch (IOException var10) &#123; throw new InternalError("unexpected I/O Exception", var10); &#125; // ä»£ç†ç±»çš„æ–¹æ³•ä¸ªæ•°ä¸å¯ä»¥è¶…è¿‡ 65535 ä¸ª if (this.methods.size() &gt; 65535) &#123; throw new IllegalArgumentException("method limit exceeded"); &#125; // ä»£ç†ç±»çš„å­—æ®µä¸ªæ•°ä¸å¯ä»¥è¶…è¿‡ 65535 ä¸ª else if (this.fields.size() &gt; 65535) &#123; throw new IllegalArgumentException("field limit exceeded"); &#125; // éƒ½æ»¡è¶³è¦æ±‚ï¼Œå¼€å§‹å†™å‡ºå­—èŠ‚ç æ–‡ä»¶ else &#123; // å°†ç±»åã€java/lang/reflect/Proxyã€ä»¥åŠæŽ¥å£æ•°ç»„ç­‰ä¿¡æ¯ä¿å­˜è¿› cp ä¸­ï¼Œcpæ˜¯ä¸€ä¸ªå¸¸é‡æ±  this.cp.getClass(dotToSlash(this.className)); this.cp.getClass("java/lang/reflect/Proxy"); var1 = this.interfaces; var2 = var1.length; for(var3 = 0; var3 &lt; var2; ++var3) &#123; var4 = var1[var3]; this.cp.getClass(dotToSlash(var4.getName())); &#125; // è®¾ç½®å¸¸é‡æ± ä¸ºåªè¯»ï¼Œç”Ÿæˆå­—èŠ‚ç æ–‡ä»¶ä¹‹å‰ï¼Œä¸å¯ä»¥è¿›è¡Œä¿®æ”¹ this.cp.setReadOnly(); ByteArrayOutputStream var13 = new ByteArrayOutputStream(); DataOutputStream var14 = new DataOutputStream(var13); // å®ŒçŠŠå­ï¼Œç»ˆäºŽå¼€å§‹å†™å‡ºå­—èŠ‚ç æ–‡ä»¶äº† try &#123; var14.writeInt(-889275714); var14.writeShort(0); var14.writeShort(49); this.cp.write(var14); var14.writeShort(this.accessFlags); var14.writeShort(this.cp.getClass(dotToSlash(this.className))); var14.writeShort(this.cp.getClass("java/lang/reflect/Proxy")); var14.writeShort(this.interfaces.length); Class[] var17 = this.interfaces; int var18 = var17.length; for(int var19 = 0; var19 &lt; var18; ++var19) &#123; Class var22 = var17[var19]; var14.writeShort(this.cp.getClass(dotToSlash(var22.getName()))); &#125; var14.writeShort(this.fields.size()); var15 = this.fields.iterator(); while(var15.hasNext()) &#123; ProxyGenerator.FieldInfo var20 = (ProxyGenerator.FieldInfo)var15.next(); var20.write(var14); &#125; var14.writeShort(this.methods.size()); var15 = this.methods.iterator(); while(var15.hasNext()) &#123; ProxyGenerator.MethodInfo var21 = (ProxyGenerator.MethodInfo)var15.next(); var21.write(var14); &#125; var14.writeShort(0); return var13.toByteArray(); &#125; catch (IOException var9) &#123; throw new InternalError("unexpected I/O Exception", var9); &#125; &#125;&#125;// 13. å…³äºŽå…¶ä¸­çš„addProxyMethodè¿™ä¸ªæ–¹æ³•ï¼Œè¿™é‡Œæˆ‘å°±ä¸å¯¼è¯»æºç äº†ï¼Œæœ‰éœ€è¦çš„è¯å¤§å®¶è‡ªå·±åŽ»çœ‹çœ‹ï¼ŒåŸºæœ¬å°±æ˜¯é€šè¿‡åå°„åŽ»å–å…³é”®ä¿¡æ¯// 14. generateConstructorè¿™ä¸ªæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ¥ï¼Œåœ¨ç”Ÿæˆä»£ç†ç±»çš„æž„é€ æ–¹æ³•çš„æ—¶å€™ï¼Œå‚æ•°æ˜¯ InvocationHandler// 15. æ‰€ä»¥è¯´ï¼Œåœ¨JDKåŠ¨æ€ä»£ç†ä¸­ï¼ŒInvocationHandler æ˜¯æ ¸å¿ƒï¼Œè°ƒç”¨æ—¶çœŸæ­£èµ°çš„æ˜¯ InvocationHandler çš„ invoke() æ–¹æ³• -&gt; java.lang.reflect.InvocationHandler#invoke(Object proxy, Method method, Object[] args) æ ¹æ®ä¼ å…¥çš„ä»£ç†å¯¹è±¡ã€æ–¹æ³•ã€å’Œå‚æ•°å†³å®šå…·ä½“è°ƒç”¨çš„ä»£ç†æ–¹æ³•ã€‚// 16. å¤§å®¶å¯ä»¥é€šè¿‡ä¸Šæ–¹è®¾ç½®å‚æ•°saveGeneratedFileså°†ç”Ÿæˆçš„ä»£ç†ç±»ä¿å­˜ä¸‹æ¥ï¼Œç„¶åŽåç¼–è¯‘çœ‹çœ‹JDKåŠ¨æ€ä»£ç†ç”Ÿæˆçš„ä»£ç åˆ°åº•æ˜¯ä»€ä¹ˆæ ·çš„// 17. å¥½äº†ï¼Œåˆ°è¿™å„¿ï¼ŒJDKåŠ¨æ€ä»£ç†çš„æºç åˆ†æžå°±ç»“æŸå•¦ 6.2. CGLIB åŠ¨æ€ä»£ç†çš„åŽŸç†åˆ†æž åŽŸç†ç®€ä»‹ 1234567// 1. æ‹¿åˆ°è¢«ä»£ç†çš„ç±»// 2. ä¸º CGLIB çš„ Enhancer è®¾ç½®çˆ¶ç±»ï¼ŒåŠå…¶éœ€è¦å›žè°ƒçš„ç±»// 3. Enhancer è°ƒç”¨ create() æ–¹æ³•ç”Ÿæˆè¢«ä»£ç†å¯¹è±¡ï¼Œè¢«ä»£ç†å¯¹è±¡ä¼šç»§æ‰¿åŽŸå…ˆçš„ç±»// 4. é‡å†™è¢«ä»£ç†çš„æ–¹æ³•ï¼ŒåŒæ—¶åŠ ä¸Š final ä¿®é¥°ç¬¦ï¼Œä¸å¯å†è¢«é‡å†™ï¼ŒåŒæ—¶å°†å¢žå¼ºçš„é€»è¾‘åŠ å…¥åˆ°ä»£ç†æ–¹æ³•å‰åŽ æºç å‰–æž æœ‰äº† JDK åŠ¨æ€ä»£ç†çš„ç»éªŒï¼Œæˆ‘ä»¬ä¹Ÿå…ˆæ¥çœ‹çœ‹ CGLIB ä»£ç†çš„å¯¹è±¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŒåŒæ ·åœ¨ è¿™ä¸ªä½ç½® æ‰“ä¸ªæ–­ç‚¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚æžœä¸å…¶ç„¶ï¼Œæ­¤æ—¶çš„ trainTicket çš„å¼•ç”¨åœ°å€ä¾ç„¶å¥‡æ€ªï¼Œè°ƒè¯•å‘çŽ°ï¼Œæ˜¯è¿™ä¸ªä¸œè¥¿ TrainTicket$$EnhancerByCGLIB$$9d0422e9@681ã€‚ è€è§„çŸ©ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹æºç å§~ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141// trainTicket æ˜¯é€šè¿‡ getInstance() èŽ·å–çš„// 1. æˆ‘ä»¬å…ˆçœ‹çœ‹ getInstance ä¸»è¦åšäº†ä»€ä¹ˆæ“ä½œpublic Object getInstance(Class&lt;?&gt; clazz) &#123; // Enhancer ç›¸å½“äºŽ JDK åŠ¨æ€ä»£ç†çš„ Proxy ç±» Enhancer enhancer = new Enhancer(); // è®¾ç½®åŠ¨æ€ç”Ÿæˆçš„å¯¹è±¡çš„çˆ¶ç±»ä¸ºä¼ è¿›æ¥çš„ è¢«ä»£ç†ç±» enhancer.setSuperclass(clazz); // MethodInterceptor ç»§æ‰¿ Callback æŽ¥å£ enhancer.setCallback(this); return enhancer.create();&#125;// 2. è°ƒç”¨çš„æ˜¯ net.sf.cglib.proxy.Enhancer#create() åˆ›å»ºç±»/** * Generate a new class if necessary and uses the specified * callbacks (if any) to create a new object instance. * Uses the no-arg constructor of the superclass. * å¦‚æžœæœ‰å¿…è¦çš„è¯ï¼Œå°±åˆ›å»ºä¸€ä¸ªæ–°çš„ç±»ï¼Œå¹¶æ ¹æ®æŒ‡å®šçš„å›žè°ƒåˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚ * ä½¿ç”¨çˆ¶ç±»çš„æ— å‚æž„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡ * @return a new instance */public Object create() &#123; classOnly = false; argumentTypes = null; return createHelper();&#125;// 3. å‘çŽ° create() æ–¹æ³•ï¼Œè°ƒç”¨çš„æ˜¯ createHelper() æ–¹æ³• -&gt; net.sf.cglib.proxy.Enhancer#createHelper()private Object createHelper() &#123; // åˆ¤æ–­ callbackTypesã€filter æ˜¯å¦ä¸ºç©ºï¼ŒåŒæ—¶å¯¹ä¸ºç©ºçš„æ¡ä»¶åšé¢„å¤„ç† preValidate(); // åˆ›å»ºä¸€ä¸ª Key Object key = KEY_FACTORY.newInstance((superclass != null) ? superclass.getName() : null, ReflectUtils.getNames(interfaces), filter == ALL_ZERO ? null : new WeakCacheKey&lt;CallbackFilter&gt;(filter), callbackTypes, useFactory, interceptDuringConstruction, serialVersionUID); this.currentKey = key; // è°ƒç”¨çˆ¶ç±» -&gt; AbstractClassGenerator çš„ create æ–¹æ³• Object result = super.create(key); return result;&#125;// 4. å…·ä½“ç”Ÿæˆçš„é€»è¾‘èµ°çš„æ˜¯ net.sf.cglib.core.AbstractClassGenerator#create(Object key) æ–¹æ³•protected Object create(Object key) &#123; try &#123; // èŽ·å– ClassLoader ClassLoader loader = getClassLoader(); Map&lt;ClassLoader, AbstractClassGenerator.ClassLoaderData&gt; cache = CACHE; AbstractClassGenerator.ClassLoaderData data = cache.get(loader); if (data == null) &#123; // ä¿è¯çº¿ç¨‹å®‰å…¨ synchronized (AbstractClassGenerator.class) &#123; cache = CACHE; data = cache.get(loader); // åŒé‡æ£€æŸ¥ï¼Œç¡®ä¿çº¿ç¨‹å®‰å…¨ if (data == null) &#123; Map&lt;ClassLoader, AbstractClassGenerator.ClassLoaderData&gt; newCache = new WeakHashMap&lt;ClassLoader, AbstractClassGenerator.ClassLoaderData&gt;(cache); data = new AbstractClassGenerator.ClassLoaderData(loader); newCache.put(loader, data); CACHE = newCache; &#125; &#125; &#125; this.key = key; Object obj = data.get(this, getUseCache()); if (obj instanceof Class) &#123; return firstInstance((Class) obj); &#125; // å…·ä½“åˆ›å»ºå¯¹è±¡çš„æ–¹æ³• return nextInstance(obj); &#125; catch (RuntimeException e) &#123; throw e; &#125; catch (Error e) &#123; throw e; &#125; catch (Exception e) &#123; throw new CodeGenerationException(e); &#125;&#125;// 5. å…·ä½“åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•æ˜¯ nextInstance(),è¿™ä¸ªæ–¹æ³•æ˜¯ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œå…·ä½“å®žçŽ°ç”±å­ç±» Enhancer å®žçŽ°abstract protected Object nextInstance(Object instance) throws Exception;// 6. æˆ‘ä»¬çŽ°åœ¨çœ‹çœ‹ net.sf.cglib.proxy.Enhancer#nextInstance(Object instance) æ–¹æ³•protected Object nextInstance(Object instance) &#123; Enhancer.EnhancerFactoryData data = (Enhancer.EnhancerFactoryData) instance; if (classOnly) &#123; return data.generatedClass; &#125; Class[] argumentTypes = this.argumentTypes; Object[] arguments = this.arguments; if (argumentTypes == null) &#123; argumentTypes = Constants.EMPTY_CLASS_ARRAY; arguments = null; &#125; return data.newInstance(argumentTypes, arguments, callbacks);&#125;// é€šè¿‡ data.newInstance(argumentTypes, arguments, callbacks) è¿”å›žå…·ä½“å¯¹è±¡ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºä»£ç†å¯¹è±¡çš„æž„æˆå™¨ç±»åž‹ï¼Œç¬¬äºŒä¸ªä¸ºä»£ç†å¯¹è±¡æž„é€ æ–¹æ³•å‚æ•°ï¼Œç¬¬ä¸‰ä¸ªä¸ºå¯¹åº”å›žè°ƒå¯¹è±¡/** * Creates proxy instance for given argument types, and assigns the callbacks. * Ideally, for each proxy class, just one set of argument types should be used, * otherwise it would have to spend time on constructor lookup. * é€šè¿‡ç»™å®šçš„å‚æ•°ç±»åž‹ï¼Œåˆ›å»ºä»£ç†å¯¹è±¡ï¼ŒåŒæ—¶åˆ†é…å›žè°ƒã€‚ * ç†æƒ³æƒ…å†µä¸‹ï¼Œæ¯ä¸€ä¸ªä»£ç†ç±»ï¼Œåº”è¯¥ä»…ä½¿ç”¨ä¸€ç»„æž„é€ å‚æ•°ï¼Œå¦åˆ™ï¼Œæˆ‘ä»¬ä¼šèŠ±è´¹å¾ˆå¤šçš„æ—¶é—´åŽ»æ‰¾åˆ°å¯¹åº”çš„æž„é€ æ–¹æ³• * Technically, it is a re-implementation of &#123;@link Enhancer#createUsingReflection(Class)&#125;, * with "cache &#123;@link #setThreadCallbacks&#125; and &#123;@link #primaryConstructor&#125;" * * @see #createUsingReflection(Class) * @param argumentTypes constructor argument types * @param arguments constructor arguments * @param callbacks callbacks to set for the new instance * @return newly created proxy */public Object newInstance(Class[] argumentTypes, Object[] arguments, Callback[] callbacks) &#123; setThreadCallbacks(callbacks); try &#123; // Explicit reference equality is added here just in case Arrays.equals does not have one if (primaryConstructorArgTypes == argumentTypes || Arrays.equals(primaryConstructorArgTypes, argumentTypes)) &#123; // If we have relevant Constructor instance at hand, just call it // This skips "get constructors" machinery return ReflectUtils.newInstance(primaryConstructor, arguments); &#125; // Take a slow path if observing unexpected argument types return ReflectUtils.newInstance(generatedClass, argumentTypes, arguments); &#125; finally &#123; // clear thread callbacks to allow them to be gc'd setThreadCallbacks(null); &#125;&#125;// åˆ°è¿™é‡Œå°±ç”Ÿæˆäº†å…·ä½“çš„å¯¹è±¡// å¦‚æžœéœ€è¦çœ‹åˆ°å…·ä½“ç”Ÿæˆçš„å­—èŠ‚ç å¯¹è±¡æ˜¯å•¥ï¼Œå¯ä»¥åœ¨è°ƒç”¨ enhancer.create() æ–¹æ³•å‰ï¼Œè°ƒç”¨å¦‚ä¸‹æ–¹æ³•ï¼Œå¯ä»¥åœ¨å¯¹åº”ä½ç½®ç”Ÿæˆclassæ–‡ä»¶ï¼Œç„¶åŽé€šè¿‡ jd-gui è¿™ç§åç¼–è¯‘å·¥å…·ï¼Œå°±å¯ä»¥æŸ¥çœ‹åˆ°å…·ä½“ä»£ç å•¦~System.setProperty(DebuggingClassWriter.DEBUG_LOCATION_PROPERTY, "/Users/yangkai.shen/Desktop/design-pattern/proxy/cglib/classes"); 6.3. JDK åŠ¨æ€ä»£ç†ä¸Ž CGLIB åŠ¨æ€ä»£ç†çš„åŒºåˆ« JDK åŠ¨æ€ä»£ç†ç”Ÿæˆçš„ä»£ç†å¯¹è±¡æ˜¯å®žçŽ°äº†è¢«ä»£ç†å¯¹è±¡çš„æŽ¥å£ï¼ŒCGLIB åŠ¨æ€ä»£ç†ç”Ÿæˆçš„ä»£ç†å¯¹è±¡æ˜¯ç»§æ‰¿äº†è¢«ä»£ç†å¯¹è±¡ã€‚ JDK å’ŒCGLIB éƒ½æ˜¯åœ¨è¿è¡ŒæœŸç”Ÿæˆå­—èŠ‚ç ï¼ŒJDK æ˜¯ç›´æŽ¥å†™ class å­—èŠ‚ç ï¼ŒCGLIB ä½¿ç”¨ ASM æ¡†æž¶å†™ class å­—èŠ‚ç ï¼ŒCGLIB ä»£ç†å®žçŽ°æ›´å¤æ‚ï¼ŒCGLIB ç”Ÿæˆä»£ç†ç±»çš„æ•ˆçŽ‡æ¯” JDK ç”Ÿæˆä»£ç†ç±»æ•ˆçŽ‡ä½Žã€‚ JDKè°ƒç”¨ä»£ç†æ–¹æ³•ï¼Œæ˜¯é€šè¿‡åå°„æœºåˆ¶è°ƒç”¨ï¼ŒCGLIBæ˜¯é€šè¿‡ FastClassæœºåˆ¶ç›´æŽ¥è°ƒç”¨æ–¹æ³•ï¼ŒCGLIB çš„è¢«ä»£ç†ç±»æ‰§è¡Œæ•ˆçŽ‡æ¯” JDK çš„è¢«ä»£ç†ç±»æ›´é«˜ã€‚ 6.3. Spring ä¸­ä»£ç†çš„é€‰æ‹©åŽŸåˆ™ å½“Beanæœ‰å®žçŽ°æŽ¥å£æ—¶ï¼ŒSpringå°±ä¼šç”¨JDKçš„åŠ¨æ€ä»£ç†ã€‚ å½“Beanæ²¡æœ‰å®žçŽ°æŽ¥å£æ—¶ï¼ŒSpringé€‰æ‹©CGLibã€‚ Springå¯ä»¥é€šè¿‡é…ç½®å¼ºåˆ¶ä½¿ç”¨CGLibï¼Œåªéœ€åœ¨Springçš„é…ç½®æ–‡ä»¶ä¸­åŠ å…¥å¦‚ä¸‹ä»£ç ï¼š 1&lt;aop:aspectj-autoproxy proxy-target-class="true"/&gt; 7. å®Œæ•´ä»£ç åœ°å€ https://github.com/xkcoding/design-pattern/tree/master/src/main/java/com/xkcoding/design/pattern/structural/proxy]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼</category>
        <category>ç»“æž„åž‹è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼ä¹‹åˆ›å»ºåž‹è®¾è®¡æ¨¡å¼-åŽŸåž‹æ¨¡å¼]]></title>
    <url>%2F2019%2F08%2F14%2Fdesign-pattern-prototype.html</url>
    <content type="text"><![CDATA[1. æ¨¡å¼ç®€ä»‹ åŽŸåž‹å®žä¾‹æŒ‡å®šåˆ›å»ºå¯¹è±¡çš„ç§ç±»ï¼Œé€šè¿‡å…‹éš†è¿™äº›åŽŸåž‹åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚è°ƒç”¨è€…ä¸éœ€è¦æŒ‡å®šå¯¹è±¡çš„åˆ›å»ºç»†èŠ‚ï¼Œä¸é€šè¿‡è°ƒç”¨æž„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡ã€‚å±žäºŽåˆ›å»ºåž‹è®¾è®¡æ¨¡å¼ã€‚ 2. ç¤ºä¾‹ä»£ç  2.1. æµ…å…‹éš† 2.1.1. ä»£ç å®žçŽ° åŽŸåž‹æŽ¥å£ 12345678910111213141516/** * &lt;p&gt; * é’± * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019-08-14 15:53 */public interface Money &#123; /** * æ‰“å° * * @return &#123;@link Money&#125; */ Money print();&#125; å…·ä½“å®žçŽ° 1234567891011121314151617181920212223242526272829303132333435363738394041424344/** * &lt;p&gt; * å½¢çŠ¶ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019-08-14 15:59 */@Getter@Setter@NoArgsConstructor@AllArgsConstructorpublic class Shape implements Serializable &#123; /** * æè¿° */ private String desc;&#125;/** * &lt;p&gt; * ä¸€ç™¾å…ƒ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019-08-14 15:56 */@Getter@Setterpublic class HundredMoney implements Money &#123; private Shape shape; /** * æ‰“å° * * @return &#123;@link Money&#125; */ @Override public Money print() &#123; HundredMoney hundredMoney = new HundredMoney(); hundredMoney.setShape(this.shape); return hundredMoney; &#125;&#125; æµ‹è¯•ç±» 123456789101112131415161718192021/** * &lt;p&gt; * åŽŸåž‹æ¨¡å¼ï¼Œæµ…å…‹éš†æµ‹è¯• * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019-08-14 16:35 */public class PatternTest &#123; public static void main(String[] args) &#123; HundredMoney money1 = new HundredMoney(); money1.setShape(new Shape("çº¸å¸")); // åŽŸåž‹æ¨¡å¼ æµ…å…‹éš† HundredMoney money2 = (HundredMoney) money1.print(); System.out.println("money1 -&gt; å¼•ç”¨å¯¹è±¡åœ°å€ï¼š" + money1.getShape()); System.out.println("money2 -&gt; å¼•ç”¨å¯¹è±¡åœ°å€ï¼š" + money2.getShape()); System.out.println("å¼•ç”¨å¯¹è±¡åœ°å€æ¯”è¾ƒï¼š" + (money1.getShape() == money2.getShape())); &#125;&#125; æµ‹è¯•ç»“æžœ 123money1 -&gt; å¼•ç”¨å¯¹è±¡åœ°å€ï¼šcom.xkcoding.design.pattern.creational.prototype.Shape@1d44bcfamoney2 -&gt; å¼•ç”¨å¯¹è±¡åœ°å€ï¼šcom.xkcoding.design.pattern.creational.prototype.Shape@1d44bcfaå¼•ç”¨å¯¹è±¡åœ°å€æ¯”è¾ƒï¼štrue 2.1.2. UMLå›¾ä¾‹ 2.2. æ·±å…‹éš† æ·±å…‹éš†ä¸€å®šéœ€è¦å®žçŽ° Serializable æŽ¥å£ 2.2.1. ä»£ç å®žçŽ° åŽŸåž‹æŽ¥å£ 12345678910111213141516/** * &lt;p&gt; * é’± * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019-08-14 15:53 */public interface Money &#123; /** * æ‰“å° * * @return &#123;@link Money&#125; */ Money print();&#125; å…·ä½“å®žçŽ° 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960/** * &lt;p&gt; * å½¢çŠ¶ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019-08-14 15:59 */@Getter@Setter@NoArgsConstructor@AllArgsConstructorpublic class Shape implements Serializable &#123; /** * æè¿° */ private String desc;&#125;/** * &lt;p&gt; * ä¸€ç™¾å…ƒ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019-08-14 15:56 */@Getter@Setterpublic class HundredMoney implements Money, Cloneable, Serializable &#123; private Shape shape; /** * æ‰“å° * * @return &#123;@link Money&#125; */ @Override public Money print() &#123; return (Money) this.clone(); &#125; @Override protected Object clone() &#123; return this.deepClone(); &#125; @SneakyThrows private Object deepClone() &#123; @Cleanup ByteArrayOutputStream bos = new ByteArrayOutputStream(); @Cleanup ObjectOutputStream oos = new ObjectOutputStream(bos); oos.writeObject(this); @Cleanup ByteArrayInputStream bis = new ByteArrayInputStream(bos.toByteArray()); @Cleanup ObjectInputStream ois = new ObjectInputStream(bis); return ois.readObject(); &#125;&#125; æµ‹è¯•ç±» 123456789101112131415161718192021/** * &lt;p&gt; * åŽŸåž‹æ¨¡å¼ï¼Œæ·±å…‹éš†æµ‹è¯•ï¼Œæ³¨æ„æ‰€æœ‰å¼•ç”¨å¯¹è±¡å‡éœ€è¦å®žçŽ° &#123;@link java.io.Serializable&#125; æŽ¥å£ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019-08-14 17:29 */public class PatternTest &#123; public static void main(String[] args) &#123; HundredMoney money1 = new HundredMoney(); money1.setShape(new Shape("çº¸å¸")); // åŽŸåž‹æ¨¡å¼ æ·±å…‹éš† HundredMoney money2 = (HundredMoney) money1.print(); System.out.println("money1 -&gt; å¼•ç”¨å¯¹è±¡åœ°å€ï¼š" + money1.getShape()); System.out.println("money2 -&gt; å¼•ç”¨å¯¹è±¡åœ°å€ï¼š" + money2.getShape()); System.out.println("å¼•ç”¨å¯¹è±¡åœ°å€æ¯”è¾ƒï¼š" + (money1.getShape() == money2.getShape())); &#125;&#125; æµ‹è¯•ç»“æžœ 123money1 -&gt; å¼•ç”¨å¯¹è±¡åœ°å€ï¼šcom.xkcoding.design.pattern.creational.prototype.Shape@355da254money2 -&gt; å¼•ç”¨å¯¹è±¡åœ°å€ï¼šcom.xkcoding.design.pattern.creational.prototype.Shape@12edcd21å¼•ç”¨å¯¹è±¡åœ°å€æ¯”è¾ƒï¼šfalse 2.2.2. UMLå›¾ä¾‹ 3. åº”ç”¨ 123456789// BeanUtils.copyProperties()// JSON.parseObject()// Guava copy çš„å·¥å…·ç±»// spring ä¸­çš„ scope = "prototype" å°±æ˜¯é€šè¿‡åŠ è½½ Spring å®¹å™¨ä¸­çš„å¯¹è±¡æ¨¡æ¿ï¼Œå¤åˆ¶å‡ºå¤šå®žä¾‹çš„// JDK ä¸­ Arrays.copyOf() 4. åœºæ™¯ ç±»åˆå§‹åŒ–æ¶ˆè€—èµ„æºè¾ƒå¤š åˆ›å»ºå¯¹è±¡çš„æ—¶å€™æ­¥éª¤ç¹çï¼ˆæ•°æ®å‡†å¤‡ã€è®¿é—®æƒé™ç­‰åˆå§‹åŒ–ï¼‰ æž„é€ å‡½æ•°å¤æ‚ å¾ªçŽ¯ä½“é‡åˆ›å»ºå¤§é‡å¯¹è±¡ 6. ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ï¼š åŽŸåž‹æ¨¡å¼æ€§èƒ½æ¯”ç›´æŽ¥newä¸€ä¸ªå¯¹è±¡æ€§èƒ½é«˜ï¼›ç®€åŒ–äº†åˆ›å»ºè¿‡ç¨‹ ç¼ºç‚¹ï¼š å¿…é¡»é…å¤‡å…‹éš†ï¼ˆæˆ–è€…å¯æ‹·è´ï¼‰æ–¹æ³•ï¼›å¯¹å…‹éš†å¤æ‚å¯¹è±¡æˆ–è€…å¯¹å…‹éš†å‡ºçš„å¯¹è±¡è¿›è¡Œå¤æ‚æ”¹é€ æ—¶ï¼Œå®¹æ˜“å¸¦æ¥é£Žé™©ï¼›æµ…å…‹éš† å’Œ æ·±å…‹éš† è¦è¿ç”¨å¾—å½“ 7. å®Œæ•´ä»£ç åœ°å€ https://github.com/xkcoding/design-pattern/tree/master/src/main/java/com/xkcoding/design/pattern/creational/prototype]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼</category>
        <category>åˆ›å»ºåž‹è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼ä¹‹åˆ›å»ºåž‹è®¾è®¡æ¨¡å¼-å•ä¾‹æ¨¡å¼]]></title>
    <url>%2F2019%2F08%2F12%2Fdesign-pattern-singleton.html</url>
    <content type="text"><![CDATA[1. æ¨¡å¼ç®€ä»‹ ç¡®ä¿ä¸€ä¸ªç±»åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ç»å¯¹åªæœ‰ä¸€ä¸ªå®žä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªå…¨å±€çš„è®¿é—®å…¥å£ç‚¹ï¼›éšè—æ‰€æœ‰çš„æž„é€ æ–¹æ³•ï¼›å±žäºŽåˆ›å»ºåž‹è®¾è®¡æ¨¡å¼ã€‚ 2. å®žçŽ°æ–¹å¼ 2.1. é¥¿æ±‰å¼å•ä¾‹ å…ˆå°†å®žä¾‹åˆ›å»ºå‡ºæ¥ï¼Œç”¨çš„æ—¶å€™ç›´æŽ¥æ‹¿ 2.1.1. å±žæ€§åˆå§‹åŒ– 12345678910111213141516171819202122232425262728293031/** * &lt;p&gt; * é¥¿æ±‰å¼å•ä¾‹ï¼Œåœ¨å±žæ€§åˆå§‹åŒ– * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019-08-11 11:32 */public class EagerSingleton1 &#123; private final static EagerSingleton1 INSTANCE = new EagerSingleton1(); /** * ç§æœ‰åŒ–æž„é€ æ–¹æ³• */ private EagerSingleton1() &#123; &#125; /** * æä¾›å…¨å±€è®¿é—®å…¥å£ */ public static EagerSingleton1 getInstance() &#123; return INSTANCE; &#125; public static void main(String[] args) throws InterruptedException &#123; ConcurrentExecutor.execute(() -&gt; &#123; System.out.println("çº¿ç¨‹å·: " + Thread.currentThread().getName() + "ï¼Œ" + EagerSingleton1.getInstance()); &#125;, 10, 5); &#125;&#125; 2.1.2. é™æ€ä»£ç å—åˆå§‹åŒ– 12345678910111213141516171819202122232425262728293031323334353637/** * &lt;p&gt; * é¥¿æ±‰å¼å•ä¾‹ï¼Œåœ¨é™æ€ä»£ç å—åˆå§‹åŒ– * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019-08-11 11:46 */public class EagerSingleton2 &#123; /** * æ­¤å¤„éœ€è¦è®¾ç½®ä¸º &#123;@code final&#125; çš„ï¼Œé˜²æ­¢è¢«åŽç»­èµ‹å€¼ï¼ */ private final static EagerSingleton2 INSTANCE; static &#123; INSTANCE = new EagerSingleton2(); &#125; /** * ç§æœ‰åŒ–æž„é€ æ–¹æ³• */ private EagerSingleton2() &#123; &#125; /** * æä¾›å…¨å±€è®¿é—®å…¥å£ */ public static EagerSingleton2 getInstance() &#123; return INSTANCE; &#125; public static void main(String[] args) throws InterruptedException &#123; ConcurrentExecutor.execute(() -&gt; &#123; System.out.println("çº¿ç¨‹å·: " + Thread.currentThread().getName() + "ï¼Œ" + EagerSingleton2.getInstance()); &#125;, 10, 5); &#125;&#125; 2.2. æ‡’æ±‰å¼å•ä¾‹ ç”¨çš„æ—¶å€™å†åŽ»åˆ›å»º 2.2.1. ç®€å•å®žçŽ° 123456789101112131415161718192021222324252627282930/** * &lt;p&gt; * æ‡’æ±‰å¼å•ä¾‹ï¼Œç®€å•å®žçŽ° * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019-08-11 19:15 */public class LazySingletonSimple &#123; private static LazySingletonSimple INSTANCE = null; private LazySingletonSimple() &#123; &#125; /** * æ­¤å¤„éœ€è¦åŠ  &#123;@code synchronized&#125;ï¼Œä¿è¯çº¿ç¨‹å®‰å…¨ */ public synchronized static LazySingletonSimple getInstance() &#123; if (INSTANCE == null) &#123; INSTANCE = new LazySingletonSimple(); &#125; return INSTANCE; &#125; public static void main(String[] args) throws InterruptedException &#123; ConcurrentExecutor.execute(() -&gt; &#123; System.out.println("çº¿ç¨‹å·: " + Thread.currentThread().getName() + "ï¼Œ" + LazySingletonSimple.getInstance()); &#125;, 10, 5); &#125;&#125; 2.2.2. åŒé‡æ£€æŸ¥é”å®žçŽ° 12345678910111213141516171819202122232425262728293031323334/** * &lt;p&gt; * æ‡’æ±‰å¼å•ä¾‹ï¼ŒåŒé‡æ£€æŸ¥é” * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019-08-11 19:19 */public class LazySingletonDoubleCheck &#123; /** * æ·»åŠ  &#123;@code volatile&#125; è§£å†³åº•å±‚ CPU æŒ‡ä»¤é‡æŽ’çš„é—®é¢˜ */ private volatile static LazySingletonDoubleCheck INSTANCE = null; private LazySingletonDoubleCheck() &#123; &#125; public static LazySingletonDoubleCheck getInstance() &#123; if (INSTANCE == null) &#123; synchronized (LazySingletonDoubleCheck.class) &#123; if (INSTANCE == null) &#123; INSTANCE = new LazySingletonDoubleCheck(); &#125; &#125; &#125; return INSTANCE; &#125; public static void main(String[] args) throws InterruptedException &#123; ConcurrentExecutor.execute(() -&gt; &#123; System.out.println("çº¿ç¨‹å·: " + Thread.currentThread().getName() + "ï¼Œ" + LazySingletonDoubleCheck.getInstance()); &#125;, 10, 5); &#125;&#125; 2.2.3. é™æ€å†…éƒ¨ç±»å®žçŽ°ï¼ˆæŽ¨èå†™æ³•ï¼‰ 12345678910111213141516171819202122232425262728293031323334353637383940/** * &lt;p&gt; * æ‡’æ±‰å¼å•ä¾‹ï¼Œå†…éƒ¨ç±»å†™æ³•ï¼Œ&#123;@code æŽ¨èå†™æ³•ä¹‹ä¸€&#125; * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019-08-11 19:24 */public class LazySingletonInnerClass &#123; private LazySingletonInnerClass() &#123; // åå°„èŽ·å–ç±»çš„æž„é€ æ–¹æ³•ï¼Œé€šè¿‡newInstance() èŽ·å–å¯¹è±¡ä¼šå­˜åœ¨å•ä¾‹è¢«ç ´åçš„é—®é¢˜ // æ·»åŠ ä»¥ä¸‹ä»£ç è§£å†³ï¼Œå¼ºåˆ¶ä¸å…è®¸æž„å»º if (SingletonHolder.INSTANCE != null) &#123; throw new RuntimeException("ä¸å…è®¸åˆ›å»ºå¤šä¸ªå®žä¾‹"); &#125; &#125; public static LazySingletonInnerClass getInstance() &#123; return SingletonHolder.INSTANCE; &#125; private static class SingletonHolder &#123; private final static LazySingletonInnerClass INSTANCE = new LazySingletonInnerClass(); &#125; public static void main(String[] args) throws NoSuchMethodException, IllegalAccessException, InvocationTargetException, InstantiationException &#123; // æ™®é€šæ–¹å¼èŽ·å– LazySingletonInnerClass instance1 = LazySingletonInnerClass.getInstance(); // åå°„æ–¹å¼èŽ·å– Class&lt;LazySingletonInnerClass&gt; clazz = LazySingletonInnerClass.class; Constructor&lt;LazySingletonInnerClass&gt; constructor = clazz.getDeclaredConstructor(null); // è®¾ç½®è®¿é—®çº§åˆ«ï¼Œå› ä¸ºæ˜¯privateçš„ constructor.setAccessible(true); LazySingletonInnerClass instance2 = constructor.newInstance(); System.out.println("instance1 = " + instance1); System.out.println("instance2 = " + instance2); &#125;&#125; 2.3. æ³¨å†Œå¼å•ä¾‹ å°†æ¯ä¸€ä¸ªå®žä¾‹éƒ½ç¼“å­˜åˆ°ç»Ÿä¸€çš„å®¹å™¨ä¸­ï¼Œä½¿ç”¨å”¯ä¸€æ ‡è¯†èŽ·å–å®žä¾‹ 2.3.1. æžšä¸¾å¼å•ä¾‹ï¼ˆæŽ¨èå†™æ³•ï¼‰ 123456789101112131415161718192021222324/** * &lt;p&gt; * æ³¨å†Œå¼å•ä¾‹ï¼Œæžšä¸¾å®žçŽ°ï¼Œ&#123;@code æŽ¨èå†™æ³•ä¹‹ä¸€&#125; * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019-08-11 19:35 */public enum RegisterSingletonEnum &#123; /** * å•ä¾‹ */ INSTANCE; public static RegisterSingletonEnum getInstance() &#123; return INSTANCE; &#125; public static void main(String[] args) throws InterruptedException &#123; ConcurrentExecutor.execute(() -&gt; &#123; System.out.println("çº¿ç¨‹å·: " + Thread.currentThread().getName() + "ï¼Œ" + RegisterSingletonEnum.getInstance()); &#125;, 10, 5); &#125;&#125; 2.3.2. å®¹å™¨å¼å•ä¾‹ 2.3.2.1. Springå¼å®žçŽ° 12345678910111213141516171819202122232425262728293031323334353637383940/** * &lt;p&gt; * æ³¨å†Œå¼å•ä¾‹ï¼Œå®¹å™¨å®žçŽ°ï¼ŒSpring å®¹å™¨çš„å®žçŽ° * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019-08-11 19:38 */public class RegisterSingletonContainer &#123; private static final Map&lt;String, Object&gt; BEAN_CACHE = new ConcurrentHashMap&lt;&gt;(); private RegisterSingletonContainer() &#123; &#125; public static Object getInstance(String className) &#123; synchronized (BEAN_CACHE) &#123; // åˆ¤æ–­ç¼“å­˜æ˜¯å¦å­˜åœ¨ if (!BEAN_CACHE.containsKey(className)) &#123; // æž„å»ºå¯¹è±¡ï¼Œæ”¾åœ¨ç¼“å­˜ Class&lt;?&gt; aClass = null; try &#123; aClass = Class.forName(className); &#125; catch (ClassNotFoundException e) &#123; e.printStackTrace(); &#125; BEAN_CACHE.put(className, aClass); return aClass; &#125; else &#123; return BEAN_CACHE.get(className); &#125; &#125; &#125; public static void main(String[] args) throws InterruptedException &#123; ConcurrentExecutor.execute(() -&gt; &#123; Object instance = RegisterSingletonContainer.getInstance("com.xkcoding.design.pattern.creational.singleton.register.RegisterSingletonContainer"); System.out.println(System.currentTimeMillis() + " :: " + instance); &#125;, 10, 5); &#125;&#125; 2.3.2.2. ThreadLocalå¼å•ä¾‹ ThreadLocalå¼å•ä¾‹å…¶å®žä¹Ÿå±žäºŽ å®¹å™¨å¼å•ä¾‹ï¼Œä¼ªçº¿ç¨‹å®‰å…¨ï¼Œä¿è¯çº¿ç¨‹å†…éƒ¨å…¨éƒ¨å”¯ä¸€ï¼ŒåŒä¸€çº¿ç¨‹å†…çº¿ç¨‹å®‰å…¨ 1234567891011121314151617181920212223242526272829303132/** * &lt;p&gt; * æ³¨å†Œå¼å•ä¾‹ï¼ŒThreadLocalå®žçŽ°ï¼Œä¼ªçº¿ç¨‹å®‰å…¨ï¼Œä¿è¯çº¿ç¨‹å†…éƒ¨å…¨éƒ¨å”¯ä¸€ï¼ŒåŒä¸€çº¿ç¨‹å†…çº¿ç¨‹å®‰å…¨ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019-08-11 19:55 */public class RegisterSingletonThreadLocal &#123; private static final ThreadLocal&lt;RegisterSingletonThreadLocal&gt; INSTANCE = ThreadLocal.withInitial(RegisterSingletonThreadLocal::new); private RegisterSingletonThreadLocal() &#123; &#125; public static RegisterSingletonThreadLocal getInstance() &#123; return INSTANCE.get(); &#125; /** * æµ‹è¯•å¯è§ï¼ŒåŒä¸€çº¿ç¨‹å†…å•ä¾‹ï¼Œä¸åŒçº¿ç¨‹é—´éžå•ä¾‹ */ public static void main(String[] args) throws InterruptedException &#123; System.out.println("çº¿ç¨‹å·: " + Thread.currentThread().getName() + "ï¼Œ" + RegisterSingletonThreadLocal.getInstance()); System.out.println("çº¿ç¨‹å·: " + Thread.currentThread().getName() + "ï¼Œ" + RegisterSingletonThreadLocal.getInstance()); System.out.println("çº¿ç¨‹å·: " + Thread.currentThread().getName() + "ï¼Œ" + RegisterSingletonThreadLocal.getInstance()); System.out.println("çº¿ç¨‹å·: " + Thread.currentThread().getName() + "ï¼Œ" + RegisterSingletonThreadLocal.getInstance()); ConcurrentExecutor.execute(() -&gt; &#123; System.out.println("çº¿ç¨‹å·: " + Thread.currentThread().getName() + "ï¼Œ" + RegisterSingletonThreadLocal.getInstance()); &#125;, 10, 5); &#125;&#125; 3. é—®é¢˜ç‚¹ 3.1. ååºåˆ—åŒ–ç ´åå•ä¾‹çš„æƒ…å†µ æµ‹è¯•ä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950/** * &lt;p&gt; * é¥¿æ±‰å¼å•ä¾‹ï¼Œæµ‹è¯•ååºåˆ—åŒ–è¢«ç ´åçš„æƒ…å†µ * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019-08-11 20:11 */public class EagerSingleton3 implements Serializable &#123; private final static EagerSingleton3 INSTANCE = new EagerSingleton3(); private EagerSingleton3() &#123; &#125; public static EagerSingleton3 getInstance() &#123; return INSTANCE; &#125; /** * é‡å†™ &#123;@code readResolve&#125; æ–¹æ³•ï¼Œå¯è§£å†³ååºåˆ—åŒ–å•ä¾‹ç ´åçš„åœºæ™¯ */ private Object readResolve() &#123; return INSTANCE; &#125; public static void main(String[] args) throws IOException, ClassNotFoundException &#123; // æ­£å¸¸èŽ·å–å®žä¾‹ EagerSingleton3 instance1 = EagerSingleton3.getInstance(); // é€šè¿‡åºåˆ—åŒ–èŽ·å– EagerSingleton3 instance2 = null; // å°† instance1 å†™å‡ºåˆ°æ–‡ä»¶ FileOutputStream fos = new FileOutputStream("EagerSingleton3.obj"); ObjectOutputStream oos = new ObjectOutputStream(fos); oos.writeObject(instance1); oos.flush(); oos.close(); // è¯»å–æ–‡ä»¶åˆ° instance2 FileInputStream fis = new FileInputStream("EagerSingleton3.obj"); ObjectInputStream ois = new ObjectInputStream(fis); instance2 = (EagerSingleton3) ois.readObject(); ois.close(); System.out.println(instance1); System.out.println(instance2); System.out.println(instance1 == instance2); &#125;&#125; å…¶å®žä¸Šé¢çš„ä»£ç å·²ç»ç»™å‡ºç­”æ¡ˆäº†ï¼Œé‡å†™ readResolve() æ–¹æ³•ï¼Œå°† INSTANCE è¿”å›žå³å¯è§£å†³ã€‚ ä¸ºä»€ä¹ˆé‡å†™ readResolve() æ–¹æ³•ï¼Œå°† INSTANCE è¿”å›žå°±å¯ä»¥è§£å†³è¿™ä¸ªå•ä¾‹è¢«ç ´åçš„é—®é¢˜å‘¢ï¼Ÿè·Ÿä¸€æ³¢æºç çœ‹çœ‹ ~ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132// 1. é¦–å…ˆå¾—æ˜Žç¡® åŽŸå› åº”è¯¥æ˜¯ååºåˆ—åŒ–ä¸ºå¯¹è±¡çš„æ—¶å€™ å¯¼è‡´å•ä¾‹å¤±è´¥çš„// æ‰€ä»¥è·Ÿè¸ªä¸€æ³¢ ois.readObject() æºç  -&gt; java.io.ObjectInputStream#readObject// 2. debug å¯ä»¥å‘çŽ°ï¼Œæ‰§è¡Œäº† readObject0(false) è¿”å›žå¯¹è±¡Object obj = readObject0(false);// 3. ç»§ç»­è·Ÿè¸ª readObject0() çš„æºç  -&gt; java.io.ObjectInputStream#readObject0// çœç•¥éƒ¨åˆ†ä»£ç ï¼Œåªçœ‹ä¸‹é¢çš„ switch éƒ¨åˆ†ä»£ç switch (tc) &#123; case TC_NULL: return readNull(); case TC_REFERENCE: return readHandle(unshared); case TC_CLASS: return readClass(unshared); case TC_CLASSDESC: case TC_PROXYCLASSDESC: return readClassDesc(unshared); case TC_STRING: case TC_LONGSTRING: return checkResolve(readString(unshared)); case TC_ARRAY: return checkResolve(readArray(unshared)); case TC_ENUM: return checkResolve(readEnum(unshared)); case TC_OBJECT: return checkResolve(readOrdinaryObject(unshared)); case TC_EXCEPTION: IOException ex = readFatalException(); throw new WriteAbortedException("writing aborted", ex); case TC_BLOCKDATA: case TC_BLOCKDATALONG: if (oldMode) &#123; bin.setBlockDataMode(true); bin.peek(); // force header read throw new OptionalDataException( bin.currentBlockRemaining()); &#125; else &#123; throw new StreamCorruptedException( "unexpected block data"); &#125; case TC_ENDBLOCKDATA: if (oldMode) &#123; throw new OptionalDataException(true); &#125; else &#123; throw new StreamCorruptedException( "unexpected end of block data"); &#125; default: throw new StreamCorruptedException( String.format("invalid type code: %02X", tc));&#125;// debugå¯ä»¥å‘çŽ°ååºåˆ—åŒ–çš„æ—¶å€™èµ°çš„æ˜¯case TC_OBJECT: return checkResolve(readOrdinaryObject(unshared));// 4. å› æ­¤ï¼Œç»§ç»­è·Ÿè¸ªæºç  readOrdinaryObject(unshared) -&gt; java.io.ObjectInputStream#readOrdinaryObject// çœç•¥éƒ¨åˆ†ä»£ç obj = desc.isInstantiable() ? desc.newInstance() : null;// è¿™æ®µä»£ç é‡Œ desc.isInstantiable() ä¸»è¦æ˜¯åˆ¤æ–­ç±»æ˜¯å¦å¯ä»¥è¢«åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼ŒåŒæ—¶æ˜¯å¦æä¾›ä¸€ä¸ªæ— å‚çš„æž„é€ æ–¹æ³•// è¿™é‡Œæ˜¾ç„¶ä¸º true, æ‰€ä»¥ obj = desc.newInstance()ï¼Œè¿™å°±æ„å‘³ç€å·²ç»è¢«æ–°åˆ›å»ºäº†ä¸€ä¸ªå¯¹è±¡// 5. ä¸Šé¢åªæ˜¯è§£é‡Šäº†ä¸ºä»€ä¹ˆååºåˆ—åŒ–ä¼šç ´åå•ä¾‹çš„æƒ…å†µï¼Œä¸‹é¢æˆ‘ä»¬çœ‹çœ‹æ€Žä¹ˆè§£å†³// æŽ¥ç€çœ‹ java.io.ObjectInputStream#readOrdinaryObject è¿™ä¸ªæ–¹æ³•// çœç•¥éƒ¨åˆ†ä»£ç if (obj != null &amp;&amp; handles.lookupException(passHandle) == null &amp;&amp; desc.hasReadResolveMethod()) &#123; Object rep = desc.invokeReadResolve(obj); if (unshared &amp;&amp; rep.getClass().isArray()) &#123; rep = cloneArray(rep); &#125; if (rep != obj) &#123; // Filter the replacement object if (rep != null) &#123; if (rep.getClass().isArray()) &#123; filterCheck(rep.getClass(), Array.getLength(rep)); &#125; else &#123; filterCheck(rep.getClass(), -1); &#125; &#125; handles.setObject(passHandle, obj = rep); &#125;&#125;// è¿™é‡Œå­˜åœ¨ä¸€ä¸ª if çš„æ¡ä»¶åˆ¤æ–­ï¼Œdesc.hasReadResolveMethod()// æ»¡è¶³æ¡ä»¶çš„æ—¶å€™ï¼ŒObject rep = desc.invokeReadResolve(obj); // å¦‚æžœ rep != obj çš„æ—¶å€™å‘¢ï¼Œå°±æŠŠ rep èµ‹å€¼ç»™ objï¼Œ handles.setObject(passHandle, obj = rep);// 6. çœ‹åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±å¾—å‡ºä¸€ä¸ªç»“è®ºï¼š// å¦‚æžœè¦æ˜¯ä»ç„¶ä¿è¯å•ä¾‹ï¼Œæˆ‘ä»¬åªè¦è®© rep è¿”å›žçš„æ—¶å€™ç­‰äºŽåŽŸå…ˆçš„å¯¹è±¡è¦†ç›–ç»™ obj å°±å¯ä»¥å®žçŽ°å•ä¾‹äº†// 7. æ‰€ä»¥è¿™é‡Œçš„å…³é”®å°±æ˜¯ desc.hasReadResolveMethod() å’Œ desc.invokeReadResolve(obj) è¿™ä¸¤ä¸ªæ–¹æ³•äº†// 7.1. é‚£æˆ‘ä»¬é¦–å…ˆæ¥çœ‹çœ‹ desc.hasReadResolveMethod() è¿™ä¸ªæ–¹æ³•boolean hasReadResolveMethod() &#123; requireInitialized(); return (readResolveMethod != null);&#125;// è¿™é‡Œå°±åªæ˜¯åˆ¤æ–­ readResolveMethod è¿™ä¸ªæ˜¯å¦ä¸º nullï¼Œé‚£æˆ‘ä»¬å°±æ¥çœ‹çœ‹ readResolveMethod è¿™åˆ°åº•æ˜¯ä¸ªå•¥å§/** class-defined readResolve method, or null if none */private Method readResolveMethod;// å±žæ€§çš„å£°æ˜Žè¯´çš„å¾ˆæ¸…æ¥šï¼Œæ˜¯ä¸€ä¸ªåä¸º readResolve çš„æ–¹æ³•ï¼Œä½†æ˜¯è¿”å›žå€¼æ˜¯å•¥å‘¢ï¼Œæˆ‘ä»¬å†æ‰¾æ‰¾ï¼Œè¿™ä¸ªå€¼ä¸ä¼šå‡­ç©ºç”Ÿæˆï¼Œè¦ä¹ˆæ˜¯æž„é€ æ–¹æ³•ç”Ÿæˆçš„æ—¶å€™æ”¾è¿›åŽ»çš„ï¼Œè¦ä¹ˆå°±æ˜¯æ‰‹åŠ¨setçš„// é‚£æˆ‘ä»¬å°±ç”¨å¿«æ·é”® Command + B çœ‹çœ‹è¿™ä¸ªå±žæ€§åœ¨å“ªé‡Œè¢«ç”¨åˆ°äº†å§// ä¸éš¾å‘çŽ°ï¼Œè¿™æ˜¯åœ¨ java.io.ObjectStreamClass#ObjectStreamClass(java.lang.Class&lt;?&gt;) æž„é€ æ–¹æ³•çš„æ—¶å€™ï¼Œé€šè¿‡åå°„è®¾ç½®çš„// çœç•¥éƒ¨åˆ†ä»£ç readResolveMethod = getInheritableMethod(cl, "readResolve", null, Object.class);// å†çœ‹ java.io.ObjectStreamClass#getInheritableMethod(Class&lt;?&gt; cl, String name, Class&lt;?&gt;[] argTypes, Class&lt;?&gt; returnType) // readResolveMethod å°±æ˜¯ å‡½æ•°åä¸º readResolveï¼Œæ— å‚ï¼Œè¿”å›žå€¼æ˜¯ Object çš„æ–¹æ³•// 7.2. å†çœ‹çœ‹ desc.invokeReadResolve(obj) è¿™ä¸ªæ–¹æ³• -&gt; java.io.ObjectStreamClass#invokeReadResolve// è¿™ä¸ªæ–¹æ³•å°±æ˜¯åå°„è°ƒç”¨ readResolveMethod è¿™ä¸ª Method å¯¹è±¡è¿”å›žç»“æžœ// 8. åˆ°è¿™å„¿ï¼Œèªæ˜Žçš„ä½ åº”è¯¥çŸ¥é“æ€Žä¹ˆçŽ©å„¿äº†å§ï¼Œé‡å†™ readResolve æ–¹æ³•ï¼Œè¿”å›ž INSTANCE å®Œäº‹~private Object readResolve() &#123; return INSTANCE;&#125; æ³¨æ„å“¦ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨æžšä¸¾å¼å•ä¾‹çš„å†™æ³•å°±ä¸ä¼šå‡ºçŽ°è¿™ç§æƒ…å†µï¼Œå…·ä½“åŽŸå› å¦‚ä¸‹ï¼š 1234567// è¿˜æ˜¯èµ°åˆ° ä¸Šé¢çš„ switch åˆ†æ”¯ï¼Œä½†æ˜¯æžšä¸¾å¼å•ä¾‹å°±ä¼šèµ°case TC_ENUM: return checkResolve(readEnum(unshared));// è·Ÿè¸ª java.io.ObjectInputStream#readEnum æºç å¯ä»¥å‘çŽ°// çœç•¥éƒ¨åˆ†ä»£ç Enum&lt;?&gt; en = Enum.valueOf((Class)cl, name);// æ‰€ä»¥ä¸ä¼šå¯¼è‡´å•ä¾‹è¢«ç ´åçš„æƒ…å†µ~ 3.2. åå°„ç ´åå•ä¾‹çš„æƒ…å†µ æµ‹è¯•ä»£ç ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940/** * &lt;p&gt; * æ‡’æ±‰å¼å•ä¾‹ï¼Œå†…éƒ¨ç±»å†™æ³•ï¼Œ&#123;@code æŽ¨èå†™æ³•ä¹‹ä¸€&#125; * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019-08-11 19:24 */public class LazySingletonInnerClass &#123; private LazySingletonInnerClass() &#123; // åå°„èŽ·å–ç±»çš„æž„é€ æ–¹æ³•ï¼Œé€šè¿‡newInstance() èŽ·å–å¯¹è±¡ä¼šå­˜åœ¨å•ä¾‹è¢«ç ´åçš„é—®é¢˜ // æ·»åŠ ä»¥ä¸‹ä»£ç è§£å†³ï¼Œå¼ºåˆ¶ä¸å…è®¸æž„å»º if (SingletonHolder.INSTANCE != null) &#123; throw new RuntimeException("ä¸å…è®¸åˆ›å»ºå¤šä¸ªå®žä¾‹"); &#125; &#125; public static LazySingletonInnerClass getInstance() &#123; return SingletonHolder.INSTANCE; &#125; private static class SingletonHolder &#123; private final static LazySingletonInnerClass INSTANCE = new LazySingletonInnerClass(); &#125; public static void main(String[] args) throws NoSuchMethodException, IllegalAccessException, InvocationTargetException, InstantiationException &#123; // æ™®é€šæ–¹å¼èŽ·å– LazySingletonInnerClass instance1 = LazySingletonInnerClass.getInstance(); // åå°„æ–¹å¼èŽ·å– Class&lt;LazySingletonInnerClass&gt; clazz = LazySingletonInnerClass.class; Constructor&lt;LazySingletonInnerClass&gt; constructor = clazz.getDeclaredConstructor(null); // è®¾ç½®è®¿é—®çº§åˆ«ï¼Œå› ä¸ºæ˜¯privateçš„ constructor.setAccessible(true); LazySingletonInnerClass instance2 = constructor.newInstance(); System.out.println("instance1 = " + instance1); System.out.println("instance2 = " + instance2); &#125;&#125; å…¶å®žä¸Šé¢çš„ä»£ç å·²ç»ç»™å‡ºç­”æ¡ˆäº†ï¼Œåªéœ€è¦åœ¨æž„é€ æ–¹æ³•é‡Œåˆ¤æ–­å½“å‰å®žä¾‹æ˜¯å¦å·²åˆ›å»ºï¼Œå·²åˆ›å»ºæŠ›å‡ºè¿è¡Œæ—¶å¼‚å¸¸ï¼Œå³å¯è§£å†³ã€‚ 4. åº”ç”¨ 1234567// 1. ServletContext// 2. ServletConfig// 3. ApplicationContext// 4. DBPool 5. ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ï¼š åœ¨å†…å­˜ä¸­åªæœ‰ä¸€ä¸ªå®žä¾‹ï¼Œå‡å°‘å†…å­˜å¼€é”€ï¼›å¯ä»¥é¿å…å¯¹èµ„æºçš„å¤šé‡å ç”¨ï¼›è®¾ç½®å…¨å±€è®¿é—®ç‚¹ï¼Œä¸¥æ ¼æŽ§åˆ¶è®¿é—® ç¼ºç‚¹ï¼š æ²¡æœ‰æŽ¥å£ï¼Œæ‰©å±•å›°éš¾ï¼›æ‰©å±•å•ä¾‹å¯¹è±¡ï¼Œåªèƒ½ä¿®æ”¹ä»£ç ï¼Œä¸ç¬¦åˆå¼€é—­åŽŸåˆ™ 6. å®Œæ•´ä»£ç åœ°å€ https://github.com/xkcoding/design-pattern/tree/master/src/main/java/com/xkcoding/design/pattern/creational/singleton æµ‹è¯•ä»£ç é‡Œ ConcurrentExecutor å…·ä½“å®žçŽ°è¯·çœ‹è¿™é‡Œï¼šhttps://github.com/xkcoding/design-pattern/blob/master/src/main/java/com/xkcoding/design/pattern/utils/ConcurrentExecutor.java]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼</category>
        <category>åˆ›å»ºåž‹è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼ä¹‹åˆ›å»ºåž‹è®¾è®¡æ¨¡å¼-æŠ½è±¡å·¥åŽ‚æ¨¡å¼]]></title>
    <url>%2F2019%2F08%2F10%2Fdesign-pattern-abstract-factory.html</url>
    <content type="text"><![CDATA[1. æ¨¡å¼ç®€ä»‹ æä¾›ä¸€ä¸ªåˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æˆ–è€…ç›¸äº’ä¾èµ–å¯¹è±¡çš„æŽ¥å£ï¼Œæ— é¡»æŒ‡å®šå…·ä½“çš„ç±»ï¼Œå±žäºŽåˆ›å»ºåž‹è®¾è®¡æ¨¡å¼ã€‚ 2. ç¤ºä¾‹ä»£ç  äº§å“æŠ½è±¡ 1234567891011121314151617181920212223// æ‰‹æœºäº§å“æŠ½è±¡ç±»public abstract class Phone &#123; /** * æè¿° */ public abstract void describe();&#125;// ç¬”è®°æœ¬äº§å“æŠ½è±¡ç±»public abstract class Laptop &#123; /** * æè¿° */ public abstract void describe();&#125;// è€³æœºäº§å“æŠ½è±¡ç±»public abstract class EarPhone &#123; /** * æè¿° */ public abstract void describe();&#125; ç§‘æŠ€å…¬å¸å·¥åŽ‚æŠ½è±¡ 1234567891011121314151617181920212223// ç§‘æŠ€å…¬å¸æŠ½è±¡å·¥åŽ‚ç±»public abstract class TechFactory &#123; /** * å–æ‰‹æœº * * @return æ‰‹æœº */ public abstract Phone sellPhone(); /** * å–ç¬”è®°æœ¬ * * @return ç¬”è®°æœ¬ */ public abstract Laptop sellLaptop(); /** * å–è€³æœº * * @return è€³æœº */ public abstract EarPhone sellEarPhone();&#125; ç»Ÿä¸€å“ç‰Œäº§å“çš„å…·ä½“å®žçŽ° / ç§‘æŠ€å…¬å¸çš„å…·ä½“å®žçŽ° 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198// å°ç±³å“ç‰Œå°ç±³æ‰‹æœºå…·ä½“å®žçŽ°public class MiPhone extends Phone &#123; /** * æè¿° */ @Override public void describe() &#123; System.out.println("å°ç±³æ‰‹æœº"); &#125;&#125;// å°ç±³å“ç‰Œå°ç±³ç¬”è®°æœ¬å…·ä½“å®žçŽ°public class MiLaptop extends Laptop&#123; /** * æè¿° */ @Override public void describe() &#123; System.out.println("å°ç±³ç¬”è®°æœ¬"); &#125;&#125;// å°ç±³å“ç‰Œå°ç±³è€³æœºå…·ä½“å®žçŽ°public class MiEarPhone extends EarPhone &#123; /** * æè¿° */ @Override public void describe() &#123; System.out.println("å°ç±³è€³æœº"); &#125;&#125;// å°ç±³å…¬å¸å·¥åŽ‚å…·ä½“å®žçŽ°public class MiTechCompany extends TechFactory &#123; /** * å–æ‰‹æœº * * @return æ‰‹æœº */ @Override public Phone sellPhone() &#123; return new MiPhone(); &#125; /** * å–ç¬”è®°æœ¬ * * @return ç¬”è®°æœ¬ */ @Override public Laptop sellLaptop() &#123; return new MiLaptop(); &#125; /** * å–è€³æœº * * @return è€³æœº */ @Override public EarPhone sellEarPhone() &#123; return new MiEarPhone(); &#125;&#125;// åŽä¸ºå“ç‰ŒåŽä¸ºæ‰‹æœºå…·ä½“å®žçŽ°public class HuaweiPhone extends Phone &#123; /** * æè¿° */ @Override public void describe() &#123; System.out.println("åŽä¸ºæ‰‹æœº"); &#125;&#125;// åŽä¸ºå“ç‰ŒåŽä¸ºç¬”è®°æœ¬å…·ä½“å®žçŽ°public class HuaweiLaptop extends Laptop&#123; /** * æè¿° */ @Override public void describe() &#123; System.out.println("åŽä¸ºç¬”è®°æœ¬"); &#125;&#125;// åŽä¸ºå“ç‰ŒåŽä¸ºè€³æœºå…·ä½“å®žçŽ°public class HuaweiEarPhone extends EarPhone &#123; /** * æè¿° */ @Override public void describe() &#123; System.out.println("åŽä¸ºè€³æœº"); &#125;&#125;// åŽä¸ºå…¬å¸å·¥åŽ‚å…·ä½“å®žçŽ°public class HuaweiTechCompany extends TechFactory &#123; /** * å–æ‰‹æœº * * @return æ‰‹æœº */ @Override public Phone sellPhone() &#123; return new HuaweiPhone(); &#125; /** * å–ç¬”è®°æœ¬ * * @return ç¬”è®°æœ¬ */ @Override public Laptop sellLaptop() &#123; return new HuaweiLaptop(); &#125; /** * å–è€³æœº * * @return è€³æœº */ @Override public EarPhone sellEarPhone() &#123; return new HuaweiEarPhone(); &#125;&#125;// è‹¹æžœå“ç‰Œè‹¹æžœæ‰‹æœºå…·ä½“å®žçŽ°public class IPhone extends Phone &#123; /** * æè¿° */ @Override public void describe() &#123; System.out.println("IPhone"); &#125;&#125;// è‹¹æžœå“ç‰Œè‹¹æžœç¬”è®°æœ¬å…·ä½“å®žçŽ°public class MacBookPro extends Laptop&#123; /** * æè¿° */ @Override public void describe() &#123; System.out.println("MacBookPro"); &#125;&#125;// è‹¹æžœå“ç‰Œè‹¹æžœè€³æœºå…·ä½“å®žçŽ°public class AirPod extends EarPhone &#123; /** * æè¿° */ @Override public void describe() &#123; System.out.println("AirPod"); &#125;&#125;// è‹¹æžœå…¬å¸å·¥åŽ‚å…·ä½“å®žçŽ°public class AppleTechCompany extends TechFactory &#123; /** * å–æ‰‹æœº * * @return æ‰‹æœº */ @Override public Phone sellPhone() &#123; return new IPhone(); &#125; /** * å–ç¬”è®°æœ¬ * * @return ç¬”è®°æœ¬ */ @Override public Laptop sellLaptop() &#123; return new MacBookPro(); &#125; /** * å–è€³æœº * * @return è€³æœº */ @Override public EarPhone sellEarPhone() &#123; return new AirPod(); &#125;&#125; 3. UMLå›¾ä¾‹ 4. åº”ç”¨ 12// Spring æºç // AbstractBeanFactory -&gt; AbstractAutowireCapableBeanFactory / DefaultListableBeanFactory / XmlBeanFactory 5. åœºæ™¯ å®¢æˆ·ç«¯ä¸ä¾èµ–äº§å“ç±»ï¼Œä¸å…³æ³¨åˆ›å»ºã€å®žçŽ°çš„ç»†èŠ‚ å¼ºè°ƒä¸€ç³»åˆ—äº§å“å¯¹è±¡ï¼ˆäº§å“æ—ï¼‰ï¼Œä¸€èµ·åˆ›å»ºæ—¶éœ€è¦å¤§é‡åˆ›å»ºä»£ç  æä¾›ä¸€ç±»äº§å“çš„åº“ï¼Œæ‰€æœ‰çš„äº§å“ä»¥åŒæ ·çš„æŽ¥å£å‡ºçŽ°ï¼Œä»Žè€Œä½¿å®¢æˆ·ç«¯ä¸ä¾èµ–å…·ä½“å®žçŽ° 6. ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ï¼š å…·ä½“äº§å“åœ¨åº”ç”¨å±‚ä»£ç éš”ç¦»ï¼Œä¸å…³å¿ƒåˆ›å»ºç»†èŠ‚ï¼›å°†ä¸€ç³»åˆ—çš„äº§å“æ—å¯¹è±¡ç»Ÿä¸€åœ¨ä¸€èµ·åˆ›å»º ç¼ºç‚¹ï¼š æ·»åŠ ä¸€ç§æ–°çš„äº§å“çš„æ—¶å€™ï¼Œéœ€è¦åœ¨å·¥åŽ‚æŽ¥å£åŠå…¶å·¥åŽ‚å­ç±»éƒ½æ·»åŠ å®žçŽ°ï¼Œä¸ç¬¦åˆå¼€é—­åŽŸåˆ™ï¼›å¢žåŠ äº†ç³»ç»Ÿçš„æŠ½è±¡æ€§å’Œç†è§£éš¾åº¦ 7. å®Œæ•´ä»£ç åœ°å€ https://github.com/xkcoding/design-pattern/tree/master/src/main/java/com/xkcoding/design/pattern/creational/abstractfactory]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼</category>
        <category>åˆ›å»ºåž‹è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨JustAuthé›†æˆä¼ä¸šå¾®ä¿¡]]></title>
    <url>%2F2019%2F08%2F06%2Fuse-justauth-integration-wechat-enterprise.html</url>
    <content type="text"><![CDATA[JustAuth åˆã•›å’å•æ·»åŠ æ–°å¹³å°å•¦~ æ­¤æ¬¡æ›´æ–°å¸¦æ¥çš„æ˜¯ ä¼ä¸šå¾®ä¿¡ï¼Œæœ¬æ–‡å°†å¸¦é¢†å¤§å®¶ä½¿ç”¨ JustAuth å¿«é€Ÿé›†æˆ ä¼ä¸šå¾®ä¿¡ çš„ç¬¬ä¸‰æ–¹ç™»å½•ã€‚ 1. æ³¨å†Œå¹¶ç™»å½•ä¼ä¸šå¾®ä¿¡ åœ°å€ï¼šhttps://work.weixin.qq.com/wework_admin/loginpage_wx?from=myhome_openApi å¦‚æžœæ²¡æœ‰ä¼ä¸šå¯ä»¥ç‚¹å‡» ä¼ä¸šæ³¨å†Œ 2. åˆ›å»ºä¼ä¸šå¾®ä¿¡åº”ç”¨ å¯¼èˆªæ  â€“ åº”ç”¨ç®¡ç† â€“ è‡ªå»º â€“ åˆ›å»ºåº”ç”¨ é€‰æ‹©åˆé€‚çš„åº”ç”¨logoï¼Œä¸ºåº”ç”¨å–ä¸ªåï¼ŒåŒæ—¶è®¾ç½®åº”ç”¨çš„å¯è§èŒƒå›´ï¼Œåˆ›å»ºåº”ç”¨ 3. åº”ç”¨è®¾ç½®åŠåŸºæœ¬å…³é”®å‚æ•° 3.1. åº”ç”¨è®¾ç½® åˆ›å»ºå®Œåº”ç”¨ä¹‹åŽï¼Œæ‹–åˆ°åº”ç”¨æœ€ä¸‹æ–¹ï¼Œé…ç½®åº”ç”¨ä¿¡æ¯ ä½¿ç”¨ JustAuth åŸºæœ¬éƒ½æ˜¯ç½‘é¡µåº”ç”¨ï¼Œæ‰€ä»¥è¿™ä¸€æ­¥æˆ‘ä»¬ç›´æŽ¥é€‰æ‹© Webç½‘é¡µ â€“ è®¾ç½®æŽˆæƒå›žè°ƒåŸŸ æ³¨æ„ï¼šè¿™é‡Œ æŽˆæƒå›žè°ƒåŸŸ ä¸éœ€è¦æŒ‡å®š å‰ç¼€ï¼ŒåŽç¼€ ç­‰ä¿¡æ¯ï¼Œç¤ºä¾‹å¦‚ä¸‹å›¾ å…³äºŽæŽˆæƒå›žè°ƒåŸŸå­˜åœ¨ç–‘é—®çš„ç«¥éž‹è¯·çœ‹è¿™é‡Œï¼šhttps://open.work.weixin.qq.com/api/doc#90000/90135/90988 3.2. åŸºæœ¬å…³é”®å‚æ•°èŽ·å– ä½¿ç”¨ JustAuth è¿›è¡Œä¼ä¸šå¾®ä¿¡ç™»å½•éœ€è¦ 4 ä¸ªå‚æ•°ä¿¡æ¯ï¼šclient-idã€client-secretã€redirect-uriã€agent-id 3.2.1. agent-id åŠ client-secret ä¿¡æ¯ agent-id å’Œ client-secretè¿™ä¸¤ä¸ªä¿¡æ¯å‡åœ¨ åº”ç”¨ç®¡ç† é‡Œå¯ä»¥æŸ¥çœ‹ 3.2.2. client-id ä¿¡æ¯ client-id ä¿¡æ¯åœ¨ æˆ‘çš„ä¼ä¸š ä¸­å¯ä»¥æ‰¾åˆ°ï¼Œè¯¥ä¿¡æ¯å³ ä¼ä¸šID 3.2.3. redirect-uri ä¿¡æ¯ å›žè°ƒåœ°å€æ˜¯æ ¹æ®æˆ‘ä»¬å‰é¢é…ç½®çš„ æŽˆæƒå›žè°ƒåŸŸ æ¥çš„ï¼Œæˆ‘è®¾ç½®çš„æ˜¯ oauth.xkcoding.com ï¼Œé¡¹ç›®é‡Œæˆ‘çš„å›žè°ƒåœ°å€æŒ‡å®šä¸º http://oauth.xkcoding.com/demo/oauth/wechat_enterprise/callback 4. å¼€å‘ 4.1. å¼•å…¥ä¾èµ– 12345&lt;dependency&gt; &lt;groupId&gt;com.xkcoding&lt;/groupId&gt; &lt;artifactId&gt;justauth-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;0.0.3-SNAPSHOT&lt;/version&gt;&lt;/dependency&gt; 4.2. ä¿®æ”¹é…ç½®æ–‡ä»¶ 12345678justauth: enabled: true type: WECHAT_ENTERPRISE: client-id: ww58**********6fbc client-secret: 8G6PCr0****************************yzaPc78 redirect-uri: http://oauth.xkcoding.com/demo/oauth/wechat_enterprise/callback agent-id: 10*******02 4.3. ç¼–å†™ Controller ä»£ç  123456789101112131415161718192021222324252627282930313233343536373839404142/** * &lt;p&gt; * æµ‹è¯• Controller * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019-07-22 11:17 */@Slf4j@RestController@RequestMapping("/oauth")@RequiredArgsConstructor(onConstructor_ = @Autowired)public class TestController &#123; private final AuthRequestFactory factory; @GetMapping public List&lt;String&gt; list() &#123; return factory.oauthList(); &#125; @GetMapping("/login/&#123;type&#125;") public void login(@PathVariable String type, HttpServletResponse response) throws IOException &#123; AuthRequest authRequest = factory.get(getAuthSource(type)); response.sendRedirect(authRequest.authorize(AuthStateUtils.createState())); &#125; @RequestMapping("/&#123;type&#125;/callback") public AuthResponse login(@PathVariable String type, AuthCallback callback) &#123; AuthRequest authRequest = factory.get(getAuthSource(type)); AuthResponse response = authRequest.login(callback); log.info("ã€responseã€‘= &#123;&#125;", JSONUtil.toJsonStr(response)); return response; &#125; private AuthSource getAuthSource(String type) &#123; if (StrUtil.isNotBlank(type)) &#123; return AuthSource.valueOf(type.toUpperCase()); &#125; else &#123; return null; &#125; &#125;&#125; ä»£ç åœ°å€ï¼šhttps://github.com/xkcoding/justauth-spring-boot-starter-demo 5. æ•ˆæžœæ¼”ç¤º æžœç„¶ï¼ ä¸å¾—ä¸è¯´ï¼šwhnb.wang å‚è€ƒ ä¼ä¸šå¾®ä¿¡æ–‡æ¡£åœ°å€ï¼šhttps://open.work.weixin.qq.com/api/doc#90000/90135/90664 èŽ·å–AccessTokenï¼šhttps://open.work.weixin.qq.com/api/doc#90000/90135/91039 æž„å»ºç™»å½•äºŒç»´ç ï¼šhttps://open.work.weixin.qq.com/api/doc#90000/90135/91019 èŽ·å–ç”¨æˆ·èº«ä»½ï¼šhttps://open.work.weixin.qq.com/api/doc#90000/90135/91437 ç”¨æˆ·èº«ä»½è¯¦ç»†ä¿¡æ¯ï¼šhttps://open.work.weixin.qq.com/api/doc#90000/90135/90196]]></content>
      <categories>
        <category>å¼€æº</category>
        <category>JustAuth</category>
      </categories>
      <tags>
        <tag>spring boot</tag>
        <tag>å¼€æº</tag>
        <tag>JustAuth</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JFinal å¿«é€Ÿé›†æˆç¬¬ä¸‰æ–¹ç™»å½•åŠŸèƒ½]]></title>
    <url>%2F2019%2F07%2F17%2Fjfinal-login-with-oauth.html</url>
    <content type="text"><![CDATA[å‰è¨€ > æ­¤ demo ä¸»è¦ä¸ºäº†æ¼”ç¤º Jfinal å¦‚ä½•é€šè¿‡ JustAuth å¿«é€Ÿé›†æˆç¬¬ä¸‰æ–¹å¹³å°çš„ç™»å½•ï¼Œå¦‚æžœæœ‰å°ä¼™ä¼´æ˜¯åŸºäºŽ Spring Boot çš„å¯ä»¥å‚è€ƒè¿™ä¸ª [**` demo`**](https://github.com/xkcoding/spring-boot-demo/tree/master/spring-boot-demo-social) > > https://github.com/xkcoding/spring-boot-demo/tree/master/spring-boot-demo-social 1. çŽ¯å¢ƒå‡†å¤‡ å‚è€ƒ Spring Boot å¿«é€Ÿé›†æˆç¬¬ä¸‰æ–¹ç™»å½•åŠŸèƒ½ - çŽ¯å¢ƒå‡†å¤‡ è¿™ä¸€ç«  2. ä¸»è¦ä»£ç  2.1. pom.xml 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.xkcoding&lt;/groupId&gt; &lt;artifactId&gt;jfinal-justauth-demo&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;packaging&gt;war&lt;/packaging&gt; &lt;name&gt;jfinal-justauth-demo&lt;/name&gt; &lt;description&gt; JFinal ä½¿ç”¨ JustAuth å¿«é€Ÿé›†æˆç¬¬ä¸‰æ–¹ç™»å½• &lt;/description&gt; &lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt; &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt; &lt;justauth.version&gt;1.9.5&lt;/justauth.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;com.jfinal&lt;/groupId&gt; &lt;artifactId&gt;jfinal-undertow&lt;/artifactId&gt; &lt;version&gt;1.7&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.jfinal&lt;/groupId&gt; &lt;artifactId&gt;jfinal&lt;/artifactId&gt; &lt;version&gt;4.3&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;cn.hutool&lt;/groupId&gt; &lt;artifactId&gt;hutool-all&lt;/artifactId&gt; &lt;version&gt;4.5.16&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;me.zhyd.oauth&lt;/groupId&gt; &lt;artifactId&gt;JustAuth&lt;/artifactId&gt; &lt;version&gt;$&#123;justauth.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;version&gt;1.18.8&lt;/version&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.11&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;finalName&gt;jfinal-justauth-demo&lt;/finalName&gt; &lt;pluginManagement&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt; &lt;version&gt;3.1.0&lt;/version&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt; &lt;version&gt;3.0.2&lt;/version&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt; &lt;version&gt;3.8.0&lt;/version&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt; &lt;version&gt;2.22.1&lt;/version&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt; &lt;version&gt;3.2.2&lt;/version&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt; &lt;version&gt;2.5.2&lt;/version&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt; &lt;version&gt;2.8.2&lt;/version&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/pluginManagement&gt; &lt;/build&gt;&lt;/project&gt; 2.2. DemoConfig.java æ­¤ç±»ä¸º JFinal çš„é…ç½®ç±» 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556/** * &lt;p&gt; * é…ç½®ç±» * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019-07-16 14:19 */public class DemoConfig extends JFinalConfig &#123; /** * é…ç½®çŽ¯å¢ƒåŸºç¡€ä¿¡æ¯ */ @Override public void configConstant(Constants constants) &#123; // è®¾ç½®å¼€å‘æ¨¡å¼ï¼Œæ‰“å°è¯·æ±‚æ—¥å¿— constants.setDevMode(true); &#125; /** * é…ç½®è·¯ç”±ä¿¡æ¯ */ @Override public void configRoute(Routes routes) &#123; routes.add("/demo/test", TestController.class); routes.add("/demo/oauth", OauthController.class); &#125; /** * é…ç½®æ¨¡æ¿å¼•æ“Žç›¸å…³ */ @Override public void configEngine(Engine engine) &#123; &#125; /** * é…ç½®æ’ä»¶ç›¸å…³ */ @Override public void configPlugin(Plugins plugins) &#123; &#125; /** * é…ç½®æ‹¦æˆªå™¨ç›¸å…³ */ @Override public void configInterceptor(Interceptors interceptors) &#123; &#125; @Override public void configHandler(Handlers handlers) &#123; &#125;&#125; 2.3. OauthController.java 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677/** * &lt;p&gt; * Oauth Controller * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019-07-16 14:39 */public class OauthController extends Controller &#123; // åŠ è½½é…ç½®æ–‡ä»¶ static &#123; PropKit.use("oauth.properties"); &#125; public void index() &#123; // @formatter:off Dict dictType = Dict.create() .set("QQç™»å½•", "http://oauth.xkcoding.com/demo/oauth/login/qq") .set("GitHubç™»å½•", "http://oauth.xkcoding.com/demo/oauth/login/github") .set("å°ç±³ç™»å½•", "http://oauth.xkcoding.com/demo/oauth/login/mi"); // @formatter:on renderJson(dictType); &#125; /** * å‚æ•°èŽ·å–å‚è€ƒï¼šhttps://www.jfinal.com/doc/3-4 * Jfinal ä¸­è·¯å¾„å‚æ•°åªèƒ½å–æœ€åŽä¸€ä¸ªï¼Œåˆ†éš”ç¬¦é»˜è®¤ä¸º - æ¯”å¦‚ /demo/para0-para1-para2 * æ­¤æ—¶å¯é€šè¿‡ getPara(0) -&gt; para0 ; getPara(1) -&gt; para1 ; getPara(2) -&gt; para2 */ public void login() &#123; String oauthType = getPara(0); AuthRequest authRequest = getAuthRequest(oauthType); redirect(authRequest.authorize(AuthStateUtils.createState())); &#125; /** * ç™»å½•æˆåŠŸåŽçš„å›žè°ƒ * å‘ç‚¹: å› ä¸ºJfinalä¸æ”¯æŒ /&#123;oauthType&#125;/callback è¿™ç§æ ¼å¼çš„URLï¼Œå› æ­¤å›žè°ƒåœ°å€ä¿®æ”¹å¦‚ä¸‹ /callback/&#123;oauthType&#125; * * @param callback æºå¸¦è¿”å›žçš„ä¿¡æ¯ */ public void callback(@Para("") AuthCallback callback) &#123; String oauthType = getPara(0); AuthRequest authRequest = getAuthRequest(oauthType); AuthResponse response = authRequest.login(callback); renderJson(response); &#125; private AuthRequest getAuthRequest(String oauthType) &#123; AuthSource authSource = AuthSource.valueOf(oauthType.toUpperCase()); switch (authSource) &#123; case QQ: return getQqAuthRequest(); case GITHUB: return getGithubAuthRequest(); case MI: return getMiAuthRequest(); default: throw new RuntimeException("æš‚ä¸æ”¯æŒçš„ç¬¬ä¸‰æ–¹ç™»å½•"); &#125; &#125; private AuthRequest getQqAuthRequest() &#123; AuthConfig authConfig = AuthConfig.builder().clientId(PropKit.get("qq.clientId")).clientSecret(PropKit.get("qq.clientSecret")).redirectUri(PropKit.get("qq.redirectUri")).build(); return new AuthQqRequest(authConfig); &#125; private AuthRequest getGithubAuthRequest() &#123; AuthConfig authConfig = AuthConfig.builder().clientId(PropKit.get("github.clientId")).clientSecret(PropKit.get("github.clientSecret")).redirectUri(PropKit.get("github.redirectUri")).build(); return new AuthGithubRequest(authConfig); &#125; private AuthRequest getMiAuthRequest() &#123; AuthConfig authConfig = AuthConfig.builder().clientId(PropKit.get("mi.clientId")).clientSecret(PropKit.get("mi.clientSecret")).redirectUri(PropKit.get("mi.redirectUri")).build(); return new AuthMiRequest(authConfig); &#125;&#125; 2.4. oauth.properties 1234567891011qq.clientId=10********85qq.clientSecret=1f7********************629eqq.redirectUri=http://oauth.xkcoding.com/demo/oauth/callback/qqgithub.clientId=2***************916github.clientSecret=e4e8cb602c87cf**********************a6f095bgithub.redirectUri=http://oauth.xkcoding.com/demo/oauth/callback/githubmi.clientId=288****************994mi.clientSecret=nFe****************=mi.redirectUri=http://oauth.xkcoding.com/demo/oauth/callback/mi 2.5. DemoApplication.java 12345678910111213/** * &lt;p&gt; * å¯åŠ¨ç±» * &lt;/p&gt; * * @author yangkai.shen * @date Created in 2019-07-16 14:18 */public class DemoApplication &#123; public static void main(String[] args) &#123; UndertowServer.start(DemoConfig.class, 8080, true); &#125;&#125; 3. è¿è¡Œæ–¹å¼ æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥ http://oauth.xkcoding.com/demo/oauth ï¼Œç‚¹å‡»å„ä¸ªç™»å½•æ–¹å¼è‡ªè¡Œæµ‹è¯•ã€‚ å‚è€ƒ Spring Bootå¿«é€Ÿé›†æˆç¬¬ä¸‰æ–¹ç™»å½•åŠŸèƒ½ï¼šhttps://xkcoding.com/2019/05/22/spring-boot-login-with-oauth.html JFinalå®˜æ–¹æ–‡æ¡£ï¼šhttps://www.jfinal.com/doc JustAuth é¡¹ç›®åœ°å€ï¼šhttps://github.com/zhangyd-c/JustAuth QQäº’è”æ–‡æ¡£ï¼šhttp://wiki.connect.qq.com/å‡†å¤‡å·¥ä½œ_oauth2-0 GitHubç¬¬ä¸‰æ–¹ç™»å½•æ–‡æ¡£ï¼šhttps://developer.github.com/apps/building-oauth-apps/ å°ç±³å¼€æ”¾å¹³å°è´¦å·æœåŠ¡æ–‡æ¡£ï¼šhttps://dev.mi.com/console/doc/detail?pId=707]]></content>
      <categories>
        <category>å¼€æº</category>
        <category>JustAuth</category>
      </categories>
      <tags>
        <tag>å¼€æº</tag>
        <tag>JustAuth</tag>
        <tag>JFinal</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Spring Bootå¿«é€Ÿé›†æˆç¬¬ä¸‰æ–¹ç™»å½•åŠŸèƒ½]]></title>
    <url>%2F2019%2F05%2F22%2Fspring-boot-login-with-oauth.html</url>
    <content type="text"><![CDATA[å‰è¨€ > æ­¤ demo ä¸»è¦æ¼”ç¤º Spring Boot é¡¹ç›®å¦‚ä½•ä½¿ç”¨ **[å²ä¸Šæœ€å…¨çš„ç¬¬ä¸‰æ–¹ç™»å½•å·¥å…· - JustAuth](https://github.com/zhangyd-c/JustAuth)** å®žçŽ°ç¬¬ä¸‰æ–¹ç™»å½•ï¼ŒåŒ…æ‹¬QQç™»å½•ã€GitHubç™»å½•ã€å¾®ä¿¡ç™»å½•ã€è°·æ­Œç™»å½•ã€å¾®è½¯ç™»å½•ã€å°ç±³ç™»å½•ã€ä¼ä¸šå¾®ä¿¡ç™»å½•ã€‚ > > é€šè¿‡ [justauth-spring-boot-starter](https://search.maven.org/artifact/com.xkcoding/justauth-spring-boot-starter) å¿«é€Ÿé›†æˆï¼Œå¥½å—¨å“Ÿ~ > > JustAuthï¼Œå¦‚ä½ æ‰€è§ï¼Œå®ƒä»…ä»…æ˜¯ä¸€ä¸ª**ç¬¬ä¸‰æ–¹æŽˆæƒç™»å½•**çš„**å·¥å…·ç±»åº“**ï¼Œå®ƒå¯ä»¥è®©æˆ‘ä»¬è„±ç¦»ç¹ççš„ç¬¬ä¸‰æ–¹ç™»å½•SDKï¼Œè®©ç™»å½•å˜å¾—**So easy!** > > 1. **å…¨**ï¼šå·²é›†æˆåå¤šå®¶ç¬¬ä¸‰æ–¹å¹³å°ï¼ˆå›½å†…å¤–å¸¸ç”¨çš„åŸºæœ¬éƒ½å·²åŒ…å«ï¼‰ï¼ŒåŽç»­ä¾ç„¶è¿˜æœ‰æ‰©å±•è®¡åˆ’ï¼ >2. **ç®€**ï¼šAPIå°±æ˜¯å¥”ç€æœ€ç®€å•åŽ»è®¾è®¡çš„ï¼ˆè§åŽé¢[`å¿«é€Ÿå¼€å§‹`](https://github.com/zhangyd-c/JustAuth#%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B)ï¼‰ï¼Œå°½é‡è®©æ‚¨ç”¨èµ·æ¥æ²¡æœ‰éšœç¢æ„Ÿï¼ > > PS: æœ¬äººååˆ†å¹¸è¿çš„å‚ä¸Žåˆ°äº†è¿™ä¸ªSDKçš„å¼€å‘ï¼Œä¸»è¦å¼€å‘äº†**QQç™»å½•ã€å¾®ä¿¡ç™»å½•ã€å°ç±³ç™»å½•ã€å¾®è½¯ç™»å½•ã€è°·æ­Œç™»å½•**è¿™ **`5`** ä¸ªç¬¬ä¸‰æ–¹ç™»å½•ï¼Œä»¥åŠä¸€äº›BUGçš„ä¿®å¤å·¥ä½œã€‚å†æ¬¡æ„Ÿè°¢ [@æ¯ç‹¼](https://github.com/zhangyd-c) å¼€æºè¿™ä¸ªåˆå¥½ç”¨åˆå…¨é¢çš„ç¬¬ä¸‰æ–¹ç™»å½•SDKã€‚ å¦‚æžœæŠ€æœ¯é€‰åž‹æ˜¯ JFinal çš„ï¼Œè¯·æŸ¥çœ‹æ­¤ demo https://github.com/xkcoding/jfinal-justauth-demo å¦‚æžœæŠ€æœ¯é€‰åž‹æ˜¯ ActFramework çš„ï¼Œè¯·æŸ¥çœ‹æ­¤ demo https://github.com/xkcoding/act-justauth-demo 1. çŽ¯å¢ƒå‡†å¤‡ 1.1. å…¬ç½‘æœåŠ¡å™¨å‡†å¤‡ é¦–å…ˆå‡†å¤‡ä¸€å°æœ‰å…¬ç½‘IPçš„æœåŠ¡å™¨ï¼Œå¯ä»¥é€‰ç”¨é˜¿é‡Œäº‘æˆ–è€…è…¾è®¯äº‘ï¼Œå¦‚æžœé€‰ç”¨çš„æ˜¯é˜¿é‡Œäº‘çš„ï¼Œå¯ä»¥ä½¿ç”¨æˆ‘çš„ä¼˜æƒ é“¾æŽ¥è´­ä¹°ã€‚ 1.2. å†…ç½‘ç©¿é€frpæ­å»º frp å®‰è£…ç¨‹åºï¼šhttps://github.com/fatedier/frp/releases 1.2.1. frpæœåŠ¡ç«¯æ­å»º æœåŠ¡ç«¯æ­å»ºåœ¨ä¸Šä¸€æ­¥å‡†å¤‡çš„å…¬ç½‘æœåŠ¡å™¨ä¸Šï¼Œå› ä¸ºæœåŠ¡å™¨æ˜¯centos7 x64çš„ç³»ç»Ÿï¼Œå› æ­¤ï¼Œè¿™é‡Œä¸‹è½½å®‰è£…åŒ…ç‰ˆæœ¬ä¸ºlinux_amd64çš„ frp_0.27.0_linux_amd64.tar.gz ã€‚ ä¸‹è½½å®‰è£…åŒ… 1$ wget https://github.com/fatedier/frp/releases/download/v0.27.0/frp_0.27.0_linux_amd64.tar.gz è§£åŽ‹å®‰è£…åŒ… 1$ tar -zxvf frp_0.27.0_linux_amd64.tar.gz ä¿®æ”¹é…ç½®æ–‡ä»¶ 123456$ cd frp_0.27.0_linux_amd64$ vim frps.ini[common] bind_port = 7100 vhost_http_port = 7200 å¯åŠ¨frpæœåŠ¡ç«¯ 1234$ ./frps -c frps.ini2019/06/15 16:42:02 [I] [service.go:139] frps tcp listen on 0.0.0.0:71002019/06/15 16:42:02 [I] [service.go:181] http service listen on 0.0.0.0:72002019/06/15 16:42:02 [I] [root.go:204] Start frps success 1.2.2. frpå®¢æˆ·ç«¯æ­å»º å®¢æˆ·ç«¯æ­å»ºåœ¨æœ¬åœ°çš„Macä¸Šï¼Œå› æ­¤ä¸‹è½½å®‰è£…åŒ…ç‰ˆæœ¬ä¸ºdarwin_amd64çš„ frp_0.27.0_darwin_amd64.tar.gz ã€‚ ä¸‹è½½å®‰è£…åŒ… 1$ wget https://github.com/fatedier/frp/releases/download/v0.27.0/frp_0.27.0_darwin_amd64.tar.gz è§£åŽ‹å®‰è£…åŒ… 1$ tar -zxvf frp_0.27.0_darwin_amd64.tar.gz ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œé…ç½®æœåŠ¡ç«¯ipç«¯å£åŠç›‘å¬çš„åŸŸåä¿¡æ¯ 1234567891011$ cd frp_0.27.0_darwin_amd64$ vim frpc.ini[common]server_addr = 120.92.169.103server_port = 7100[web]type = httplocal_port = 8080custom_domains = oauth.xkcoding.com å¯åŠ¨frpå®¢æˆ·ç«¯ 1234$ ./frpc -c frpc.ini2019/06/15 16:48:52 [I] [service.go:221] login to server success, get run id [8bb83bae5c58afe6], server udp port [0]2019/06/15 16:48:52 [I] [proxy_manager.go:137] [8bb83bae5c58afe6] proxy added: [web]2019/06/15 16:48:52 [I] [control.go:144] [web] start proxy success 1.3. é…ç½®åŸŸåè§£æž å‰å¾€é˜¿é‡Œäº‘DNSè§£æžï¼Œå°†åŸŸåè§£æžåˆ°æˆ‘ä»¬çš„å…¬ç½‘æœåŠ¡å™¨ä¸Šï¼Œæ¯”å¦‚æˆ‘çš„å°±æ˜¯å°† oauth.xkcoding.com -&gt; 120.92.169.103 1.4. nginxä»£ç† nginx çš„æ­å»ºå°±ä¸åœ¨æ­¤èµ˜è¿°äº†ï¼Œåªè¯´é…ç½® 1234567891011121314151617181920212223server &#123; listen 80; server_name oauth.xkcoding.com; location / &#123; proxy_pass http://127.0.0.1:7200; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header Host $http_host; proxy_set_header X-Forwarded-Proto $scheme; proxy_set_header X-Real-IP $remote_addr; proxy_buffering off; sendfile off; proxy_max_temp_file_size 0; client_max_body_size 10m; client_body_buffer_size 128k; proxy_connect_timeout 90; proxy_send_timeout 90; proxy_read_timeout 90; proxy_temp_file_write_size 64k; proxy_http_version 1.1; proxy_request_buffering off; &#125;&#125; æµ‹è¯•é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰é—®é¢˜ 123$ nginx -tnginx: the configuration file /etc/nginx/nginx.conf syntax is oknginx: configuration file /etc/nginx/nginx.conf test is successful é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ï¼Œä½¿å…¶ç”Ÿæ•ˆ 1$ nginx -s reload çŽ°åœ¨å½“æˆ‘ä»¬åœ¨æµè§ˆå™¨è¾“å…¥ oauth.xkcoding.com çš„æ—¶å€™ï¼Œç½‘ç»œæµé‡å…¶å®žä¼šç»åŽ†ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š é€šè¿‡ä¹‹å‰é…çš„DNSåŸŸåè§£æžä¼šè®¿é—®åˆ°æˆ‘ä»¬çš„å…¬ç½‘æœåŠ¡å™¨ 120.92.169.103 çš„ 80 ç«¯å£ å†ç»è¿‡ nginxï¼Œä»£ç†åˆ°æœ¬åœ°çš„ 7200 ç«¯å£ å†ç»è¿‡ frp ç©¿é€åˆ°æˆ‘ä»¬çš„ Mac ç”µè„‘çš„ 8080 ç«¯å£ æ­¤æ—¶ 8080 å°±æ˜¯æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºç«¯å£ 1.5. ç¬¬ä¸‰æ–¹å¹³å°ç”³è¯· 1.5.1. QQäº’è”å¹³å°ç”³è¯· å‰å¾€ https://connect.qq.com/ ç”³è¯·å¼€å‘è€… åº”ç”¨ç®¡ç† -&gt; æ·»åŠ ç½‘ç«™åº”ç”¨ï¼Œç­‰å¾…å®¡æ ¸é€šè¿‡å³å¯ 1.5.2. GitHubå¹³å°ç”³è¯· å‰å¾€ https://github.com/settings/developers ç‚¹å‡» New OAuth App æŒ‰é’®åˆ›å»ºåº”ç”¨ 1.5.3 å¾®ä¿¡å¼€æ”¾å¹³å°ç”³è¯· è¿™é‡Œå¾®ä¿¡å¼€æ”¾å¹³å°éœ€è¦ç”¨ä¼ä¸šçš„ï¼Œä¸ªäººæ²¡æœ‰èµ„è´¨ï¼Œæ‰€ä»¥æˆ‘åœ¨æŸå®ç§Ÿäº†ä¸€ä¸ªæœˆçš„èµ„è´¨ï¼Œéœ€è¦çš„å¯ä»¥ æˆ³æˆ‘ç§Ÿèµ å£°æ˜Žï¼šæœ¬äººä¸Žè¯¥åº—é“ºæ— åˆ©ç›Šç›¸å…³ï¼Œçº¯å±žä¸ªäººè§‰å¾—å¥½ç”¨åšåˆ†äº« è¯¥åº—é“ºæœ‰ä¸¤ç§æ–¹å¼ï¼š åº—é“ºæ”¯æŒå¸®ä½ è¿‡ä¼ä¸šèµ„è´¨ï¼Œè¿™é‡Œå°±ç”¨ä½ è‡ªå·±çš„å¼€æ”¾å¹³å°å·å°±å¥½äº† ä¸´æ—¶ä½¿ç”¨å¯ä»¥é—®åº—å®¶ç§Ÿä¸€ä¸ªæœˆè¿›è¡Œå¼€å‘ï¼Œè¿™é‡Œç§Ÿäº†ä¹‹åŽï¼Œåº—å®¶ä¼šæŠŠ AppID å’Œ AppSecret çš„ä¿¡æ¯å‘ç»™ä½ ï¼Œä½ æä¾›å›žè°ƒåŸŸå°±å¥½äº† å› æ­¤è¿™é‡Œæˆ‘å°±è´´å‡ºä¸€å¼ æŽˆæƒå›žè°ƒçš„åœ°å€ä½œå‚è€ƒã€‚ 1.5.4. è°·æ­Œå¼€æ”¾å¹³å°ç”³è¯· å‰å¾€ https://console.developers.google.com/projectcreate åˆ›å»ºé¡¹ç›® å‰å¾€ https://console.developers.google.com/apis/credentials ï¼Œåœ¨ç¬¬ä¸€æ­¥åˆ›å»ºçš„é¡¹ç›®ä¸‹ï¼Œæ·»åŠ åº”ç”¨ 1.5.5. å¾®è½¯å¼€æ”¾å¹³å°ç”³è¯· å‰å¾€ https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps/ApplicationsListBlade æ³¨å†Œåº”ç”¨ åœ¨æ³¨å†Œåº”ç”¨çš„æ—¶å€™å°±éœ€è¦å¡«å†™å›žè°ƒåœ°å€ï¼Œå½“ç„¶åŽæœŸä¹Ÿå¯ä»¥é‡æ–°ä¿®æ”¹ client id åœ¨è¿™é‡Œ client secret éœ€è¦è‡ªå·±åœ¨è¿™é‡Œç”Ÿæˆ 1.5.6. å°ç±³å¼€æ”¾å¹³å°ç”³è¯· ç”³è¯·å°ç±³å¼€å‘è€…ï¼Œå®¡æ ¸é€šè¿‡ å‰å¾€ https://dev.mi.com/passport/oauth2/applist æ·»åŠ oauthåº”ç”¨ï¼Œé€‰æ‹© åˆ›å»ºç½‘é¡µåº”ç”¨ å¡«å†™åŸºæœ¬ä¿¡æ¯ä¹‹åŽï¼Œè¿›å…¥åº”ç”¨ä¿¡æ¯é¡µé¢å¡«å†™ å›žè°ƒåœ°å€ åº”ç”¨å®¡æ ¸é€šè¿‡ä¹‹åŽï¼Œå¯ä»¥åœ¨åº”ç”¨ä¿¡æ¯é¡µé¢çš„ åº”ç”¨è¯¦æƒ… æŸ¥çœ‹åˆ° AppKey å’Œ AppSecretï¼Œåæ§½ä¸‹ï¼Œå°ç±³åº”ç”¨çš„å®¡æ ¸é€Ÿåº¦ç‰¹åˆ«æ…¢ï¼Œéœ€è¦è€å¿ƒç­‰å¾…ã€‚ã€‚ã€‚ã€‚ 1.5.7. ä¼ä¸šå¾®ä¿¡å¹³å°ç”³è¯· å‚è€ƒï¼šhttps://xkcoding.com/2019/08/06/use-justauth-integration-wechat-enterprise.html 2. ä¸»è¦ä»£ç  ä»£ç åœ°å€ï¼šhttps://github.com/xkcoding/spring-boot-demo/tree/master/spring-boot-demo-social æœ¬ demo é‡‡ç”¨ Redis ç¼“å­˜ stateï¼Œæ‰€ä»¥è¯·å‡†å¤‡ Redis çŽ¯å¢ƒï¼Œå¦‚æžœæ²¡æœ‰ Redis çŽ¯å¢ƒï¼Œå¯ä»¥å°†é…ç½®æ–‡ä»¶çš„ç¼“å­˜é…ç½®ä¸º 1234&gt; justauth:&gt; cache:&gt; type: default&gt; 2.1. pom.xml 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;artifactId&gt;spring-boot-demo-social&lt;/artifactId&gt; &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt; &lt;packaging&gt;jar&lt;/packaging&gt; &lt;name&gt;spring-boot-demo-social&lt;/name&gt; &lt;description&gt;Demo project for Spring Boot&lt;/description&gt; &lt;parent&gt; &lt;groupId&gt;com.xkcoding&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-demo&lt;/artifactId&gt; &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt; &lt;java.version&gt;1.8&lt;/java.version&gt; &lt;justauth-spring-boot.version&gt;1.1.0&lt;/justauth-spring-boot.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- å¯¹è±¡æ± ï¼Œä½¿ç”¨redisæ—¶å¿…é¡»å¼•å…¥ --&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.commons&lt;/groupId&gt; &lt;artifactId&gt;commons-pool2&lt;/artifactId&gt; &lt;/dependency&gt; &lt;!-- oauthå·¥å…·ç±» --&gt; &lt;dependency&gt; &lt;groupId&gt;com.xkcoding&lt;/groupId&gt; &lt;artifactId&gt;justauth-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;$&#123;justauth-spring-boot.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.google.guava&lt;/groupId&gt; &lt;artifactId&gt;guava&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;cn.hutool&lt;/groupId&gt; &lt;artifactId&gt;hutool-all&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;finalName&gt;spring-boot-demo-social&lt;/finalName&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt;&lt;/project&gt; 2.2. application.yml 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162server: port: 8080 servlet: context-path: /demospring: redis: host: localhost # è¿žæŽ¥è¶…æ—¶æ—¶é—´ï¼ˆè®°å¾—æ·»åŠ å•ä½ï¼ŒDurationï¼‰ timeout: 10000ms # Redisé»˜è®¤æƒ…å†µä¸‹æœ‰16ä¸ªåˆ†ç‰‡ï¼Œè¿™é‡Œé…ç½®å…·ä½“ä½¿ç”¨çš„åˆ†ç‰‡ # database: 0 lettuce: pool: # è¿žæŽ¥æ± æœ€å¤§è¿žæŽ¥æ•°ï¼ˆä½¿ç”¨è´Ÿå€¼è¡¨ç¤ºæ²¡æœ‰é™åˆ¶ï¼‰ é»˜è®¤ 8 max-active: 8 # è¿žæŽ¥æ± æœ€å¤§é˜»å¡žç­‰å¾…æ—¶é—´ï¼ˆä½¿ç”¨è´Ÿå€¼è¡¨ç¤ºæ²¡æœ‰é™åˆ¶ï¼‰ é»˜è®¤ -1 max-wait: -1ms # è¿žæŽ¥æ± ä¸­çš„æœ€å¤§ç©ºé—²è¿žæŽ¥ é»˜è®¤ 8 max-idle: 8 # è¿žæŽ¥æ± ä¸­çš„æœ€å°ç©ºé—²è¿žæŽ¥ é»˜è®¤ 0 min-idle: 0 cache: # ä¸€èˆ¬æ¥è¯´æ˜¯ä¸ç”¨é…ç½®çš„ï¼ŒSpring Cache ä¼šæ ¹æ®ä¾èµ–çš„åŒ…è‡ªè¡Œè£…é… type: redisjustauth: enabled: true type: qq: client-id: 10******85 client-secret: 1f7d************************d629e redirect-uri: http://oauth.xkcoding.com/demo/oauth/qq/callback github: client-id: 2d25******d5f01086 client-secret: 5a2919b************************d7871306d1 redirect-uri: http://oauth.xkcoding.com/demo/oauth/github/callback wechat: client-id: wxdcb******4ff4 client-secret: b4e9dc************************a08ed6d redirect-uri: http://oauth.xkcoding.com/demo/oauth/wechat/callback google: client-id: 716******17-6db******vh******ttj320i******userco******t.com client-secret: 9IBorn************7-E redirect-uri: http://oauth.xkcoding.com/demo/oauth/google/callback microsoft: client-id: 7bdce8******************e194ad76c1b client-secret: Iu0zZ4************************tl9PWan_. redirect-uri: https://oauth.xkcoding.com/demo/oauth/microsoft/callback mi: client-id: 288************2994 client-secret: nFeTt89************************== redirect-uri: http://oauth.xkcoding.com/demo/oauth/mi/callback wechat_enterprise: client-id: ww58******f3************fbc client-secret: 8G6PCr00j************************rgk************AyzaPc78 redirect-uri: http://oauth.xkcoding.com/demo/oauth/wechat_enterprise/callback agent-id: 1*******2 cache: type: redis prefix: 'SOCIAL::STATE::' timeout: 1h 2.3. OauthController.java 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465/** * &lt;p&gt; * ç¬¬ä¸‰æ–¹ç™»å½• Controller * &lt;/p&gt; * * @package: com.xkcoding.oauth.controller * @description: ç¬¬ä¸‰æ–¹ç™»å½• Controller * @author: yangkai.shen * @date: Created in 2019-05-17 10:07 * @copyright: Copyright (c) 2019 * @version: V1.0 * @modified: yangkai.shen */@Slf4j@RestController@RequestMapping("/oauth")@RequiredArgsConstructor(onConstructor_ = @Autowired)public class OauthController &#123; private final AuthRequestFactory factory; /** * ç™»å½•ç±»åž‹ */ @GetMapping public Map&lt;String, String&gt; loginType() &#123; List&lt;String&gt; oauthList = factory.oauthList(); return oauthList.stream().collect(Collectors.toMap(oauth -&gt; oauth.toLowerCase() + "ç™»å½•", oauth -&gt; "http://oauth.xkcoding.com/demo/oauth/login/" + oauth.toLowerCase())); &#125; /** * ç™»å½• * * @param oauthType ç¬¬ä¸‰æ–¹ç™»å½•ç±»åž‹ * @param response response * @throws IOException */ @RequestMapping("/login/&#123;oauthType&#125;") public void renderAuth(@PathVariable String oauthType, HttpServletResponse response) throws IOException &#123; AuthRequest authRequest = factory.get(getAuthSource(oauthType)); response.sendRedirect(authRequest.authorize(oauthType + "::" + AuthStateUtils.createState())); &#125; /** * ç™»å½•æˆåŠŸåŽçš„å›žè°ƒ * * @param oauthType ç¬¬ä¸‰æ–¹ç™»å½•ç±»åž‹ * @param callback æºå¸¦è¿”å›žçš„ä¿¡æ¯ * @return ç™»å½•æˆåŠŸåŽçš„ä¿¡æ¯ */ @RequestMapping("/&#123;oauthType&#125;/callback") public AuthResponse login(@PathVariable String oauthType, AuthCallback callback) &#123; AuthRequest authRequest = factory.get(getAuthSource(oauthType)); AuthResponse response = authRequest.login(callback); log.info("ã€responseã€‘= &#123;&#125;", JSONUtil.toJsonStr(response)); return response; &#125; private AuthSource getAuthSource(String type) &#123; if (StrUtil.isNotBlank(type)) &#123; return AuthSource.valueOf(type.toUpperCase()); &#125; else &#123; throw new RuntimeException("ä¸æ”¯æŒçš„ç±»åž‹"); &#125; &#125;&#125; 2.4. å¦‚æžœæƒ³è¦è‡ªå®šä¹‰ state ç¼“å­˜ è¯·çœ‹ðŸ‘‰è¿™é‡Œ 3. è¿è¡Œæ–¹å¼ æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥ http://oauth.xkcoding.com/demo/oauth ï¼Œç‚¹å‡»å„ä¸ªç™»å½•æ–¹å¼è‡ªè¡Œæµ‹è¯•ã€‚ Google ç™»å½•ï¼Œæœ‰å¯èƒ½å› ä¸ºç¥–å›½çš„å¼ºå¤§å¯¼è‡´æµ‹è¯•å¤±è´¥ï¼Œè‡ªè¡Œè§£å†³~ ðŸ˜™ å‚è€ƒ JustAuth é¡¹ç›®åœ°å€ï¼šhttps://github.com/justauth/JustAuth justauth-spring-boot-starter åœ°å€ï¼šhttps://github.com/justauth/justauth-spring-boot-starter frpå†…ç½‘ç©¿é€é¡¹ç›®åœ°å€ï¼šhttps://github.com/fatedier/frp frpå†…ç½‘ç©¿é€å®˜æ–¹ä¸­æ–‡æ–‡æ¡£ï¼šhttps://github.com/fatedier/frp/blob/master/README_zh.md Frpå®žçŽ°å†…ç½‘ç©¿é€ï¼šhttps://zhuanlan.zhihu.com/p/45445979 QQäº’è”æ–‡æ¡£ï¼šhttp://wiki.connect.qq.com/å‡†å¤‡å·¥ä½œ_oauth2-0 å¾®ä¿¡å¼€æ”¾å¹³å°æ–‡æ¡£ï¼šhttps://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&amp;t=resource/res_list&amp;verify=1&amp;id=open1419316505&amp;token=&amp;lang=zh_CN GitHubç¬¬ä¸‰æ–¹ç™»å½•æ–‡æ¡£ï¼šhttps://developer.github.com/apps/building-oauth-apps/ è°·æ­ŒOauth2æ–‡æ¡£ï¼šhttps://developers.google.com/identity/protocols/OpenIDConnect å¾®è½¯Oauth2æ–‡æ¡£ï¼šhttps://docs.microsoft.com/zh-cn/graph/auth-v2-user å°ç±³å¼€æ”¾å¹³å°è´¦å·æœåŠ¡æ–‡æ¡£ï¼šhttps://dev.mi.com/console/doc/detail?pId=707]]></content>
      <categories>
        <category>å¼€æº</category>
        <category>JustAuth</category>
      </categories>
      <tags>
        <tag>spring boot</tag>
        <tag>å¼€æº</tag>
        <tag>JustAuth</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Macä¸‹ä½¿ç”¨Vagrantå¿«é€Ÿæ­å»ºCentos/7è™šæ‹Ÿæœº]]></title>
    <url>%2F2019%2F04%2F24%2Fuse-vagrant-build-linux-virtual-machine.html</url>
    <content type="text"><![CDATA[å‰è¨€ æ—¥å¸¸å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸ºäº†ä¿è¯å¼€å‘çŽ¯å¢ƒçš„ç»Ÿä¸€å¹¶ä¸”åˆä¸æƒ³æ±¡æŸ“æˆ‘ä»¬æœ¬æœºçš„çŽ¯å¢ƒï¼Œé€šå¸¸æˆ‘ä»¬æœ‰ 2 ç§æ–¹å¼å¯ä»¥åšåˆ°ï¼Œä¸€ç§æ˜¯çŠ¶æ€ç«çƒ­çš„dockerè™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œå¦ä¸€ç§å°±æ˜¯æˆ‘ä»¬ç»ä¹…ä¸è¡°çš„è™šæ‹Ÿæœºäº†ã€‚æœ¬æ–‡ä»‹ç»åœ¨ Mac ä¸‹ä½¿ç”¨ Vagrant å¿«é€Ÿæ­å»ºCentos7 è™šæ‹Ÿæœºã€‚ 1. ä»€ä¹ˆæ˜¯ Vagrant 1.1. Vagrant ç®€ä»‹ ä»€ä¹ˆæ˜¯ Vagrantï¼Œè¦å›žç­”è¿™ä¸ªé—®é¢˜ï¼Œæœ€å¥½çš„ç­”æ¡ˆåº”è¯¥æ¥è‡ªå®˜ç½‘(https://www.vagrantup.com/intro/index.html) Vagrant is a tool for building and managing virtual machine environments in a single workflow. With an easy-to-use workflow and focus on automation, Vagrant lowers development environment setup time, increases production parity, and makes the â€œworks on my machineâ€ excuse a relic of the past. ç¿»è¯‘ï¼šVagrant æ˜¯ä¸€ä¸ªåœ¨å•ä¸ªå·¥ä½œæµä¸­å®žçŽ°æž„å»ºå’Œç®¡ç†è™šæ‹ŸæœºçŽ¯å¢ƒçš„å·¥å…·ã€‚é€šè¿‡ä¸€ç§ç®€å•æ˜“ç”¨çš„å·¥ä½œæµå¹¶ä¸“æ³¨äºŽè‡ªåŠ¨åŒ–ï¼ŒVagrant å‡å°‘äº†å¼€å‘çŽ¯å¢ƒçš„é…ç½®æ—¶é—´ï¼Œæé«˜äº†ç”Ÿäº§æ•ˆçŽ‡ï¼Œä¹Ÿæ­£å› ä¸º Vagrant çš„å­˜åœ¨ï¼Œä½¿å¾—ã€Žè¿™ä¸ªåœ¨æˆ‘çš„ç”µè„‘å¯ä»¥è¿è¡Œã€è¿™ç§å€Ÿå£æˆä¸ºè¿‡åŽ»ã€‚ å®˜ç½‘çš„ç®€ä»‹ï¼Œæˆ‘ä»¬ç®€å•çš„æ€»ç»“ä¸€ä¸‹ï¼šVagrant æ˜¯ä¸€ä¸ªå¯ä»¥å¿«é€Ÿæž„å»ºå¹¶ç®¡ç†è™šæ‹Ÿæœºçš„å·¥å…·ã€‚ 1.2. Vagrant ä¼˜åŠ¿ é…ç½®ç®€å•ï¼Œé¿å…ç›¸åŒçŽ¯å¢ƒé‡å¤é…ç½®ï¼Œä»…éœ€å…±äº«ä¸€ä¸ª Vagrantfile å³å¯å¿«é€Ÿæ­å»ºä¸€ä¸ªç›¸åŒé…ç½®çš„è™šæ‹Ÿæœºã€‚ ä¸€å¤„é…ç½®ï¼Œå¤šç«¯è¿è¡Œï¼Œä¸å—ç³»ç»ŸçŽ¯å¢ƒå½±å“ï¼ŒLinux / Mac OS X / Windows å¯ç”¨å‘½ä»¤ä¸€è‡´ã€‚ å®‰è£…ç®€å•ï¼Œå¸è½½å¹²å‡€ã€‚å®‰è£…è™šæ‹Ÿæœºï¼Œåªä¼šåœ¨å½“å‰ Vagrantfile ç›®å½•ç”Ÿæˆå°‘æ•°çš„ç¼“å­˜æ–‡ä»¶ï¼Œå¸è½½æ—¶å¯ä»¥å¸è½½çš„å¹²å¹²å‡€å‡€ï¼Œä¸æ¯«ä¸æ±¡æŸ“å®¿ä¸»æœºçŽ¯å¢ƒã€‚ æ”¯æŒå¤šç§ providerï¼Œä¾¿äºŽç”¨æˆ·è‡ªè¡Œé€‰æ‹© provider åŽ»æŒ‚è½½è™šæ‹Ÿæœºï¼ŒåŒ…æ‹¬ï¼šVirtualBoxï¼ŒVMwareï¼ŒAWSï¼ŒDocker ç­‰ã€‚ 2. å®‰è£… Vagrant 2.1. çŽ¯å¢ƒå‡†å¤‡ å®‰è£… providerï¼Œä¸»è¦ç”¨äºŽæŒ‚è½½è™šæ‹Ÿæœºã€‚æœ¬æ–‡å°†é‡‡ç”¨å¼€æºå…è´¹çš„ VirtualBox ä½œä¸º Vagrant çš„ provider æ¥æŒ‚è½½æˆ‘ä»¬çš„è™šæ‹Ÿæœºã€‚VirtualBox æ˜¯ä¸€æ¬¾å¼€æºå…è´¹çš„è™šæ‹Ÿæœºè½¯ä»¶ï¼Œç›¸æ¯” VMware ä½“ç³»çš„è½¯ä»¶æ¥è¯´ï¼Œæ›´åŠ  å°å·§ï¼ˆä¸»è¦æ˜¯ å…è´¹ï¼‰ã€‚ ä¸‹è½½åœ°å€ï¼šhttps://www.virtualbox.org/wiki/Downloads ç¬”è€…ä½¿ç”¨çš„ VirtualBox ç‰ˆæœ¬æ˜¯ 6.0.6 ã€‚ å®‰è£…æ–¹å¼æ˜¯å‚»ç“œå¼å®‰è£…ï¼Œåªéœ€è¦é€‰æ‹©å¥½å¯¹åº”ç³»ç»Ÿçš„ç‰ˆæœ¬ï¼Œä¸‹ä¸€æ­¥æ“ä½œå³å¯ã€‚ 2.2. å®‰è£… Vagrant ä¸»è§’ç™»åœºï¼ŒæŽ¥ä¸‹æ¥æˆ‘ä»¬æ¥å®‰è£… Vagrantã€‚ ä¸‹è½½åœ°å€ï¼šhttps://www.vagrantup.com/downloads.html ç¬”è€…ä½¿ç”¨çš„ Vagrant ç‰ˆæœ¬æ˜¯ 2.2.4 ã€‚ å®‰è£…æ–¹å¼å’Œ VirtualBox ä¸€æ ·ï¼ŒåŒæ ·æ˜¯å‚»ç“œå¼å®‰è£…ï¼Œåªéœ€è¦é€‰æ‹©å¥½å¯¹åº”ç³»ç»Ÿçš„ç‰ˆæœ¬ï¼Œä¸‹ä¸€æ­¥æ“ä½œå³å¯ã€‚ å®‰è£…å®Œæˆä¹‹åŽï¼Œå‰å¾€ Terminal æ‰§è¡Œå‘½ä»¤éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸï¼š 12345$ vagrant versionInstalled Version: 2.2.4Latest Version: 2.2.4You're running an up-to-date version of Vagrant! 3. Vagrant å‘½ä»¤ 1234567891011121314151617vagrant init &lt;åç§°&gt; # åˆå§‹åŒ–boxçš„æ“ä½œvagrant box add &lt;è™šæ‹Ÿæœºå&gt; &lt;boxæ–‡ä»¶å&gt; # æ·»åŠ boxçš„æ“ä½œvagrant up # å¯åŠ¨è™šæ‹Ÿæœºçš„æ“ä½œvagrant ssh &lt;hostname&gt; # ç™»å½•æ‹Ÿæœºçš„æ“ä½œï¼Œä¹Ÿå¯ä»¥æŒ‡å®šhostnameç™»é™†vagrant box list # æ˜¾ç¤ºå½“å‰å·²ç»æ·»åŠ çš„boxåˆ—è¡¨vagrant box remove åç§° # åˆ é™¤ç›¸åº”çš„box vagrant destroy # åœæ­¢å½“å‰æ­£åœ¨è¿è¡Œçš„è™šæ‹Ÿæœºå¹¶é”€æ¯æ‰€æœ‰åˆ›å»ºçš„èµ„æºvagrant halt # å…³æœºvagrant status &lt;hostname&gt; # èŽ·å–å½“å‰è™šæ‹Ÿæœºçš„çŠ¶æ€ï¼Œä¹Ÿå¯ä»¥æŸ¥çœ‹æŒ‡å®šhostnamevagrant suspend # æŒ‚èµ·å½“å‰çš„è™šæ‹Ÿæœºvagrant resume # æ¢å¤å‰é¢è¢«æŒ‚èµ·çš„çŠ¶æ€vagrant reload # é‡æ–°å¯åŠ¨è™šæ‹Ÿæœºï¼Œä¸»è¦ç”¨äºŽé‡æ–°è½½å…¥é…ç½®æ–‡ä»¶vagrant global-status # æŸ¥çœ‹æ‰€æœ‰è™šæ‹Ÿæœºçš„IDå·vagrant plugin # ç”¨äºŽå®‰è£…å¸è½½æ’ä»¶vagrant ssh-config # è¾“å‡ºç”¨äºŽsshè¿žæŽ¥çš„ä¸€äº›ä¿¡æ¯vagrant package # æ‰“åŒ…å‘½ä»¤ï¼Œå¯ä»¥æŠŠå½“å‰çš„è¿è¡Œçš„è™šæ‹ŸæœºçŽ¯å¢ƒè¿›è¡Œæ‰“åŒ…vagrant ssh-config # æŸ¥çœ‹sshç™»å½•ä¿¡æ¯ï¼Œå¯ä»¥æŠŠè¿™äº›ä¿¡æ¯ ä¿å­˜åˆ°.sshæ–‡ä»¶ä¸‹configä¸­ï¼Œå…ˆç”¨vagrant ssh ç™»å½•ï¼Œç„¶åŽæŠŠå®¿ä¸»æœºçš„sshå…¬é’¥ä¿å­˜åˆ°è™šæ‹Ÿæœºçš„authorized_keysæ–‡ä»¶é‡Œï¼Œç„¶åŽåœ¨å®¿ä¸»æœºssh &lt;åç§°&gt;å°±å¯ä»¥å…å¯†ç ç™»å½• 4. Vagrant å®žæˆ˜ æœ¬å°èŠ‚æˆ‘ä»¬å®Œæˆä¸€ä¸ªå®žæˆ˜ï¼Œä½¿ç”¨ Vagrant å®‰è£… centos7ã€‚ 4.1. å¯»æ‰¾box box å°±æ˜¯æˆ‘ä»¬ç³»ç»Ÿçš„åˆå§‹åŒ–é•œåƒï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ http://www.vagrantbox.es/ æ‰¾åˆ°æˆ‘ä»¬éœ€è¦çš„ç³»ç»Ÿé•œåƒ å»ºè®®å¤§å®¶åŽ»ç»™è¿™ä¸ªä»“åº“ç‚¹ä¸ª Starï¼Œæ–¹ä¾¿å¥½ç”¨çš„ä¸œè¥¿æ°¸è¿œå€¼å¾—è¡¨æ‰¬! é™„ä¸Šä»“åº“é“¾æŽ¥ï¼šhttps://github.com/garethr/vagrantboxes-heroku ã€‚ ç†è®ºä¸Šè¿™é‡Œèƒ½æœåˆ°çš„ boxï¼Œéƒ½å¯ä»¥åœ¨ä¸‹é¢çš„åˆå§‹åŒ–ä¸­ç›´æŽ¥ä½¿ç”¨ init å‘½ä»¤ç›´æŽ¥åˆå§‹åŒ–ã€‚ï¼ˆä½†æ˜¯å›½å†…çš„ç½‘ç»œä¼šå¯¼è‡´ç»å¸¸å¤±è´¥ã€‚ï¼‰ å› æ­¤æˆ‘ä»¬å¯ä»¥æ‹·è´ä¸Šé¢çš„ box é“¾æŽ¥ï¼Œå…ˆå•ç‹¬ä¸‹è½½ï¼Œå†è¿›è¡Œå®‰è£…ã€‚ å‡è®¾æˆ‘ä»¬çš„ box ä¸‹è½½åœ°å€ä¸ºï¼š/Users/yangkai.shen/Downloads/vagrant-images/CentOS-7-x86_64-Vagrant-1803_01.VirtualBox.box æ‰“å¼€ Terminalï¼Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š 12345$ vagrant box add centos/7 /Users/yangkai.shen/Downloads/vagrant-images/CentOS-7-x86_64-Vagrant-1803_01.VirtualBox.box==&gt; box: Box file was not detected as metadata. Adding it directly...==&gt; box: Adding box 'centos/7' (v0) for provider: box: Unpacking necessary files from: file:///Users/yangkai.shen/Downloads/vagrant-images/CentOS-7-x86_64-Vagrant-1803_01.VirtualBox.box==&gt; box: Successfully added box 'centos/7' (v0) for 'virtualbox'! è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æˆ‘ä»¬æ·»åŠ çš„ box è¿›è¡Œåˆå§‹åŒ–äº†ã€‚ 4.2. åˆå§‹åŒ– æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç›®å½• centos7ï¼Œç„¶åŽåœ¨ Terminal ä¸­è¿›å…¥è¯¥ç›®å½•ï¼Œç„¶åŽæ‰§è¡Œåˆå§‹åŒ–å‘½ä»¤ã€‚ 12345$ vagrant init centos/7A `Vagrantfile` has been placed in this directory. You are nowready to `vagrant up` your first virtual environment! Please readthe comments in the Vagrantfile as well as documentation on`vagrantup.com` for more information on using Vagrant. æ­¤æ—¶ä¼šå‘çŽ° centos7 ç›®å½•ä¸‹å·²ç»åˆ›å»ºäº†ä¸€ä¸ª Vagrantfileï¼Œé‡Œé¢å·²ç»åŒ…å«äº†é»˜è®¤çš„é…ç½®ã€‚ 4.3. å®‰è£… / å¯åŠ¨ åœ¨ Terminal ä¸­è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼Œå³å¯è¿›è¡Œè‡ªåŠ¨å®‰è£…è™šæ‹Ÿæœºï¼š 1$ vagrant up ç­‰å¾…å‡ åˆ†é’Ÿï¼Œå³å¯å®‰è£…æˆåŠŸã€‚ 4.4. ç™»å½• åœ¨ Terminal ä¸­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š 1$ vagrant ssh å°±ä¼šç™»å½•åˆ°è™šæ‹Ÿæœºçš„ bash ä¸­ï¼Œéžå¸¸æ–¹ä¾¿ã€‚ è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œwindowsç”¨æˆ·ç›´æŽ¥ä½¿ç”¨cmdå‘½ä»¤ä¸èƒ½ä½¿ç”¨sshï¼Œå»ºè®®ä½¿ç”¨ git-bash.exe è¿›è¡Œæ“ä½œ 5. Vagrant é«˜é˜¶æ“ä½œ 5.1. å…±äº«å®¿ä¸»æœºæ–‡ä»¶å¤¹ å®žçŽ°å…±äº«æ–‡ä»¶å¤¹ï¼Œé¦–å…ˆæˆ‘ä»¬å¿…é¡»å…ˆå®‰è£…ä¸€ä¸ª Vagrant æ’ä»¶ï¼švagrant-vbguestï¼Œæ‰“å¼€ Terminal è¾“å…¥ä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š 12345$ vagrant plugin install vagrant-vbguestInstalling the 'vagrant-vbguest' plugin. This can take a few minutes...Fetching: micromachine-2.0.0.gem (100%)Fetching: vagrant-vbguest-0.17.2.gem (100%)Installed the plugin 'vagrant-vbguest (0.17.2)'! å®‰è£…æˆåŠŸåŽï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ Vagrantfile ä¸­é…ç½®å…±äº«æ–‡ä»¶å¤¹ï¼Œå‚è€ƒå¦‚ä¸‹ï¼š 123# ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å®¿ä¸»æœºæ–‡ä»¶å¤¹åœ°å€# ç¬¬äºŒä¸ªå‚æ•°æ˜¯è™šæ‹Ÿæœºä¸­æ˜ å°„è¿‡åŽ»çš„è™šæ‹Ÿæ–‡ä»¶å¤¹åœ°å€config.vm.synced_folder "../data", "/vagrant_data" 5.2. ç½‘ç»œä»£ç†é…ç½® è¿™é‡Œæˆ‘ä»¬æ€»å…±æœ‰ 3 ä¸ªæ­¥éª¤å®žçŽ°ç½‘ç»œä»£ç†ï¼š 5.2.1. å®‰è£…æ’ä»¶ å®žçŽ°ç½‘ç»œä»£ç†ï¼Œé¦–å…ˆæˆ‘ä»¬å¿…é¡»å…ˆå®‰è£…ä¸€ä¸ª Vagrant æ’ä»¶ï¼švagrant-proxyconfï¼Œæ‰“å¼€ Terminal è¾“å…¥ä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š 1234$ vagrant plugin install vagrant-proxyconfInstalling the 'vagrant-proxyconf' plugin. This can take a few minutes...Fetching: vagrant-proxyconf-2.0.1.gem (100%)Installed the plugin 'vagrant-proxyconf (2.0.1)'! 5.2.2. é…ç½®å®¿ä¸»æœºå›ºå®š IP æ³¨æ„ï¼šè¿™é‡Œæˆ‘ä»¬æ˜¯å¯¹ VirtualBox å…¨å±€è®¾ç½®ï¼Œå‰å¾€ä¸è¦ä»…å¯¹æŸä¸€å°è™šæ‹Ÿæœºè®¾ç½®äº†ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯æ‰€æœ‰çš„è™šæ‹Ÿæœºéƒ½ä¼šç»‘å®šä¸Šæˆ‘ä»¬é…ç½®çš„ç½‘å¡ä¿¡æ¯ã€‚ å®‰è£…æˆåŠŸåŽï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ‹¿åˆ°å®¿ä¸»æœºçš„ä¸€ä¸ªå›ºå®š IPï¼Œæ˜¾ç„¶è¿™ä¸ª IP éœ€è¦åœ¨æˆ‘ä»¬åˆ‡æ¢ç½‘ç»œçŽ¯å¢ƒçš„æ—¶å€™ï¼Œä»ç„¶ä¿è¯å›ºå®šä¸å˜ã€‚æ­¤æ—¶æˆ‘ä»¬å¯ä»¥é€šè¿‡ VirtualBox è‡ªå¸¦çš„ä¸€ä¸ªå°æŠ€å·§å®žçŽ°~ æ‰“å¼€ VirtualBoxï¼Œæ‰¾åˆ°å·¦ä¸Šè§’ ã€Žå·¥å…·ã€å³ä¾§çš„å°å›¾æ ‡ï¼Œç‚¹å‡»è¯¥å›¾æ ‡ï¼Œé€‰æ‹©ã€Žç½‘ç»œã€ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹ç•Œé¢ï¼š å¯ä»¥çœ‹åˆ°ç½‘å¡åˆ—è¡¨é‡Œå­˜åœ¨ç½‘å¡ä¿¡æ¯ï¼Œå¦‚æžœä¸å­˜åœ¨ï¼Œå¯ä»¥è‡ªå·±æ‰‹åŠ¨åˆ›å»ºã€‚è¿™é‡Œç½‘å¡ä¿¡æ¯é‡Œçš„å¿…é¡»é€‰æ‹©ã€Žæ‰‹åŠ¨é…ç½®ç½‘å¡ã€ã€‚æˆ‘ä»¬å¯ä»¥ä»Žè™šæ‹Ÿæœºä¸­è®¿é—®å®¿ä¸»æœºçš„å›ºå®šIPå°±æ˜¯è¿™é‡Œçš„IPv4åœ°å€ã€‚ 5.2.3. é…ç½® Vagrantfile æœ€åŽï¼Œæˆ‘ä»¬éœ€è¦åœ¨ Vagrantfile ä¸­é…ç½®ä»£ç†ï¼Œå‚è€ƒå¦‚ä¸‹ï¼š 12345if Vagrant.has_plugin?("vagrant-proxyconf") config.proxy.http = "http://192.168.205.1:1087/" config.proxy.https = "http://192.168.205.1:1087/" config.proxy.no_proxy = "localhost,127.0.0.1"end è¿™æ ·å¯åŠ¨è™šæ‹Ÿæœºä¹‹åŽï¼Œæˆ‘ä»¬çš„ç½‘ç»œè¯·æ±‚éƒ½ä¼šé€šè¿‡æˆ‘ä»¬å®¿ä¸»æœºçš„ 1087 ç«¯å£ä»£ç†å‡ºåŽ»ã€‚ 5.3. å®‰è£…åŽç³»ç»ŸçŽ¯å¢ƒé…ç½® Vagrant å¯ä»¥åœ¨è™šæ‹Ÿæœºå®‰è£…ä¹‹åŽï¼Œä½¿ç”¨ shell å‘½ä»¤å¯¹ç³»ç»ŸçŽ¯å¢ƒåšä¸€äº›åˆå§‹åŒ–é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Vagrantfile ä¸­é…ç½®ã€‚ Vagrant æ”¯æŒ 2 ç§æ–¹å¼æ‰§è¡Œ shellï¼Œç¬¬ä¸€ç§æ–¹å¼æ˜¯ç›´æŽ¥åœ¨ Vagrantfile ä¸­å†™ shell å‘½ä»¤ï¼Œå¦‚ä¸‹ï¼š 1234config.vm.provision "shell", privileged: true, inline: &lt;&lt;-SHELL apt-get update apt-get install -y apache2SHELL ç¬¬äºŒç§æ–¹å¼ï¼Œæ”¯æŒå¼•ç”¨å¤–éƒ¨ shell è„šæœ¬ï¼Œå¦‚ä¸‹ï¼š 1config.vm.provision "shell", privileged: true, path: "./setup.sh" 5.4. å¦‚ä½•é…ç½®èšç¾¤åŒ–çŽ¯å¢ƒ 5.4.1. è®¾ç½®ç¡¬ä»¶å‚æ•° è®¾ç½®è™šæ‹Ÿæœºå†…å­˜å¤§å°å’ŒCPUæ ¸æ•°ï¼Œåœ¨ Vagrantfile ä¸­é…ç½®å¦‚ä¸‹ä¿¡æ¯å³å¯ï¼š 1234config.vm.provider "virtualbox" do |v| v.customize ["modifyvm", :id, "--memory", "1024"] v.customize ["modifyvm", :id, "--cpus", "1"]end 5.4.2. è®¾ç½®hostname åœ¨ Vagrantfile ä¸­é…ç½®å¦‚ä¸‹ä¿¡æ¯å³å¯ï¼š 1config.vm.hostname = "master1" 5.4.3. è®¾ç½®é™æ€IP åœ¨ Vagrantfile ä¸­é…ç½®å¦‚ä¸‹ä¿¡æ¯å³å¯ï¼š 1config.vm.network "private_network", ip: "192.168.205.10" 5.5. å¯ç”¨æ’ä»¶ ä»Žä¸Šé¢çš„ å…±äº«å®¿ä¸»æœºæ–‡ä»¶å¤¹ã€ç½‘ç»œä»£ç† ç­‰é«˜é˜¶æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥å‘çŽ°ï¼ŒVagrant æ‹¥æœ‰ä¸°å¯Œçš„æ’ä»¶å¯ä»¥å¸®åŠ©æˆ‘ä»¬å®Œæˆå¾ˆå¤šä¸ªæ€§åŒ–éœ€æ±‚ï¼Œå¯¹äºŽè¿™äº›æ’ä»¶ï¼Œå®˜æ–¹æä¾›äº†ä¸€ä¸ªåœ°å€ï¼Œä¸“é—¨æ•´ç†äº†å¤§é‡çš„ Vagrant æ’ä»¶ã€‚ æ’ä»¶åˆ—è¡¨åœ°å€ï¼šhttps://github.com/hashicorp/vagrant/wiki/Available-Vagrant-Plugins 6. Vagrantfile æ¡ˆä¾‹ æœ¬å°èŠ‚ï¼Œæˆ‘ä»¬å±•ç¤ºä¸€ä¸ª Vagrantfile å¯åŠ¨ 3 å°è™šæ‹ŸæœºèŠ‚ç‚¹ï¼Œè®¾ç½®å¥½ç¡¬ä»¶ä¿¡æ¯ã€å®‰è£…dockerã€å¹¶è®¾ç½®å¼€æœºå¯åŠ¨ï¼ŒåŒæ—¶å¼€å¯ä»£ç†é…ç½®ã€‚ Vagrantfile 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960# -*- mode: ruby -*-# vi: set ft=ruby :# è®¾ç½®è™šæ‹Ÿæœºé…ç½®ï¼ŒåŒ…æ‹¬hostnameï¼Œipï¼Œå†…å­˜ï¼ŒCPUç­‰boxes = [ &#123; :name =&gt; "master1", :eth1 =&gt; "192.168.205.10", :mem =&gt; "1024", :cpu =&gt; "1" &#125;, &#123; :name =&gt; "slave1", :eth1 =&gt; "192.168.205.11", :mem =&gt; "1024", :cpu =&gt; "1" &#125;, &#123; :name =&gt; "slave2", :eth1 =&gt; "192.168.205.12", :mem =&gt; "1024", :cpu =&gt; "1" &#125;]Vagrant.configure("2") do |config| # boxåç§° config.vm.box = "centos/7" # å¾ªçŽ¯è®¾ç½®æ¯å°è™šæ‹Ÿæœº boxes.each do |opts| config.vm.define opts[:name] do |config| # é…ç½® hostname config.vm.hostname = opts[:name] # é…ç½®å†…å­˜å’ŒCPU config.vm.provider "virtualbox" do |v| v.customize ["modifyvm", :id, "--memory", opts[:mem]] v.customize ["modifyvm", :id, "--cpus", opts[:cpu]] end # é…ç½® IP config.vm.network :private_network, ip: opts[:eth1] # è®¾ç½®ç½‘ç»œä»£ç†(éœ€è¦å®‰è£… vagrant-proxyconf æ’ä»¶) if Vagrant.has_plugin?("vagrant-proxyconf") config.proxy.http = "http://192.168.205.1:1087/" config.proxy.https = "http://192.168.205.1:1087/" config.proxy.no_proxy = "localhost,127.0.0.1" end # è®¾ç½®å¯åŠ¨åŽåˆå§‹åŒ–è„šæœ¬ï¼Œæ³¨æ„ privileged: trueï¼Œè¡¨ç¤ºä»¥ sudo æ–¹å¼è¿è¡Œ config.vm.provision "shell", privileged: true, path: "./setup.sh" # è®¾ç½®å®¿ä¸»æœºå…±äº«æ–‡ä»¶å¤¹(éœ€è¦å®‰è£… vagrant-vbguest æ’ä»¶) # config.vm.synced_folder "../data", "/vagrant_data" end endend setup.sh 1234567891011121314151617181920212223242526272829303132#/bin/sh# set timezoneecho "set timezone"timedatectl set-timezone Asia/Shanghaiecho "vagrant ALL=(ALL) NOPASSWD: ALL" &gt;&gt; /etc/sudoers# change yum repoecho "change yum repo -&gt; aliyun repo"sudo yum install -y wget yum-utilssudo cp /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.baksudo wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.reposudo wget -P /etc/yum.repos.d/ http://mirrors.aliyun.com/repo/epel-7.repo sudo yum clean allsudo yum makecache# install some toolsecho "install some tools"sudo yum install -y yum-utils device-mapper-persistent-data lvm2 git vim gcc glibc-static telnet bridge-utils# install dockerecho "install docker"sudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.reposudo yum makecache fastsudo yum -y install docker-ce# start docker serviceecho "start docker service"sudo groupadd dockersudo usermod -aG docker vagrantsudo systemctl enable docker å‚è€ƒ Macä¸‹ä½¿ç”¨Vagranté…ç½®CentOSè™šæ‹ŸçŽ¯å¢ƒ Vagrant ç¬”è®° ä½¿ç”¨vagrantå’ŒvitrualBoxæ­å»ºè™šæ‹Ÿå¼€å‘çŽ¯å¢ƒ Vagrantæ­å»ºè™šæ‹ŸåŒ–å¼€å‘çŽ¯å¢ƒ]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>vagrant</category>
      </categories>
      <tags>
        <tag>Mac</tag>
        <tag>kubernetes</tag>
        <tag>vagrant</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[scaffold ç»„ä»¶ç›¸å…³æ–‡æ¡£]]></title>
    <url>%2F2019%2F03%2F12%2Fscaffold-doc.html</url>
    <content type="text"><![CDATA[å‰è¨€ scaffold: è„šæ‰‹æž¶çš„æ„æ€ï¼Œæ˜¯ä¸€æ¬¾å°è£…äº†ä¸€äº›é€šç”¨ç»„ä»¶çš„ï¼Œè®©Spring Bootå¿«é€Ÿå¼€å‘çš„å·¥å…·é›†ã€‚ 1. Scaffoldç»„ä»¶å›¾è°± 2. é¡¹ç›®ä¿¡æ¯ é¡¹ç›®åœ°å€ï¼š https://github.com/xkcoding/scaffold ç›®å½•ç»“æž„ï¼š 1234567891011scaffoldâ”œâ”€â”€ scaffold-bom scaffoldä¾èµ–ç®¡ç†â”œâ”€â”€ scaffold-common é€šç”¨å·¥å…·ç±»â”œâ”€â”€ scaffold-launcher é€šç”¨å¯åŠ¨å™¨â”œâ”€â”€ scaffold-log æ—¥å¿—åŒ…â”œâ”€â”€ scaffold-swagger swaggeré…ç½®â”œâ”€â”€ scaffold-test é€šç”¨å•å…ƒæµ‹è¯•â”œâ”€â”€ scaffold-web é€šç”¨webé…ç½®â”œâ”€â”€ scaffold-code é€šç”¨éªŒè¯ç ç»„ä»¶â”œâ”€â”€ scaffold-notification é€šç”¨é€šçŸ¥ç»„ä»¶â””â”€â”€ scaffold-codegen ä»£ç ç”Ÿæˆå™¨ ç‰ˆæœ¬æ›´æ–°è®°å½•ï¼šCHANGELOG 3.å®‰è£…æ–¹å¼ å½“å‰æœ€æ–°ç‰ˆæœ¬: 12345&lt;dependency&gt; &lt;groupId&gt;com.xkcoding&lt;/groupId&gt; &lt;artifactId&gt;scaffold-$&#123;æ¨¡å—å&#125;&lt;/artifactId&gt; &lt;version&gt;$&#123;æœ€æ–°ç‰ˆæœ¬&#125;&lt;/version&gt;&lt;/dependency&gt; 4. å„ä¸ªæ¨¡å—åŠŸèƒ½ä»‹ç»åŠä½¿ç”¨æ–¹æ³• 4.1. scaffold-bom ç‰ˆæœ¬ä¾èµ–ç®¡ç† ä¸»è¦åŠŸèƒ½ ç”¨äºŽç»Ÿä¸€ç®¡ç† scaffold çš„ç‰ˆæœ¬ï¼Œä¸éœ€è¦ç”¨æˆ·æŽ§åˆ¶å„ä¸ªæ¨¡å—çš„ç‰ˆæœ¬ä¾èµ– ä½¿ç”¨æ–¹æ³• scaffold-bom æœ€æ–°ç‰ˆæœ¬: 12345678910111213141516171819&lt;dependencyManagement&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;com.xkcoding&lt;/groupId&gt; &lt;artifactId&gt;scaffold-bom&lt;/artifactId&gt; &lt;version&gt;$&#123;scaffold-bom.version&#125;&lt;/version&gt; &lt;type&gt;pom&lt;/type&gt; &lt;scope&gt;import&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/dependencyManagement&gt;&lt;dependencies&gt; &lt;!--ä¸éœ€è¦å®šä¹‰ç‰ˆæœ¬--&gt; &lt;dependency&gt; &lt;groupId&gt;com.xkcoding&lt;/groupId&gt; &lt;artifactId&gt;scaffold-$&#123;æ¨¡å—å&#125;&lt;/artifactId&gt; &lt;/dependency&gt;&lt;/dependencies&gt; 4.2. scaffold-launcher å¯åŠ¨å™¨æ¨¡å— ä¸»è¦åŠŸèƒ½ çŽ¯å¢ƒåˆ’åˆ†ï¼šdevï¼ˆå¼€å‘ï¼‰ã€testï¼ˆæµ‹è¯•ï¼‰ã€prodï¼ˆæ­£å¼ï¼‰ï¼Œé»˜è®¤ devã€‚ å¯åŠ¨å™¨é…ç½®ï¼Œä»£ç ä¸­å¯ä»¥æ³¨å…¥ ScaffoldProperties æ¥è¯»å–å¯åŠ¨å™¨çš„ä¸€äº›é…ç½®ä¿¡æ¯ï¼Œæ¯”å¦‚ env ç­‰ã€‚ scaffold.prop å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­è‡ªå®šä¹‰é…ç½®ã€‚ç„¶åŽå†åœ¨ä»£ç ä¸­ä½¿ç”¨ ScaffoldProperties è¯»å–ã€‚ æ’ä»¶æ‰©å±•ï¼Œæ›´åŠ æ–¹ä¾¿çš„åŽ»æ³¨å…¥ä¸€äº›é€šç”¨é…ç½®ï¼Œé™ä½Žä½¿ç”¨éš¾åº¦ã€‚æ’ä»¶æ‰©å±•åŸºäºŽ java SPI æŠ€æœ¯ï¼Œå…³äºŽ java SPI å…·ä½“ä½¿ç”¨å¯ä»¥ç™¾åº¦ã€‚ æ³¨æ„ï¼šå¦‚æžœä½¿ç”¨äº† scaffold-launcherï¼Œå•å…ƒæµ‹è¯•éœ€è¦ä½¿ç”¨ scaffold-test ç»„ä»¶ï¼Œä½¿ç”¨æ–¹æ³•è¯·çœ‹æ–‡æ¡£ ä½¿ç”¨æ–¹æ³• â‘  åˆ›å»ºspring boot é¡¹ç›® â‘¡ æ·»åŠ ä¾èµ– æŽ¨èä½¿ç”¨ scaffold-bom ç®¡ç† scaffold æ¨¡å—ç‰ˆæœ¬ï¼Œä½¿ç”¨æ–¹æ³•è¯·çœ‹æ–‡æ¡£ scaffold-launcher æœ€æ–°ç‰ˆæœ¬: 12345&lt;dependency&gt; &lt;groupId&gt;com.xkcoding&lt;/groupId&gt; &lt;artifactId&gt;scaffold-launcher&lt;/artifactId&gt; &lt;version&gt;$&#123;scaffold-launcher.version&#125;&lt;/version&gt;&lt;/dependency&gt; â‘¢ ä¿®æ”¹å¯åŠ¨ç±»ä»£ç  123456789@SpringBootApplicationpublic class DemoApplication &#123; public static void main(String[] args) &#123; // SpringApplication.run(DemoApplication.class, args); ScaffoldApplication.run("demo", DemoApplication.class, args); &#125;&#125; â‘£ è®¾ç½®ä½¿ç”¨çŽ¯å¢ƒ javaå‘½ä»¤è¡Œï¼šjava -jar app.jar --spring.profiles.active=dev JAVA_OPSï¼šset JAVA_OPTS=&quot;-Dspring.profiles.active=test&quot; æ³¨è§£æ–¹å¼ï¼ˆä»£ç å±‚é¢ï¼Œjunitå•å…ƒæµ‹è¯•éžå¸¸å®žç”¨ï¼‰ï¼š@ActiveProfiles({&quot;dev&quot;,&quot;test&quot;}) ENVæ–¹å¼ï¼šç³»ç»ŸçŽ¯å¢ƒå˜é‡SPRING_PROFILES_ACTIVEï¼ˆæ³¨æ„ï¼šæ˜¯å¤§å†™ï¼‰ ideaå¼€å‘åœºæ™¯ä¸‹è®¾ç½®å‚è€ƒä¸‹å›¾ â‘¤ è‡ªå®šä¹‰é…ç½®é¡¹ ScaffoldProperties.java é…ç½®é¡¹ é»˜è®¤å€¼ è¯´æ˜Ž scaffold.env dev ã€åªè¯»ã€‘scaffold çŽ¯å¢ƒå˜é‡ï¼Œæ–¹ä¾¿åœ¨ä»£ç ä¸­èŽ·å–ï¼Œè®¾ç½®æ— æ•ˆ scaffold.name æ—  ã€åªè¯»ã€‘å½“å‰æœåŠ¡åç§° scaffold.is-local false ã€åªè¯»ã€‘åˆ¤æ–­æ˜¯å¦ä¸º æœ¬åœ°å¼€å‘çŽ¯å¢ƒ scaffold.prop æ—  è£…è½½è‡ªå®šä¹‰é…ç½® scaffold.prop.xxx åœ¨ application.yml ä¸­é…ç½® 1234scaffold: prop: author: xkcoding blog: https://xkcoding.com ä½¿ç”¨é…ç½® 1234567@Autowiredprivate ScaffoldProperties scaffoldProperties;public void test() &#123; String author = scaffoldProperties.get("author"); String blog = scaffoldProperties.get("blog"); // .....&#125; â‘¥ è‡ªå®šä¹‰å¯åŠ¨æ’ä»¶ å®žçŽ° LauncherServiceï¼Œé‡å†™ launcher æ–¹æ³•ï¼Œä¸‹é¢æ˜¯ LauncherService çš„ä»£ç ã€‚ 12345678910111213public interface LauncherService &#123; /** * å¯åŠ¨æ—¶ å¤„ç† SpringApplicationBuilder * * @param builder SpringApplicationBuilder * @param appName æœåŠ¡å * @param profile é…ç½®å * @param isLocalDev æ˜¯å¦æœ¬åœ°å¼€å‘ */ void launcher(SpringApplicationBuilder builder, String appName, String profile, boolean isLocalDev);&#125; ç¼–å†™ SPI æ–‡ä»¶æ”¾ç½®åˆ° resources ç›®å½•ä¸‹ï¼Œæ–‡ä»¶è·¯å¾„å’Œæ–‡ä»¶å META-INF/services/com.xkcoding.launcher.service.LauncherServiceã€‚ å†…å®¹ä¸ºä½ ç¼–å†™çš„æ’ä»¶å®Œæ•´ç±»åï¼Œä¾‹å¦‚ï¼šcom.xxxx.CustomLauncherServiceImplã€‚ 4.3. scaffold-common é€šç”¨å·¥å…· ä¸»è¦åŠŸèƒ½ é€šç”¨APIå±‚è¿”å›žæ ¼å¼å°è£… é€šç”¨åˆ†é¡µæŸ¥è¯¢å‚æ•°å°è£… å¸¸ç”¨å·¥å…·ç±»å°è£… ä½¿ç”¨æ–¹æ³• â‘  æ·»åŠ ä¾èµ– æŽ¨èä½¿ç”¨ scaffold-bom ç®¡ç† scaffold æ¨¡å—ç‰ˆæœ¬ï¼Œä½¿ç”¨æ–¹æ³•è¯·çœ‹æ–‡æ¡£ scaffold-common æœ€æ–°ç‰ˆæœ¬: 12345&lt;dependency&gt; &lt;groupId&gt;com.xkcoding&lt;/groupId&gt; &lt;artifactId&gt;scaffold-common&lt;/artifactId&gt; &lt;version&gt;$&#123;scaffold-common.version&#125;&lt;/version&gt;&lt;/dependency&gt; â‘¡ ç»Ÿä¸€APIè¿”å›žæ ¼å¼ ç±»åï¼šcom.xkcoding.common.api.R åˆ¤æ–­è¿”å›žæ˜¯å¦ä¸ºæˆåŠŸï¼šR.isSuccess(R result); åˆ¤æ–­è¿”å›žæ˜¯å¦ä¸ºä¸æˆåŠŸï¼šR.isNotSuccess(R result); èŽ·å–dataï¼šR.getData(R result); è¿”å›žæˆåŠŸï¼šR.success(); æˆåŠŸ-æºå¸¦æ•°æ®ï¼šR.success(Object data); æ ¹æ®çŠ¶æ€è¿”å›žæˆåŠŸæˆ–è€…å¤±è´¥ï¼šR.status(boolean status, String msg); æ ¹æ®çŠ¶æ€è¿”å›žæˆåŠŸæˆ–è€…å¤±è´¥ï¼šR.status(boolean status, IResultCode sCode); è¿”å›žå¤±è´¥ä¿¡æ¯ï¼šR.fail(); è¿”å›žå¤±è´¥ä¿¡æ¯ï¼Œç”¨äºŽ webï¼šR.fail(String msg); è¿”å›žå¤±è´¥ä¿¡æ¯ï¼šR.fail(IResultCode rCode); è¿”å›žå¤±è´¥ä¿¡æ¯ï¼šR.fail(IResultCode rCode, String msg); è¿”å›žå¤±è´¥ä¿¡æ¯ï¼šR.fail(int code, String msg); è¿”å›žå¤±è´¥ä¿¡æ¯-æºå¸¦æ•°æ®ï¼šR.fail(IResultCode rCode, T data); â‘¢ çŠ¶æ€ç æŽ¥å£ ç±»åï¼šcom.xkcoding.common.api.IResultCode â‘£ å†…ç½®çŠ¶æ€ç  æžšä¸¾å€¼ çŠ¶æ€ç  æè¿° ResultCode.SUCCESS 200 æ“ä½œæˆåŠŸ ResultCode.FAILURE -1 ä¸šåŠ¡å¼‚å¸¸ ResultCode.UN_AUTHORIZED 401 è¯·æ±‚æœªæŽˆæƒ ResultCode.NOT_FOUND 404 æ²¡æ‰¾åˆ°è¯·æ±‚ ResultCode.MSG_NOT_READABLE 400 æ¶ˆæ¯ä¸èƒ½è¯»å– ResultCode.METHOD_NOT_SUPPORTED 405 ä¸æ”¯æŒå½“å‰è¯·æ±‚æ–¹æ³• ResultCode.MEDIA_TYPE_NOT_SUPPORTED 415 ä¸æ”¯æŒå½“å‰åª’ä½“ç±»åž‹ ResultCode.REQ_REJECT 403 è¯·æ±‚è¢«æ‹’ç» ResultCode.INTERNAL_SERVER_ERROR 500 æœåŠ¡å™¨å¼‚å¸¸ ResultCode.PARAM_MISS 400 ç¼ºå°‘å¿…è¦çš„è¯·æ±‚å‚æ•° ResultCode.PARAM_TYPE_ERROR 400 è¯·æ±‚å‚æ•°ç±»åž‹é”™è¯¯ ResultCode.PARAM_BIND_ERROR 400 è¯·æ±‚å‚æ•°ç»‘å®šé”™è¯¯ ResultCode.PARAM_VALID_ERROR 400 å‚æ•°æ ¡éªŒå¤±è´¥ â‘¤ å¸¸ç”¨å·¥å…·ç±» å·²ç»å†…ç½® hutool å·¥å…·ç±»ï¼Œé¢å¤–æ–°å¢žTreeUtil(æ ‘èŠ‚ç‚¹æ“ä½œ)ã€IpUtil(èŽ·å–IPä¿¡æ¯)ã€UrlUtil(URLç¼–è§£ç )ã€Ip2AddressUtil(æ ¹æ®IPèŽ·å–åœ°å€ä¿¡æ¯)ã€WebUtil(Web å·¥å…·ç±»ï¼Œæ“ä½œ request/response/cookie)ã€ServletUtil(Servlet å·¥å…·ç±»)ç­‰ 4.4. scaffold-log é€šç”¨æ—¥å¿—ç»„ä»¶ ä¸»è¦åŠŸèƒ½ å¯¹æ“ä½œæ—¥å¿—è¿›è¡Œå°è£… @ApiLogï¼Œè‡ªå®šä¹‰æ“ä½œäººï¼Œä»¥åŠè‡ªå®šä¹‰æ—¥å¿—å¤„ç† åŸºäºŽSpring Eventå¼‚æ­¥å¤„ç†æ—¥å¿—ä¿¡æ¯ ä½¿ç”¨æ–¹æ³• â‘  æ·»åŠ ä¾èµ– æŽ¨èä½¿ç”¨ scaffold-bom ç®¡ç† scaffold æ¨¡å—ç‰ˆæœ¬ï¼Œä½¿ç”¨æ–¹æ³•è¯·çœ‹æ–‡æ¡£ scaffold-log æœ€æ–°ç‰ˆæœ¬: 12345&lt;dependency&gt; &lt;groupId&gt;com.xkcoding&lt;/groupId&gt; &lt;artifactId&gt;scaffold-log&lt;/artifactId&gt; &lt;version&gt;$&#123;scaffold-log.version&#125;&lt;/version&gt;&lt;/dependency&gt; â‘¡ application.yml ä¸­å¼€å¯æ“ä½œæ—¥å¿—æ‹¦æˆª 123scaffold: log: enabled: true â‘¢ Controllerå±‚æ·»åŠ æ³¨è§£@ApiLog 12345@GetMapping("/")@ApiLog("æµ‹è¯•æ“ä½œ")public R&lt;User&gt; test(@RequestBody User user) &#123; return R.data(user);&#125; â‘£ è‡ªå®šä¹‰æ—¥å¿—æ“ä½œ åˆ›å»ºä¸€ä¸ªç±»ï¼Œç»§æ‰¿ DefaultScaffoldLogServiceImplï¼ˆä¹Ÿå¯ä»¥å®žçŽ°LogServiceæŽ¥å£ï¼‰ é‡å†™å¯¹åº”æ–¹æ³•ï¼Œä¸éœ€è¦å…¨éƒ¨é‡å†™ï¼Œåªéœ€è¦é‡å†™éƒ¨åˆ†å³å¯ 12345678910111213141516171819202122232425262728293031323334353637public class CustomLogServiceImpl extends DefaultScaffoldLogServiceImpl &#123; /** * ä¿å­˜æ“ä½œæ—¥å¿— * * @param logApi æ“ä½œæ—¥å¿—å®žä½“ * @return æ˜¯å¦ä¿å­˜æˆåŠŸ */ @Override public R&lt;Boolean&gt; saveApiLog(LogApi logApi) &#123; // è‡ªå®šä¹‰æ“ä½œï¼Œæ¯”å¦‚ä¿å­˜åˆ°æ•°æ®åº“ä¸­ return super.saveApiLog(logApi); &#125; /** * ä¿å­˜é”™è¯¯æ—¥å¿— * * @param logError é”™è¯¯æ—¥å¿—å®žä½“ * @return æ˜¯å¦ä¿å­˜æˆåŠŸ */ @Override public R&lt;Boolean&gt; saveErrorLog(LogError logError) &#123; // è‡ªå®šä¹‰æ“ä½œï¼Œæ¯”å¦‚ä¿å­˜åˆ°æ•°æ®åº“ä¸­ return super.saveErrorLog(logError); &#125; /** * ä¿å­˜è‡ªå®šä¹‰æ—¥å¿— * * @param logCustom è‡ªå®šä¹‰æ—¥å¿—å®žä½“ * @return æ˜¯å¦ä¿å­˜æˆåŠŸ */ @Override public R&lt;Boolean&gt; saveCustomLog(LogCustom logCustom) &#123; // è‡ªå®šä¹‰æ“ä½œï¼Œæ¯”å¦‚ä¿å­˜åˆ°æ•°æ®åº“ä¸­ return super.saveCustomLog(logCustom); &#125;&#125; å†å°†è‡ªå®šä¹‰çš„æ—¥å¿—æ“ä½œæ”¾åˆ° Spring å®¹å™¨ä¸­ 1234567@Configurationpublic class LogConfig &#123; @Bean public LogService logService()&#123; return new CustomLogServiceImpl(); &#125;&#125; æ³¨æ„ï¼šå¦‚æžœå½“å‰ scaffold-launcher é…ç½®çš„ spring.profiles.active çŽ¯å¢ƒæ˜¯ devã€test åˆ™æ—¥å¿—å®žä½“é‡Œä¼šæ‹¦æˆªåˆ°è¯·æ±‚ä¸­çš„å‚æ•°ç­‰ä¿¡æ¯ï¼Œå¦‚æžœæ˜¯ prod åˆ™ä¸ä¼šæ‹¦æˆªè¯·æ±‚å‚æ•° â‘¤ è‡ªå®šä¹‰å½“å‰æ“ä½œäºº scaffold-log ä¸­é»˜è®¤å½“å‰æ“ä½œäººä¸º åŒ¿åç”¨æˆ· ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡å®žçŽ° SecurityService æŽ¥å£ï¼Œé‡å†™ getCurrentUserName å®žçŽ°è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ï¼Œä¹‹åŽåŠ¡å¿…åŠ åˆ° Spring å®¹å™¨ä¸­ï¼Œæ“ä½œåŒä¸Šï¼Œä¸å†èµ˜è¿°ã€‚ 4.5. scaffold-swagger é€šç”¨swaggeré…ç½® ä¸»è¦åŠŸèƒ½ é›†æˆswaggerçš„è‡ªåŠ¨è£…é…ï¼Œæ–¹ä¾¿é›†æˆ ä½¿ç”¨æ–¹æ³• â‘  æ·»åŠ ä¾èµ– æŽ¨èä½¿ç”¨ scaffold-bom ç®¡ç† scaffold æ¨¡å—ç‰ˆæœ¬ï¼Œä½¿ç”¨æ–¹æ³•è¯·çœ‹æ–‡æ¡£ scaffold-swagger æœ€æ–°ç‰ˆæœ¬: 12345&lt;dependency&gt; &lt;groupId&gt;com.xkcoding&lt;/groupId&gt; &lt;artifactId&gt;scaffold-swagger&lt;/artifactId&gt; &lt;version&gt;$&#123;scaffold-swagger.version&#125;&lt;/version&gt;&lt;/dependency&gt; â‘¡ é…ç½®swaggeråŸºç¡€ä¿¡æ¯ 123456789101112#swaggeré…ç½®ä¿¡æ¯swagger: title: Demo æŽ¥å£æ–‡æ¡£ç³»ç»Ÿ description: Demo æŽ¥å£æ–‡æ¡£ç³»ç»Ÿ version: 1.0.0 license: Powered By xkcoding # æ³¨æ„è¿™é‡Œå¿…é¡»é…ç½®ä½ å½“å‰é¡¹ç›®çš„åŒ…å base-package: com.example.demo.controller contact: name: Yangkai.Shen email: 237497819@qq.com url: https://xkcoding.com â‘¢ å¯åŠ¨é¡¹ç›® è®¿é—® http://${host}:${port}/${contextPath}/doc.htmlï¼Œæ¯”å¦‚ï¼šhttp://localhost:8080/demo/doc.html æ³¨æ„ï¼šå¦‚æžœå½“å‰ scaffold-launcher é…ç½®çš„ spring.profiles.active çŽ¯å¢ƒæ˜¯ devã€test åˆ™å¯ä»¥è®¿é—®æŽ¥å£æ–‡æ¡£ï¼Œå¦‚æžœæ˜¯ prod åˆ™è®¿é—®ä¸åˆ°ã€‚ 4.6. scaffold-test é€šç”¨å•å…ƒæµ‹è¯•ç»„ä»¶ ä¸»è¦åŠŸèƒ½ ç”±äºŽåœ¨ scaffold-launcher é‡Œè®¾ç½®äº†ä¸€äº›å¯åŠ¨å‚æ•°ï¼Œæ‰€ä»¥æä¾›äº† scaffold-test æ–¹ä¾¿åœ¨å•å…ƒæµ‹è¯•çš„æ—¶å€™ä½¿ç”¨ã€‚ ä½¿ç”¨æ–¹æ³• â‘  æ·»åŠ ä¾èµ– æŽ¨èä½¿ç”¨ scaffold-bom ç®¡ç† scaffold æ¨¡å—ç‰ˆæœ¬ï¼Œä½¿ç”¨æ–¹æ³•è¯·çœ‹æ–‡æ¡£ scaffold-test æœ€æ–°ç‰ˆæœ¬: 12345&lt;dependency&gt; &lt;groupId&gt;com.xkcoding&lt;/groupId&gt; &lt;artifactId&gt;scaffold-test&lt;/artifactId&gt; &lt;version&gt;$&#123;scaffold-test.version&#125;&lt;/version&gt;&lt;/dependency&gt; â‘¡ å•å…ƒæµ‹è¯•ä¸€ é‡‡ç”¨ @RunWith(ScaffoldSpringRunner.class)ã€‚ 12345678910@SpringBootTest@ScaffoldTest(profile = "dev",appName = "demo-test")@RunWith(ScaffoldSpringRunner.class)public class DemoTests &#123; @Test public void test() &#123; &#125;&#125; â‘¢å•å…ƒæµ‹è¯•äºŒ ç»§æ‰¿ ScaffoldBaseTestã€‚ 12345678910@SpringBootTest@ScaffoldTest(profile = "dev",appName = "demo-test")public class DemoTests extends ScaffoldBaseTest &#123; @Test public void test() &#123; &#125;&#125; 4.7. scaffold-web é€šç”¨webé…ç½® ä¸»è¦åŠŸèƒ½ Redisåºåˆ—åŒ–é…ç½® Jacksonåºåˆ—åŒ–é…ç½® é€šç”¨å…¨å±€å¼‚å¸¸æ‹¦æˆªé…ç½®ï¼ŒæœªçŸ¥å¼‚å¸¸è§¦å‘ Event äº‹ä»¶ï¼Œç”± scaffold-log ç›‘å¬å¤„ç† devã€test çŽ¯å¢ƒä¸‹æ‰“å°è¯·æ±‚æ˜Žç»†ï¼Œæ–¹ä¾¿ä»£ç è°ƒè¯• å¼‚æ­¥çº¿ç¨‹æ± é€šç”¨é…ç½® Mybatis-Plus é…ç½®ï¼Œdevã€test çŽ¯å¢ƒä¸‹å¯ç”¨SQLæ‰§è¡Œæ•ˆçŽ‡æ’ä»¶ ä½¿ç”¨æ–¹æ³• â‘  æ·»åŠ ä¾èµ– æŽ¨èä½¿ç”¨ scaffold-bom ç®¡ç† scaffold æ¨¡å—ç‰ˆæœ¬ï¼Œä½¿ç”¨æ–¹æ³•è¯·çœ‹æ–‡æ¡£ scaffold-web æœ€æ–°ç‰ˆæœ¬: 12345&lt;dependency&gt; &lt;groupId&gt;com.xkcoding&lt;/groupId&gt; &lt;artifactId&gt;scaffold-web&lt;/artifactId&gt; &lt;version&gt;$&#123;scaffold-web.version&#125;&lt;/version&gt;&lt;/dependency&gt; â‘¡ å¼‚æ­¥çº¿ç¨‹æ± é…ç½® é…ç½®é¡¹ é»˜è®¤å€¼ è¯´æ˜Ž scaffold.async.corePoolSize 2 å¼‚æ­¥æ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œé»˜è®¤ï¼š2 scaffold.async.maxPoolSize 50 å¼‚æ­¥æœ€å¤§çº¿ç¨‹æ•°ï¼Œé»˜è®¤ï¼š50 scaffold.async.queueCapacity 10000 é˜Ÿåˆ—å®¹é‡ï¼Œé»˜è®¤ï¼š10000 scaffold.async.keepAliveSeconds 300 çº¿ç¨‹å­˜æ´»æ—¶é—´ï¼Œé»˜è®¤ï¼š300 â‘¢ ç›‘æŽ§æ‰“å°è¯·æ±‚ 123456789101112131415161718192019-03-13 15:38:11.650 INFO 6846 --- [ XNIO-1 task-2] com.xkcoding.web.logger.RequestLogAspect : RequestLogAspect.java:157 - ================ Request Start ===================&gt; POST: /demo/ Parameters: &#123;"name":"","id":0,"age":0,"email":""&#125;===headers=== Origin : http://localhost:8080===headers=== Cookie : Hm_lvt_bc38887aa5588add05a38704342ad7e8=1549855562; Hm_lvt_521f6d48d3fa40ce529ba993fc1a46b4=1548829297,1551345825; scroll-cookie=1900|/===headers=== Request-Origion : SwaggerBootstrapUi===headers=== Accept : */*===headers=== X-Requested-With : XMLHttpRequest===headers=== User-Agent : Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.81 Safari/537.36 QQBrowser/4.5.121.400===headers=== Connection : keep-alive===headers=== Referer : http://localhost:8080/demo/doc.html===headers=== Host : localhost:8080===headers=== Accept-Encoding : gzip, deflate, br===headers=== Accept-Language : zh-CN,zh;q=0.9===headers=== Content-Length : 50===headers=== Content-Type : application/json===Result=== &#123;"msg":"æ“ä½œæˆåŠŸ","code":200,"data":&#123;"name":"","id":0,"age":0,"email":""&#125;,"success":true&#125;&lt;=== POST: /demo/ (2 ms)================ Request End ================ 4.8. scaffold-code é€šç”¨éªŒè¯ç ç»„ä»¶ ä¸»è¦åŠŸèƒ½ éšæœºéªŒè¯ç ï¼Œå¯é…ç½®éšæœºéªŒè¯ç çš„å­—ç¬¦ä¸²ã€é•¿åº¦ã€å®½åº¦ã€é«˜åº¦ ç®€å•ç®—æœ¯éªŒè¯ç ï¼Œå¯é…ç½®éªŒè¯ç å®½åº¦ã€é«˜åº¦ ä½¿ç”¨æ–¹æ³• æ³¨æ„ï¼šéªŒè¯ç ç»„ä»¶éœ€è¦é…åˆç¼“å­˜ä½¿ç”¨ï¼Œå»ºè®®ä½¿ç”¨Redis â‘  æ·»åŠ ä¾èµ– æŽ¨èä½¿ç”¨ scaffold-bom ç®¡ç† scaffold æ¨¡å—ç‰ˆæœ¬ï¼Œä½¿ç”¨æ–¹æ³•è¯·çœ‹æ–‡æ¡£ scaffold-code æœ€æ–°ç‰ˆæœ¬: 12345&lt;dependency&gt; &lt;groupId&gt;com.xkcoding&lt;/groupId&gt; &lt;artifactId&gt;scaffold-code&lt;/artifactId&gt; &lt;version&gt;$&#123;scaffold-code.version&#125;&lt;/version&gt;&lt;/dependency&gt; â‘¡ åœ¨ application.yml ä¸­å¼€å¯éªŒè¯ç ï¼ŒåŒæ—¶è®¾ç½®Redisç›¸å…³é…ç½® 1234567891011121314151617181920212223scaffold: code: enabled: truespring: redis: host: localhost # è¿žæŽ¥è¶…æ—¶æ—¶é—´ï¼ˆè®°å¾—æ·»åŠ å•ä½ï¼ŒDurationï¼‰ timeout: 10000ms # Redisé»˜è®¤æƒ…å†µä¸‹æœ‰16ä¸ªåˆ†ç‰‡ï¼Œè¿™é‡Œé…ç½®å…·ä½“ä½¿ç”¨çš„åˆ†ç‰‡ # database: 0 lettuce: pool: # è¿žæŽ¥æ± æœ€å¤§è¿žæŽ¥æ•°ï¼ˆä½¿ç”¨è´Ÿå€¼è¡¨ç¤ºæ²¡æœ‰é™åˆ¶ï¼‰ é»˜è®¤ 8 max-active: 8 # è¿žæŽ¥æ± æœ€å¤§é˜»å¡žç­‰å¾…æ—¶é—´ï¼ˆä½¿ç”¨è´Ÿå€¼è¡¨ç¤ºæ²¡æœ‰é™åˆ¶ï¼‰ é»˜è®¤ -1 max-wait: -1ms # è¿žæŽ¥æ± ä¸­çš„æœ€å¤§ç©ºé—²è¿žæŽ¥ é»˜è®¤ 8 max-idle: 8 # è¿žæŽ¥æ± ä¸­çš„æœ€å°ç©ºé—²è¿žæŽ¥ é»˜è®¤ 0 min-idle: 0 cache: # ä¸€èˆ¬æ¥è¯´æ˜¯ä¸ç”¨é…ç½®çš„ï¼ŒSpring Cache ä¼šæ ¹æ®ä¾èµ–çš„åŒ…è‡ªè¡Œè£…é… type: redis â‘¢ è‡ªå®šä¹‰é…ç½®é¡¹ é…ç½®é¡¹ é»˜è®¤å€¼ è¯´æ˜Ž scaffold.code.enabled false æ˜¯å¦å¼€å¯éªŒè¯ç  scaffold.code.cookie-name scaffold-code éªŒè¯ç é»˜è®¤cookieå scaffold.code.cache-name SCAFFOLD::CODE éªŒè¯ç é»˜è®¤ç¼“å­˜ scaffold.code.pool ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 éªŒè¯ç ç”Ÿæˆç­–ç•¥ï¼Œé»˜è®¤ï¼šå¤§å†™å­—æ¯+æ•°å­— scaffold.code.width 108 éªŒè¯ç å®½åº¦ scaffold.code.height 40 éªŒè¯ç é«˜åº¦ scaffold.code.length 4 éªŒè¯ç é•¿åº¦ â‘£ ç¤ºä¾‹ä»£ç  1234567891011121314151617181920212223242526272829@RestController@Slf4jpublic class DemoController &#123; @Autowired private ScaffoldCode scaffoldCode; @GetMapping(value = "/code/math.jpg", produces = MediaType.IMAGE_JPEG_VALUE) public ResponseEntity&lt;Resource&gt; mathCode(HttpServletResponse response) &#123; return scaffoldCode.generateMathCode(response); &#125; @GetMapping("/verify/math/&#123;code&#125;") public R&lt;Boolean&gt; verifyMathCode(HttpServletResponse response, @PathVariable String code) &#123; boolean flag = scaffoldCode.validateMath(response, code); return R.status(flag, "éªŒè¯ç é”™è¯¯"); &#125; @GetMapping(value = "/code/random.jpg", produces = MediaType.IMAGE_JPEG_VALUE) public ResponseEntity&lt;Resource&gt; randomCode(HttpServletResponse response) &#123; return scaffoldCode.generateRandomCode(response); &#125; @GetMapping("/verify/random/&#123;code&#125;") public R&lt;Boolean&gt; verifyCode(HttpServletResponse response, @PathVariable String code) &#123; boolean flag = scaffoldCode.validateRandom(response, code); return R.status(flag, "éªŒè¯ç é”™è¯¯"); &#125;&#125; 4.9. scaffold-notification é€šç”¨é€šçŸ¥ç»„ä»¶ ä¸»è¦åŠŸèƒ½ é’‰é’‰æœºå™¨äººé€šçŸ¥ï¼Œæ”¯æŒå¤šç§æ¶ˆæ¯ç±»åž‹ï¼ŒåŒ…æ‹¬textç±»åž‹ã€linkç±»åž‹ã€markdownç±»åž‹ã€æ•´ä½“è·³è½¬ActionCardç±»åž‹ã€ç‹¬ç«‹è·³è½¬ActionCardç±»åž‹ã€FeedCardç±»åž‹ çŸ­ä¿¡é€šçŸ¥ï¼Œé›†æˆé˜¿é‡Œå¤§é±¼çŸ­ä¿¡æœåŠ¡ï¼Œç¨³å®šã€å¿«é€Ÿ é‚®ä»¶é€šçŸ¥ï¼Œæ”¯æŒå¤šç§ç±»åž‹é‚®ä»¶ï¼ŒåŒ…æ‹¬ç®€å•æ–‡æœ¬é‚®ä»¶ã€HTMLæ¨¡æ¿é‚®ä»¶ã€é™„ä»¶ã€é™æ€èµ„æº ä½¿ç”¨æ–¹æ³• â‘  æ·»åŠ ä¾èµ– æŽ¨èä½¿ç”¨ scaffold-bom ç®¡ç† scaffold æ¨¡å—ç‰ˆæœ¬ï¼Œä½¿ç”¨æ–¹æ³•è¯·çœ‹æ–‡æ¡£ scaffold-notification æœ€æ–°ç‰ˆæœ¬: 12345&lt;dependency&gt; &lt;groupId&gt;com.xkcoding&lt;/groupId&gt; &lt;artifactId&gt;scaffold-notification&lt;/artifactId&gt; &lt;version&gt;$&#123;scaffold-notification.version&#125;&lt;/version&gt;&lt;/dependency&gt; â‘¡ åœ¨ application.yml ä¸­å¼€å¯ä¸åŒç±»åž‹çš„é€šçŸ¥é…ç½®ï¼Œå¦‚æžœä½¿ç”¨é‚®ä»¶é€šçŸ¥ç±»åž‹ï¼Œä¸€å®šéœ€è¦é¢å¤–é…ç½®é‚®ç®±ä¿¡æ¯ 123456789101112131415161718192021222324252627282930313233343536scaffold: notification: dingtalk: enabled: true # é’‰é’‰æœºå™¨äºº webhook åœ°å€ webhook: https://oapi.dingtalk.com/robot/send?access_token=xxxxxxxx email: enabled: true aliyun: enabled: true # é˜¿é‡Œäº‘ AccessKey ID access-key: *********** # é˜¿é‡Œäº‘ Access Key Secret secret-key: *********** # å‚è§é˜¿é‡Œå¤§é±¼çŸ­ä¿¡æœåŠ¡çš„æ¨¡æ¿ç®¡ç†ï¼Œæ ¼å¼ä¸ºï¼šæ¨¡ç‰ˆåç§°:æ¨¡ç‰ˆCODEï¼Œæ³¨æ„æ¨¡æ¿åç§°ä¸èƒ½ä¸ºä¸­æ–‡ channels: article_notification: SMS_160576086spring: mail: # é‚®ç®± smtp æœåŠ¡å™¨åœ°å€ host: smtp.qq.com # é‚®ç®± smtp æœåŠ¡å™¨ç«¯å£ï¼Œä¸€èˆ¬å­˜åœ¨sslå’Œéžsslçš„åŒºåˆ«ï¼Œæ¯”å¦‚QQé‚®ç®±sslç«¯å£ä¸º465ï¼Œéžsslç«¯å£ä¸º587 port: 465 # ä½ çš„é‚®ç®±åœ°å€ username: ********@qq.com # ä½ çš„é‚®ç®±å¯†ç  password: ******** protocol: smtp test-connection: true default-encoding: UTF-8 properties: mail.smtp.auth: true # ä¸‹é¢ä¸‰é¡¹æ ¹æ®è‡ªå·±é‚®ç®±æ˜¯å¦ä½¿ç”¨sslç«¯å£æ¥è®¾ç½®ï¼Œä½¿ç”¨sslä¸ºtrueï¼Œä¸ä½¿ç”¨sslä¸ºfalse mail.smtp.starttls.enable: true mail.smtp.starttls.required: true mail.smtp.ssl.enable: true â‘¢ è‡ªå®šä¹‰é…ç½®é¡¹ é…ç½®é¡¹ é»˜è®¤å€¼ è¯´æ˜Ž scaffold.notification.dingtalk.enabled false æ˜¯å¦å¯ç”¨é’‰é’‰æœºå™¨äººé€šçŸ¥ scaffold.notification.dingtalk.webhook æ—  é’‰é’‰æœºå™¨äººwebhookåœ°å€ scaffold.notification.aliyun.enabled false æ˜¯å¦å¯ç”¨é˜¿é‡Œå¤§é±¼çŸ­ä¿¡é€šçŸ¥ scaffold.notification.aliyun.access-key æ—  é˜¿é‡Œäº‘ AccessKey scaffold.notification.aliyun.secret-key æ—  é˜¿é‡Œäº‘ AccessSecret scaffold.notification.aliyun.channels æ—  æ¨¡æ¿ä¸Žæ¨¡æ¿CODEçš„æ˜ å°„å…³ç³»ï¼Œå‚è§é˜¿é‡Œå¤§é±¼çŸ­ä¿¡æœåŠ¡çš„æ¨¡æ¿ç®¡ç†ï¼Œæ ¼å¼ä¸ºï¼šæ¨¡ç‰ˆåç§°:æ¨¡ç‰ˆCODEï¼Œæ³¨æ„æ¨¡æ¿åç§°ä¸èƒ½ä¸ºä¸­æ–‡ scaffold.notification.email.enabled false æ˜¯å¦å¯ç”¨é‚®ç®±é€šçŸ¥ï¼Œå¦‚æžœå¯ç”¨ï¼Œä¸€å®šéœ€è¦é¢å¤–é…ç½®é‚®ç®±ä¿¡æ¯ scaffold.notification.email.prefix classpath:/email/ é‚®ä»¶æ¨¡æ¿ä½ç½® scaffold.notification.email.suffix .html é‚®ä»¶æ¨¡æ¿åŽç¼€ â‘£ ç¤ºä¾‹ä»£ç  åœ¨ application.yml ä¸­ï¼Œé…ç½®å¥½ä¸Šè¿°é…ç½®åŽï¼Œå¯å‚è€ƒå¦‚ä¸‹ä»£ç ï¼Œå®žçŽ°é’‰é’‰ã€çŸ­ä¿¡ã€é‚®ç®±ä¸‰ç§ç±»åž‹çš„æ¶ˆæ¯é€šçŸ¥ è¿™é‡Œé’‰é’‰æ¶ˆæ¯ï¼Œåªæ¼”ç¤ºäº† text ç±»åž‹å’Œ link ç±»åž‹ï¼Œå…¶ä½™ç±»åž‹ï¼Œå¯ä»¥ä¸¾ä¸€åä¸‰å®žçŽ°ï¼Œå®˜æ–¹æ–‡æ¡£åœ°å€ï¼šhttps://open-doc.dingtalk.com/microapp/serverapi2/qf2nxq 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133package com.xkcoding.scaffold.demo;import cn.hutool.core.io.resource.ResourceUtil;import com.google.common.collect.Maps;import com.xkcoding.scaffold.notification.constants.EmailType;import com.xkcoding.scaffold.notification.model.dingtalk.Attention;import com.xkcoding.scaffold.notification.model.dingtalk.Link;import com.xkcoding.scaffold.notification.model.dingtalk.LinkDingTalkMessage;import com.xkcoding.scaffold.notification.model.dingtalk.TextDingTalkMessage;import com.xkcoding.scaffold.notification.model.email.EmailMessage;import com.xkcoding.scaffold.notification.model.sms.SmsMessage;import com.xkcoding.scaffold.notification.service.dingtalk.DingTalkMessageSender;import com.xkcoding.scaffold.notification.service.email.EmailMessageSender;import com.xkcoding.scaffold.notification.service.sms.SmsAliyunMessageSender;import com.xkcoding.scaffold.test.ScaffoldBaseTest;import com.xkcoding.scaffold.test.ScaffoldTest;import lombok.extern.slf4j.Slf4j;import org.assertj.core.util.Lists;import org.junit.Test;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.boot.test.context.SpringBootTest;import java.io.File;import java.net.URL;import java.util.List;import java.util.Map;/** * &lt;p&gt; * é€šçŸ¥æµ‹è¯• * &lt;/p&gt; * * @package: com.xkcoding.scaffold.demo * @description: é€šçŸ¥æµ‹è¯• * @author: yangkai.shen * @date: Created in 2019-03-18 22:59 * @copyright: Copyright (c) 2019 * @version: V1.0 * @modified: yangkai.shen */@SpringBootTest@ScaffoldTest(profile = "prod", appName = "scaffold-notification-test")@Slf4jpublic class NotificationTest extends ScaffoldBaseTest &#123; @Autowired private DingTalkMessageSender dingTalkMessageSender; @Autowired private EmailMessageSender emailMessageSender; @Autowired private SmsAliyunMessageSender smsAliyunMessageSender; @Test public void testTextDingTalk() &#123; TextDingTalkMessage textDingTalkMessage = new TextDingTalkMessage(); textDingTalkMessage.setText(new TextDingTalkMessage.Text("ä½ å¥½ï¼Œæˆ‘æ˜¯é’‰é’‰æœºå™¨äºº")); textDingTalkMessage.setAt(new Attention(Lists.newArrayList( "17326075631"), false)); dingTalkMessageSender.execute(textDingTalkMessage); &#125; @Test public void testLinkDingTalk()&#123; LinkDingTalkMessage linkDingTalkMessage = new LinkDingTalkMessage(); Link link = new Link(); link.setMessageUrl("https://xkcoding.com"); link.setText("ä»£ç æ—¥è®°æ›´æ–°åšå®¢äº†ã€‚ã€‚ã€‚ã€‚ã€‚"); link.setTitle("åšå®¢æ›´æ–°"); linkDingTalkMessage.setLink(link); dingTalkMessageSender.execute(linkDingTalkMessage); &#125; @Test public void testSimpleEmail() &#123; EmailMessage emailMessage = new EmailMessage(); emailMessage.setEmailType(EmailType.SIMPLE); emailMessage.setTos(Lists.newArrayList("237497819@qq.com")); emailMessage.setFrom("xkcoding"); emailMessage.setSubject("ç®€å•é‚®ä»¶æ ‡é¢˜"); emailMessage.setContent("è¿™æ˜¯ä¸€å°ç®€å•é‚®ä»¶çš„å†…å®¹"); emailMessageSender.execute(emailMessage); &#125; @Test public void testMimeEmail() &#123; EmailMessage emailMessage = new EmailMessage(); emailMessage.setEmailType(EmailType.MIME); emailMessage.setTos(Lists.newArrayList("237497819@qq.com")); emailMessage.setFrom("xkcoding"); emailMessage.setSubject("å¤æ‚é‚®ä»¶æ ‡é¢˜"); // è®¾ç½®æ¨¡æ¿ï¼Œä½ç½®ï¼šresources/email/template.html emailMessage.setTemplate("template"); // è®¾ç½®å˜é‡ Map&lt;String, Object&gt; params = Maps.newHashMap(); params.put("project", "Spring Boot Demo"); params.put("author", "Yangkai.Shen"); params.put("url", "https://github.com/xkcoding/spring-boot-demo"); emailMessage.setParams(params); // è®¾ç½®é™„ä»¶ï¼Œæ–‡ä»¶ä½ç½®ï¼šresources/db/data-h2.sqlã€resources/db/schema-h2.sql URL data = ResourceUtil.getResource("db/data-h2.sql"); URL schema = ResourceUtil.getResource("db/schema-h2.sql"); List&lt;EmailMessage.Attachment&gt; attachments = Lists.newArrayList(new EmailMessage.Attachment("data.sql", new File(data .getPath())), new EmailMessage.Attachment("schema.sql", new File(schema.getPath()))); emailMessage.setAttachments(attachments); // è®¾ç½®é™æ€èµ„æºï¼Œå›¾ç‰‡ä½ç½®ï¼šresources/static/favicon.png URL favicon = ResourceUtil.getResource("static/favicon.png"); List&lt;EmailMessage.StaticResource&gt; staticResources = Lists.newArrayList(new EmailMessage.StaticResource("favicon", new File(favicon .getPath()))); emailMessage.setStaticResources(staticResources); emailMessageSender.execute(emailMessage); &#125; @Test public void testSmsAliyunMessageSender() &#123; SmsMessage smsMessage = new SmsMessage(); smsMessage.setMobile("17326075631"); Map&lt;String, String&gt; params = Maps.newHashMap(); // æ ¹æ®çŸ­ä¿¡æ¨¡æ¿é‡Œçš„å˜é‡è®¾ç½®å‚æ•° // æ­¤å¤„æˆ‘çš„æ¨¡æ¿å†…å®¹ä¸ºï¼šå°Šæ•¬çš„è¯»è€…ï¼Œä»£ç æ—¥è®°å‘å¸ƒæ–‡ç« ã€Š$&#123;article&#125;ã€‹ï¼Œæ¬¢è¿Žé˜…è¯»ï¼ params.put("article", "scaffold-doc"); smsMessage.setParams(params); smsMessage.setSignName("ä»£ç æ—¥è®°"); smsMessage.setTemplate("article_notification"); smsMessage.setType("çŸ­ä¿¡é€šçŸ¥"); smsAliyunMessageSender.execute(smsMessage); &#125;&#125; é‚®ä»¶æ¨¡æ¿ï¼Œä½ç½®ï¼šresources/email/template.html 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051&lt;!DOCTYPE html&gt;&lt;html lang="en" xmlns:th="http://www.thymeleaf.org"&gt;&lt;head&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;SpringBootDemo(å…¥é—¨SpringBootçš„é¦–é€‰Demo)&lt;/title&gt; &lt;style&gt; body &#123; text-align: center; margin-left: auto; margin-right: auto; &#125; #welcome &#123; text-align: center; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;div id="welcome"&gt; &lt;div style="text-align: center; padding: 10px"&gt;&lt;img src="cid:favicon"&gt;&lt;/div&gt; &lt;h3&gt;æ¬¢è¿Žä½¿ç”¨ &lt;span th:text="$&#123;project&#125;"&gt;&lt;/span&gt; - Powered By &lt;span th:text=" $&#123;author&#125;"&gt;&lt;/span&gt;&lt;/h3&gt; &lt;span th:text="$&#123;url&#125;"&gt;&lt;/span&gt; &lt;div style="text-align: center; padding: 10px"&gt; &lt;a style="text-decoration: none;" href="#" th:href="@&#123;$&#123;url&#125;&#125;" target="_bank"&gt; &lt;strong&gt;spring-boot-demoï¼Œå…¥é—¨Spring Bootçš„é¦–é€‰Demoï¼:)&lt;/strong&gt; &lt;/a&gt; &lt;/div&gt; &lt;div style="text-align: center; padding: 4px"&gt; å¦‚æžœå¯¹ä½ æœ‰å¸®åŠ©,è¯·ä»»æ„æ‰“èµ &lt;/div&gt; &lt;div style="width: 100%;height: 100%;text-align: center;display: flex"&gt; &lt;div style="flex: 1;"&gt;&lt;/div&gt; &lt;div style="display: flex;width: 400px;"&gt; &lt;div style="flex: 1;text-align: center;"&gt; &lt;div&gt; &lt;img width="180px" height="180px" src="http://xkcoding.com/resources/wechat-reward-image.png"&gt; &lt;/div&gt; &lt;div&gt;å¾®ä¿¡æ‰“èµ&lt;/div&gt; &lt;/div&gt; &lt;div style="flex: 1;text-align: center;"&gt; &lt;div&gt;&lt;img width="180px" height="180px" src="http://xkcoding.com/resources/alipay-reward-image.png"&gt; &lt;/div&gt; &lt;div&gt;æ”¯ä»˜å®æ‰“èµ&lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;div style="flex: 1;"&gt;&lt;/div&gt; &lt;/div&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; â‘¤ æ•ˆæžœå›¾ é’‰é’‰æ¶ˆæ¯ ç®€å•é‚®ä»¶ å¤æ‚é‚®ä»¶ çŸ­ä¿¡ â‘¥ æ–‡æ¡£å‚è€ƒ é’‰é’‰æœºå™¨äººï¼šhttps://open-doc.dingtalk.com/microapp/serverapi2/qf2nxq é˜¿é‡Œå¤§é±¼ï¼šhttps://help.aliyun.com/document_detail/101300.html 4.10. scaffold-codegen ä»£ç ç”Ÿæˆå™¨ ä¸»è¦åŠŸèƒ½ æ”¯æŒç”Ÿæˆå‰ç«¯apiã€Controllerã€Mapperã€Serviceã€Modelä»£ç ï¼Œæš‚æ—¶ä»…æ”¯æŒmysqlæ•°æ®æº Controllerã€Modelä»£ç é›†æˆswaggeræ³¨è§£ æä¾›å‰ç«¯ä¸‹è½½é¡µé¢ ä½¿ç”¨æ–¹æ³• â‘  æ·»åŠ ä¾èµ– æŽ¨èä½¿ç”¨ scaffold-bom ç®¡ç† scaffold æ¨¡å—ç‰ˆæœ¬ï¼Œä½¿ç”¨æ–¹æ³•è¯·çœ‹æ–‡æ¡£ scaffold-codegen æœ€æ–°ç‰ˆæœ¬: 12345&lt;dependency&gt; &lt;groupId&gt;com.xkcoding&lt;/groupId&gt; &lt;artifactId&gt;scaffold-codegen&lt;/artifactId&gt; &lt;version&gt;$&#123;scaffold-codegen.version&#125;&lt;/version&gt;&lt;/dependency&gt; â‘¡ è‡ªå®šä¹‰é…ç½®é¡¹ é…ç½®é¡¹ é»˜è®¤å€¼ è¯´æ˜Ž scaffold.codegen.author com.xkcoding åŸºç¡€åŒ…å scaffold.codegen.base-package-name codegen æ¨¡å—å scaffold.codegen.module-name Yangkai.Shen ä½œè€… scaffold.codegen.table-prefix tb_ è¡¨å‰ç¼€(ç±»åä¸ä¼šåŒ…å«è¡¨å‰ç¼€) â‘¢ åœ¨application.ymlä¸­æ·»åŠ æ•°æ®æºä¿¡æ¯ 123456spring: datasource: driver-class-name: com.mysql.cj.jdbc.Driver url: jdbc:mysql://localhost:3306/spring-boot-demo username: root password: root â‘£ å¯åŠ¨é¡¹ç›®ï¼Œè®¿é—® http://localhost:8080/demo/codegen.html æ³¨æ„ï¼šå¦‚æžœå½“å‰ scaffold-launcher é…ç½®çš„ spring.profiles.active çŽ¯å¢ƒæ˜¯ devã€test åˆ™å¯ä»¥è®¿é—®æŽ¥å£æ–‡æ¡£ï¼Œå¦‚æžœæ˜¯ prod åˆ™è®¿é—®ä¸åˆ°ã€‚ TODO scaffold-cache é€šç”¨åŸºäºŽredisæˆ–è€…ehcacheçš„ç¼“å­˜é…ç½®ï¼Œè®¾è®¡ç¼“å­˜keyï¼Œä¿è¯å…¨ç³»ç»Ÿkeyç»Ÿä¸€ scaffold-auth é€šç”¨è®¤è¯æŽˆæƒé…ç½®]]></content>
      <categories>
        <category>å¼€æº</category>
        <category>scaffold</category>
      </categories>
      <tags>
        <tag>spring boot</tag>
        <tag>scaffold</tag>
        <tag>å¼€æº</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨MybatisåŠ¨æ€SQLæž„å»ºé€šç”¨è‡ªå®šä¹‰é«˜çº§æŸ¥è¯¢]]></title>
    <url>%2F2019%2F02%2F18%2Fuse-mybatis-dynamic-sql-to-build-common-custom-advance-query.html</url>
    <content type="text"><![CDATA[å‰è¨€ åŠ¨æ€SQLæ˜¯Mybatisä¸­æœ€å¼ºå¤§çš„ç‰¹æ€§ä¹‹ä¸€ã€‚å®žé™…å¼€å‘ä¸­ï¼Œæ•°æ®çš„æŸ¥è¯¢æ¡ä»¶æ˜¯åŠ¨æ€å¤šå˜çš„ï¼Œå› æ­¤åŠ¨æ€SQLå¯ä»¥å¾ˆæ–¹ä¾¿çš„æž„å»ºå¤šæ¡ä»¶çš„ where è¯­å¥çš„æ‹¼è£…ã€‚ä½†æ˜¯whereæ¡ä»¶é‡Œçš„æŸ¥è¯¢æ¡ä»¶è·Ÿè¡¨ä¸­çš„å­—æ®µè¿˜æ˜¯æ¯æ¯ç›¸å…³ï¼Œæˆ‘ä»¬åœ¨ç¼–å†™*Mapper.xml æ–‡ä»¶çš„æ—¶å€™ï¼Œè¿˜æ˜¯éœ€è¦åœ¨ &lt;where&gt; èŠ‚ç‚¹é‡Œå†™ç¼–å†™å¾ˆå¤šçš„ &lt;if test=&quot;condition&quot;&gt; æ¡ä»¶ã€‚ç¨‹åºçŒ¿éƒ½æ˜¯ä¸€ç§çˆ±å·æ‡’çš„ç‰©ç§ï¼ŒäºŽæ˜¯ä¹Žï¼Œä¾¿æœ‰äº†æ­¤æ–‡çš„ä¸»é¢˜ã€Žä½¿ç”¨MybatisåŠ¨æ€SQLæž„å»ºé€šç”¨è‡ªå®šä¹‰é«˜çº§æŸ¥è¯¢ã€ã€‚è¯ä¸å¤šè¯´ï¼Œè¿›å…¥æ­£é¢˜ã€‚ 1. æ€è·¯ æˆ‘ä»¬éœ€è¦æž„å»ºé€šç”¨çš„è‡ªå®šä¹‰é«˜çº§æŸ¥è¯¢ï¼Œé‚£ä¹ˆé¦–å…ˆæœ‰ä»¥ä¸‹å‡ ä¸ªå¿…é¡»æ»¡è¶³çš„ç‚¹ï¼š æ»¡è¶³é€šç”¨çš„è¦æ±‚ï¼Œé‚£ä¹ˆæŸ¥è¯¢å­—æ®µå°±ä¸èƒ½å†™æ­»åœ¨ &lt;where&gt; èŠ‚ç‚¹ä¸­ã€‚ æ»¡è¶³é«˜çº§æŸ¥è¯¢çš„è¦æ±‚ï¼Œé‚£ä¹ˆæŸ¥è¯¢æ¡ä»¶çš„ä¸ªæ•°å°±æ˜¯ä¸ç¡®å®šçš„ã€‚ æ»¡è¶³è‡ªå®šä¹‰çš„è¦æ±‚ï¼Œé‚£ä¹ˆæŸ¥è¯¢æ“ä½œç¬¦è‚¯å®šä¸å¯ä»¥é™æ­»æ˜¯ = æˆ–è€… like ç­‰ã€‚ æ ¹æ®ä¸Šé¢æå‡ºè¦æ±‚ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªæŸ¥è¯¢å‚æ•°åŽ»æŽ¥æ”¶å‰ç«¯ä¼ åˆ°åŽå°çš„æŸ¥è¯¢æ¡ä»¶ã€‚æŸ¥è¯¢æ¡ä»¶éœ€è¦æ»¡è¶³3ä¸ªè¦ç´ ï¼šâ‘ æŸ¥è¯¢å­—æ®µâ‘¡æŸ¥è¯¢æ“ä½œç¬¦â‘¢æŸ¥è¯¢æ•°æ®ã€‚å½“æˆ‘ä»¬æŽ¥æ”¶åˆ°æŸ¥è¯¢æ¡ä»¶çš„æ—¶å€™ï¼Œæ ¹æ®åŠ¨æ€SQLçš„è¯­æ³•æž„å»ºå‡ºåŠ¨æ€æŸ¥è¯¢æ¡ä»¶ã€‚ 2. å®žçŽ° æ­¥éª¤ä¸€ï¼šå®šä¹‰é«˜çº§æŸ¥è¯¢æ¡ä»¶æ¨¡åž‹ AdcanceQuery.java 12345678910111213141516171819202122232425262728293031323334package com.xkcoding.demo.model.query;import lombok.Data;import java.util.List;/** * &lt;p&gt; * é«˜çº§æœç´¢æ¡ä»¶ * &lt;/p&gt; * * @package: com.xkcoding.demo.model.query * @description: é«˜çº§æœç´¢æ¡ä»¶ * @author: yangkai.shen * @date: Created in 2019-02-14 15:33 * @copyright: Copyright (c) 2019 * @version: V1.0 * @modified: yangkai.shen */@Datapublic class AdvanceQuery &#123; /** * æŸ¥è¯¢æ¡ä»¶ */ private String key; /** * æŸ¥è¯¢æ“ä½œç¬¦ */ private String op; /** * æŸ¥è¯¢å†…å®¹ */ private List&lt;Object&gt; value;&#125; æ­¥éª¤äºŒï¼šä¿®æ”¹å¯¹åº”çš„Mapper Javaæ–‡ä»¶ UserMapper.java 123456789101112131415161718192021222324252627282930313233package com.xkcoding.demo.mapper;import java.util.List;import com.xkcoding.demo.common.MyMapper;import com.xkcoding.demo.model.User;import com.xkcoding.demo.model.query.AdvanceQuery;import org.apache.ibatis.annotations.Param;import org.springframework.stereotype.Component;/** * &lt;p&gt; * UserMapper * &lt;/p&gt; * * @package: com.xkcoding.demo.mapper * @description: UserMapper * @author: yangkai.shen * @date: Created in 2019-02-14 15:33 * @copyright: Copyright (c) 2019 * @version: V1.0 * @modified: yangkai.shen */@Componentpublic interface UserMapper extends MyMapper&lt;User&gt; &#123; /** * æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨ * * @param advanceQueryList é«˜çº§æœç´¢æ¡ä»¶ * @return ç”¨æˆ·åˆ—è¡¨ */ List&lt;User&gt; selectList(@Param("advanceQuery") List&lt;AdvanceQuery&gt; advanceQueryList);&#125; æ­¥éª¤ä¸‰ï¼šä¿®æ”¹å¯¹åº”çš„Mapper XMLæ–‡ä»¶ï¼Œæ·»åŠ é«˜çº§æŸ¥è¯¢SQLç‰‡æ®µ UserMapper.xml 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;&lt;mapper namespace="com.xkcoding.demo.mapper.UserMapper"&gt; &lt;resultMap id="BaseResultMap" type="com.xkcoding.demo.model.User"&gt; &lt;id column="id" jdbcType="INTEGER" property="id"/&gt; &lt;result column="username" jdbcType="VARCHAR" property="username"/&gt; &lt;result column="dept_id" jdbcType="INTEGER" property="deptId"/&gt; &lt;result column="gender" jdbcType="INTEGER" property="gender"/&gt; &lt;result column="nickname" jdbcType="VARCHAR" property="nickname"/&gt; &lt;result column="open_id" jdbcType="VARCHAR" property="openId"/&gt; &lt;result column="birthday" jdbcType="Date" property="birthday"/&gt; &lt;result column="last_login_time" jdbcType="Date" property="lastLoginTime"/&gt; &lt;result column="last_ip" jdbcType="VARCHAR" property="lastIp"/&gt; &lt;result column="lock" jdbcType="INTEGER" property="lock"/&gt; &lt;/resultMap&gt; &lt;select id="selectList" resultType="com.xkcoding.demo.model.User"&gt; SELECT temp.* FROM ( SELECT t.* FROM t_user t )temp &lt;where&gt; &lt;include refid="advance_query_sql"/&gt; &lt;/where&gt; &lt;/select&gt; &lt;sql id="advance_query_sql"&gt; &lt;foreach item="item" collection="advanceQuery" open=" AND " separator=" AND " close=" "&gt; &lt;choose&gt; &lt;when test="item.op != null and item.op == 'eq'"&gt; temp.$&#123;item.key&#125; = #&#123;item.value[0]&#125; &lt;/when&gt; &lt;when test="item.op != null and item.op == 'gte'"&gt; temp.$&#123;item.key&#125; &amp;gt;= #&#123;item.value[0]&#125; &lt;/when&gt; &lt;when test="item.op != null and item.op == 'lte'"&gt; temp.$&#123;item.key&#125; &amp;lt;= #&#123;item.value[0]&#125; &lt;/when&gt; &lt;when test="item.op != null and item.op == 'between'"&gt; temp.$&#123;item.key&#125; BETWEEN #&#123;item.value[0]&#125; AND #&#123;item.value[1]&#125; &lt;/when&gt; &lt;when test="item.op != null and item.op == 'in'"&gt; temp.$&#123;item.key&#125; IN &lt;foreach item="value" collection="item.value" open="(" separator="," close=")"&gt; #&#123;value&#125; &lt;/foreach&gt; &lt;/when&gt; &lt;when test="item.op != null and item.op == 'no'"&gt; (temp.$&#123;item.key&#125; IS NULL OR trim(temp.$&#123;item.key&#125;) = '') &lt;/when&gt; &lt;when test="item.op != null and item.op == 'yes'"&gt; (temp.$&#123;item.key&#125; IS NOT NULL AND trim(temp.$&#123;item.key&#125;) != '') &lt;/when&gt; &lt;when test="item.op != null and item.op == 'notin'"&gt; temp.$&#123;item.key&#125; NOT IN &lt;foreach item="value" collection="item.value" open="(" separator="," close=")"&gt; #&#123;value&#125; &lt;/foreach&gt; &lt;/when&gt; &lt;when test="item.op != null and item.op == 'like'"&gt; &lt;if test="item.value.size == 1"&gt; temp.$&#123;item.key&#125; LIKE CONCAT("%", #&#123;item.value[0]&#125;, "%") &lt;/if&gt; &lt;if test="item.value.size &gt; 1"&gt; &lt;foreach item="value" collection="item.value" open="(" separator=" OR " close=")"&gt; temp.$&#123;item.key&#125; LIKE CONCAT("%", #&#123;value&#125;, "%") &lt;/foreach&gt; &lt;/if&gt; &lt;/when&gt; &lt;otherwise&gt; 1 = 1 &lt;/otherwise&gt; &lt;/choose&gt; &lt;/foreach&gt; &lt;/sql&gt;&lt;/mapper&gt; è¿™é‡Œæ”¹é€ ä¹‹å‰çš„æŸ¥è¯¢è¯­å¥ï¼Œåªéœ€è¦åœ¨å¤–å±‚å†åŒ…ä¸€å±‚ï¼Œå¹¶ä¸”åˆ«åæ”¹æˆtempå³å¯ã€‚ å¦‚ä¸‹ï¼š 123&lt;select&gt; SELECT * FROM table where xxx;&lt;/select&gt; æ”¹ä¸ºï¼š 123456789&lt;select&gt; SELECT temp.* FROM ( SELECT * FROM table where xxx; )temp &lt;where&gt; &lt;include refid="advance_query_sql"/&gt; &lt;/where&gt;&lt;/select&gt; æ­¥éª¤å››ï¼šControllerå±‚ æŸ¥è¯¢æ–¹æ³•ç”± @GetMapping æ”¹ä¸º @PostMappingï¼Œå‚æ•° @RequestBody List&lt;AdvanceQuery&gt; advanceQueryList 3. æµ‹è¯• ä½¿ç”¨ PostMan æµ‹è¯•ï¼Œå‚æ•°ä½¿ç”¨ Body å‘é€ json æ•°æ®ç±»ä¼¼å¦‚ä¸‹æ ¼å¼ï¼š 1234567891011121314151617[ &#123; "key":"username", "op":"like", "value":["xk","coding"] &#125;, &#123; "key":"gender", "op":"eq", "value":[1] &#125;, &#123; "key":"birthday", "op":"between", "value":["1994-11-01 00:00:00","1994-12-01 00:00:00"] &#125;] 4. æ“ä½œç¬¦è¯´æ˜Ž å†…å®¹ å«ä¹‰ valueå€¼å¤‡æ³¨ eq ç­‰äºŽ æœ‰ä¸”åªæœ‰ 1 ä¸ª gte å¤§äºŽç­‰äºŽ æœ‰ä¸”åªæœ‰ 1 ä¸ª lte å°äºŽç­‰äºŽ æœ‰ä¸”åªæœ‰ 1 ä¸ª between ä»‹äºŽ æœ‰ä¸”åªæœ‰ 2 ä¸ª in åŒ…å« å¤§äºŽç­‰äºŽ 1 ä¸ª notin ä¸åŒ…å« å¤§äºŽç­‰äºŽ 1 ä¸ª no ä¸å­˜åœ¨ ç©ºæ•°ç»„ yes å­˜åœ¨ ç©ºæ•°ç»„ like æ¨¡ç³Š å¤§äºŽç­‰äºŽ 1 ä¸ªï¼Œå¤šä¸ª value æ—¶ï¼Œä¼šä½¿ç”¨ OR æž„å»ºæŸ¥è¯¢æ¡ä»¶ 5. æ€è€ƒ ç›®å‰æ”¯æŒçš„æ“ä½œç¬¦å°±æ˜¯ä»¥ä¸Šå‡ ç§ï¼Œä½†æ˜¯åŸºæœ¬å¤Ÿç”¨ï¼Œå…¶ä½™è¯­æ³•è¿˜éœ€è¦è‡ªå·±æ‰©å±•ã€‚ ç›®å‰ä»…æ”¯æŒå¤šæ¡ä»¶ AND æ‹¼æŽ¥ã€‚ xmlæ¨¡æ¿ç›®å‰æ²¡æœ‰ç±»ä¼¼ç»§æ‰¿çš„ç‰¹æ€§ï¼Œæ‰€ä»¥è¿™ä¸ªsqlç‰‡æ®µéœ€è¦åœ¨æ¯ä¸ªä½¿ç”¨åˆ°çš„åœ°æ–¹éƒ½å†™ä¸€éï¼Œé€ æˆä»£ç å†—ä½™ã€‚åŽæœŸå¯ä»¥å‚è€ƒMybatisæ‹¦æˆªå™¨çš„ç‰¹æ€§ï¼Œå¯¹æŸ¥è¯¢SQLè¿›è¡Œå°è£…ï¼Œè§£å†³å†—ä½™ã€‚ 6. å‚è€ƒ MyBatis 3 | åŠ¨æ€SQL - MyBatis.org]]></content>
      <categories>
        <category>ä»£ç ç‰‡æ®µ</category>
        <category>mybatis</category>
      </categories>
      <tags>
        <tag>mybatis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼ä¹‹åˆ›å»ºåž‹è®¾è®¡æ¨¡å¼-å·¥åŽ‚æ–¹æ³•æ¨¡å¼]]></title>
    <url>%2F2019%2F02%2F15%2Fdesign-pattern-factory-method.html</url>
    <content type="text"><![CDATA[1. æ¨¡å¼ç®€ä»‹ å·¥åŽ‚æ–¹æ³•æ¨¡å¼(Factory Method Pattern)ï¼šåˆç§°ä¸ºå·¥åŽ‚æ¨¡å¼ï¼Œå±žäºŽåˆ›å»ºåž‹è®¾è®¡æ¨¡å¼ã€‚åœ¨å·¥åŽ‚æ–¹æ³•æ¨¡å¼ä¸­ï¼Œå·¥åŽ‚çˆ¶ç±»è´Ÿè´£å®šä¹‰åˆ›å»ºå¯¹è±¡çš„å…¬å…±æŽ¥å£ï¼Œå·¥åŽ‚å­ç±»è´Ÿè´£ç”Ÿæˆå…·ä½“çš„å¯¹è±¡ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯å°†å…·ä½“ç±»çš„å®žä¾‹åŒ–æ“ä½œå»¶è¿Ÿåˆ°å·¥åŽ‚å­ç±»ä¸­å®Œæˆï¼Œå³é€šè¿‡å·¥åŽ‚å­ç±»æ¥ç¡®å®šç©¶ç«Ÿåº”è¯¥å®žä¾‹åŒ–å“ªä¸€ä¸ªå…·ä½“å¯¹è±¡ã€‚æœ¬æ–‡å°†ä½¿ç”¨ ç³–æžœå·¥åŽ‚ç”Ÿäº§ä¸åŒå£å‘³çš„ç³–æžœ è¿™ä¸ªå®žé™…åœºæ™¯ï¼Œç”¨ä»£ç æ¥å®žçŽ° å·¥åŽ‚æ–¹æ³•æ¨¡å¼ã€‚ 2. æ¨¡å¼è§’è‰² å·¥åŽ‚æ–¹æ³•æ¨¡å¼åŒ…å«ä»¥ä¸‹4ç§è§’è‰²ï¼š æŠ½è±¡å®žä½“(Candy)ï¼šç³–æžœç±»åŸºç±» å…·ä½“å®žä½“å®žçŽ°(LemonCandy å’Œ WatermelonCandy)ï¼šå…·ä½“å£å‘³ç³–æžœå®žçŽ° æŠ½è±¡å·¥åŽ‚(CandyFactory)ï¼šç³–æžœå·¥åŽ‚ç±»åŸºç±» å…·ä½“å·¥åŽ‚å®žçŽ°(LemonCandyFactory å’Œ WatermelonCandyFactory)ï¼šå…·ä½“å£å‘³ç³–æžœå·¥åŽ‚ç±»å®žçŽ° 3. UMLå›¾ä¾‹ 4. ä»£ç å®žçŽ° 4.1. æ­¥éª¤ä¸€ï¼šåˆ›å»ºæŠ½è±¡ç³–æžœç±» Candy.java 1234567891011121314151617181920/** * &lt;p&gt; * ç³–æžœæŠ½è±¡ç±» * &lt;/p&gt; * * @package: com.xkcoding.design.pattern.creational.factorymethod * @description: ç³–æžœæŠ½è±¡ç±» * @author: yangkai.shen * @date: Created in 2019-02-14 11:28 * @copyright: Copyright (c) 2019 * @version: V1.0 * @modified: yangkai.shen */public abstract class Candy &#123; /** * å£å‘³ */ public abstract void taste();&#125; 4.2. æ­¥éª¤äºŒï¼šåˆ›å»ºæŠ½è±¡ç³–æžœå·¥åŽ‚ç±» CandyFactory.java 123456789101112131415161718192021/** * &lt;p&gt; * ç³–æžœå·¥åŽ‚æŠ½è±¡ç±» * &lt;/p&gt; * * @package: com.xkcoding.design.pattern.creational.factorymethod * @description: ç³–æžœå·¥åŽ‚æŠ½è±¡ç±» * @author: yangkai.shen * @date: Created in 2019-02-14 11:29 * @copyright: Copyright (c) 2019 * @version: V1.0 * @modified: yangkai.shen */public abstract class CandyFactory &#123; /** * ç”Ÿäº§ç³–æžœ * * @return å¯¹åº”å£å‘³çš„ç³–æžœ */ public abstract Candy produceCandy();&#125; 4.3. æ­¥éª¤ä¸‰ï¼šåˆ›å»ºå…·ä½“çš„ä¸åŒå£å‘³çš„ç³–æžœç±» LemonCandy.java 12345678910111213141516171819202122/** * &lt;p&gt; * æŸ æª¬å‘³ç³–æžœ * &lt;/p&gt; * * @package: com.xkcoding.design.pattern.creational.factorymethod * @description: æŸ æª¬å‘³ç³–æžœ * @author: yangkai.shen * @date: Created in 2019-02-14 11:28 * @copyright: Copyright (c) 2019 * @version: V1.0 * @modified: yangkai.shen */public class LemonCandy extends Candy &#123; /** * å£å‘³ */ @Override public void taste() &#123; System.out.println("æŸ æª¬å‘³"); &#125;&#125; WatermelonCandy.java 12345678910111213141516171819202122/** * &lt;p&gt; * è¥¿ç“œå‘³ç³–æžœ * &lt;/p&gt; * * @package: com.xkcoding.design.pattern.creational.factorymethod * @description: è¥¿ç“œå‘³ç³–æžœ * @author: yangkai.shen * @date: Created in 2019-02-14 11:28 * @copyright: Copyright (c) 2019 * @version: V1.0 * @modified: yangkai.shen */public class WatermelonCandy extends Candy &#123; /** * å£å‘³ */ @Override public void taste() &#123; System.out.println("è¥¿ç“œå‘³"); &#125;&#125; 4.4. æ­¥éª¤å››ï¼šåˆ›å»ºå…·ä½“çš„ä¸åŒå£å‘³çš„ç³–æžœå·¥åŽ‚ç±» LemonCandyFactory.java 123456789101112131415161718192021222324/** * &lt;p&gt; * æŸ æª¬å‘³ç³–æžœå·¥åŽ‚ç±» * &lt;/p&gt; * * @package: com.xkcoding.design.pattern.creational.factorymethod * @description: æŸ æª¬å‘³ç³–æžœå·¥åŽ‚ç±» * @author: yangkai.shen * @date: Created in 2019-02-14 11:30 * @copyright: Copyright (c) 2019 * @version: V1.0 * @modified: yangkai.shen */public class LemonCandyFactory extends CandyFactory &#123; /** * ç”Ÿäº§æŸ æª¬å‘³ç³–æžœ * * @return æŸ æª¬å‘³ç³–æžœ */ @Override public Candy produceCandy() &#123; return new LemonCandy(); &#125;&#125; WatermelonCandyFactory.java 123456789101112131415161718192021222324/** * &lt;p&gt; * è¥¿ç“œå‘³ç³–æžœå·¥åŽ‚ç±» * &lt;/p&gt; * * @package: com.xkcoding.design.pattern.creational.factorymethod * @description: è¥¿ç“œå‘³ç³–æžœå·¥åŽ‚ç±» * @author: yangkai.shen * @date: Created in 2019-02-14 11:30 * @copyright: Copyright (c) 2019 * @version: V1.0 * @modified: yangkai.shen */public class WatermelonCandyFactory extends CandyFactory &#123; /** * ç”Ÿäº§è¥¿ç“œå‘³ç³–æžœ * * @return è¥¿ç“œå‘³ç³–æžœ */ @Override public Candy produceCandy() &#123; return new WatermelonCandy(); &#125;&#125; 4.5. æ­¥éª¤äº”ï¼š æµ‹è¯• PatternTest.java 1234567891011121314151617181920212223242526272829import com.xkcoding.design.pattern.creational.factorymethod.Candy;import com.xkcoding.design.pattern.creational.factorymethod.CandyFactory;import com.xkcoding.design.pattern.creational.factorymethod.LemonCandyFactory;import com.xkcoding.design.pattern.creational.factorymethod.WatermelonCandyFactory;/** * &lt;p&gt; * å·¥åŽ‚æ–¹æ³•æ¨¡å¼æµ‹è¯•ç±» * &lt;/p&gt; * * @package: com.xkcoding.design.pattern.creational.factorymethod.run * @description: å·¥åŽ‚æ–¹æ³•æ¨¡å¼æµ‹è¯•ç±» * @author: yangkai.shen * @date: Created in 2019-02-14 14:54 * @copyright: Copyright (c) 2019 * @version: V1.0 * @modified: yangkai.shen */public class PatternTest &#123; public static void main(String[] args) &#123; CandyFactory factory1 = new LemonCandyFactory(); Candy candy1 = factory1.produceCandy(); candy1.taste(); CandyFactory factory2 = new WatermelonCandyFactory(); Candy candy2 = factory2.produceCandy(); candy2.taste(); &#125;&#125; 5. åº”ç”¨ 12// JDKä¸­çš„åº”ç”¨// èŽ·å–æ—¥åŽ†å¯¹è±¡ -&gt; Calendar.getInstance() -&gt; createCalendar(TimeZone zone,Locale aLocale) 6. åœºæ™¯ å·¥åŽ‚ç±»è´Ÿè´£åˆ›å»ºçš„å¯¹è±¡æ¯”è¾ƒå°‘ï¼šç”±äºŽåˆ›å»ºçš„å¯¹è±¡è¾ƒå°‘ï¼Œä¸ä¼šé€ æˆå·¥åŽ‚æ–¹æ³•ä¸­çš„ä¸šåŠ¡é€»è¾‘å¤ªè¿‡å¤æ‚ã€‚ å®¢æˆ·ç«¯åªçŸ¥é“ä¼ å…¥å·¥åŽ‚ç±»çš„å‚æ•°ï¼Œå¯¹äºŽå¦‚ä½•åˆ›å»ºå¯¹è±¡ä¸å…³å¿ƒï¼šå®¢æˆ·ç«¯æ—¢ä¸éœ€è¦å…³å¿ƒåˆ›å»ºç»†èŠ‚ï¼Œç”šè‡³è¿žç±»åéƒ½ä¸éœ€è¦è®°ä½ï¼Œåªéœ€è¦çŸ¥é“ç±»åž‹æ‰€å¯¹åº”çš„å‚æ•°ã€‚ 7. ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ï¼š ä»¥æœ¬ä¾‹ä¸ºä¾‹ï¼Œ1ã€æ‰©å±•æ€§é«˜ï¼Œå¦‚æžœæƒ³å¢žåŠ ä¸€ä¸ªå…·ä½“å£å‘³çš„ç³–æžœï¼Œåªéœ€è¦æ·»åŠ å…·ä½“å£å‘³çš„ç³–æžœå®žçŽ°ï¼ŒåŒæ—¶æ·»åŠ å…·ä½“å£å‘³çš„ç³–æžœå·¥åŽ‚å³å¯ã€‚2ã€å±è”½ç³–æžœçš„å…·ä½“å®žçŽ°ï¼Œè°ƒç”¨æ–¹åªå…³å¿ƒæŠ½è±¡å®žä½“çš„é€šç”¨æŽ¥å£åœ¨å…·ä½“å£å‘³ç³–æžœç±»ä¸­çš„ä¸åŒå®žçŽ°ã€‚ ç¼ºç‚¹ï¼š ä»¥æœ¬ä¾‹ä¸ºä¾‹ï¼Œæ¯å¢žåŠ ä¸€ç§ç³–æžœå£å‘³ï¼Œéƒ½éœ€è¦å¢žåŠ ä¸€ç§å…·ä½“çš„å®žçŽ°ç±»ï¼ŒåŒæ—¶å¢žåŠ å…·ä½“çš„å·¥åŽ‚ç±»ï¼Œå¦‚æžœç³»ç»Ÿä¸­å­˜åœ¨å¾ˆå¤šä¸åŒå£å‘³çš„ç³–æžœï¼Œåˆ™ä¼šå¯¼è‡´ç±»çš„æ•°é‡æˆå€å¢žåŠ ï¼Œå¢žåŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦ã€‚ 8. å®Œæ•´ä»£ç åœ°å€ https://github.com/xkcoding/design-pattern/tree/master/src/main/java/com/xkcoding/design/pattern/creational/factorymethod]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼</category>
        <category>åˆ›å»ºåž‹è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼ä¹‹åˆ›å»ºåž‹è®¾è®¡æ¨¡å¼-ç®€å•å·¥åŽ‚æ¨¡å¼]]></title>
    <url>%2F2019%2F02%2F13%2Fdesign-pattern-simple-factory.html</url>
    <content type="text"><![CDATA[1. æ¨¡å¼ç®€ä»‹ ç®€å•å·¥åŽ‚æ¨¡å¼(Simple Factory Pattern)ï¼šå®ƒå±žäºŽåˆ›å»ºåž‹è®¾è®¡æ¨¡å¼ï¼Œä¸å±žäºŽ23ç§è®¾è®¡æ¨¡å¼ã€‚åœ¨ç®€å•å·¥åŽ‚æ¨¡å¼ä¸­ï¼Œå¯ä»¥æ ¹æ®å‚æ•°çš„ä¸åŒè¿”å›žä¸åŒç±»çš„å®žä¾‹ã€‚ç®€å•å·¥åŽ‚æ¨¡å¼ä¸“é—¨å®šä¹‰ä¸€ä¸ªç±»æ¥è´Ÿè´£åˆ›å»ºå…¶ä»–ç±»çš„å®žä¾‹ï¼Œè¢«åˆ›å»ºçš„å®žä¾‹é€šå¸¸éƒ½å…·æœ‰å…±åŒçš„çˆ¶ç±»ã€‚æœ¬æ–‡å°†ä½¿ç”¨ ç³–æžœå·¥åŽ‚ç”Ÿäº§ä¸åŒå£å‘³çš„ç³–æžœ è¿™ä¸ªå®žé™…åœºæ™¯ï¼Œç”¨ä»£ç æ¥å®žçŽ° ç®€å•å·¥åŽ‚æ¨¡å¼ã€‚ 2. æ¨¡å¼è§’è‰² ç®€å•å·¥åŽ‚åŒ…å«3ä¸ªè§’è‰²ï¼š å·¥åŽ‚è§’è‰²(CandyFactory)ï¼šä¸»è¦è´Ÿè´£åˆ›å»ºå…·ä½“çš„å®žä¾‹ã€‚ æŠ½è±¡å®žä½“(Candy)ï¼šå®ƒæ˜¯å·¥åŽ‚è§’è‰²æ‰€åˆ›å»ºçš„æ‰€æœ‰å®žä¾‹çš„çˆ¶ç±»ï¼ŒåŒ…å«æ‰€æœ‰å…·ä½“å®žä¾‹æ‰€å…±æœ‰çš„å…¬å…±æŽ¥å£ã€‚ å…·ä½“ç‰¹å¾çš„å®žä½“(LemonCandy å’Œ WatermelonCandy)ï¼šæ‰€æœ‰ç”±å·¥åŽ‚è§’è‰²åˆ›å»ºå‡ºæ¥çš„å®žä¾‹éƒ½å±žäºŽå…·ä½“å®žä½“ã€‚ 3. UMLå›¾ä¾‹ 3.1. æœªä½¿ç”¨ç®€å•å·¥åŽ‚æ¨¡å¼çš„UMLå›¾ 3.2. ä½¿ç”¨ç®€å•å·¥åŽ‚æ¨¡å¼ä¹‹åŽçš„UMLå›¾ 4. ä»£ç å®žçŽ° 4.1. æ­¥éª¤ä¸€ï¼šåˆ›å»ºæŠ½è±¡ç³–æžœç±» Candy.java 1234567891011121314151617181920/** * &lt;p&gt; * ç³–æžœæŠ½è±¡ç±» * &lt;/p&gt; * * @package: com.xkcoding.design.pattern.creational.simplefactory * @description: ç³–æžœæŠ½è±¡ç±» * @author: yangkai.shen * @date: Created in 2019-02-13 10:32 * @copyright: Copyright (c) 2019 * @version: V1.0 * @modified: yangkai.shen */public abstract class Candy &#123; /** * å£å‘³ */ public abstract void taste();&#125; 4.2. æ­¥éª¤äºŒï¼šåˆ›å»ºå…·ä½“çš„ä¸åŒå£å‘³çš„ç³–æžœç±» LemonCandy.java 12345678910111213141516171819202122/** * &lt;p&gt; * æŸ æª¬å‘³ç³–æžœ * &lt;/p&gt; * * @package: com.xkcoding.design.pattern.creational.simplefactory * @description: æŸ æª¬å‘³ç³–æžœ * @author: yangkai.shen * @date: Created in 2019-02-13 10:34 * @copyright: Copyright (c) 2019 * @version: V1.0 * @modified: yangkai.shen */public class LemonCandy extends Candy &#123; /** * å£å‘³ */ @Override public void taste() &#123; System.out.println("æŸ æª¬å‘³"); &#125;&#125; WatermelonCandy.java 12345678910111213141516171819202122/** * &lt;p&gt; * è¥¿ç“œå‘³ç³–æžœ * &lt;/p&gt; * * @package: com.xkcoding.design.pattern.creational.simplefactory * @description: è¥¿ç“œå‘³ç³–æžœ * @author: yangkai.shen * @date: Created in 2019-02-13 10:36 * @copyright: Copyright (c) 2019 * @version: V1.0 * @modified: yangkai.shen */public class WatermelonCandy extends Candy &#123; /** * å£å‘³ */ @Override public void taste() &#123; System.out.println("è¥¿ç“œå‘³"); &#125;&#125; 4.3. æ­¥éª¤ä¸‰ï¼šåˆ›å»ºç³–æžœå·¥åŽ‚ CandyFactory.java 1234567891011121314151617181920212223242526272829303132333435363738394041424344/** * &lt;p&gt; * ç³–æžœå·¥åŽ‚ç±» * &lt;/p&gt; * * @package: com.xkcoding.design.pattern.creational.simplefactory * @description: ç³–æžœå·¥åŽ‚ç±» * @author: yangkai.shen * @date: Created in 2019-02-13 10:43 * @copyright: Copyright (c) 2019 * @version: V1.0 * @modified: yangkai.shen */public class CandyFactory &#123; /** * ç”Ÿäº§ç³–æžœ * * @param taste å…·ä½“å£å‘³ * @return å¯¹åº”å£å‘³çš„ç³–æžœ */ public Candy produceCandy(String taste) &#123; if ("lemon".equalsIgnoreCase(taste)) &#123; return new LemonCandy(); &#125; else if ("watermelon".equalsIgnoreCase(taste)) &#123; return new WatermelonCandy(); &#125; return null; &#125; /** * ç”Ÿäº§ç³–æžœ * @param c å…·ä½“å£å‘³çš„ç³–æžœç±» * @return å¯¹åº”å£å‘³çš„ç³–æžœ */ public Candy produceCandy(Class c) &#123; Candy candy = null; try &#123; candy = (Candy) Class.forName(c.getSimpleName()).newInstance(); &#125; catch (InstantiationException | IllegalAccessException | ClassNotFoundException e) &#123; e.printStackTrace(); &#125; return candy; &#125;&#125; 4.4. æ­¥éª¤å››ï¼šè°ƒç”¨å·¥åŽ‚ç±»ç”Ÿäº§å…·ä½“å£å‘³çš„ç³–æžœ 12345678910111213141516171819202122232425262728293031323334import com.xkcoding.design.pattern.creational.simplefactory.Candy;import com.xkcoding.design.pattern.creational.simplefactory.CandyFactory;import com.xkcoding.design.pattern.creational.simplefactory.LemonCandy;import com.xkcoding.design.pattern.creational.simplefactory.WatermelonCandy;/** * &lt;p&gt; * ç®€å•å·¥åŽ‚æ¨¡å¼æµ‹è¯•ç±» * &lt;/p&gt; * * @package: com.xkcoding.design.pattern.creational.simplefactory.run * @description: ç®€å•å·¥åŽ‚æ¨¡å¼æµ‹è¯•ç±» * @author: yangkai.shen * @date: Created in 2019-02-13 10:40 * @copyright: Copyright (c) 2019 * @version: V1.0 * @modified: yangkai.shen */public class PatternTest &#123; public static void main(String[] args) &#123; CandyFactory factory = new CandyFactory(); // æµ‹è¯•å·¥åŽ‚ç±»æ–¹æ³• - 1 Candy candy1 = factory.produceCandy("lemon"); candy1.taste(); Candy candy2 = factory.produceCandy("watermelon"); candy2.taste(); // æµ‹è¯•å·¥åŽ‚ç±»æ–¹æ³• - 2 Candy candy3 = factory.produceCandy(LemonCandy.class); candy3.taste(); Candy candy4 = factory.produceCandy(WatermelonCandy.class); candy4.taste(); &#125;&#125; 5. åº”ç”¨ 12// Slf4jæ—¥å¿—// èŽ·å–æ—¥å¿—å¯¹è±¡ -&gt; LoggerFactory.getLogger(String name) -&gt; getILoggerFactory() -&gt; getLogger(name) 6. åœºæ™¯ å·¥åŽ‚ç±»è´Ÿè´£åˆ›å»ºçš„å¯¹è±¡æ¯”è¾ƒå°‘ï¼šç”±äºŽåˆ›å»ºçš„å¯¹è±¡è¾ƒå°‘ï¼Œä¸ä¼šé€ æˆå·¥åŽ‚æ–¹æ³•ä¸­çš„ä¸šåŠ¡é€»è¾‘å¤ªè¿‡å¤æ‚ã€‚ å®¢æˆ·ç«¯åªçŸ¥é“ä¼ å…¥å·¥åŽ‚ç±»çš„å‚æ•°ï¼Œå¯¹äºŽå¦‚ä½•åˆ›å»ºå¯¹è±¡ä¸å…³å¿ƒï¼šå®¢æˆ·ç«¯æ—¢ä¸éœ€è¦å…³å¿ƒåˆ›å»ºç»†èŠ‚ï¼Œç”šè‡³è¿žç±»åéƒ½ä¸éœ€è¦è®°ä½ï¼Œåªéœ€è¦çŸ¥é“ç±»åž‹æ‰€å¯¹åº”çš„å‚æ•°ã€‚ 7. ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ï¼š ä»¥æœ¬ä¾‹ä¸ºä¾‹ï¼Œ1ã€ç³–æžœè°ƒç”¨æ–¹æƒ³åˆ›å»ºä¸€ä¸ªå…·ä½“å£å‘³çš„ç³–æžœå¯¹è±¡ï¼Œåªè¦çŸ¥é“å…¶å£å‘³å°±å¯ä»¥ã€‚ 2ã€æ‰©å±•æ€§é«˜ï¼Œå¦‚æžœæƒ³å¢žåŠ ä¸€ä¸ªå…·ä½“å£å‘³çš„ç³–æžœï¼Œåªè¦åœ¨å·¥åŽ‚ç±»ä¸­æ·»åŠ ä¸€ç§ç”Ÿäº§é€»è¾‘å°±å¯ä»¥å®žçŽ°ã€‚ 3ã€å±è”½ç³–æžœçš„å…·ä½“å®žçŽ°ï¼Œè°ƒç”¨æ–¹åªå…³å¿ƒæŠ½è±¡å®žä½“çš„é€šç”¨æŽ¥å£åœ¨å…·ä½“å£å‘³ç³–æžœç±»ä¸­çš„ä¸åŒå®žçŽ°ã€‚ ç¼ºç‚¹ï¼š ä»¥æœ¬ä¾‹ä¸ºä¾‹ï¼Œæ¯å¢žåŠ ä¸€ç§ç³–æžœå£å‘³ï¼Œéƒ½éœ€è¦å¢žåŠ ä¸€ç§å…·ä½“çš„å®žçŽ°ç±»ï¼ŒåŒæ—¶åœ¨å·¥åŽ‚ç±»ä¸­æ·»åŠ å¯¹åº”çš„ç”Ÿäº§é€»è¾‘ï¼Œå¦‚æžœç³»ç»Ÿä¸­å­˜åœ¨å¾ˆå¤šä¸åŒå£å‘³çš„ç³–æžœï¼Œåˆ™ä¼šå¯¼è‡´ç±»çš„æ•°é‡æˆå€å¢žåŠ ï¼Œå¢žåŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦ï¼ŒåŒæ—¶å¢žåŠ ç±»ä¹‹é—´çš„ä¾èµ–ã€‚ 8. å®Œæ•´ä»£ç åœ°å€ https://github.com/xkcoding/design-pattern/tree/master/src/main/java/com/xkcoding/design/pattern/creational/simplefactory]]></content>
      <categories>
        <category>è®¾è®¡æ¨¡å¼</category>
        <category>åˆ›å»ºåž‹è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨Mavenç®¡ç†Spring Boot Profile]]></title>
    <url>%2F2019%2F02%2F04%2Fuse-maven-manage-spring-boot-profile.html</url>
    <content type="text"><![CDATA[å‰è¨€ Spring Bootå¼€å‘çš„é¡¹ç›®ä¸­ï¼Œå¤šçŽ¯å¢ƒé…ç½®æžå¤§çš„æå‡äº†å¼€å‘æ•ˆçŽ‡ï¼Œé¿å…äº†å› ä¸ºæµ‹è¯•(test)ã€å¼€å‘(dev)ã€ç”Ÿäº§(prod)å¯¼è‡´é¢‘ç¹ä¿®æ”¹ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå¯¼è‡´å‡ºçŽ°é…ç½®é”™è¯¯çš„æƒ…å†µã€‚ é‚£ä¹ˆSpring Bootå¦‚ä½•åšåˆ°å¤šçŽ¯å¢ƒé…ç½®ï¼Ÿè¿˜æœ‰æ²¡æœ‰æ›´ä¼˜é›…çš„æ–¹å¼ç®¡ç†Spring Bootçš„å¤šçŽ¯å¢ƒé…ç½®å‘¢ï¼Ÿ 1. Spring Bootå¤šçŽ¯å¢ƒé…ç½® Spring Boot é¡¹ç›®å¯ä½¿ç”¨ profile æ¥å®žçŽ°å¤šçŽ¯å¢ƒé…ç½®ï¼Œé€šè¿‡ spring.profiles.active å±žæ€§å†³å®šä½¿ç”¨å…·ä½“å“ªä¸ªçŽ¯å¢ƒçš„profileã€‚ Spring Boot çš„é…ç½®æ–‡ä»¶é»˜è®¤ä¸º application.yml(æˆ–propertiesï¼Œæ­¤å¤–ä»…ä»¥ymlé…ç½®ä¸ºè¯´æ˜Ž)ã€‚ä¸åŒ profile ä¸‹çš„é…ç½®æ–‡ä»¶ç”± application-{profile}.yml ç®¡ç†ï¼ŒåŒæ—¶ application-{profile}.yml é…ç½®æ–‡ä»¶ä¼šè¦†ç›–é»˜è®¤é…ç½®æ–‡ä»¶(application.yml)ä¸‹çš„åŒä¸€å±žæ€§ã€‚ ä¸€èˆ¬ profile æœ‰ä»¥ä¸‹å‡ ç§ï¼šdev(å¼€å‘)ï¼Œtest(å•å…ƒæµ‹è¯•)ï¼Œprod(ç”Ÿäº§çŽ¯å¢ƒ) 2. Mavenå¤šçŽ¯å¢ƒé…ç½® å¤§éƒ¨åˆ†é¡¹ç›®åŸºäºŽ Maven æž„å»ºï¼Œæ­¤å¤„ä¸ä»‹ç» Gradle æ–¹å¼æž„å»ºã€‚æ‰€ä»¥ä½¿ç”¨ Maven å¯ä»¥æ›´åŠ æ–¹ä¾¿ä¼˜é›…çš„ç®¡ç† profileã€‚ 2.1. Maven Profile é…ç½® åœ¨é¡¹ç›®çš„ pom.xml (æˆ–è€…å…·ä½“ module çš„pom.xml)ä¸­æ·»åŠ  profiles èŠ‚ç‚¹ 1234567891011121314151617181920212223&lt;profiles&gt; &lt;profile&gt; &lt;id&gt;dev&lt;/id&gt; &lt;activation&gt; &lt;activeByDefault&gt;true&lt;/activeByDefault&gt; &lt;/activation&gt; &lt;properties&gt; &lt;profileActive&gt;dev&lt;/profileActive&gt; &lt;/properties&gt; &lt;/profile&gt; &lt;profile&gt; &lt;id&gt;prod&lt;/id&gt; &lt;properties&gt; &lt;profileActive&gt;prod&lt;/profileActive&gt; &lt;/properties&gt; &lt;/profile&gt; &lt;profile&gt; &lt;id&gt;test&lt;/id&gt; &lt;properties&gt; &lt;profileActive&gt;test&lt;/profileActive&gt; &lt;/properties&gt; &lt;/profile&gt;&lt;/profiles&gt; å…¶ä¸­ profile èŠ‚ç‚¹é‡Œè¿˜å¯ä»¥æŒ‡å®šé¢å¤–çš„ä¾èµ–ä»¥åŠç®¡ç†ä¾èµ–çš„ç‰ˆæœ¬ç­‰ç­‰ï¼Œååˆ†çš„æ–¹ä¾¿ã€‚ properties ä¸­çš„ profileActive æ˜¯è‡ªå®šä¹‰å˜é‡ï¼ŒåŽç»­ä¸ºäº†æŒ‡å®š Spring Boot æ‰€ä½¿ç”¨çš„profileã€‚ 2.2. æ ¹æ® Maven Profile è¿‡æ»¤èµ„æºæ–‡ä»¶ Spring Boot çš„ profile é€‰æ‹©éœ€è¦åœ¨ application.yml ä¸­é…ç½® spring.profiles.activeï¼Œå¦‚æžœå†™æ­»åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œé‚£ä¹ˆæ¯æ¬¡æ‰“åŒ…éƒ½éœ€è¦æ‰‹åŠ¨ä¿®æ”¹ï¼Œå¾ˆéº»çƒ¦ï¼Œè€Œä¸”å®¹æ˜“å‡ºé”™ã€‚åœ¨ pom.xml é‡Œå®šä¹‰å˜é‡ï¼Œå°±å¯ä»¥åœ¨ application.yml ä¸­ é€šè¿‡ @xxxx@ èŽ·å–å˜é‡çš„å†…å®¹ï¼Œæ­¤å¤„å˜é‡ä¸º profileActiveã€‚ èµ„æºè¿‡æ»¤éœ€è¦åœ¨ pom.xml çš„ build èŠ‚ç‚¹ä¸‹é…ç½® resources èŠ‚ç‚¹ï¼š 12345678910111213141516171819202122232425&lt;build&gt; &lt;finalName&gt;$&#123;artifactId&#125;&lt;/finalName&gt; &lt;resources&gt; &lt;resource&gt; &lt;directory&gt;src/main/resources&lt;/directory&gt; &lt;!-- è¿‡æ»¤èµ„æº --&gt; &lt;excludes&gt; &lt;exclude&gt;application*.yml&lt;/exclude&gt; &lt;/excludes&gt; &lt;/resource&gt; &lt;resource&gt; &lt;directory&gt;src/main/resources&lt;/directory&gt; &lt;!-- æ˜¯å¦æ›¿æ¢@xx@è¡¨ç¤ºçš„maven propertieså±žæ€§å€¼ --&gt; &lt;filtering&gt;true&lt;/filtering&gt; &lt;!-- å¼•å…¥èµ„æº --&gt; &lt;includes&gt; &lt;include&gt;application.yml&lt;/include&gt; &lt;include&gt;application-$&#123;profileActive&#125;.yml&lt;/include&gt; &lt;/includes&gt; &lt;/resource&gt; &lt;/resources&gt; &lt;plugins&gt; ...çœç•¥éƒ¨åˆ†å†…å®¹ &lt;/plugins&gt;&lt;/build&gt; resources èŠ‚ç‚¹ä¸­ç¬¬ä¸€ä¸ª resource åŽ»æŽ‰äº†src/main/resourcesä¸‹çš„æ‰€æœ‰ application*.yml æ–‡ä»¶ï¼Œ* æ˜¯é€šé…ç¬¦ï¼Œè¡¨ç¤ºæ­¤å¤„æœ‰ä»»ä½•å†…å®¹ï¼ˆæ²¡æœ‰ä¹Ÿå¯ä»¥ï¼‰éƒ½åŒ¹é…ã€‚ ç¬¬äºŒä¸ª resource æ·»åŠ äº†application.yml é»˜è®¤é…ç½®æ–‡ä»¶å’Œç”± profileActive å±žæ€§å†³å®šçš„ç›¸åº” profile é…ç½®æ–‡ä»¶ã€‚å¹¶ä¸” filtering ä¸º true è¡¨ç¤ºï¼Œä¼šå°†æ–‡ä»¶å†…å®¹ä¸­çš„ @xx@ æ›¿æ¢ä¸ºç›¸åº”çš„å˜é‡ï¼ˆæ­¤å¤„æ–‡ä»¶ä¸­çš„ @profileActive@ ä¼šæ›¿æ¢ä¸ºpomä¸­é…ç½®çš„ profileActive å±žæ€§å€¼ï¼‰ã€‚ 2.3. ä¿®æ”¹ application.yml 123spring: profiles: active: @profileActive@ @profileActive@ è¡¨ç¤ºè¯¥å±žæ€§å€¼ä¼šåœ¨ maven æž„å»ºæ—¶è¢«æ›¿æ¢ä¸ºå¯¹åº”çš„å†…å®¹ã€‚ 2.4. æž„å»º 2.4.1. å‘½ä»¤è¡Œæž„å»º 1mvn clean package -Dmaven.test.skip=true -P dev å¦‚æžœéœ€è¦æ‰“æˆ prod åŒ…ï¼Œåˆ™æŠŠ -P çš„å‚æ•°æ›¿æ¢æˆ prod å³å¯ã€‚ä¹Ÿå¯ä»¥å†™ä¸€ä¸ª shell è„šæœ¬ï¼Œæ–¹ä¾¿åŽç»­æ‰“åŒ…ã€‚ 12345678#!/bin/bashprofileActive=prodif [[ -n "$1" ]]; then profileActive=$1fimvn clean package -Dmaven.test.skip=true -P $&#123;profileActive&#125; è¯¥è„šæœ¬æŽ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œå³æ‰“åŒ…å¯¹åº”çš„ profileã€‚é»˜è®¤æƒ…å†µä¸‹å¦‚æžœä¸å¸¦å‚æ•°ï¼Œä¼šæ‰“åŒ…æˆprodã€‚ 2.4.2. å·¥å…·æž„å»º å¦‚æžœæˆ‘ä»¬ä½¿ç”¨ IDEAä¸ºå¼€å‘å·¥å…·çš„è¯ï¼Œå°±ä¼šæ–¹ä¾¿å¾ˆå¤šäº†ã€‚ä¸Šä¸€å¼ å›¾ï¼Œä¸è¿‡å¤šè§£é‡Š~ 3. å‚è€ƒ https://blog.csdn.net/lihe2008125/article/details/50443491 https://www.jianshu.com/p/755a57511928 https://segmentfault.com/a/1190000011770028]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>spring boot</category>
      </categories>
      <tags>
        <tag>spring boot</tag>
        <tag>maven</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Spring Boot ä½¿ç”¨æžšä¸¾ç±»åž‹ä½œä¸ºè¯·æ±‚å‚æ•°]]></title>
    <url>%2F2019%2F01%2F30%2Fspring-boot-request-use-enums-params.html</url>
    <content type="text"><![CDATA[1. åœºæ™¯ åœ¨æˆ‘ä»¬å®žé™…å¼€å‘ä¸­ï¼Œæžšä¸¾ç±»åž‹åº”ç”¨ååˆ†å¹¿æ³›ï¼Œå¯ä»¥é¿å…åœ¨é¡¹ç›®ä¸­å®šä¹‰å¤§é‡çš„ã€Žé­”æ³•å€¼ã€å˜é‡ã€‚ä½†æ˜¯ï¼Œåœ¨webå¼€å‘ä¸­ï¼Œå¦‚ä½•å°†æžšä¸¾å¯¹è±¡ä½œä¸ºè¯·æ±‚å‚æ•°ä¼ è¿›Controllerï¼Œåšåˆ°ç±»åž‹è‡ªåŠ¨è½¬æ¢ï¼Ÿç›´æŽ¥ä½¿ç”¨ @RequestParam å’Œ @RequestBody æ–­ç„¶æ˜¯ä¸å¤Ÿçš„ï¼Œè¿™é‡Œå°±éœ€è¦æˆ‘ä»¬è‡ªå®šä¹‰ Converter æ¥å®žçŽ°ç±»åž‹è½¬åŒ–äº†ã€‚ 2. éœ€æ±‚ æ¯”å¦‚ä¸€ä¸ªç”¨æˆ·å¯¹è±¡ï¼Œé‡Œé¢çš„æ€§åˆ«å±žæ€§ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæžšä¸¾ç±»åž‹ Genderã€‚ GenderEnum.java 12345678910111213141516171819202122232425262728293031323334/** * &lt;p&gt; * æ€§åˆ«æžšä¸¾ * &lt;/p&gt; * * @package: com.xkcoding.springboottest.constants.enums * @description: æ€§åˆ«æžšä¸¾ * @author: yangkai.shen * @date: Created in 2019-01-30 11:06 * @copyright: Copyright (c) 2019 * @version: V1.0 * @modified: yangkai.shen */@Getterpublic enum GenderEnum &#123; /** * ç”· */ MALE(0), /** * å¥³ */ FEMALE(1); /** * æ€§åˆ«ç¼–ç  */ private Integer code; GenderEnum(int code) &#123; this.code = code; &#125;&#125; è¯·æ±‚å¯¹è±¡å°è£… QueryRequest QueryRequest.java 1234567891011121314151617/** * &lt;p&gt; * è¯·æ±‚å‚æ•° * &lt;/p&gt; * * @package: com.xkcoding.springboottest.controller.enum_test * @description: è¯·æ±‚å‚æ•° * @author: yangkai.shen * @date: Created in 2019-01-30 14:02 * @copyright: Copyright (c) 2019 * @version: V1.0 * @modified: yangkai.shen */@Datapublic class QueryRequest &#123; private GenderEnum gender;&#125; åœ¨Controllerå±‚ç›´æŽ¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼ï¼ŒæœŸæœ›å‚æ•°è‡ªåŠ¨è¿›è¡Œç±»åž‹è½¬æ¢ EnumTestController.java 12345678910111213141516171819202122232425262728293031/** * &lt;p&gt; * æµ‹è¯•å‚æ•°æ˜¯æžšä¸¾ç±»åž‹ï¼Œè‡ªåŠ¨è½¬æ¢ * &lt;/p&gt; * * @package: com.xkcoding.springboottest.controller.enum_test * @description: æµ‹è¯•å‚æ•°æ˜¯æžšä¸¾ç±»åž‹ï¼Œè‡ªåŠ¨è½¬æ¢ * @author: yangkai.shen * @date: Created in 2019-01-30 13:56 * @copyright: Copyright (c) 2019 * @version: V1.0 * @modified: yangkai.shen */@Slf4j@RestController@RequestMapping("/enum")public class EnumTestController &#123; @GetMapping("/get") public Dict testGet(QueryRequest request) &#123; log.info("ã€get-requestã€‘= &#123;&#125;", JSONUtil.toJsonStr(request)); return Dict.create().set("get-request", request); &#125; @PostMapping("/post") public Dict testPost(@RequestBody QueryRequest request) &#123; log.info("ã€post-requestã€‘= &#123;&#125;", JSONUtil.toJsonStr(request)); return Dict.create().set("post-request", request); &#125;&#125; è¿™ä¹ˆå†™çš„æ—¶å€™ï¼Œgenderåªèƒ½æŽ¥æ”¶åˆ° MALE ã€FEMALE è¿™æ ·çš„å‚æ•°ï¼Œé™¤æ­¤ä»¥å¤–ï¼Œå‡ä¼šæŠ¥ç±»åž‹ä¸åŒ¹é…çš„é”™è¯¯ä¿¡æ¯ï¼Œæ­¤æ—¶æ˜¯æ— æ³•å¤„ç† 0 ã€1 è¿™æ ·çš„å‚æ•°çš„ã€‚ éœ€æ±‚ï¼š æŽ¥æ”¶åˆ° MALE ã€FEMALE è¿™æ ·çš„å‚æ•°ï¼Œå¯ä»¥è‡ªåŠ¨è½¬ä¸ºå¯¹åº”çš„æžšä¸¾å€¼ï¼› æŽ¥æ”¶åˆ° 0 ã€1 è¿™æ ·çš„å‚æ•°ï¼Œä¹Ÿå¯ä»¥è‡ªåŠ¨è½¬ä¸ºå¯¹åº”çš„æžšä¸¾å€¼ã€‚ 3. è§£å†³ æ­¤æ—¶ï¼Œæœ¬æ–‡çš„ã€Žä¸»è§’ã€Converter å°±å¯ä»¥éš†é‡ç™»åœºäº†ã€‚ æ³¨æ„ï¼ŒConverter æ˜¯ org.springframework.core.convert.converter.Converter ï¼Œåˆ«å¯¼é”™åŒ…äº†ã€‚ IntegerCodeToGenderEnumConverter.java 12345678910111213141516171819202122232425262728293031/** * &lt;p&gt; * ç¼–ç  -&gt; æ€§åˆ« è½¬æ¢å™¨ * &lt;/p&gt; * * @package: com.xkcoding.springboottest.config.convert * @description: ç¼–ç  -&gt; æ€§åˆ« è½¬æ¢å™¨ * @author: yangkai.shen * @date: Created in 2019-01-30 11:14 * @copyright: Copyright (c) 2019 * @version: V1.0 * @modified: yangkai.shen */public class IntegerCodeToGenderEnumConverter implements Converter&lt;Integer, GenderEnum&gt; &#123; private Map&lt;Integer, GenderEnum&gt; enumMap = Maps.newHashMap(); public IntegerCodeToGenderEnumConverter() &#123; for (GenderEnum genderEnum : GenderEnum.values()) &#123; enumMap.put(genderEnum.getCode(), genderEnum); &#125; &#125; @Override public GenderEnum convert(Integer source) &#123; GenderEnum genderEnum = enumMap.get(source); if (ObjectUtil.isNull(genderEnum)) &#123; throw new IllegalArgumentException("æ— æ³•åŒ¹é…å¯¹åº”çš„æžšä¸¾ç±»åž‹"); &#125; return genderEnum; &#125;&#125; å…¶å®žè¿™é‡Œå·²ç»å¯ä»¥å®žçŽ°ç±»åž‹è½¬æ¢äº†ï¼Œä½†æ˜¯å¼•å‡ºå¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œå½“æˆ‘ä»¬çš„æžšä¸¾ç±»ç‰¹åˆ«å¤šçš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦å†™å¾ˆå¤šä¸ª è‡ªå®šä¹‰çš„Converteræ¥æ»¡è¶³ç±»åž‹è½¬åŒ–ã€‚ æ‰€ä»¥æˆ‘ä»¬ä¸ä½¿ç”¨ä¸Šé¢ç›´æŽ¥ä½¿ç”¨ Converter çš„è¿™ç§æ–¹æ³•ï¼Œæˆ‘ä»¬å¼•å…¥ ConverterFactory æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ 3.1. æŠ½å–å…¬å…±æžšä¸¾æŽ¥å£ ä»¥åŽçš„æžšä¸¾ç±»éƒ½éœ€è¦å®žçŽ°è¿™ä¸ªæŽ¥å£ BaseEnum.java 123456789101112131415161718192021/** * &lt;p&gt; * é€šç”¨æžšä¸¾æŽ¥å£ * &lt;/p&gt; * * @package: com.xkcoding.springboottest.constants * @description: é€šç”¨æžšä¸¾æŽ¥å£ * @author: yangkai.shen * @date: Created in 2019-01-30 11:04 * @copyright: Copyright (c) 2019 * @version: V1.0 * @modified: yangkai.shen */public interface BaseEnum &#123; /** * èŽ·å–æžšä¸¾ç¼–ç  * * @return ç¼–ç  */ Integer getCode();&#125; 3.2. è°ƒæ•´GenderEnumæžšä¸¾ç±» GenderEnum.java 12345678910111213141516171819202122232425262728293031323334/** * &lt;p&gt; * æ€§åˆ«æžšä¸¾ * &lt;/p&gt; * * @package: com.xkcoding.springboottest.constants.enums * @description: æ€§åˆ«æžšä¸¾ * @author: yangkai.shen * @date: Created in 2019-01-30 11:06 * @copyright: Copyright (c) 2019 * @version: V1.0 * @modified: yangkai.shen */@Getterpublic enum GenderEnum implements BaseEnum &#123; /** * ç”· */ MALE(0), /** * å¥³ */ FEMALE(1); /** * æ€§åˆ«ç¼–ç  */ private Integer code; GenderEnum(int code) &#123; this.code = code; &#125;&#125; 3.3. åˆ›å»ºé€šç”¨ Integer -&gt; Enum çš„ Converter ç±» IntegerToEnumConverter.java 1234567891011121314151617181920212223242526272829303132/** * &lt;p&gt; * æžšä¸¾ç¼–ç  -&gt; æžšä¸¾ è½¬åŒ–å™¨ * &lt;/p&gt; * * @package: com.xkcoding.springboottest.config.convert * @description: æžšä¸¾ç¼–ç  -&gt; æžšä¸¾ è½¬åŒ–å™¨ * @author: yangkai.shen * @date: Created in 2019-01-30 11:21 * @copyright: Copyright (c) 2019 * @version: V1.0 * @modified: yangkai.shen */public class IntegerToEnumConverter&lt;T extends BaseEnum&gt; implements Converter&lt;Integer, T&gt; &#123; private Map&lt;Integer, T&gt; enumMap = Maps.newHashMap(); public IntegerToEnumConverter(Class&lt;T&gt; enumType) &#123; T[] enums = enumType.getEnumConstants(); for (T e : enums) &#123; enumMap.put(e.getCode(), e); &#125; &#125; @Override public T convert(Integer source) &#123; T t = enumMap.get(source); if (ObjectUtil.isNull(t)) &#123; throw new IllegalArgumentException("æ— æ³•åŒ¹é…å¯¹åº”çš„æžšä¸¾ç±»åž‹"); &#125; return t; &#125;&#125; 3.4. åˆ›å»ºå¯¹åº”çš„è‡ªå®šä¹‰ ConverterFactory å·¥åŽ‚ç±» IntegerCodeToEnumConverterFactory.java 1234567891011121314151617181920212223242526272829303132/** * &lt;p&gt; * ç¼–ç  -&gt; æžšä¸¾ è½¬åŒ–å™¨å·¥åŽ‚ç±» * &lt;/p&gt; * * @package: com.xkcoding.springboottest.config.convert.factory * @description: ç¼–ç  -&gt; æžšä¸¾ è½¬åŒ–å™¨å·¥åŽ‚ç±» * @author: yangkai.shen * @date: Created in 2019-01-30 11:09 * @copyright: Copyright (c) 2019 * @version: V1.0 * @modified: yangkai.shen */public class IntegerCodeToEnumConverterFactory implements ConverterFactory&lt;Integer, BaseEnum&gt; &#123; private static final Map&lt;Class, Converter&gt; CONVERTERS = Maps.newHashMap(); /** * èŽ·å–ä¸€ä¸ªä»Ž Integer è½¬åŒ–ä¸º T çš„è½¬æ¢å™¨ï¼ŒT æ˜¯ä¸€ä¸ªæ³›åž‹ï¼Œæœ‰å¤šä¸ªå®žçŽ° * * @param targetType è½¬æ¢åŽçš„ç±»åž‹ * @return è¿”å›žä¸€ä¸ªè½¬åŒ–å™¨ */ @Override public &lt;T extends BaseEnum&gt; Converter&lt;Integer, T&gt; getConverter(Class&lt;T&gt; targetType) &#123; Converter&lt;Integer, T&gt; converter = CONVERTERS.get(targetType); if (converter == null) &#123; converter = new IntegerToEnumConverter&lt;&gt;(targetType); CONVERTERS.put(targetType, converter); &#125; return converter; &#125;&#125; 3.5. åˆ›å»ºé€šç”¨ String -&gt; Enum çš„ Converter ç±»å’Œå¯¹åº”çš„ ConverterFactory å·¥åŽ‚ç±» å› ä¸º Post è¯·æ±‚å¯ä»¥å¯¹ä¼ å…¥çš„ json å±žæ€§å®šä¹‰ç±»åž‹ï¼Œä½†æ˜¯ Get è¯·æ±‚åŽå°æŽ¥æ”¶åˆ°çš„å‚æ•°éƒ½æ˜¯ String ç±»åž‹ï¼Œå› æ­¤éœ€è¦åœ¨åˆ›å»ºä¸€ä¸ªConverterç±» StringToEnumConverter.java 1234567891011121314151617181920212223242526272829303132/** * &lt;p&gt; * æžšä¸¾ç¼–ç  -&gt; æžšä¸¾ è½¬åŒ–å™¨ * &lt;/p&gt; * * @package: com.xkcoding.springboottest.config.convert * @description: æžšä¸¾ç¼–ç  -&gt; æžšä¸¾ è½¬åŒ–å™¨ * @author: yangkai.shen * @date: Created in 2019-01-30 11:21 * @copyright: Copyright (c) 2019 * @version: V1.0 * @modified: yangkai.shen */public class StringToEnumConverter&lt;T extends BaseEnum&gt; implements Converter&lt;String, T&gt; &#123; private Map&lt;String, T&gt; enumMap = Maps.newHashMap(); public StringToEnumConverter(Class&lt;T&gt; enumType) &#123; T[] enums = enumType.getEnumConstants(); for (T e : enums) &#123; enumMap.put(e.getCode().toString(), e); &#125; &#125; @Override public T convert(String source) &#123; T t = enumMap.get(source); if (ObjectUtil.isNull(t)) &#123; throw new IllegalArgumentException("æ— æ³•åŒ¹é…å¯¹åº”çš„æžšä¸¾ç±»åž‹"); &#125; return t; &#125;&#125; StringCodeToEnumConverterFactory.java 1234567891011121314151617181920212223242526272829303132/** * &lt;p&gt; * ç¼–ç  -&gt; æžšä¸¾ è½¬åŒ–å™¨å·¥åŽ‚ç±» * &lt;/p&gt; * * @package: com.xkcoding.springboottest.config.convert.factory * @description: ç¼–ç  -&gt; æžšä¸¾ è½¬åŒ–å™¨å·¥åŽ‚ç±» * @author: yangkai.shen * @date: Created in 2019-01-30 11:09 * @copyright: Copyright (c) 2019 * @version: V1.0 * @modified: yangkai.shen */public class StringCodeToEnumConverterFactory implements ConverterFactory&lt;String, BaseEnum&gt; &#123; private static final Map&lt;Class, Converter&gt; CONVERTERS = Maps.newHashMap(); /** * èŽ·å–ä¸€ä¸ªä»Ž Integer è½¬åŒ–ä¸º T çš„è½¬æ¢å™¨ï¼ŒT æ˜¯ä¸€ä¸ªæ³›åž‹ï¼Œæœ‰å¤šä¸ªå®žçŽ° * * @param targetType è½¬æ¢åŽçš„ç±»åž‹ * @return è¿”å›žä¸€ä¸ªè½¬åŒ–å™¨ */ @Override public &lt;T extends BaseEnum&gt; Converter&lt;String, T&gt; getConverter(Class&lt;T&gt; targetType) &#123; Converter&lt;String, T&gt; converter = CONVERTERS.get(targetType); if (converter == null) &#123; converter = new StringToEnumConverter&lt;&gt;(targetType); CONVERTERS.put(targetType, converter); &#125; return converter; &#125;&#125; 3.6. å°†è½¬åŒ–å™¨å·¥åŽ‚æ·»åŠ è¿› Spring Boot é…ç½® WebMvcConfig.java 12345678910111213141516171819202122232425/** * &lt;p&gt; * MVCé€šç”¨é…ç½® * &lt;/p&gt; * * @package: com.xkcoding.springboottest.config * @description: MVCé€šç”¨é…ç½® * @author: yangkai.shen * @date: Created in 2019-01-30 11:33 * @copyright: Copyright (c) 2019 * @version: V1.0 * @modified: yangkai.shen */@Configurationpublic class WebMvcConfig implements WebMvcConfigurer &#123; /** * æžšä¸¾ç±»çš„è½¬æ¢å™¨å·¥åŽ‚ addConverterFactory */ @Override public void addFormatters(FormatterRegistry registry) &#123; registry.addConverterFactory(new IntegerCodeToEnumConverterFactory()); registry.addConverterFactory(new StringCodeToEnumConverterFactory()); &#125;&#125; è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä¼˜é›…çš„å®žçŽ°æžšä¸¾å¯¹è±¡å‚æ•°çš„è‡ªåŠ¨è½¬æ¢äº†ï¼Œå¹¶ä¸”æ”¯æŒå¤šä¸ªç±»åž‹è½¬æ¢ã€‚å…¶ä¸­çš„ç±»åž‹è½¬æ¢å¤±è´¥å¼‚å¸¸ï¼Œå¯ä»¥ä½¿ç”¨å…¨å±€å¼‚å¸¸æ‹¦æˆªæ¥å¤„ç†ï¼Œä¸ä¼šçš„å°ä¼™ä¼´å¯ä»¥å‚è€ƒä»¥å‰çš„æ–‡ç« ã€‚https://xkcoding.com/2018/08/20/spring-boot-global-exception-handler.html 4. æµ‹è¯• 4.1. Get è¯·æ±‚ 4.2. Post è¯·æ±‚ 5. ä»£ç åœ°å€ https://github.com/xkcoding/owntest/tree/master/spring-boot-test]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>spring boot</category>
      </categories>
      <tags>
        <tag>spring boot</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¿®æ”¹ git æäº¤çš„æ—¶é—´]]></title>
    <url>%2F2019%2F01%2F21%2Fmodify-git-commit-timestamp.html</url>
    <content type="text"><![CDATA[æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ä¿®æ”¹ git commit æ—¶é—´ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹æ³•è§£å†³ã€‚ ä¿®æ”¹å½“å‰æœ¬åœ°æäº¤çš„commitæ—¶é—´ 1git commit --amend --date="2019-01-01T00:00:00+0800" -am ":memo: æ›´æ–° TODO.md" ä¿®æ”¹ä¹‹å‰æäº¤çš„æŸæ¬¡commitæ—¶é—´ï¼Œé¦–å…ˆé€šè¿‡ git log èŽ·å–æäº¤çš„å”¯ä¸€idï¼Œç„¶åŽ 1git commit --amend --date="2019-01-01T00:00:00+0800" -C edd2dbbe31fbab492f337628011119493a12a9c6 å¯¹äºŽä¹‹å‰å·²ç»æäº¤åˆ°è¿œç¨‹ä»“åº“çš„ï¼Œéœ€è¦å† git push ä¸€æ¬¡ï¼Œå³å¯æŽ¨é€åˆ°è¿œç¨‹ä»“åº“]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è§£å†³ Nginx 413 Request Entity Too Large é—®é¢˜]]></title>
    <url>%2F2019%2F01%2F17%2Fsolve-nginx-413-problem.html</url>
    <content type="text"><![CDATA[ä½¿ç”¨ Spring Boot æ–‡ä»¶ä¸Šä¼ çš„æ—¶å€™ï¼Œå‰ç«¯ä½¿ç”¨ nginx ä»£ç†åŽç«¯è¯·æ±‚ï¼Œå‡ºçŽ°å¦‚ä¸‹ 413 Request Entity Too Large è¿™ä¸ªé”™è¯¯ã€‚ è§£å†³æ–¹æ³•å…¶å®žä¹Ÿååˆ†ç®€å•ï¼Œåªéœ€è¦åœ¨ nginx é…ç½®æ–‡ä»¶é‡Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼Œé‡å¯ nginxï¼Œå³å¯è§£å†³ã€‚ 1234567server &#123; # ... listen 80; server_name localhost; client_max_body_size 20M; # ...&#125; é‡å¯ nginxï¼Œnginx -s reloadï¼Œå¤§åŠŸå‘Šæˆï¼]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>nginx</category>
      </categories>
      <tags>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è§£å†³ Mac å®‰è£…æœ€æ–°ç‰ˆ minikube å‡ºçŽ°çš„é—®é¢˜]]></title>
    <url>%2F2019%2F01%2F14%2Fsolve-mac-install-minikube-problem.html</url>
    <content type="text"><![CDATA[kubernetes (æœ¬æ–‡åŽç»­ç®€ç§° k8s )ï¼Œæ˜¯ä¸€ä¸ªå¼€æºçš„ï¼Œç”¨äºŽç®¡ç†äº‘å¹³å°ä¸­å¤šä¸ªä¸»æœºä¸Šçš„å®¹å™¨åŒ–çš„åº”ç”¨ã€‚Mac æœ¬åœ°è¿è¡Œ k8s æœ€å¿«çš„æ–¹å¼ï¼Œè‚¯å®šæ˜¯åŸºäºŽå•èŠ‚ç‚¹çš„ minikube æ¥æ­å»ºã€‚äººäººéƒ½è¯´ minikube æ­å»º k8s æœ€ç®€å•ã€å¿«é€Ÿã€åªéœ€è¦å‚»ç“œå¼è¾“å…¥å‘½ä»¤å°±å¯ä»¥æ­å»ºæˆåŠŸï¼Œå¯äº‹å®žå¹¶éžå¦‚æ­¤ï¼Œæ¯”å¦‚ç¬”è€…åœ¨æ­å»ºçš„è¿‡ç¨‹ä¸­å°±é‡åˆ°äº† ç‰ˆæœ¬ å’Œ ä»£ç† çš„é—®é¢˜ã€‚ ä¸‹é¢æˆ‘å°†å¯¹é‡åˆ°çš„é—®é¢˜ä¸€ä¸€è¿›è¡Œè§£ç­”ã€‚ 1. ç¡¬ä»¶çŽ¯å¢ƒ ç³»ç»Ÿï¼šMacOS Mojave 10.14.2 (18C54) 2. è½¯ä»¶çŽ¯å¢ƒ 2.1. è™šæ‹Ÿæœº è¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯ VirtualBoxï¼Œä½¿ç”¨ç‰ˆæœ¬Virtual Box 5.2.22 r126460 (Qt5.6.3)ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–è™šæ‹Ÿè½¯ä»¶ï¼Œå‚è€ƒï¼šhttps://kubernetes.io/docs/tasks/tools/install-minikube/#install-a-hypervisor 2.2. å®‰è£… kubectl ç¬”è€…å®‰è£…çš„æ—¶å€™ï¼Œæœ€æ–°ç‰ˆæœ¬ä¸º v1.13.1 æœ‰2ç§å®‰è£…æ–¹å¼ï¼š ä½¿ç”¨ brew å®‰è£…ï¼Œbrew install kubernetes-cli ä½¿ç”¨äºŒè¿›åˆ¶æ–¹å¼å®‰è£… ä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶ curl -LO https://storage.googleapis.com/kubernetes-release/release/v1.13.1/bin/darwin/amd64/kubectl ä¿®æ”¹æ–‡ä»¶æƒé™ chmod +x ./kubectl ç§»åŠ¨æ–‡ä»¶åˆ°ç”¨æˆ· bin ç›®å½• sudo mv ./kubectl /usr/local/bin/kubectl 2.3. å®‰è£… minikube ç¬”è€…å®‰è£…çš„æ—¶å€™ï¼Œæœ€æ–°ç‰ˆæœ¬ä¸º v0.32.0 æœ‰2ç§å®‰è£…æ–¹å¼ï¼š ä½¿ç”¨ brew å®‰è£…ï¼Œbrew cask install minikube ä½¿ç”¨äºŒè¿›åˆ¶æ–¹å¼å®‰è£… ä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶å¹¶ä¿®æ”¹æ–‡ä»¶æƒé™ curl -Lo minikube https://storage.googleapis.com/minikube/releases/v0.32.0/minikube-darwin-amd64 \ &amp;&amp; chmod +x minikube ç§»åŠ¨æ–‡ä»¶åˆ°ç”¨æˆ· bin ç›®å½• sudo cp minikube /usr/local/bin &amp;&amp; rm minikube 3. ä½¿ç”¨ minikube å¯åŠ¨ k8s minikube start 4. ðŸ’£ å¼‚å¸¸ ðŸ’£ minikube é»˜è®¤ä½¿ç”¨çš„ k8s ç‰ˆæœ¬ä¸Žæœ¬åœ° kubecli ç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œéƒ¨åˆ†é”™è¯¯æ—¥å¿—å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627$ minikube startStarting local Kubernetes v1.12.4 cluster...Starting VM...Downloading Minikube ISO 178.88 MB / 178.88 MB [============================================] 100.00% 0sGetting VM IP address...E0109 17:30:57.090762 47169 start.go:211] Error parsing version semver: Version string emptyMoving files into cluster...Downloading kubeadm v1.12.4Downloading kubelet v1.12.4Finished Downloading kubeadm v1.12.4Finished Downloading kubelet v1.12.4Setting up certs...Connecting to cluster...Setting up kubeconfig...Stopping extra container runtimes...Starting cluster components...E0109 17:38:49.423563 47169 start.go:343] Error starting cluster: kubeadm init errorsudo /usr/bin/kubeadm init --config /var/lib/kubeadm.yaml --ignore-preflight-errors=DirAvailable--etc-kubernetes-manifests --ignore-preflight-errors=DirAvailable--data-minikube --ignore-preflight-errors=Port-10250 --ignore-preflight-errors=FileAvailable--etc-kubernetes-manifests-kube-scheduler.yaml --ignore-preflight-errors=FileAvailable--etc-kubernetes-manifests-kube-apiserver.yaml --ignore-preflight-errors=FileAvailable--etc-kubernetes-manifests-kube-controller-manager.yaml --ignore-preflight-errors=FileAvailable--etc-kubernetes-manifests-etcd.yaml --ignore-preflight-errors=Swap --ignore-preflight-errors=CRI running command: : Process exited with status 2================================================================================An error has occurred. Would you like to opt in to sending anonymized crashinformation to minikube to help prevent future errors?To opt out of these messages, run the command: minikube config set WantReportErrorPrompt false================================================================================Please enter your response [Y/n]: % è§£å†³ï¼š https://github.com/kubernetes/minikube/issues/3517#issuecomment-453035044 å› ä¸º minikube é»˜è®¤ä½¿ç”¨çš„ v1.12.x ç‰ˆæœ¬çš„ k8sï¼Œä½†æ˜¯æˆ‘ä»¬å®‰è£…çš„ kubectl ç‰ˆæœ¬ä¸º v1.13.1ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è§£å†³ï¼Œminikube start --alsologtostderr --kubernetes-version v1.13.1 ä»£ç†é—®é¢˜ï¼Œå› ä¸ºæˆ‘ä»¬ä¼Ÿå¤§çš„ç¥–å›½ç¹è£å¯Œå¼ºï¼Œå¯¼è‡´æ— æ³•ä¸‹è½½k8sé•œåƒï¼Œéƒ¨åˆ†é”™è¯¯æ—¥å¿—å¦‚ä¸‹ï¼š 12345I0114 10:47:38.727892 4695 utils.go:224] ! error execution phase preflight: [preflight] Some fatal errors occurred:I0114 10:47:38.727931 4695 utils.go:224] ! [ERROR ImagePull]: failed to pull image k8s.gcr.io/kube-apiserver:v1.13.1: output: Error response from daemon: Get https://k8s.gcr.io/v2/: proxyconnect tcp: dial tcp :80: connect: connection refusedI0114 10:47:38.727941 4695 utils.go:224] ! , error: exit status 1I0114 10:47:38.727963 4695 utils.go:224] ! [ERROR ImagePull]: failed to pull image k8s.gcr.io/kube-controller-manager:v1.13.1: output: Error response from daemon: Get https://k8s.gcr.io/v2/: proxyconnect tcp: dial tcp :80: connect: connection refusedI0114 10:47:38.727975 4695 utils.go:224] ! , error: exit status 1 è§£å†³ï¼š https://github.com/kubernetes/minikube/issues/3517#issuecomment-453906287 åœ¨å¯åŠ¨ minikube çš„æ—¶å€™åŠ ä¸Šä»£(fan)ç†(qiang)åœ°å€ï¼Œä½¿ç”¨ --docker-env å‚æ•°æ·»åŠ ç³»ç»ŸçŽ¯å¢ƒå˜é‡ï¼Œå®Œæ•´å‘½ä»¤å¦‚ä¸‹ï¼š minikube start --alsologtostderr --kubernetes-version v1.13.1 --docker-env HTTP_PROXY=http://10.0.2.2:1087 --docker-env HTTPS_PROXY=http://10.0.2.2:1087 --docker-env NO_PROXY=10.0.2.2,$(minikube ip) å‚æ•°è§£æžï¼š 10.0.2.2 è¿™ä¸ªipå…¶å®žæ˜¯å› ä¸º virtual box é‡Œè™šæ‹Ÿæœºå¦‚æžœä½¿ç”¨NATæ¨¡å¼çš„ç½‘å¡çš„æ—¶å€™ 10.0.2.2 é»˜è®¤æŒ‡å‘çš„æ˜¯å®¿ä¸»æœºçš„ 127.0.0.1ï¼Œå‚è€ƒåœ°å€ï¼šhttps://forums.docker.com/t/beginner-having-trouble-with-docker-behind-company-proxy/3968 5. å¯åŠ¨ éƒ¨åˆ†å¯åŠ¨æˆåŠŸæ—¥å¿—ä¿¡æ¯ï¼š 123456789101112131415.....I0114 13:35:19.102229 7316 utils.go:224] &gt; Run "kubectl apply -f [podnetwork].yaml" with one of the options listed at:I0114 13:35:19.102246 7316 utils.go:224] &gt; https://kubernetes.io/docs/concepts/cluster-administration/addons/I0114 13:35:19.102260 7316 utils.go:224] &gt; You can now join any number of machines by running the following on each nodeI0114 13:35:19.102287 7316 utils.go:224] &gt; as root:I0114 13:35:19.102307 7316 utils.go:224] &gt; kubeadm join localhost:8443 --token agf5vb.45h4fw6jqy7o2yff --discovery-token-ca-cert-hash sha256:c60ce3456d2ac3225edc119d1792d1b6c20b40b03cf0812ddf8d2fc867f21bf3Verifying kubelet health ...I0114 13:35:19.134467 7316 ssh_runner.go:137] Run with output: sudo systemctl is-active kubeletI0114 13:35:19.141912 7316 utils.go:224] &gt; activeVerifying apiserver health ...I0114 13:35:19.149990 7316 kubeadm.go:99] https://192.168.99.101:8443/healthz response: &lt;nil&gt; &amp;&#123;Status:200 OK StatusCode:200 Proto:HTTP/1.1 ProtoMajor:1 ProtoMinor:1 Header:map[Date:[Mon, 14 Jan 2019 05:35:19 GMT] Content-Length:[2] Content-Type:[text/plain; charset=utf-8]] Body:0xc0004b9d00 ContentLength:2 TransferEncoding:[] Close:false Uncompressed:false Trailer:map[] Request:0xc0002da500 TLS:0xc000354000&#125;Kubectl is now configured to use the cluster.Loading cached images from config file.Everything looks great. Please enjoy minikube! minikube dashboard ä¹‹åŽï¼Œå¯åŠ¨ dashboad æˆªå›¾ï¼š]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>kubernetes</category>
      </categories>
      <tags>
        <tag>kubernetes</tag>
        <tag>docker</tag>
        <tag>minikube</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æºœäº†æºœäº†2018ï¼Œæ¥äº†æ¥äº†2019]]></title>
    <url>%2F2018%2F12%2F31%2Fbye2018-hello2019.html</url>
    <content type="text"><![CDATA[18å¹´ä¸çŸ¥ä¸è§‰å·²åˆ°å°½å¤´ï¼Œä½†è‡ªå·±æ€»è§‰å¾—å¥½åƒ18å¹´åªè¿‡äº†9ä¸ªæœˆä¸€æ ·ã€‚æŠ“ä½18å¹´çš„å°å°¾å·´ï¼Œç»™è‡ªå·±çš„2018åšä¸ªå¹´ç»ˆæ€»ç»“ï¼Œä¸º2019åšä¸ªå±•æœ›ã€‚ 1. æ€»ç»“18 1.1. ç”Ÿæ´»æ–¹é¢ ä»Šå¹´ç›¸æ¯”åŽ»å¹´ï¼Œå°‘äº†ä¸€æ¬¡æ—…æ¸¸ï¼Œä½†æ˜¯åƒçš„æ–¹é¢ï¼Œæ¯”åŽ»å¹´æ›´è®²ç©¶äº†ä¸å°‘ã€‚æœ‰å¥¹çš„æ—¥å­éƒ½å¾ˆç²¾è‡´ã€‚ 1.2. æ„Ÿæƒ…æ–¹é¢ 18å¹´ç®—æ˜¯è¿ˆå‡ºäº†å…³é”®çš„ä¸€æ­¥å§ã€‚æ­£æœˆé‡ŒåŽ»äº†å¥¹å®¶ï¼Œè§äº†ä¸‹å¥¹çš„çˆ¶æ¯ï¼Œç»åŽ†äº†ä¸‹é‚£å„¿çš„è¿‡å¹´çš„é£Žä¿—ï¼Œè¿˜ç®—é¡ºåˆ©ã€‚5æœˆå¸¦å¥¹å›žå®¶ï¼Œè§äº†çˆ¸å¦ˆï¼Œè™½ç„¶è¿˜æœ‰äº›å°æ„å¤–ï¼Œä¸è¿‡æˆ‘åšä¿¡è‡ªå·±å¯ä»¥å¤„ç†å¥½ã€‚ 1.3. å·¥ä½œæ–¹é¢ 18å¹´3æœˆåˆï¼Œæ¯…ç„¶å†³ç„¶çš„ç¦»å¼€äº†åŒ—äº¬ï¼Œç¦»å¼€äº†é‚£ä¸ªæ°›å›´å¾ˆå¥½çš„å›¾è¿¹ï¼Œå›žåˆ°æ­å·žï¼Œä¸è¿‡ç”Ÿæ´»å¹¶æ²¡æƒ³è±¡ä¸­çš„ç¾Žå¥½ï¼Œè¯´å®žè¯ï¼ŒæŒºåŽæ‚”çš„ã€‚å—¯ï¼Œä¸è¿‡ï¼Œåœ¨ç¾Žåˆ›çš„æ—¥å­ä¹Ÿè¿˜ç®—ä¸é”™ï¼Œç»„é•¿äººå¥½ï¼Œå›¢é˜Ÿæˆå‘˜ä¹Ÿå¥½ç›¸å¤„ï¼Œä½†æ€»æ²¡æœ‰å›¾è¿¹çš„æ„Ÿè§‰ï¼Œä¹Ÿå¯èƒ½æ˜¯æƒ³é‚£ç¾¤â€œå“¥æ–‡åŒ–â€çš„å°ä¼™ä¼´äº†å§ã€‚ ä»Šå¹´å·¥ä½œä¸Šæœ€å¤§çš„æ”¶è´§åº”è¯¥å°±æ˜¯ï¼Œä¹‹å‰ä¸œå“¥ã€æ˜Žå“¥å®‰æŽ’å·¥ä½œï¼Œæˆ‘åŽ»ä¾ç…§æ—¶é—´è®¡åˆ’æ‰§è¡Œï¼ŒçŽ°åœ¨éœ€è¦æˆ‘åŽ»å®štodo-listï¼Œå®šå·¥ä½œé‡ï¼Œå®‰æŽ’å°ä¼™ä¼´ä¸€èµ·å¼€å‘ï¼›ä¹‹å‰åªéœ€å¯¹è‡ªå·±å¾—ä»£ç è´Ÿè´£ï¼ŒçŽ°åœ¨éœ€è¦å¯¹è‡ªå·±å¾—äº§å“è´Ÿè´£ï¼›ä¹‹å‰è€ƒè™‘ä»£ç åŠŸèƒ½å®žçŽ°ï¼ŒçŽ°åœ¨è€ƒè™‘äº§å“æ•´ä½“æž¶æž„ã€‚ 1.4. æŠ€æœ¯æ–¹é¢ ä½œä¸ºä¸€ä¸ªâ€œä¼ªå…¨æ ˆâ€ï¼Œä»Šå¹´å‡ ä¹Žæ²¡å†™å‰ç«¯ï¼Œåº”è¯¥æ˜¯æœ€å¤§çš„é—æ†¾äº†ã€‚ä¸è¿‡å¥½åœ¨åŽç«¯æŠ€æœ¯æ²¡è½ä¸‹ï¼Œç»™teamä¸€èµ·ç»„ç»‡äº†å‡ åœºtopicï¼Œåˆ†äº«äº†ä¸‹ã€ŠJava8æ–°ç‰¹æ€§ã€‹ã€Šå¾®æœåŠ¡æž¶æž„ã€‹ï¼Œä¸ºå›¢é˜Ÿå¼•å…¥ä¼˜ç§€çš„å¼€æºæ¡†æž¶hutoolã€guavaã€lombokç­‰ï¼Œå¹¶å®šä¹‰ä¸€å¥—webå¼€å‘è§„èŒƒï¼Œteamä¹ŸæŒ‰ç…§è¿™ä¸ªåœ¨æ‰§è¡Œï¼Œå¯¹å›¢é˜Ÿä¹Ÿè¿˜ç®—æœ‰äº›è´¡çŒ®ã€‚ è´Ÿè´£å…ƒæ•°æ®äº§å“çš„å¼€å‘ï¼Œä¹Ÿå¯¹elasticsearchå’Œneo4jç­‰æŠ€æœ¯æ›´åŠ ç†Ÿç»ƒçš„ä½¿ç”¨ã€‚ swarmï¼Œk8sï¼Œrancherè‡ªå·±çžŽçŽ©çš„ä¹Ÿè¿˜ç®—é¡ºæºœã€‚ 1.5. å¼€æºæ–¹é¢ ä»Šå¹´æœ€å¤§çš„åšæŒåº”è¯¥å°±æ˜¯spring-boot-demoï¼Œåœ°å€ï¼šhttps://github.com/xkcoding/spring-boot-demo ï¼Œç¨å¾®ä»‹ç»ä¸‹å§ï¼ŒåŸºäºŽSpringBootç‰ˆæœ¬2.1.0.RELEASEç‰ˆæœ¬ï¼Œé‡Œé¢æ€»å…±åŒ…å«47ä¸ªdemoï¼Œå½“ç„¶éƒ½ä¸ä»…ä»…æ˜¯ç®€å•çš„demoè€Œå·²ï¼Œä»ŽåŸºç¡€çš„åŠŸèƒ½é›†æˆï¼Œåˆ°å®šæ—¶ä»»åŠ¡çš„ç®¡ç†ï¼Œå†åˆ°å¤§å®¶æ¯”è¾ƒå…³æ³¨çš„å‰åŽç«¯åˆ†ç¦»çš„åŠ¨æ€æƒé™ç®¡ç†ã€å·¥ä½œæµç­‰ç­‰éƒ½æœ‰æ¶‰åŠï¼Œå¸Œæœ›å¯ä»¥åšæˆå…¥é—¨SpringBootæœ€å¿«ï¼Œé›†æˆæœ€ç®€å•çš„demoã€‚ ç„¶åŽå°±æ˜¯shiny-telegramï¼Œåœ°å€ï¼šhttps://github.com/xkcoding/shiny-telegram ï¼Œä¸»è¦å°±æ˜¯çˆ¬è™«ï¼Œçˆ¬å–Macç ´è§£è½¯ä»¶ç½‘ç«™https://xclient.info/ çš„ç ´è§£è½¯ä»¶ä¸‹è½½åœ°å€å’Œç‰ˆæœ¬ä¿¡æ¯ï¼Œä¸»è¦ä½¿ç”¨æŠ€æœ¯ç‚¹xpathã€jsoupã€seleniumå’Œphantomjsã€‚ è¿˜æœ‰ä¸ªåŠæˆå“ scaffoldï¼Œåœ°å€ï¼šhttps://github.com/xkcoding/scaffold ï¼Œä¸»è¦å°±æ˜¯ä¸€ä¸ªå¿«é€Ÿå¼€å‘çš„è„šæ‰‹æž¶å·¥ç¨‹ï¼Œå‰åŽç«¯åˆ†ç¦»ï¼ŒåŒ…å«åŸºç¡€æƒé™ç®¡ç†ï¼Œç”¨æˆ·ç®¡ç†ï¼Œæ—¥å¿—ç®¡ç†ï¼Œèœå•ç®¡ç†ï¼Œå®šæ—¶ä»»åŠ¡ç®¡ç†ï¼Œå·¥ä½œæµç­‰åŠŸèƒ½ï¼Œå¸Œæœ›æ˜Žå¹´å¯ä»¥ç»™å®ƒå®Œå–„ã€‚ è¿˜æœ‰æœ€åŽä¸€ä¸ªspring-cloud-learning-simple-demoï¼Œåœ°å€ï¼šhttps://github.com/xkcoding/spring-cloud-learning-simple-demo ï¼Œä¸»è¦å°±æ˜¯ç»™teamåˆ†äº«å¾®æœåŠ¡çš„æ—¶å€™å†™çš„ä¸€ä¸ªspringcloudçš„é›†æˆdemoï¼Œå¸®åŠ©å­¦ä¹ å„ä¸ªç»„ä»¶ä½¿ç”¨çš„ï¼Œå½“ç„¶å•¦ï¼Œä¹Ÿæ˜¯åŸºäºŽSpringBoot 2.Xçš„ã€‚æ€»å¾—æ¥è¯´ï¼Œå¯¹è‡ªå·±ä»Šå¹´çš„æ‰§è¡ŒåŠ›è¿˜ç®—æ»¡æ„ã€‚ 1.6. åšå®¢æ–¹é¢ emmmâ€¦ è¿™æ˜¯ä»Šå¹´æœ€å¤§çš„ç—›ï¼Œä»Šå¹´æ›´æ–°çš„åšæ–‡é¢‘çŽ‡æ¯”è¾ƒä½Žï¼Œä¸æ‰¾ç†ç”±ï¼Œå°±æ˜¯è‡ªå·±å¤ªæ‡’ã€‚ 2. å±•æœ›19 å¸Œæœ›çˆ¶æ¯å¤´å‘å¯ä»¥ç™½çš„æ…¢ä¸€ç‚¹ï¼Œå¸Œæœ›è‡ªå·±å’Œå¥¹å¯ä»¥ç›¸å¤„çš„æ›´å¥½ï¼Œå¸Œæœ›çˆ¶æ¯å¯ä»¥æ›´å¥½çš„æŽ¥çº³å¥¹ï¼Œå¸Œæœ›è‡ªå·±å¯ä»¥æˆä¸ºç²¾è‡´çš„çŒªçŒªç”·å­©ï¼Œå¸Œæœ›æ¥ä¸€æ¬¡æ—…æ¸¸ã€‚ å¸Œæœ›19å¹´åšå®¢å¯ä»¥æ¯æœˆä¿åº•3ç¯‡ã€‚ å¸Œæœ›19å¹´å¯ä»¥æ¯å¤©éƒ½åœ¨githubç•™ä¸‹è¶³è¿¹ï¼Œä¸ç®¡æœ‰æ²¡æœ‰äººstarè‡ªå·±çš„é¡¹ç›®ï¼Œä½†æ˜¯æˆ‘æƒ³å¯¹å·²ç»starçš„å°ä¼™ä¼´å’Œæˆ‘è‡ªå·±çš„ä»£ç è´Ÿè´£åˆ°åº•ï¼Œè¿™æ˜¯æˆ‘çš„æ€åº¦ã€‚ å¸Œæœ›è‡ªå·±å¯ä»¥æœ‰äº›å­˜æ¬¾ï¼Œ17ã€18å¹´åº•éƒ½æ˜¯å£è¢‹ç©ºç©ºï¼Œå¸Œæœ›19çš„å¹´åº•å¯ä»¥ä¸ç©ºäº†ã€‚ å¸Œæœ›è‡ªå·±ä»ç„¶å¯ä»¥ä¿æŒå¯¹ä»£ç çš„çƒ­çˆ±ï¼Œå¯¹æŠ€æœ¯æ‰§ç€ï¼Œæˆ‘ä¸€ç›´ç›¸ä¿¡è‡ªå·±çš„èƒ½åŠ›ï¼Œæˆ‘ä¸€ç›´åœ¨ç­‰å¾…ä¸€ä¸ªåˆé€‚çš„æœºä¼šã€‚]]></content>
      <categories>
        <category>æ€»ç»“å±•æœ›</category>
      </categories>
      <tags>
        <tag>æ€»ç»“å±•æœ›</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hello,Spring Boot!]]></title>
    <url>%2F2018%2F11%2F07%2Fspring-boot-start.html</url>
    <content type="text"><![CDATA[Spring Boot æ˜¯Springé¡¹ç›®ä¸­çš„ä¸€ä¸ªå­å·¥ç¨‹ï¼Œä¸Žæˆ‘ä»¬æ‰€ç†ŸçŸ¥çš„Spring-framework åŒå±žäºŽspringçš„äº§å“: å®˜ç½‘è¿™ä¸ªlogoä¸‹æœ‰è¿™ä¹ˆä¸€æ®µä»‹ç»ï¼š Takes an opinionated view of building production-ready Spring applications. Spring Boot favors convention over configuration and is designed to get you up and running as quickly as possible. ç¿»è¯‘ä¸€ä¸‹ï¼š ç”¨ä¸€äº›å›ºå®šçš„æ–¹å¼æ¥æž„å»ºç”Ÿäº§çº§åˆ«çš„springåº”ç”¨ã€‚Spring Boot æŽ¨å´‡çº¦å®šå¤§äºŽé…ç½®çš„æ–¹å¼ä»¥ä¾¿äºŽä½ èƒ½å¤Ÿå°½å¯èƒ½å¿«é€Ÿçš„å¯åŠ¨å¹¶è¿è¡Œç¨‹åºã€‚ å…¶å®žäººä»¬æŠŠSpring Boot ç§°ä¸ºæ­å»ºç¨‹åºçš„è„šæ‰‹æž¶ã€‚å…¶æœ€ä¸»è¦ä½œç”¨å°±æ˜¯å¸®æˆ‘ä»¬å¿«é€Ÿçš„æž„å»ºåºžå¤§çš„springé¡¹ç›®ï¼Œå¹¶ä¸”å°½å¯èƒ½çš„å‡å°‘ä¸€åˆ‡xmlé…ç½®ï¼Œåšåˆ°å¼€ç®±å³ç”¨ï¼Œè¿…é€Ÿä¸Šæ‰‹ï¼Œè®©æˆ‘ä»¬å…³æ³¨ä¸Žä¸šåŠ¡è€Œéžé…ç½®ã€‚ 1. äº†è§£ Spring Boot 1.1. ä¸ºä»€ä¹ˆå­¦ä¹  Spring Boot javaä¸€ç›´è¢«äººè¯Ÿç—…çš„ä¸€ç‚¹å°±æ˜¯è‡ƒè‚¿ã€éº»çƒ¦ã€‚å½“æˆ‘ä»¬è¿˜åœ¨è¾›è‹¦çš„æ­å»ºé¡¹ç›®æ—¶ï¼Œå¯èƒ½Pythonç¨‹åºå‘˜å·²ç»æŠŠåŠŸèƒ½å†™å¥½äº†ï¼Œç©¶å…¶åŽŸå› æ³¨æ„æ˜¯ä¸¤ç‚¹ï¼š å¤æ‚çš„é…ç½®ã€‚ é¡¹ç›®å„ç§é…ç½®å…¶å®žæ˜¯å¼€å‘æ—¶çš„æŸè€—ï¼Œ å› ä¸ºåœ¨æ€è€ƒ Spring ç‰¹æ€§é…ç½®å’Œè§£å†³ä¸šåŠ¡é—®é¢˜ä¹‹é—´éœ€è¦è¿›è¡Œæ€ç»´åˆ‡æ¢ï¼Œæ‰€ä»¥å†™é…ç½®æŒ¤å äº†å†™åº”ç”¨ç¨‹åºé€»è¾‘çš„æ—¶é—´ã€‚ ä¸€ä¸ªæ˜¯æ··ä¹±çš„ä¾èµ–ç®¡ç†ã€‚ é¡¹ç›®çš„ä¾èµ–ç®¡ç†ä¹Ÿæ˜¯ä»¶åƒåŠ›ä¸è®¨å¥½çš„äº‹æƒ…ã€‚å†³å®šé¡¹ç›®é‡Œè¦ç”¨å“ªäº›åº“å°±å·²ç»å¤Ÿè®©äººå¤´ç—›çš„äº†ï¼Œä½ è¿˜è¦çŸ¥é“è¿™äº›åº“çš„å“ªä¸ªç‰ˆæœ¬å’Œå…¶ä»–åº“ä¸ä¼šæœ‰å†²çªï¼Œè¿™éš¾é¢˜å®žåœ¨å¤ªæ£˜æ‰‹ã€‚å¹¶ä¸”ï¼Œä¾èµ–ç®¡ç†ä¹Ÿæ˜¯ä¸€ç§æŸè€—ï¼Œæ·»åŠ ä¾èµ–ä¸æ˜¯å†™åº”ç”¨ç¨‹åºä»£ç ã€‚ä¸€æ—¦é€‰é”™äº†ä¾èµ–çš„ç‰ˆæœ¬ï¼Œéšä¹‹è€Œæ¥çš„ä¸å…¼å®¹é—®é¢˜æ¯«æ— ç–‘é—®ä¼šæ˜¯ç”Ÿäº§åŠ›æ€æ‰‹ã€‚ è€ŒSpringBootè®©è¿™ä¸€åˆ‡æˆä¸ºè¿‡åŽ»ï¼ Spring Boot ç®€åŒ–äº†åŸºäºŽSpringçš„åº”ç”¨å¼€å‘ï¼Œåªéœ€è¦â€œrunâ€å°±èƒ½åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„ã€ç”Ÿäº§çº§åˆ«çš„Springåº”ç”¨ã€‚Spring Bootä¸ºSpringå¹³å°åŠç¬¬ä¸‰æ–¹åº“æä¾›å¼€ç®±å³ç”¨çš„è®¾ç½®ï¼ˆæä¾›é»˜è®¤è®¾ç½®ï¼Œå­˜æ”¾é»˜è®¤é…ç½®çš„åŒ…å°±æ˜¯å¯åŠ¨å™¨ï¼‰ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç®€å•çš„å¼€å§‹ã€‚å¤šæ•°Spring Bootåº”ç”¨åªéœ€è¦å¾ˆå°‘çš„Springé…ç½®ã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨SpringBootåˆ›å»ºjavaåº”ç”¨ï¼Œå¹¶ä½¿ç”¨java â€“jar å¯åŠ¨å®ƒï¼Œå°±èƒ½å¾—åˆ°ä¸€ä¸ªç”Ÿäº§çº§åˆ«çš„webå·¥ç¨‹ã€‚ 1.2. Spring Bootç‰¹ç‚¹ Spring Boot ä¸»è¦ç›®æ ‡æ˜¯ï¼š ä¸ºæ‰€æœ‰ Spring çš„å¼€å‘è€…æä¾›ä¸€ä¸ªéžå¸¸å¿«é€Ÿçš„ã€å¹¿æ³›æŽ¥å—çš„å…¥é—¨ä½“éªŒ å¼€ç®±å³ç”¨ï¼ˆå¯åŠ¨å™¨starter-å…¶å®žå°±æ˜¯SpringBootæä¾›çš„ä¸€ä¸ªjaråŒ…ï¼‰ï¼Œä½†é€šè¿‡è‡ªå·±è®¾ç½®å‚æ•°ï¼ˆ.propertiesï¼‰ï¼Œå³å¯å¿«é€Ÿæ‘†è„±è¿™ç§æ–¹å¼ã€‚ æä¾›äº†ä¸€äº›å¤§åž‹é¡¹ç›®ä¸­å¸¸è§çš„éžåŠŸèƒ½æ€§ç‰¹æ€§ï¼Œå¦‚å†…åµŒæœåŠ¡å™¨ã€å®‰å…¨ã€æŒ‡æ ‡ï¼Œå¥åº·æ£€æµ‹ã€å¤–éƒ¨åŒ–é…ç½®ç­‰ ç»å¯¹æ²¡æœ‰ä»£ç ç”Ÿæˆï¼Œä¹Ÿæ— éœ€ XML é…ç½®ã€‚ æ›´å¤šç»†èŠ‚ï¼Œå¤§å®¶å¯ä»¥åˆ°å®˜ç½‘æŸ¥çœ‹ã€‚ 2. å¿«é€Ÿå…¥é—¨ 2.1.åˆ›å»ºå·¥ç¨‹ åœ¨IDEAä¸­é€‰æ‹© Spring Initializr é…ç½®é¡¹ç›®åŸºç¡€ä¿¡æ¯ é€‰æ‹©ä¾èµ–ï¼Œä¹Ÿå¯ä»¥åŽç»­åœ¨ pom.xml é‡Œæ‰‹åŠ¨æ·»åŠ  é…ç½®é¡¹ç›®è·¯å¾„ FINISHï¼ 2.2. å¯åŠ¨ç±» Spring Booté¡¹ç›®é€šè¿‡mainå‡½æ•°å³å¯å¯åŠ¨ï¼Œåˆšåˆšåˆ›å»ºå·¥ç¨‹çš„æ—¶å€™å·²ç»è‡ªåŠ¨åˆ›å»ºäº†ä¸€ä¸ªå¯åŠ¨ç±»ï¼š ç„¶åŽæŸ¥çœ‹å¯åŠ¨ç±»ï¼š 1234567@SpringBootApplicationpublic class DemoApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(DemoApplication.class, args); &#125;&#125; 2.3. ç¼–å†™Controller æŽ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥åƒä»¥å‰é‚£æ ·å¼€å‘ SpringMVC çš„é¡¹ç›®äº†ï¼ æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªControllerï¼š 12345678@RestControllerpublic class HelloController &#123; @GetMapping("/hello") public String hello() &#123; return "hello, spring boot!"; &#125;&#125; 2.4. å¯åŠ¨æµ‹è¯• æŽ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¿è¡Œmainå‡½æ•°ï¼ŒæŸ¥çœ‹æŽ§åˆ¶å°ï¼š â‘ æ˜¯Spring MVCçš„æ˜ å°„è·¯å¾„ â‘¡æ˜¯Tomcatç›‘å¬çš„ç«¯å£æ˜¯8080 æ‰“å¼€é¡µé¢è®¿é—®ï¼šhttp://localhost:8080/hello æµ‹è¯•æˆåŠŸäº†ï¼]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>spring boot</category>
      </categories>
      <tags>
        <tag>spring boot</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŽå°è¿è¡ŒnodeæœåŠ¡]]></title>
    <url>%2F2018%2F09%2F28%2Frun-node-service-in-background.html</url>
    <content type="text"><![CDATA[å‰è¨€ å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åŽå°è¿è¡Œæˆ‘ä»¬çš„ node æœåŠ¡ï¼Œæœ‰3ç§æ–¹å¼å¯ä»¥å®žçŽ°ã€‚ ä½¿ç”¨Linuxè‡ªå¸¦çš„nohupå‘½ä»¤ ä½¿ç”¨foreverå‘½ä»¤ ä½¿ç”¨PM2ç®¡ç†nodeè¿›ç¨‹ è¿™é‡ŒæŽ¨èä½¿ç”¨PM2æ¥ç®¡ç†å’Œè¿è¡Œæˆ‘ä»¬çš„nodeæœåŠ¡ 1. ç®€ä»‹ PM2 æ˜¯ä¸€ä¸ªå¼€æºçš„å¸¦æœ‰è´Ÿè½½å‡è¡¡åŠŸèƒ½çš„ node åº”ç”¨çš„è¿›ç¨‹ç®¡ç†å™¨ï¼ŒåŒ…æ‹¬å®ˆæŠ¤è¿›ç¨‹ï¼Œç›‘æŽ§ï¼Œæ—¥å¿—çš„ä¸€æ•´å¥—å®Œæ•´çš„åŠŸèƒ½ï¼ŒåŸºæœ¬æ˜¯Nodejsåº”ç”¨ç¨‹åºä¸äºŒçš„å®ˆæŠ¤è¿›ç¨‹é€‰æ‹©ï¼Œäº‹å®žä¸Šå®ƒå¹¶ä¸ä»…ä»…å¯ä»¥å¯åŠ¨Nodejsçš„ç¨‹åºï¼Œåªè¦æ˜¯ä¸€èˆ¬çš„è„šæœ¬çš„ç¨‹åºå®ƒåŒæ ·å¯ä»¥èƒœä»»ã€‚å½“ä½ è¦æŠŠä½ çš„ç‹¬ç«‹ä»£ç åˆ©ç”¨å…¨éƒ¨çš„æœåŠ¡å™¨ä¸Šçš„æ‰€æœ‰CPUï¼Œå¹¶ä¿è¯è¿›ç¨‹æ°¸è¿œéƒ½æ´»ç€ï¼Œ0ç§’çš„é‡è½½ï¼ŒPM2æ˜¯å®Œç¾Žçš„é€‰æ‹©ã€‚ 2. å®‰è£… 1npm install pm2 -g 3. å‘½ä»¤ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647$ pm2 start app.js # å¯åŠ¨app.jsåº”ç”¨ç¨‹åº$ pm2 start app.js -i 4 # cluster mode æ¨¡å¼å¯åŠ¨4ä¸ªapp.jsçš„åº”ç”¨å®žä¾‹ # 4ä¸ªåº”ç”¨ç¨‹åºä¼šè‡ªåŠ¨è¿›è¡Œè´Ÿè½½å‡è¡¡$ pm2 start app.js --name="api" # å¯åŠ¨åº”ç”¨ç¨‹åºå¹¶å‘½åä¸º "api"$ pm2 start app.js --watch # å½“æ–‡ä»¶å˜åŒ–æ—¶è‡ªåŠ¨é‡å¯åº”ç”¨$ pm2 start npm -- start # å½“å‰ç›®å½•æ‰§è¡Œnpm start$ pm2 start npm --name "es-head" -- start # å½“å‰ç›®å½•æ‰§è¡Œnpm startå¹¶å‘½åä¸º "es-head"$ pm2 start script.sh # å¯åŠ¨ bash è„šæœ¬$ pm2 list # åˆ—è¡¨ PM2 å¯åŠ¨çš„æ‰€æœ‰çš„åº”ç”¨ç¨‹åº$ pm2 monit # æ˜¾ç¤ºæ¯ä¸ªåº”ç”¨ç¨‹åºçš„CPUå’Œå†…å­˜å ç”¨æƒ…å†µ$ pm2 show [app-name] # æ˜¾ç¤ºåº”ç”¨ç¨‹åºçš„æ‰€æœ‰ä¿¡æ¯$ pm2 logs # æ˜¾ç¤ºæ‰€æœ‰åº”ç”¨ç¨‹åºçš„æ—¥å¿—$ pm2 logs [app-name] # æ˜¾ç¤ºæŒ‡å®šåº”ç”¨ç¨‹åºçš„æ—¥å¿—$ pm2 stop all # åœæ­¢æ‰€æœ‰çš„åº”ç”¨ç¨‹åº$ pm2 stop 0 # åœæ­¢ idä¸º 0çš„æŒ‡å®šåº”ç”¨ç¨‹åº$ pm2 restart all # é‡å¯æ‰€æœ‰åº”ç”¨$ pm2 reload all # é‡å¯ cluster modeä¸‹çš„æ‰€æœ‰åº”ç”¨$ pm2 gracefulReload all # Graceful reload all apps in cluster mode$ pm2 delete all # å…³é—­å¹¶åˆ é™¤æ‰€æœ‰åº”ç”¨$ pm2 delete 0 # åˆ é™¤æŒ‡å®šåº”ç”¨ id 0$ pm2 scale api 10 # æŠŠåå­—å«apiçš„åº”ç”¨æ‰©å±•åˆ°10ä¸ªå®žä¾‹$ pm2 reset [app-name] # é‡ç½®é‡å¯æ•°é‡$ pm2 startup # åˆ›å»ºå¼€æœºè‡ªå¯åŠ¨å‘½ä»¤$ pm2 save # ä¿å­˜å½“å‰åº”ç”¨åˆ—è¡¨$ pm2 resurrect # é‡æ–°åŠ è½½ä¿å­˜çš„åº”ç”¨åˆ—è¡¨ 4. å‚è€ƒ PM2å®˜æ–¹æ–‡æ¡£]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>node</category>
      </categories>
      <tags>
        <tag>node</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Neo4j å’Œ Mysql æŸ¥è¯¢åŸºæœ¬è¯­æ³•çš„åŒºåˆ«]]></title>
    <url>%2F2018%2F09%2F20%2Fquery-language-differences-between-neo4j-and-mysql.html</url>
    <content type="text"><![CDATA[æ¯ç§æ•°æ®åº“éƒ½æœ‰è‡ªå·±çš„ä¸€å¥—æŸ¥è¯¢è¯­è¨€æˆ–è€…æ ‡å‡†ï¼Œå³ä½¿æ˜¯åŒä¸ºå…³ç³»åž‹æ•°æ®åº“çš„Oracleã€Sql Server å’Œ MySQLï¼Œå…¶åœ¨ä¸€äº›è¯­æ³•ç»†èŠ‚ä¸Šä¹Ÿæœ‰å·®å¼‚ï¼Œæ›´åˆ«è¯´ Mongo, Redis ç±»ä¼¼çš„éžå…³ç³»åž‹æ•°æ®åº“äº†ã€‚Neo4j ä¹Ÿä¸€æ ·ï¼Œæœ‰è‡ªå·±ä¸“å±žçš„æŸ¥è¯¢è¯­è¨€ Cypherã€‚æ·±å…¥å­¦ä¹ å…¶å®žå‘çŽ° Neo4j çš„æŸ¥è¯¢è¯­æ³•å¹¶ä¸éš¾åŽ»å­¦ä¹ ï¼Œå› ä¸º Cypher çš„è¯­æ„ç¡®å®žç®€æ´ï¼Œç›´è§‚ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384-- 1. å…¨è¡¨æ‰«æ ---- mysql --SELECT p.*FROM products as p;-- neo4j --MATCH (p:Product)RETURN p;-- 2. æŸ¥è¯¢ä»·æ ¼æœ€è´µçš„10ä¸ªå•†å“ï¼Œåªè¿”å›žå•†å“åå­—å’Œå•ä»· ---- mysql --SELECT p.ProductName, p.UnitPriceFROM products as pORDER BY p.UnitPrice DESCLIMIT 10;-- neo4j --MATCH (p:Product)RETURN p.productName, p.unitPriceORDER BY p.unitPrice DESCLIMIT 10;-- 3. æŒ‰ç…§å•†å“åå­—ç­›é€‰ ---- mysql --SELECT p.ProductName, p.UnitPriceFROM products AS pWHERE p.ProductName = &apos;Chocolade&apos;;-- neo4j --MATCH (p:Product)WHERE p.productName = &quot;Chocolade&quot;RETURN p.productName, p.unitPrice;-- å…¶ä»–çš„å†™æ³• --MATCH (p:Product &#123;productName:&quot;Chocolade&quot;&#125;)RETURN p.productName, p.unitPrice;-- 4. æŒ‰ç…§å•†å“åå­—ç­›é€‰2 ---- mysql --SELECT p.ProductName, p.UnitPriceFROM products as pWHERE p.ProductName IN (&apos;Chocolade&apos;,&apos;Chai&apos;);-- neo4j --MATCH (p:Product)WHERE p.productName IN [&apos;Chocolade&apos;,&apos;Chai&apos;]RETURN p.productName, p.unitPrice;-- 5. æ¨¡ç³ŠæŸ¥è¯¢å’Œæ•°å€¼è¿‡æ»¤ ---- mysql --SELECT p.ProductName, p.UnitPriceFROM products AS pWHERE p.ProductName LIKE &apos;C%&apos; AND p.UnitPrice 100;-- neo4j --MATCH (p:Product)WHERE p.productName STARTS WITH &quot;C&quot; AND p.unitPrice 100RETURN p.productName, p.unitPrice;-- 6. å¤šè¡¨è”åˆæŸ¥è¯¢---- mysql --SELECT DISTINCT c.CompanyNameFROM customers AS cJOIN orders AS o ON (c.CustomerID = o.CustomerID)JOIN order_details AS od ON (o.OrderID = od.OrderID)JOIN products AS p ON (od.ProductID = p.ProductID)WHERE p.ProductName = &apos;Chocolade&apos;;-- neo4j --MATCH (p:Product &#123;productName:&quot;Chocolade&quot;&#125;)&lt;-[:PRODUCT]-(:Order)&lt;-[:PURCHASED]-(c:Customer)RETURN distinct c.companyName;-- 7. åˆ†ç»„æŸ¥è¯¢ ---- mysql --SELECT e.EmployeeID, count(*) AS CountFROM Employee AS eJOIN Order AS o ON (o.EmployeeID = e.EmployeeID)GROUP BY e.EmployeeIDORDER BY Count DESC LIMIT 10;-- neo4j --MATCH (:Order)&lt;-[:SOLD]-(e:Employee)RETURN e.name, count(*) AS cntORDER BY cnt DESC LIMIT 10]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>neo4j</category>
      </categories>
      <tags>
        <tag>neo4j</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[git å¦‚ä½•æ›´æ–° fork çš„é¡¹ç›®åˆ°åŽŸé¡¹ç›®çš„æœ€æ–°ç‰ˆæœ¬]]></title>
    <url>%2F2018%2F09%2F18%2Fhow-to-update-the-fork-project.html</url>
    <content type="text"><![CDATA[åœ¨ github ä¸Š fork äº†ä¸€ä¸ªé¡¹ç›®ä¹‹åŽï¼Œå¦‚ä½•ä½¿è‡ªå·± fork çš„é¡¹ç›®å’ŒåŽŸå…ˆä½œè€…çš„é¡¹ç›®åˆ†æ”¯ä¿æŒåŒæ­¥å‘¢ï¼Œä¸‹é¢æˆ‘ä½¿ç”¨ hutool çš„é¡¹ç›®åšç¤ºèŒƒï¼Œæ‰‹æ‘¸æ‰‹ç¤ºèŒƒå¦‚ä½•ä½¿ fork çš„é¡¹ç›®ä¸ŽåŽŸé¡¹ç›®åˆ†æ”¯ä¿æŒåŒæ­¥ã€‚ æŸ¥çœ‹è¿œç¨‹çš„ç‰ˆæœ¬åº“åœ°å€ 123$ git remote -v origin https://github.com/xkcoding/hutool.git (fetch) origin https://github.com/xkcoding/hutool.git (push) æ·»åŠ åŽŸé¡¹ç›® git åœ°å€åˆ°æœ¬åœ°ç‰ˆæœ¬åº“ 1$ git remote add upstream https://github.com/looly/hutool.git æ£€æŸ¥ç‰ˆæœ¬åº“æ˜¯å¦æ·»åŠ æˆåŠŸ 12345$ git remote -vorigin https://github.com/xkcoding/hutool.git (fetch)origin https://github.com/xkcoding/hutool.git (push)upstream https://github.com/looly/hutool.git (fetch)upstream https://github.com/looly/hutool.git (push) åŽŸé¡¹ç›®æ›´æ–°å†…å®¹åŒæ­¥åˆ°æœ¬åœ° 123456789$ git fetch upstream remote: Counting objects: 360, done.remote: Compressing objects: 100% (148/148), done.remote: Total 360 (delta 158), reused 339 (delta 137), pack-reused 0Receiving objects: 100% (360/360), 87.95 KiB | 45.00 KiB/s, done.Resolving deltas: 100% (158/158), completed with 66 local objects.From https://github.com/looly/hutool * [new branch] v4-dev -&gt; upstream/v4-dev * [new branch] v4-master -&gt; upstream/v4-master æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯ 1234567$ git branch -a * v4-master remotes/origin/HEAD -&gt; origin/v4-master remotes/origin/v4-dev remotes/origin/v4-master remotes/upstream/v4-dev remotes/upstream/v4-master åŒæ­¥æ›´æ–°å†…å®¹åˆ°æœ¬åœ°å¯¹åº”åˆ†æ”¯ 1$ git merge upstream/v4-master æäº¤æ›´æ–°å†…å®¹åˆ° fork åœ°å€ 1git push]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
        <tag>GitHub</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Spring Boot å…¨å±€å¼‚å¸¸å¤„ç†]]></title>
    <url>%2F2018%2F08%2F20%2Fspring-boot-global-exception-handler.html</url>
    <content type="text"><![CDATA[æˆ‘ä»¬åœ¨åš Web åº”ç”¨çš„æ—¶å€™ï¼Œè¯·æ±‚å¤„ç†è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯å¼‚å¸¸æ˜¯ä¸€ä¸ªéžå¸¸å¸¸è§çš„æƒ…å†µï¼Œä½†æ˜¯å¼‚å¸¸çš„å¤„ç†æ–¹å¼å’Œæ”¾å›žçš„å¼‚å¸¸å†…å®¹å¹¶æ²¡æœ‰åšä¸€ä¸ªç»Ÿä¸€çš„å¤„ç†ã€‚åœ¨çŽ°åœ¨è¿™ç§å‰åŽç«¯åˆ†ç¦»çš„æ—¶ä»£ï¼Œä¸è®ºå“åº”æˆåŠŸè¿˜æ˜¯å¤±è´¥çš„æ•°æ®æ ¼å¼éƒ½éœ€è¦ä¿æŒä¸€è‡´ã€‚ 1. è¿”å›žæ ¼å¼ç»Ÿä¸€å°è£… Api.java 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129package com.xkcoding.scaffold.common;import com.xkcoding.scaffold.common.status.Status;import lombok.Data;import java.io.Serializable;/** * &lt;p&gt; * API ç»Ÿä¸€è¿”å›žæ ¼å¼å°è£… * &lt;/p&gt; * * @package: com.xkcoding.scaffold.common * @descriptionï¼š API ç»Ÿä¸€è¿”å›žæ ¼å¼å°è£… * @author: yangkai.shen * @date: Created in 2018/8/2 ä¸‹åˆ6:15 * @copyright: Copyright (c) 2018 * @version: V1.0 * @modified: yangkai.shen */@Datapublic class Api implements Serializable &#123; private static final long serialVersionUID = 1672493411204459264L; /** * è¿”å›žç  */ private Integer code; /** * è¿”å›žä¿¡æ¯ */ private String msg; /** * è¿”å›žæ•°æ® */ private Object data; /** * é»˜è®¤æž„é€  */ public Api() &#123; this.code = Status.SUCCESS.getCode(); this.msg = Status.SUCCESS.getMsg(); &#125; /** * æž„é€  API è¿”å›žå¯¹è±¡ * * @param code è¿”å›žç  * @param msg è¿”å›žä¿¡æ¯ * @param data æ•°æ® */ public Api(Integer code, String msg, Object data) &#123; this.code = code; this.msg = msg; this.data = data; &#125; /** * é€šç”¨æž„é€ åŒ…å«è¿”å›žä¿¡æ¯çš„ Api &lt;br&gt; * ä¸»è¦ç”¨äºŽåªåŒ…å«è¿”å›žä¿¡æ¯ï¼Œä¸åŒ…å«æ•°æ®æ—¶çš„è¿”å›ž * * @param code çŠ¶æ€ç  * @param msg ä¿¡æ¯ * @return Api */ public static Api of(int code, String msg, Object data) &#123; return new Api(code, msg, data); &#125; /** * é€šç”¨æž„é€ åŒ…å«è¿”å›žä¿¡æ¯çš„ Api &lt;br&gt; * ä¸»è¦ç”¨äºŽåªåŒ…å«è¿”å›žä¿¡æ¯ï¼Œä¸åŒ…å«æ•°æ®æ—¶çš„è¿”å›ž * * @param code çŠ¶æ€ç  * @param msg ä¿¡æ¯ * @return Api */ public static Api ofMessage(int code, String msg) &#123; return new Api(code, msg, null); &#125; /** * é€šç”¨æž„é€ åŒ…å«è¿”å›žä¿¡æ¯çš„ Api &lt;br&gt; * ä¸»è¦ç”¨äºŽåªåŒ…å«è¿”å›žä¿¡æ¯ï¼Œä¸åŒ…å«æ•°æ®æ—¶çš„è¿”å›ž * * @param msg ä¿¡æ¯ * @return Api */ public static Api ofMessage(String msg) &#123; return new Api(Status.SUCCESS.getCode(), msg, null); &#125; /** * é€šç”¨æž„é€ åŒ…å«è¿”å›žæ•°æ®çš„ Api &lt;br&gt; * ä¸»è¦ç”¨äºŽæ“ä½œæˆåŠŸæ—¶çš„è¿”å›ž(ä¸å¸¦æ•°æ®) * * @return Api */ public static Api ofSuccess() &#123; return new Api(Status.SUCCESS.getCode(), Status.SUCCESS.getMsg(), null); &#125; /** * é€šç”¨æž„é€ åŒ…å«è¿”å›žæ•°æ®çš„ Api &lt;br&gt; * ä¸»è¦ç”¨äºŽæ“ä½œæˆåŠŸæ—¶çš„è¿”å›ž * * @param data æ“ä½œæˆåŠŸæ—¶éœ€è¦è¿”å›žçš„æ•°æ® * @return Api */ public static Api ofSuccess(Object data) &#123; return new Api(Status.SUCCESS.getCode(), Status.SUCCESS.getMsg(), data); &#125; /** * é€šè¿‡ Status æž„é€  Api &lt;br&gt; * ä¸»è¦ç”¨äºŽå‡ºçŽ°å¼‚å¸¸æ—¶çš„è¿”å›ž * * @param status &#123;@link Status&#125; * @return Api */ public static Api ofStatus(Status status) &#123; return new Api(status.getCode(), status.getMsg(), null); &#125;&#125; 2. é€šç”¨çŠ¶æ€ç»Ÿä¸€å°è£… Status.java 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128package com.xkcoding.scaffold.common.status;import com.xkcoding.scaffold.common.BaseEnum;import lombok.Getter;/** * &lt;p&gt; * çŠ¶æ€ç æžšä¸¾ * &lt;/p&gt; * * @package: com.xkcoding.scaffold.common * @descriptionï¼š çŠ¶æ€ç æžšä¸¾ * @author: yangkai.shen * @date: Created in 2018/8/2 ä¸‹åˆ7:49 * @copyright: Copyright (c) 2018 * @version: V1.0 * @modified: yangkai.shen */@Getterpublic enum Status implements BaseEnum &#123; /** * æˆåŠŸ */ SUCCESS(200, "æˆåŠŸ"), /** * è¯·æ±‚é”™è¯¯ */ BAD_REQUEST(400, "è¯·æ±‚é”™è¯¯"), /** * å°šæœªç™»å½• */ UNAUTHORIZED(401, "å°šæœªç™»å½•"), /** * æƒé™ä¸å¤Ÿ */ FORBIDDEN(403, "æƒé™ä¸å¤Ÿ"), /** * è¯·æ±‚ä¸å­˜åœ¨ */ REQUEST_NOT_FOUND(404, "è¯·æ±‚ä¸å­˜åœ¨"), /** * æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ */ INTERNAL_SERVER_ERROR(500, "æœåŠ¡å™¨å†…éƒ¨é”™è¯¯"), /** * ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ */ USERNAME_OR_PASSWORD_ERROR(50000, "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯"), /** * ç”¨æˆ·ä¸å­˜åœ¨ */ USER_NOT_EXIST(50001, "è´¦å·ä¸å­˜åœ¨"), /** * ç”¨æˆ·å·²è¢«ç¦ç”¨ */ USER_DISABLE(50002, "è´¦å·å·²è¢«ç¦ç”¨"), /** * è´¦å·å·²åˆ é™¤ */ USER_DELETED(50003, "è´¦å·å·²åˆ é™¤"), /** * éªŒè¯ç é”™è¯¯ */ VERIFY_CODE_ERROR(50004, "éªŒè¯ç é”™è¯¯"), /** * ç™»å½•æˆåŠŸ */ LOGIN_SUCCESS(50005, "ç™»å½•æˆåŠŸ"), /** * é€€å‡ºæˆåŠŸ */ LOGOUT_SUCCESS(50006, "é€€å‡ºæˆåŠŸ"), /** * éªŒè¯ç å¼‚å¸¸ */ CODE_ERROR(50007, "éªŒè¯ç å¼‚å¸¸"), /** * èŽ·å–éªŒè¯ç çš„å€¼å¤±è´¥ */ CODE_GET_ERROR(50008, "èŽ·å–éªŒè¯ç çš„å€¼å¤±è´¥"), /** * éªŒè¯ç çš„å€¼ä¸èƒ½ä¸ºç©º */ CODE_VALUE_NOT_NULL(50009, "éªŒè¯ç çš„å€¼ä¸èƒ½ä¸ºç©º"), /** * éªŒè¯ç ä¸å­˜åœ¨ */ CODE_NOT_FOUND(50010, "éªŒè¯ç ä¸å­˜åœ¨"), /** * éªŒè¯ç å·²è¿‡æœŸ */ CODE_IS_EXPIRED(50011, "éªŒè¯ç å·²è¿‡æœŸ"), /** * éªŒè¯ç ä¸åŒ¹é… */ CODE_NOT_MATCH(50012, "éªŒè¯ç ä¸åŒ¹é…"), /** * éªŒè¯ç å‘é€å¼‚å¸¸ */ CODE_SEND_ERROR(50012, "éªŒè¯ç å‘é€å¼‚å¸¸"); private Integer code; private String msg; Status(Integer code, String msg) &#123; this.code = code; this.msg = msg; &#125;&#125; 3. è‡ªå®šä¹‰ä¸šåŠ¡å¼‚å¸¸ç±» ScaffoldException.java 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061package com.xkcoding.scaffold.exception;import com.xkcoding.scaffold.common.status.Status;import lombok.Getter;/** * &lt;p&gt; * é€šç”¨å…¨å±€å¼‚å¸¸ * &lt;/p&gt; * * @package: com.xkcoding.scaffold.exception * @descriptionï¼š é€šç”¨å…¨å±€å¼‚å¸¸ * @author: yangkai.shen * @date: Created in 2018/8/2 ä¸‹åˆ7:59 * @copyright: Copyright (c) 2018 * @version: V1.0 * @modified: yangkai.shen */@Getterpublic class ScaffoldException extends Exception &#123; /** * å¼‚å¸¸ç  */ private Integer code; /** * è¿”å›žä¿¡æ¯ */ private String msg; /** * è¿”å›žå†…å®¹ */ private Object data; public ScaffoldException(Integer code, String msg) &#123; super(msg); this.code = code; this.msg = msg; &#125; public ScaffoldException(Integer code, String msg, Object data) &#123; super(msg); this.code = code; this.msg = msg; this.data = data; &#125; public ScaffoldException(Status status) &#123; super(status.getMsg()); this.code = status.getCode(); this.msg = status.getMsg(); &#125; public ScaffoldException(Status status, Object data) &#123; super(status.getMsg()); this.code = status.getCode(); this.msg = status.getMsg(); this.data = data; &#125;&#125; 4. é…ç½® Spring Boot é…ç½® application.yml ä¸»è¦æ˜¯ä¸ºäº†å¯¹404é”™è¯¯ä½œå¤„ç† 1234567spring: ### å¼€å¯404å¼‚å¸¸æŠ›å‡º ### mvc: throw-exception-if-no-handler-found: true ### å…³é—­é™æ€èµ„æºæ˜ å°„ ### resources: add-mappings: false 5. ç»Ÿä¸€å¼‚å¸¸å¤„ç† GlobalExceptionHandler.java 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647package com.xkcoding.scaffold.handler;import com.xkcoding.scaffold.common.Api;import com.xkcoding.scaffold.common.status.Status;import com.xkcoding.scaffold.exception.ScaffoldException;import lombok.extern.slf4j.Slf4j;import org.springframework.security.access.AccessDeniedException;import org.springframework.web.bind.annotation.ControllerAdvice;import org.springframework.web.bind.annotation.ExceptionHandler;import org.springframework.web.bind.annotation.ResponseBody;import org.springframework.web.servlet.NoHandlerFoundException;/** * &lt;p&gt; * å…¨å±€å¼‚å¸¸å¤„ç† * &lt;/p&gt; * * @package: com.xkcoding.scaffold.handler * @descriptionï¼š å…¨å±€å¼‚å¸¸å¤„ç† * @author: yangkai.shen * @date: Created in 2018/8/2 ä¸‹åˆ8:05 * @copyright: Copyright (c) 2018 * @version: V1.0 * @modified: yangkai.shen */@Slf4j@ControllerAdvicepublic class GlobalExceptionHandler &#123; @ExceptionHandler(value = Exception.class) @ResponseBody public Api handlerException(Exception e) &#123; if (e instanceof NoHandlerFoundException) &#123; log.error("ã€å…¨å±€å¼‚å¸¸æ‹¦æˆªã€‘NoHandlerFoundException: è¯·æ±‚æ–¹æ³• &#123;&#125;, è¯·æ±‚è·¯å¾„ &#123;&#125;", ((NoHandlerFoundException) e).getRequestURL(), ((NoHandlerFoundException) e).getHttpMethod()); return Api.ofStatus(Status.REQUEST_NOT_FOUND); &#125; else if (e instanceof ScaffoldException) &#123; log.error("ã€å…¨å±€å¼‚å¸¸æ‹¦æˆªã€‘ScaffoldException: çŠ¶æ€ç  &#123;&#125;, å¼‚å¸¸ä¿¡æ¯ &#123;&#125;", ((ScaffoldException) e).getCode(), e.getMessage()); return new Api(((ScaffoldException) e).getCode(), e.getMessage(), ((ScaffoldException) e).getData()); &#125; else if (e instanceof AccessDeniedException) &#123; log.error("ã€å…¨å±€å¼‚å¸¸æ‹¦æˆªã€‘AccessDeniedException: å¼‚å¸¸ä¿¡æ¯ &#123;&#125;", e.getMessage()); return Api.ofStatus(Status.FORBIDDEN); &#125; log.error("ã€å…¨å±€å¼‚å¸¸æ‹¦æˆªã€‘: å¼‚å¸¸ä¿¡æ¯ &#123;&#125; ", e.getMessage()); return Api.ofStatus(Status.INTERNAL_SERVER_ERROR); &#125;&#125; Tip å¼‚å¸¸å¤„ç†çš„æ—¶å€™ï¼ŒåŠ¡å¿…åœ¨å…¨å±€å¼‚å¸¸å¤„ç†ç±»ä¸­ï¼Œæ‰“å°å¼‚å¸¸æ—¥å¿—ï¼Œæ‰“å°å¼‚å¸¸æ—¥å¿—ï¼Œæ‰“å°å¼‚å¸¸æ—¥å¿—ï¼ ç›¸å…³ä»£ç åœ°å€ï¼šhttps://github.com/xkcoding/scaffold]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>spring boot</category>
      </categories>
      <tags>
        <tag>spring boot</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Java8 å­¦ä¹ æ•´ç†]]></title>
    <url>%2F2018%2F07%2F30%2Fjava8-learning.html</url>
    <content type="text"><![CDATA[å‰è¨€ï¼šJava 8 (åˆç§°ä¸º jdk 1.8) æ˜¯ Java è¯­è¨€å¼€å‘çš„ä¸€ä¸ªä¸»è¦ç‰ˆæœ¬ã€‚ Oracle å…¬å¸äºŽ 2014 å¹´ 3 æœˆ 18 æ—¥å‘å¸ƒ Java 8 ï¼Œå®ƒæ”¯æŒå‡½æ•°å¼ç¼–ç¨‹ï¼Œæ–°çš„ JavaScript å¼•æ“Žï¼Œæ–°çš„æ—¥æœŸ APIï¼Œæ–°çš„Stream API ç­‰ã€‚ç›®å‰å¤§éƒ¨åˆ†å…¬å¸éƒ½å·²ç»åœ¨ä½¿ç”¨ Java 8å¼€å‘é¡¹ç›®ã€‚æœ¬æ–‡æ˜¯æˆ‘åœ¨å…¬å¸çš„ä¸€æ¬¡Java 8åˆ†äº«çš„æ–‡ç« ï¼Œå¼€ç¯‡å…ˆä»‹ç»äº† Java 8 çš„å‘å±•ï¼Œå†åˆ†åˆ«è®²è¿° Java 8 çš„æ–°ç‰¹æ€§ï¼ŒåŒæ—¶é™„ä¸Šä¸€äº› Demo ä»£ç ï¼ˆ https://github.com/xkcoding/java8_learning ï¼‰ï¼Œä»¥ä¾¿æ›´å¥½çš„å…¥é—¨å­¦ä¹  Java 8ï¼ŒåŽšè„¸çš®çš„æ±‚ä¸ª Starã€‚ 1. Java 8 çš„å‘å±• JDK 5 è‡ªåŠ¨è£…ç®±ä¸Žæ‹†ç®± JDK1.5ä¸ºæ¯ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»åž‹å®šä¹‰äº†ä¸€ä¸ªå°è£…ç±»ã€‚ä½¿javaä¸­çš„åŸºæœ¬æ•°æ®ç±»åž‹ä¹Ÿæœ‰è‡ªå·±çš„å¯¹è±¡ 12345678int --&gt;Integerdouble --&gt; Doublelong --&gt; Longchar --&gt; Characterfloat --&gt; Floatboolean --&gt; Booleanshort --&gt; Shortbyte -- &gt; Byte è‡ªåŠ¨è£…åŒ…ï¼šå°†åŸºæœ¬ç±»åž‹è½¬æ¢æˆä¸ºå¯¹è±¡ï¼Œä¾‹å¦‚ï¼šint --&gt; Integer è‡ªåŠ¨æ‹†åŒ…ï¼šå°†å¯¹è±¡è½¬æ¢æˆä¸ºåŸºæœ¬æ•°æ®ç±»åž‹ï¼Œä¾‹å¦‚ï¼šInteger --&gt; int å¯¹äºŽ JDK1.5 ä¹‹å‰é›†åˆæ€»ä¸èƒ½å­˜æ”¾åŸºæœ¬æ•°æ®ç±»åž‹çš„é—®é¢˜ï¼ŒçŽ°åœ¨ä¹Ÿèƒ½å¤Ÿè§£å†³ã€‚ æžšä¸¾ æžšä¸¾æ˜¯ JDK1.5 æŽ¨å‡ºçš„ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„ç‰¹æ€§ã€‚å…¶å…³é”®å­—ä¸º enum ä¾‹å¦‚ï¼šå®šä¹‰ä»£è¡¨äº¤é€šç¯çš„æžšä¸¾ 123public enum MyEnum&#123; RED,GREEN,YELLOW&#125; é™æ€å¯¼å…¥ ä¼˜ç‚¹ï¼šä½¿ç”¨é™æ€å¯¼å…¥å¯ä»¥ä½¿è¢«å¯¼å…¥ç±»çš„æ‰€æœ‰é™æ€å˜é‡å’Œé™æ€æ–¹æ³•åœ¨å½“å‰ç±»ç›´æŽ¥å¯è§ï¼Œä½¿ç”¨è¿™äº›é™æ€æˆå‘˜æ— éœ€å†ç»™å‡ºä»–ä»¬çš„ç±»åã€‚ ç¼ºç‚¹ï¼šè¿‡åº¦ä½¿ç”¨ä¼šé™ä½Žä»£ç çš„å¯è¯»æ€§ å¯å˜å‚æ•° åœ¨JDK1.5ä»¥å‰ï¼Œå½“æˆ‘ä»¬è¦ä¸ºä¸€ä¸ªæ–¹æ³•ä¼ é€’å¤šä¸ªç±»åž‹ç›¸åŒçš„å‚æ•°æ—¶ï¼Œ æˆ‘ä»¬æœ‰ä¸¤ç§æ–¹æ³•è§£å†³ ç›´æŽ¥ä¼ é€’ä¸€ä¸ªæ•°ç»„è¿‡åŽ» æœ‰å¤šå°‘ä¸ªå‚æ•°å°±ä¼ é€’å¤šå°‘ä¸ªå‚æ•°ã€‚ ä¾‹å¦‚ï¼š 12public void printColor(String red,String green,String yellow)&#123; &#125; æˆ–è€… 123public void printColor(String[] colors)&#123;&#125; è¿™æ ·ç¼–å†™æ–¹æ³•å‚æ•°è™½ç„¶èƒ½å¤Ÿå®žçŽ°æˆ‘ä»¬æƒ³è¦çš„æ•ˆæžœï¼Œä½†æ˜¯ï¼Œè¿™æ ·æ˜¯ä¸æ˜¯æœ‰ç‚¹éº»çƒ¦å‘¢ï¼Ÿ å†è€…ï¼Œå¦‚æžœå‚æ•°ä¸ªæ•°ä¸ç¡®å®šï¼Œæˆ‘ä»¬æ€Žä¹ˆåŠžå‘¢ï¼ŸJava JDK1.5ä¸ºæˆ‘ä»¬æä¾›çš„å¯å˜å‚æ•°å°±èƒ½å¤Ÿå®Œç¾Žçš„è§£å†³è¿™ä¸ªé—®é¢˜. ä¾‹å¦‚ï¼š 123public void printColor(String... colors)&#123;&#125; å¦‚æžœå‚æ•°çš„ç±»åž‹ç›¸åŒï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ ç±»åž‹+ä¸‰ä¸ªç‚¹ ï¼ŒåŽé¢è·Ÿä¸€ä¸ªå‚æ•°åç§°çš„å½¢å¼ã€‚ è¿™æ ·çš„å¥½å¤„å°±æ˜¯ï¼Œåªè¦å‚æ•°ç±»åž‹ç›¸åŒï¼Œæ— è®ºä¼ é€’å‡ ä¸ªå‚æ•°éƒ½æ²¡æœ‰é™åˆ¶ æ³¨æ„ï¼šå¯å˜å‚æ•°å¿…é¡»æ˜¯å‚æ•°åˆ—è¡¨çš„æœ€åŽä¸€é¡¹ï¼ˆè¯¥ç‰¹æ€§å¯¹å¯¹è±¡å’ŒåŸºæœ¬æ•°æ®ç±»åž‹éƒ½é€‚ç”¨ï¼‰ æ³›åž‹ 12//ç»™é›†åˆæŒ‡å®šå­˜å…¥ç±»åž‹ï¼Œä¸Šé¢è¿™ä¸ªé›†åˆåœ¨å­˜å…¥æ•°æ®çš„æ—¶å€™å¿…é¡»å­˜å…¥Stringç±»åž‹çš„æ•°æ®ï¼Œå¦åˆ™ç¼–è¯‘å™¨ä¼šæŠ¥é”™List&lt;String&gt; strs = new ArrayList&lt;String&gt;(); â€œæ³›åž‹â€ æ„å‘³ç€ç¼–å†™çš„ä»£ç å¯ä»¥è¢«ä¸åŒç±»åž‹çš„å¯¹è±¡æ‰€é‡ç”¨ã€‚ å¯è§æ³›åž‹çš„æå‡ºæ˜¯ä¸ºäº†ç¼–å†™é‡ç”¨æ€§æ›´å¥½çš„ä»£ç ã€‚ æ³›åž‹çš„æœ¬è´¨æ˜¯å‚æ•°åŒ–ç±»åž‹ï¼Œä¹Ÿå°±æ˜¯è¯´æ‰€æ“ä½œçš„æ•°æ®ç±»åž‹è¢«æŒ‡å®šä¸ºä¸€ä¸ªå‚æ•°ã€‚ æ¯”å¦‚å¸¸è§çš„é›†åˆç±» LinkedListï¼Œå…¶å®žçŽ°çš„æŽ¥å£ååŽæœ‰ä¸ªç‰¹æ®Šçš„éƒ¨åˆ† &lt;&gt;ï¼Œè€Œä¸”å®ƒçš„æˆå‘˜çš„ç±»åž‹ Link ä¹ŸåŒ…å«ä¸€ä¸ª &lt;&gt;ï¼Œè¿™ä¸ªç¬¦å·çš„å°±æ˜¯ç±»åž‹å‚æ•°ï¼Œ å®ƒä½¿å¾—åœ¨è¿è¡Œä¸­ï¼Œåˆ›å»ºä¸€ä¸ª LinkedList æ—¶å¯ä»¥ä¼ å…¥ä¸åŒçš„ç±»åž‹ï¼Œæ¯”å¦‚ new LinkedListï¼Œè¿™æ ·å®ƒçš„æˆå‘˜å­˜æ”¾çš„ç±»åž‹ä¹Ÿæ˜¯ Stringã€‚ For-Eachå¾ªçŽ¯ ä¾‹å¦‚ä¸Šé¢è¿™ä¸ªé›†åˆæˆ‘ä»¬å¯ä»¥é€šè¿‡for-eachéåŽ†ï¼Œè¿™æ ·æ›´åŠ ç®€å•æ¸…æ™°ã€‚ 123for(String s : strs)&#123; System.out.println(s); &#125; æ³¨æ„ï¼šä½¿ç”¨for-eachéåŽ†é›†åˆæ—¶ï¼Œè¦éåŽ†çš„é›†åˆå¿…é¡»å®žçŽ°äº†IteratoræŽ¥å£ çº¿ç¨‹å¹¶å‘åº“ çº¿ç¨‹å¹¶å‘åº“æ˜¯ Java1.5 æå‡ºçš„å…³äºŽå¤šçº¿ç¨‹å¤„ç†çš„é«˜çº§åŠŸèƒ½ï¼Œæ‰€åœ¨åŒ…ï¼šjava.util.concurrent åŒ…æ‹¬ çº¿ç¨‹äº’æ–¥å·¥å…·ç±»ï¼šLockï¼ŒReadWriteLock çº¿ç¨‹é€šä¿¡ï¼šCondition çº¿ç¨‹æ± ï¼šExecutorService åŒæ­¥é˜Ÿåˆ—ï¼šArrayBlockingQueue åŒæ­¥é›†åˆï¼šConcurrentHashMapï¼ŒCopyOnWriteArrayList çº¿ç¨‹åŒæ­¥å·¥å…·ï¼šSemaphore JDK 6 Desktopç±»å’ŒSystemTrayç±» å‰è€…å¯ä»¥ç”¨æ¥æ‰“å¼€ç³»ç»Ÿé»˜è®¤æµè§ˆå™¨æµè§ˆæŒ‡å®šçš„URLï¼Œæ‰“å¼€ç³»ç»Ÿé»˜è®¤é‚®ä»¶å®¢æˆ·ç«¯ç»™æŒ‡å®šçš„é‚®ç®±å‘é‚®ä»¶ï¼Œç”¨é»˜è®¤åº”ç”¨ç¨‹åºæ‰“å¼€æˆ–ç¼–è¾‘æ–‡ä»¶(æ¯”å¦‚ï¼Œç”¨è®°äº‹æœ¬æ‰“å¼€ä»¥ txt ä¸ºåŽç¼€åçš„æ–‡ä»¶)ï¼Œç”¨ç³»ç»Ÿé»˜è®¤çš„æ‰“å°æœºæ‰“å°æ–‡æ¡£ï¼›åŽè€…å¯ä»¥ç”¨æ¥åœ¨ç³»ç»Ÿæ‰˜ç›˜åŒºåˆ›å»ºä¸€ä¸ªæ‰˜ç›˜ç¨‹åºã€‚ ä½¿ç”¨Compiler API çŽ°åœ¨æˆ‘ä»¬å¯ä»¥ç”¨JDK1.6 çš„Compiler API(JSR 199)åŽ»åŠ¨æ€ç¼–è¯‘Javaæºæ–‡ä»¶ï¼ŒCompiler APIç»“åˆåå°„åŠŸèƒ½å°±å¯ä»¥å®žçŽ°åŠ¨æ€çš„äº§ç”ŸJavaä»£ç å¹¶ç¼–è¯‘æ‰§è¡Œè¿™äº›ä»£ç ï¼Œæœ‰ç‚¹åŠ¨æ€è¯­è¨€çš„ç‰¹å¾ã€‚ è¿™ä¸ªç‰¹æ€§å¯¹äºŽæŸäº›éœ€è¦ç”¨åˆ°åŠ¨æ€ç¼–è¯‘çš„åº”ç”¨ç¨‹åºç›¸å½“æœ‰ç”¨ï¼Œæ¯”å¦‚JSP Web Serverï¼Œå½“æˆ‘ä»¬æ‰‹åŠ¨ä¿®æ”¹JSPåŽï¼Œæ˜¯ä¸å¸Œæœ›éœ€è¦é‡å¯Web Serveræ‰å¯ä»¥çœ‹åˆ°æ•ˆæžœçš„ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ç”¨Compiler APIæ¥å®žçŽ°åŠ¨æ€ç¼–è¯‘JSPæ–‡ä»¶ã€‚ å½“ç„¶ï¼ŒçŽ°åœ¨çš„JSP Web Serverä¹Ÿæ˜¯æ”¯æŒJSPçƒ­éƒ¨ç½²çš„ï¼ŒçŽ°åœ¨çš„JSP Web Serveré€šè¿‡åœ¨è¿è¡ŒæœŸé—´é€šè¿‡Runtime.execæˆ–ProcessBuilderæ¥è°ƒç”¨javacæ¥ç¼–è¯‘ä»£ç ï¼Œè¿™ç§æ–¹å¼éœ€è¦æˆ‘ä»¬äº§ç”Ÿå¦ä¸€ä¸ªè¿›ç¨‹åŽ»åšç¼–è¯‘å·¥ä½œï¼Œä¸å¤Ÿä¼˜é›…è€Œä¸”å®¹æ˜“ä½¿ä»£ç ä¾èµ–ä¸Žç‰¹å®šçš„æ“ä½œç³»ç»Ÿï¼› Compiler APIé€šè¿‡ä¸€å¥—æ˜“ç”¨çš„æ ‡å‡†çš„APIæä¾›äº†æ›´åŠ ä¸°å¯Œçš„æ–¹å¼åŽ»åšåŠ¨æ€ç¼–è¯‘ï¼Œè€Œä¸”æ˜¯è·¨å¹³å°çš„ã€‚ è½»é‡çº§Http Server API JDK1.6 æä¾›äº†ä¸€ä¸ªç®€å•çš„ Http Server APIï¼Œæ®æ­¤æˆ‘ä»¬å¯ä»¥æž„å»ºè‡ªå·±çš„åµŒå…¥å¼ Http Serverï¼Œå®ƒæ”¯æŒHttpå’ŒHttpsåè®®ï¼Œæä¾›äº†HTTP1.1çš„éƒ¨åˆ†å®žçŽ°ï¼Œæ²¡æœ‰è¢«å®žçŽ°çš„é‚£éƒ¨åˆ†å¯ä»¥é€šè¿‡æ‰©å±•å·²æœ‰çš„ Http Server APIæ¥å®žçŽ°ï¼Œç¨‹åºå‘˜å¿…é¡»è‡ªå·±å®žçŽ° HttpHandler æŽ¥å£ï¼ŒHttpServer ä¼šè°ƒç”¨ HttpHandler å®žçŽ°ç±»çš„å›žè°ƒæ–¹æ³•æ¥å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚ï¼Œåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æŠŠä¸€ä¸ª Http è¯·æ±‚å’Œå®ƒçš„å“åº”ç§°ä¸ºä¸€ä¸ªäº¤æ¢ï¼ŒåŒ…è£…æˆ HttpExchange ç±»ï¼ŒHttpServer è´Ÿè´£å°† HttpExchange ä¼ ç»™ HttpHandler å®žçŽ°ç±»çš„å›žè°ƒæ–¹æ³•ã€‚ ç”¨Consoleå¼€å‘æŽ§åˆ¶å°ç¨‹åº JDK1.6 ä¸­æä¾›äº† java.io.Console ç±»ä¸“ç”¨æ¥è®¿é—®åŸºäºŽå­—ç¬¦çš„æŽ§åˆ¶å°è®¾å¤‡ã€‚ ä½ çš„ç¨‹åºå¦‚æžœè¦ä¸Ž Windows ä¸‹çš„ cmd æˆ–è€… Linux ä¸‹çš„ Terminal äº¤äº’ï¼Œå°±å¯ä»¥ç”¨ Console ç±»ä»£åŠ³ã€‚ ä½†æˆ‘ä»¬ä¸æ€»æ˜¯èƒ½å¾—åˆ°å¯ç”¨çš„ Consoleï¼Œä¸€ä¸ªJVMæ˜¯å¦æœ‰å¯ç”¨çš„ Console ä¾èµ–äºŽåº•å±‚å¹³å°å’Œ JVM å¦‚ä½•è¢«è°ƒç”¨ã€‚ å¦‚æžœJVMæ˜¯åœ¨äº¤äº’å¼å‘½ä»¤è¡Œ(æ¯”å¦‚ Windows çš„ cmd)ä¸­å¯åŠ¨çš„ï¼Œå¹¶ä¸”è¾“å…¥è¾“å‡ºæ²¡æœ‰é‡å®šå‘åˆ°å¦å¤–çš„åœ°æ–¹ï¼Œé‚£ä¹ˆå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªå¯ç”¨çš„ Console å®žä¾‹ã€‚ å¯¹è„šæœ¬è¯­è¨€çš„æ”¯æŒ å¦‚ï¼šrubyï¼Œgroovyï¼Œjavascriptã€‚ JDK 7 æ•°å­—å˜é‡å¯¹ä¸‹æ»‘çº¿çš„æ”¯æŒ JDK1.7å¯ä»¥åœ¨æ•°å€¼ç±»åž‹çš„å˜é‡é‡Œæ·»åŠ ä¸‹æ»‘çº¿ã€‚ ä¾‹å¦‚ï¼š 123int num = 1234_5678_9; float num2 = 222_33F; long num3 = 123_000_111L; æ³¨æ„ï¼Œæœ‰å‡ ä¸ªåœ°æ–¹æ˜¯ä¸èƒ½æ·»åŠ çš„ï¼š æ•°å­—çš„å¼€å¤´å’Œç»“å°¾ å°æ•°ç‚¹å‰åŽ Fæˆ–è€…Lå‰ switchå¯¹Stringçš„æ”¯æŒ 1234567891011String status = "orderState"; switch (status) &#123; case "ordercancel": System.out.println("è®¢å•å–æ¶ˆ"); break; case "orderSuccess": System.out.println("é¢„è®¢æˆåŠŸ"); break; default: System.out.println("çŠ¶æ€æœªçŸ¥"); &#125; try-with-resource try-with-resources æ˜¯ä¸€ä¸ªå®šä¹‰äº†ä¸€ä¸ªæˆ–å¤šä¸ªèµ„æºçš„ try å£°æ˜Žï¼Œè¿™ä¸ªèµ„æºæ˜¯æŒ‡ç¨‹åºå¤„ç†å®Œå®ƒä¹‹åŽéœ€è¦å…³é—­å®ƒçš„å¯¹è±¡ã€‚ try-with-resources ç¡®ä¿æ¯ä¸€ä¸ªèµ„æºåœ¨å¤„ç†å®ŒæˆåŽéƒ½ä¼šè¢«å…³é—­ã€‚ å¯ä»¥ä½¿ç”¨try-with-resourcesçš„èµ„æºæœ‰ï¼š ä»»ä½•å®žçŽ°äº† java.lang.AutoCloseable æŽ¥å£ java.io.Closeable æŽ¥å£çš„å¯¹è±¡ã€‚ ä¾‹å¦‚ï¼š 123456public static String readFirstLineFromFile(String path) throws IOException &#123; try (BufferedReader br = new BufferedReader(new FileReader(path))) &#123; return br.readLine(); &#125; &#125; åœ¨ java 7 ä»¥åŠä»¥åŽçš„ç‰ˆæœ¬é‡Œï¼ŒBufferedReader å®žçŽ°äº† java.lang.AutoCloseable æŽ¥å£ã€‚ ç”±äºŽ BufferedReader å®šä¹‰åœ¨ try-with-resources å£°æ˜Žé‡Œï¼Œæ— è®º try è¯­å¥æ­£å¸¸è¿˜æ˜¯å¼‚å¸¸çš„ç»“æŸï¼Œ å®ƒéƒ½ä¼šè‡ªåŠ¨çš„å…³æŽ‰ã€‚è€Œåœ¨ java7 ä»¥å‰ï¼Œä½ éœ€è¦ä½¿ç”¨ finally å—æ¥å…³æŽ‰è¿™ä¸ªå¯¹è±¡ã€‚ æ•èŽ·å¤šç§å¼‚å¸¸å¹¶ç”¨æ”¹è¿›åŽçš„ç±»åž‹æ£€æŸ¥æ¥é‡æ–°æŠ›å‡ºå¼‚å¸¸ 12345678910public static void first()&#123; try &#123; BufferedReader reader = new BufferedReader(new FileReader("")); Connection con = null; Statement stmt = con.createStatement(); &#125; catch (IOException | SQLException e) &#123; //æ•èŽ·å¤šä¸ªå¼‚å¸¸ï¼Œeå°±æ˜¯finalç±»åž‹çš„ e.printStackTrace(); &#125; &#125; ä¼˜ç‚¹ï¼šç”¨ä¸€ä¸ª catch å¤„ç†å¤šä¸ªå¼‚å¸¸ï¼Œæ¯”ç”¨å¤šä¸ª catch æ¯ä¸ªå¤„ç†ä¸€ä¸ªå¼‚å¸¸ç”Ÿæˆçš„å­—èŠ‚ç è¦æ›´å°æ›´é«˜æ•ˆã€‚ åˆ›å»ºæ³›åž‹æ—¶ç±»åž‹æŽ¨æ–­ åªè¦ç¼–è¯‘å™¨å¯ä»¥ä»Žä¸Šä¸‹æ–‡ä¸­æŽ¨æ–­å‡ºç±»åž‹å‚æ•°ï¼Œä½ å°±å¯ä»¥ç”¨ä¸€å¯¹ç©ºç€çš„å°–æ‹¬å· &lt;&gt; æ¥ä»£æ›¿æ³›åž‹å‚æ•°ã€‚ è¿™å¯¹æ‹¬å·ç§ä¸‹è¢«ç§°ä¸ºè±å½¢(diamond)ã€‚ åœ¨Java SE 7ä¹‹å‰ï¼Œä½ å£°æ˜Žæ³›åž‹å¯¹è±¡æ—¶è¦è¿™æ · 1List&lt;String&gt; list = new ArrayList&lt;String&gt;(); è€Œåœ¨Java SE7ä»¥åŽï¼Œä½ å¯ä»¥è¿™æ · 1List&lt;String&gt; list = new ArrayList&lt;&gt;(); å› ä¸ºç¼–è¯‘å™¨å¯ä»¥ä»Žå‰é¢(List)æŽ¨æ–­å‡ºæŽ¨æ–­å‡ºç±»åž‹å‚æ•°ï¼Œæ‰€ä»¥åŽé¢çš„ ArrayList ä¹‹åŽå¯ä»¥ä¸ç”¨å†™æ³›åž‹å‚æ•°äº†ï¼Œåªç”¨ä¸€å¯¹ç©ºç€çš„å°–æ‹¬å·å°±è¡Œã€‚ å½“ç„¶ï¼Œä½ å¿…é¡»å¸¦ç€è±å½¢ &lt;&gt;ï¼Œå¦åˆ™ä¼šæœ‰è­¦å‘Šçš„ã€‚ Java SE7 åªæ”¯æŒæœ‰é™çš„ç±»åž‹æŽ¨æ–­ï¼šåªæœ‰æž„é€ å™¨çš„å‚æ•°åŒ–ç±»åž‹åœ¨ä¸Šä¸‹æ–‡ä¸­è¢«æ˜¾è‘—çš„å£°æ˜Žäº†ï¼Œä½ æ‰å¯ä»¥ä½¿ç”¨ç±»åž‹æŽ¨æ–­ï¼Œå¦åˆ™ä¸è¡Œã€‚ 1234567List&lt;String&gt; list = new ArrayList&lt;&gt;();list.add("A"); //è¿™ä¸ªä¸è¡Œ list.addAll(new ArrayList&lt;&gt;()); // è¿™ä¸ªå¯ä»¥ List&lt;? extends String&gt; list2 = new ArrayList&lt;&gt;(); list.addAll(list2); JDK 8 Lambdaè¡¨è¾¾å¼å’Œå‡½æ•°å¼æŽ¥å£ Lambdaè¡¨è¾¾å¼ï¼ˆä¹Ÿç§°ä¸ºé—­åŒ…ï¼‰æ˜¯Java 8ä¸­æœ€å¤§å’Œæœ€ä»¤äººæœŸå¾…çš„è¯­è¨€æ”¹å˜ã€‚å®ƒå…è®¸æˆ‘ä»¬å°†å‡½æ•°å½“æˆå‚æ•°ä¼ é€’ç»™æŸä¸ªæ–¹æ³•ï¼Œæˆ–è€…æŠŠä»£ç æœ¬èº«å½“ä½œæ•°æ®å¤„ç†ï¼šå‡½æ•°å¼å¼€å‘è€…éžå¸¸ç†Ÿæ‚‰è¿™äº›æ¦‚å¿µã€‚å¾ˆå¤šJVMå¹³å°ä¸Šçš„è¯­è¨€ï¼ˆGroovyã€Scalaç­‰ï¼‰ä»Žè¯žç”Ÿä¹‹æ—¥å°±æ”¯æŒLambdaè¡¨è¾¾å¼ï¼Œä½†æ˜¯Javaå¼€å‘è€…æ²¡æœ‰é€‰æ‹©ï¼Œåªèƒ½ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»ä»£æ›¿Lambdaè¡¨è¾¾å¼ã€‚ Lambdaçš„è®¾è®¡è€—è´¹äº†å¾ˆå¤šæ—¶é—´å’Œå¾ˆå¤§çš„ç¤¾åŒºåŠ›é‡ï¼Œæœ€ç»ˆæ‰¾åˆ°ä¸€ç§æŠ˜ä¸­çš„å®žçŽ°æ–¹æ¡ˆï¼Œå¯ä»¥å®žçŽ°ç®€æ´è€Œç´§å‡‘çš„è¯­è¨€ç»“æž„ã€‚æœ€ç®€å•çš„Lambdaè¡¨è¾¾å¼å¯ç”±é€—å·åˆ†éš”çš„å‚æ•°åˆ—è¡¨ã€-&gt;ç¬¦å·å’Œè¯­å¥å—ç»„æˆã€‚ Lambdaçš„è®¾è®¡è€…ä»¬ä¸ºäº†è®©çŽ°æœ‰çš„åŠŸèƒ½ä¸ŽLambdaè¡¨è¾¾å¼è‰¯å¥½å…¼å®¹ï¼Œè€ƒè™‘äº†å¾ˆå¤šæ–¹æ³•ï¼ŒäºŽæ˜¯äº§ç”Ÿäº†å‡½æ•°æŽ¥å£è¿™ä¸ªæ¦‚å¿µã€‚å‡½æ•°æŽ¥å£æŒ‡çš„æ˜¯åªæœ‰ä¸€ä¸ªå‡½æ•°çš„æŽ¥å£ï¼Œè¿™æ ·çš„æŽ¥å£å¯ä»¥éšå¼è½¬æ¢ä¸ºLambdaè¡¨è¾¾å¼ã€‚java.lang.Runnableå’Œjava.util.concurrent.Callableæ˜¯å‡½æ•°å¼æŽ¥å£çš„æœ€ä½³ä¾‹å­ã€‚åœ¨å®žè·µä¸­ï¼Œå‡½æ•°å¼æŽ¥å£éžå¸¸è„†å¼±ï¼šåªè¦æŸä¸ªå¼€å‘è€…åœ¨è¯¥æŽ¥å£ä¸­æ·»åŠ ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™è¯¥æŽ¥å£å°±ä¸å†æ˜¯å‡½æ•°å¼æŽ¥å£è¿›è€Œå¯¼è‡´ç¼–è¯‘å¤±è´¥ã€‚ä¸ºäº†å…‹æœè¿™ç§ä»£ç å±‚é¢çš„è„†å¼±æ€§ï¼Œå¹¶æ˜¾å¼è¯´æ˜ŽæŸä¸ªæŽ¥å£æ˜¯å‡½æ•°å¼æŽ¥å£ï¼ŒJava 8 æä¾›äº†ä¸€ä¸ªç‰¹æ®Šçš„æ³¨è§£@FunctionalInterfaceï¼ˆJava åº“ä¸­çš„æ‰€æœ‰ç›¸å…³æŽ¥å£éƒ½å·²ç»å¸¦æœ‰è¿™ä¸ªæ³¨è§£äº†ï¼‰ã€‚ æŽ¥å£çš„é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³• Java 8ä½¿ç”¨ä¸¤ä¸ªæ–°æ¦‚å¿µæ‰©å±•äº†æŽ¥å£çš„å«ä¹‰ï¼šé»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•ã€‚é»˜è®¤æ–¹æ³•ä½¿å¾—æŽ¥å£æœ‰ç‚¹ç±»ä¼¼traitsï¼Œä¸è¿‡è¦å®žçŽ°çš„ç›®æ ‡ä¸ä¸€æ ·ã€‚é»˜è®¤æ–¹æ³•ä½¿å¾—å¼€å‘è€…å¯ä»¥åœ¨ ä¸ç ´åäºŒè¿›åˆ¶å…¼å®¹æ€§çš„å‰æä¸‹ï¼Œå¾€çŽ°å­˜æŽ¥å£ä¸­æ·»åŠ æ–°çš„æ–¹æ³•ï¼Œå³ä¸å¼ºåˆ¶é‚£äº›å®žçŽ°äº†è¯¥æŽ¥å£çš„ç±»ä¹ŸåŒæ—¶å®žçŽ°è¿™ä¸ªæ–°åŠ çš„æ–¹æ³•ã€‚ é»˜è®¤æ–¹æ³•å’ŒæŠ½è±¡æ–¹æ³•ä¹‹é—´çš„åŒºåˆ«åœ¨äºŽæŠ½è±¡æ–¹æ³•éœ€è¦å®žçŽ°ï¼Œè€Œé»˜è®¤æ–¹æ³•ä¸éœ€è¦ã€‚æŽ¥å£æä¾›çš„é»˜è®¤æ–¹æ³•ä¼šè¢«æŽ¥å£çš„å®žçŽ°ç±»ç»§æ‰¿æˆ–è€…è¦†å†™ã€‚ ç”±äºŽJVMä¸Šçš„é»˜è®¤æ–¹æ³•çš„å®žçŽ°åœ¨å­—èŠ‚ç å±‚é¢æä¾›äº†æ”¯æŒï¼Œå› æ­¤æ•ˆçŽ‡éžå¸¸é«˜ã€‚é»˜è®¤æ–¹æ³•å…è®¸åœ¨ä¸æ‰“ç ´çŽ°æœ‰ç»§æ‰¿ä½“ç³»çš„åŸºç¡€ä¸Šæ”¹è¿›æŽ¥å£ã€‚è¯¥ç‰¹æ€§åœ¨å®˜æ–¹åº“ä¸­çš„åº”ç”¨æ˜¯ï¼šç»™java.util.CollectionæŽ¥å£æ·»åŠ æ–°æ–¹æ³•ï¼Œå¦‚stream()ã€parallelStream()ã€forEach()å’ŒremoveIf()ç­‰ç­‰ã€‚ å°½ç®¡é»˜è®¤æ–¹æ³•æœ‰è¿™ä¹ˆå¤šå¥½å¤„ï¼Œä½†åœ¨å®žé™…å¼€å‘ä¸­åº”è¯¥è°¨æ…Žä½¿ç”¨ï¼šåœ¨å¤æ‚çš„ç»§æ‰¿ä½“ç³»ä¸­ï¼Œé»˜è®¤æ–¹æ³•å¯èƒ½å¼•èµ·æ­§ä¹‰å’Œç¼–è¯‘é”™è¯¯ã€‚å¦‚æžœæƒ³äº†è§£æ›´å¤šç»†èŠ‚ï¼Œå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚ æ›´å¥½çš„ç±»åž‹æŽ¨æ–­ Java 8 ç¼–è¯‘å™¨åœ¨ç±»åž‹æŽ¨æ–­æ–¹é¢æœ‰å¾ˆå¤§çš„æå‡ï¼Œåœ¨å¾ˆå¤šåœºæ™¯ä¸‹ç¼–è¯‘å™¨å¯ä»¥æŽ¨å¯¼å‡ºæŸä¸ªå‚æ•°çš„æ•°æ®ç±»åž‹ï¼Œä»Žè€Œä½¿å¾—ä»£ç æ›´ä¸ºç®€æ´ã€‚ å‚æ•° Value.defaultValue() çš„ç±»åž‹ç”±ç¼–è¯‘å™¨æŽ¨å¯¼å¾—å‡ºï¼Œä¸éœ€è¦æ˜¾å¼æŒ‡æ˜Žã€‚åœ¨Java 7ä¸­è¿™æ®µä»£ç ä¼šæœ‰ç¼–è¯‘é”™è¯¯ï¼Œé™¤éžä½¿ç”¨ Value.&lt;String&gt;defaultValue()ã€‚ Optional Javaåº”ç”¨ä¸­æœ€å¸¸è§çš„bugå°±æ˜¯ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚åœ¨Java 8ä¹‹å‰ï¼ŒGoogle Guavaå¼•å…¥äº† Optionals ç±»æ¥è§£å†³ NullPointerExceptionï¼Œä»Žè€Œé¿å…æºç è¢«å„ç§ null æ£€æŸ¥æ±¡æŸ“ï¼Œä»¥ä¾¿å¼€å‘è€…å†™å‡ºæ›´åŠ æ•´æ´çš„ä»£ç ã€‚Java 8ä¹Ÿå°†OptionalåŠ å…¥äº†å®˜æ–¹åº“ã€‚ Optional ä»…ä»…æ˜¯ä¸€ä¸ªå®¹æ˜“å­˜æ”¾Tç±»åž‹çš„å€¼æˆ–è€…nullã€‚å®ƒæä¾›äº†ä¸€äº›æœ‰ç”¨çš„æŽ¥å£æ¥é¿å…æ˜¾å¼çš„nullæ£€æŸ¥ï¼Œå¯ä»¥å‚è€ƒJava 8å®˜æ–¹æ–‡æ¡£äº†è§£æ›´å¤šç»†èŠ‚ã€‚ å¦‚æžœOptionalå®žä¾‹æŒæœ‰ä¸€ä¸ªéžç©ºå€¼ï¼Œåˆ™ isPresent() æ–¹æ³•è¿”å›žtrueï¼Œå¦åˆ™è¿”å›žfalseï¼›orElseGet() æ–¹æ³•ï¼ŒOptionalå®žä¾‹æŒæœ‰nullï¼Œåˆ™å¯ä»¥æŽ¥å—ä¸€ä¸ªlambdaè¡¨è¾¾å¼ç”Ÿæˆçš„é»˜è®¤å€¼ï¼›map()æ–¹æ³•å¯ä»¥å°†çŽ°æœ‰çš„ Optional å®žä¾‹çš„å€¼è½¬æ¢æˆæ–°çš„å€¼ï¼›orElse()æ–¹æ³•ä¸ŽorElseGet()æ–¹æ³•ç±»ä¼¼ï¼Œä½†æ˜¯åœ¨æŒæœ‰nullçš„æ—¶å€™è¿”å›žä¼ å…¥çš„é»˜è®¤å€¼ã€‚ Stream æ–°å¢žçš„Stream APIï¼ˆjava.util.streamï¼‰å°†ç”ŸæˆçŽ¯å¢ƒçš„å‡½æ•°å¼ç¼–ç¨‹å¼•å…¥äº†Javaåº“ä¸­ã€‚è¿™æ˜¯ç›®å‰ä¸ºæ­¢æœ€å¤§çš„ä¸€æ¬¡å¯¹Javaåº“çš„å®Œå–„ï¼Œä»¥ä¾¿å¼€å‘è€…èƒ½å¤Ÿå†™å‡ºæ›´åŠ æœ‰æ•ˆã€æ›´åŠ ç®€æ´å’Œç´§å‡‘çš„ä»£ç ã€‚ Task ç±»æœ‰ä¸€ä¸ªåˆ†æ•°ï¼ˆæˆ–ä¼ªå¤æ‚åº¦ï¼‰çš„æ¦‚å¿µï¼Œå¦å¤–è¿˜æœ‰ä¸¤ç§çŠ¶æ€ï¼šOPEN æˆ–è€… CLOSEDã€‚çŽ°åœ¨å‡è®¾æœ‰ä¸€ä¸ªtaské›†åˆï¼Œé¦–å…ˆçœ‹ä¸€ä¸ªé—®é¢˜ï¼šåœ¨è¿™ä¸ªtaské›†åˆä¸­ä¸€å…±æœ‰å¤šå°‘ä¸ªOPENçŠ¶æ€çš„ç‚¹ï¼Ÿ åœ¨Java 8ä¹‹å‰ï¼Œè¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåˆ™éœ€è¦ä½¿ç”¨foreachå¾ªçŽ¯éåŽ†taské›†åˆï¼›ä½†æ˜¯åœ¨Java 8ä¸­å¯ä»¥åˆ©ç”¨steamsè§£å†³ï¼šåŒ…æ‹¬ä¸€ç³»åˆ—å…ƒç´ çš„åˆ—è¡¨ï¼Œå¹¶ä¸”æ”¯æŒé¡ºåºå’Œå¹¶è¡Œå¤„ç†ã€‚ 1234567891011121314final Collection&lt;Task&gt; tasks = Arrays.asList( new Task(Status.OPEN, 5), new Task(Status.OPEN, 13), new Task(Status.CLOSED, 8));// ä½¿ç”¨sum()è®¡ç®—æ‰€æœ‰ OPEN ä»»åŠ¡final long totalPointsOfOpenTasks = tasks .stream() .filter(task -&gt; task.getStatus() == Status.OPEN) .mapToInt(Task::getPoints) .sum();System.out.println("Total points: " + totalPointsOfOpenTasks); é¦–å…ˆï¼Œtasksé›†åˆè¢«è½¬æ¢æˆsteamè¡¨ç¤ºï¼›å…¶æ¬¡ï¼Œåœ¨steamä¸Šçš„filteræ“ä½œä¼šè¿‡æ»¤æŽ‰æ‰€æœ‰CLOSEDçš„taskï¼›ç¬¬ä¸‰ï¼ŒmapToIntæ“ä½œåŸºäºŽæ¯ä¸ªtaskå®žä¾‹çš„Task::getPointsæ–¹æ³•å°†taskæµè½¬æ¢æˆIntegeré›†åˆï¼›æœ€åŽï¼Œé€šè¿‡sumæ–¹æ³•è®¡ç®—æ€»å’Œï¼Œå¾—å‡ºæœ€åŽçš„ç»“æžœã€‚ æ–°çš„æ—¥æœŸæ—¶é—´ API Java 8å¼•å…¥äº†æ–°çš„Date-Time API(JSR 310)æ¥æ”¹è¿›æ—¶é—´ã€æ—¥æœŸçš„å¤„ç†ã€‚æ—¶é—´å’Œæ—¥æœŸçš„ç®¡ç†ä¸€ç›´æ˜¯æœ€ä»¤Javaå¼€å‘è€…ç—›è‹¦çš„é—®é¢˜ã€‚java.util.Date å’ŒåŽæ¥çš„ java.util.Calendar ä¸€ç›´æ²¡æœ‰è§£å†³è¿™ä¸ªé—®é¢˜ï¼ˆç”šè‡³ä»¤å¼€å‘è€…æ›´åŠ è¿·èŒ«ï¼‰ã€‚å› ä¸ºä¸Šé¢è¿™äº›åŽŸå› ï¼Œè¯žç”Ÿäº†ç¬¬ä¸‰æ–¹åº“Joda-Timeï¼Œå¯ä»¥æ›¿ä»£Javaçš„æ—¶é—´ç®¡ç†APIã€‚ Java 8ä¸­æ–°çš„æ—¶é—´å’Œæ—¥æœŸç®¡ç†APIæ·±å—Joda-Timeå½±å“ï¼Œå¹¶å¸æ”¶äº†å¾ˆå¤šJoda-Timeçš„ç²¾åŽã€‚ ç¬¬ä¸€ï¼Œæ–°çš„java.timeåŒ…åŒ…å«äº†æ‰€æœ‰å…³äºŽæ—¥æœŸã€æ—¶é—´ã€æ—¶åŒºã€Instantï¼ˆè·Ÿæ—¥æœŸç±»ä¼¼ä½†æ˜¯ç²¾ç¡®åˆ°çº³ç§’ï¼‰ã€durationï¼ˆæŒç»­æ—¶é—´ï¼‰å’Œæ—¶é’Ÿæ“ä½œçš„ç±»ã€‚æ–°è®¾è®¡çš„APIè®¤çœŸè€ƒè™‘äº†è¿™äº›ç±»çš„ä¸å˜æ€§ï¼ˆä»Žjava.util.Calendarå¸å–çš„æ•™è®­ï¼‰ï¼Œå¦‚æžœæŸä¸ªå®žä¾‹éœ€è¦ä¿®æ”¹ï¼Œåˆ™è¿”å›žä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚ ç¬¬äºŒï¼Œå…³æ³¨ä¸‹LocalDateå’ŒLocalTimeç±»ã€‚LocalDateä»…ä»…åŒ…å«ISO-8601æ—¥åŽ†ç³»ç»Ÿä¸­çš„æ—¥æœŸéƒ¨åˆ†ï¼›LocalTimeåˆ™ä»…ä»…åŒ…å«è¯¥æ—¥åŽ†ç³»ç»Ÿä¸­çš„æ—¶é—´éƒ¨åˆ†ã€‚è¿™ä¸¤ä¸ªç±»çš„å¯¹è±¡éƒ½å¯ä»¥ä½¿ç”¨Clockå¯¹è±¡æž„å»ºå¾—åˆ°ã€‚ ç¬¬ä¸‰ï¼ŒLocalDateTimeç±»åŒ…å«äº†LocalDateå’ŒLocalTimeçš„ä¿¡æ¯ï¼Œä½†æ˜¯ä¸åŒ…å«ISO-8601æ—¥åŽ†ç³»ç»Ÿä¸­çš„æ—¶åŒºä¿¡æ¯ã€‚è¿™é‡Œæœ‰ä¸€äº›å…³äºŽLocalDateå’ŒLocalTimeçš„ä¾‹å­ï¼š å¦‚æžœä½ éœ€è¦ç‰¹å®šæ—¶åŒºçš„data/timeä¿¡æ¯ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ZoneDateTimeï¼Œå®ƒä¿å­˜æœ‰ISO-8601æ—¥æœŸç³»ç»Ÿçš„æ—¥æœŸå’Œæ—¶é—´ï¼Œè€Œä¸”æœ‰æ—¶åŒºä¿¡æ¯ã€‚ Nashorn JavaScriptå¼•æ“Ž Java 8æä¾›äº†æ–°çš„Nashorn JavaScriptå¼•æ“Žï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥åœ¨JVMä¸Šå¼€å‘å’Œè¿è¡ŒJSåº”ç”¨ã€‚ Nashorn JavaScriptå¼•æ“Žæ˜¯javax.script.ScriptEngineçš„å¦ä¸€ä¸ªå®žçŽ°ç‰ˆæœ¬ï¼Œè¿™ç±»Scriptå¼•æ“Žéµå¾ªç›¸åŒçš„è§„åˆ™ï¼Œå…è®¸Javaå’ŒJavaScriptäº¤äº’ä½¿ç”¨ã€‚ Base64 å¯¹ Base64 ç¼–ç çš„æ”¯æŒå·²ç»è¢«åŠ å…¥åˆ°Java 8å®˜æ–¹åº“ä¸­ï¼Œè¿™æ ·ä¸éœ€è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“å°±å¯ä»¥è¿›è¡ŒBase64ç¼–ç ã€‚ 2. Lambda è¡¨è¾¾å¼ï¼ˆâ˜…â˜…ï¼‰ Demo ä»£ç ï¼šhttps://github.com/xkcoding/java8_learning/tree/master/java8-lambda PSï¼šä¸ªäººç†è§£ç±»ä¼¼å‰ç«¯ ES6 çš„ç®­å¤´å‡½æ•° 2.1. å‘½ä»¤å¼å’Œå‡½æ•°å¼ å‘½ä»¤å¼ç¼–ç¨‹ï¼šå‘½ä»¤â€œæœºå™¨â€å¦‚ä½•åŽ»åšäº‹æƒ…(how)ï¼Œè¿™æ ·ä¸ç®¡ä½ æƒ³è¦çš„æ˜¯ä»€ä¹ˆ(what)ï¼Œå®ƒéƒ½ä¼šæŒ‰ç…§ä½ çš„å‘½ä»¤å®žçŽ°ã€‚ å£°æ˜Žå¼ç¼–ç¨‹ï¼šå‘Šè¯‰â€œæœºå™¨â€ä½ æƒ³è¦çš„æ˜¯ä»€ä¹ˆ(what)ï¼Œè®©æœºå™¨æƒ³å‡ºå¦‚ä½•åŽ»åš(how)ã€‚ 2.2. ä»€ä¹ˆæ˜¯å‡½æ•°å¼ç¼–ç¨‹ï¼Ÿ æ¯ä¸ªäººå¯¹å‡½æ•°å¼ç¼–ç¨‹çš„ç†è§£ä¸å°½ç›¸åŒã€‚ æˆ‘çš„ç†è§£æ˜¯ï¼šåœ¨å®Œæˆä¸€ä¸ªç¼–ç¨‹ä»»åŠ¡æ—¶ï¼Œé€šè¿‡ä½¿ç”¨ä¸å¯å˜çš„å€¼æˆ–å‡½æ•°ï¼Œå¯¹ä»–ä»¬è¿›è¡Œå¤„ç†ï¼Œç„¶åŽå¾—åˆ°å¦ä¸€ä¸ªå€¼çš„è¿‡ç¨‹ã€‚ ä¸åŒçš„è¯­è¨€ç¤¾åŒºå¾€å¾€å¯¹å„è‡ªè¯­è¨€ä¸­çš„ç‰¹æ€§å­¤èŠ³è‡ªèµã€‚çŽ°åœ¨è°ˆ Java ç¨‹åºå‘˜å¦‚ä½•å®šä¹‰å‡½æ•°å¼ç¼–ç¨‹è¿˜ä¸ºæ—¶å°šæ—©ï¼Œä½†æ˜¯ï¼Œè¿™æ ¹æœ¬ä¸é‡è¦ï¼ æˆ‘ä»¬å…³å¿ƒçš„æ˜¯å¦‚ä½•å†™å‡ºå¥½ä»£ç ï¼Œè€Œä¸æ˜¯ç¬¦åˆå‡½æ•°å¼ç¼–ç¨‹é£Žæ ¼çš„ä»£ç ã€‚ 2.3. è¡Œä¸ºå‚æ•°åŒ– æŠŠç®—æ³•çš„ç­–ç•¥ï¼ˆè¡Œä¸ºï¼‰ä½œä¸ºä¸€ä¸ªå‚æ•°ä¼ é€’ç»™å‡½æ•°ã€‚ 2.4. lambda ç‰¹ç‚¹ åŒ¿åï¼šå®ƒä¸åƒæ™®é€šçš„æ–¹æ³•é‚£æ ·æœ‰ä¸€ä¸ªæ˜Žç¡®çš„åç§°ï¼šå†™å¾—å°‘è€Œæƒ³å¾—å¤šï¼ å‡½æ•°ï¼šLambdaå‡½æ•°ä¸åƒæ–¹æ³•é‚£æ ·å±žäºŽæŸä¸ªç‰¹å®šçš„ç±»ã€‚ä½†å’Œæ–¹æ³•ä¸€æ ·ï¼ŒLambdaæœ‰å‚æ•°åˆ—è¡¨ã€å‡½æ•°ä¸»ä½“ã€è¿”å›žç±»åž‹ï¼Œè¿˜å¯èƒ½æœ‰å¯ä»¥æŠ›å‡ºçš„å¼‚å¸¸åˆ—è¡¨ã€‚ ä¼ é€’ï¼šLambdaè¡¨è¾¾å¼å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ç»™æ–¹æ³•æˆ–å­˜å‚¨åœ¨å˜é‡ä¸­ã€‚ ç®€æ´ï¼šæ— éœ€åƒåŒ¿åç±»é‚£æ ·å†™å¾ˆå¤šæ¨¡æ¿ä»£ç ã€‚ 2.5. å‡½æ•°æè¿°ç¬¦ å‡½æ•°å¼æŽ¥å£çš„æŠ½è±¡æ–¹æ³•çš„ç­¾ååŸºæœ¬ä¸Šå°±æ˜¯Lambdaè¡¨è¾¾å¼çš„ç­¾åï¼Œè¿™ç§æŠ½è±¡æ–¹æ³•å«ä½œå‡½æ•°æè¿°ç¬¦ã€‚ 2.6. å‡½æ•°å¼æŽ¥å£ï¼Œç±»åž‹æŽ¨æ–­ å‡½æ•°å¼æŽ¥å£å®šä¹‰ä¸”åªå®šä¹‰äº†ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œå› ä¸ºæŠ½è±¡æ–¹æ³•çš„ç­¾åå¯ä»¥æè¿°Lambdaè¡¨è¾¾å¼çš„ç­¾åã€‚ å‡½æ•°å¼æŽ¥å£çš„æŠ½è±¡æ–¹æ³•çš„ç­¾åç§°ä¸ºå‡½æ•°æè¿°ç¬¦ã€‚ æ‰€ä»¥ä¸ºäº†åº”ç”¨ä¸åŒçš„Lambdaè¡¨è¾¾å¼ï¼Œä½ éœ€è¦ä¸€å¥—èƒ½å¤Ÿæè¿°å¸¸è§å‡½æ•°æè¿°ç¬¦çš„å‡½æ•°å¼æŽ¥å£ã€‚ 2.7. Lambda åŠå‡½æ•°å¼æŽ¥å£çš„ä¾‹å­ ä½¿ç”¨æ¡ˆä¾‹ Lambda çš„ä¾‹å­ å¯¹åº”çš„å‡½æ•°å¼æŽ¥å£ å¸ƒå°”è¡¨è¾¾å¼ (List&lt;String&gt; list) -&gt; list.isEmpty() Predicate&lt;List&lt;String&gt;&gt; åˆ›å»ºå¯¹è±¡ () -&gt; new Project() Supplier&lt;Project&gt; æ¶ˆè´¹ä¸€ä¸ªå¯¹è±¡ (Project p) -&gt; System.out.println(p.getStars()) Consumer&lt;Project&gt; ä»Žä¸€ä¸ªå¯¹è±¡ä¸­é€‰æ‹©/æå– (int a, int b) -&gt; a * b IntBinaryOperator æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡ (Project p1, Project p2) -&gt; p1.getStars().compareTo(p2.getStars()) Comparator&lt;Project&gt; æˆ– BiFunction&lt;Project, Project, Integer&gt; æˆ– ToIntBiFunction&lt;Project, Project&gt; 2.8. Lambda å°ç»“ lambda è¡¨è¾¾å¼å¯ä»¥ç†è§£ä¸ºä¸€ç§åŒ¿åå‡½æ•°ï¼šå®ƒæ²¡æœ‰åç§°ï¼Œä½†æœ‰å‚æ•°åˆ—è¡¨ã€å‡½æ•°ä¸»ä½“ã€è¿”å›ž ç±»åž‹ï¼Œå¯èƒ½è¿˜æœ‰ä¸€ä¸ªå¯ä»¥æŠ›å‡ºçš„å¼‚å¸¸çš„åˆ—è¡¨ã€‚ lambda è¡¨è¾¾å¼è®©ä½ å¯ä»¥ç®€æ´åœ°ä¼ é€’ä»£ç ã€‚ åªæœ‰åœ¨æŽ¥å—å‡½æ•°å¼æŽ¥å£çš„åœ°æ–¹æ‰å¯ä»¥ä½¿ç”¨ lambda è¡¨è¾¾å¼ã€‚ lambda è¡¨è¾¾å¼å…è®¸ä½ ç›´æŽ¥å†…è”ï¼Œä¸ºå‡½æ•°å¼æŽ¥å£çš„æŠ½è±¡æ–¹æ³•æä¾›å®žçŽ°ï¼Œå¹¶ä¸”å°†æ•´ä¸ªè¡¨è¾¾å¼ä½œä¸ºå‡½æ•°å¼æŽ¥å£çš„ä¸€ä¸ªå®žä¾‹ã€‚ Lambdaè¡¨è¾¾å¼æ‰€éœ€è¦ä»£è¡¨çš„ç±»åž‹ç§°ä¸ºç›®æ ‡ç±»åž‹ã€‚ 3. æ–¹æ³•å¼•ç”¨ æ–¹æ³•å¼•ç”¨è®©ä½ å¯ä»¥é‡å¤ä½¿ç”¨çŽ°æœ‰çš„æ–¹æ³•å®šä¹‰ï¼Œå¹¶åƒLambdaä¸€æ ·ä¼ é€’å®ƒä»¬ã€‚ æ–¹æ³•å¼•ç”¨å¯ä»¥ä½¿è¯­è¨€çš„æž„é€ æ›´ç´§å‡‘ç®€æ´ï¼Œå‡å°‘å†—ä½™ä»£ç ã€‚ æ–¹æ³•å¼•ç”¨ä½¿ç”¨ä¸€å¯¹å†’å·::ã€‚ ç¤ºä¾‹ï¼š 123List&lt;Person&gt; result = list.stream() .filter(Person::isStudent) // å°±æ˜¯æ–¹æ³•å¼•ç”¨ .collect(Collectors.toList()); 4. å‡½æ•°å¼æŽ¥å£ Demo ä»£ç ï¼šhttps://github.com/xkcoding/java8_learning/tree/master/java8-functional å‡½æ•°å¼æŽ¥å£(Functional Interface)å°±æ˜¯ä¸€ä¸ªæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œä½†æ˜¯å¯ä»¥æœ‰å¤šä¸ªéžæŠ½è±¡æ–¹æ³•çš„æŽ¥å£ã€‚ å‡½æ•°å¼æŽ¥å£å¯ä»¥è¢«éšå¼è½¬æ¢ä¸ºlambdaè¡¨è¾¾å¼ã€‚ å‡½æ•°å¼æŽ¥å£å¯ä»¥çŽ°æœ‰çš„å‡½æ•°å‹å¥½åœ°æ”¯æŒ lambdaã€‚ JDK 1.8ä¹‹å‰å·²æœ‰çš„å‡½æ•°å¼æŽ¥å£: java.lang.Runnable java.util.concurrent.Callable java.security.PrivilegedAction java.util.Comparator java.io.FileFilter java.nio.file.PathMatcher java.lang.reflect.InvocationHandler java.beans.PropertyChangeListener java.awt.event.ActionListener javax.swing.event.ChangeListener JDK 1.8 æ–°å¢žåŠ çš„å‡½æ•°æŽ¥å£ï¼š java.util.function java.util.function è¿™ä¸ªåŒ…ä¸‹åŒ…å«äº†å¾ˆå¤šç±»ï¼Œç”¨æ¥æ”¯æŒ Javaçš„ å‡½æ•°å¼ç¼–ç¨‹ï¼ŒåŒ…æ‹¬ Predicate&lt;T&gt;ã€Function&lt;T,R&gt;ã€Supplier&lt;T&gt;ã€Consumer&lt;T&gt; å’Œ BinaryOperator&lt;T&gt;ã€‚ Comparatorã€Predicate å’Œ Function ç­‰å‡½æ•°å¼æŽ¥å£éƒ½æœ‰å‡ ä¸ªå¯ä»¥ç”¨æ¥ç»“åˆ lambda è¡¨è¾¾å¼çš„é»˜è®¤æ–¹æ³•ã€‚ Java 8ä¸­çš„å¸¸ç”¨å‡½æ•°å¼æŽ¥å£ å‡½æ•°å¼æŽ¥å£ å‡½æ•°æè¿°ç¬¦ åŽŸå§‹ç±»åž‹ç‰¹åŒ– Predicate&lt;T&gt; T-&gt;boolean IntPredicate,LongPredicate, DoublePredicate Consumer&lt;T&gt; T-&gt;void IntConsumer,LongConsumer, DoubleConsumer Function&lt;T,R&gt; T-&gt;R IntFunction&lt;R&gt;, IntToDoubleFunction, IntToLongFunction, LongFunction&lt;R&gt;, LongToDoubleFunction, LongToIntFunction, DoubleFunction&lt;R&gt;, ToIntFunction&lt;T&gt;, ToDoubleFunction&lt;T&gt;, ToLongFunction&lt;T&gt; Supplier&lt;T&gt; ()-&gt;T BooleanSupplier,IntSupplier, LongSupplier, DoubleSupplier UnaryOperator&lt;T&gt; T-&gt;T IntUnaryOperator, LongUnaryOperator, DoubleUnaryOperator BinaryOperator&lt;T&gt; (T,T)-&gt;T IntBinaryOperator, LongBinaryOperator, DoubleBinaryOperator BiPredicate&lt;L,R&gt; (L,R)-&gt;boolean BiConsumer&lt;T,U&gt; (T,U)-&gt;void ObjIntConsumer&lt;T&gt;, ObjLongConsumer&lt;T&gt;, ObjDoubleConsumer&lt;T&gt; BiFunction&lt;T,U,R&gt; (T,U)-&gt;R ToIntBiFunction&lt;T,U&gt;, ToLongBiFunction&lt;T,U&gt;, ToDoubleBiFunction&lt;T,U&gt; 5. é»˜è®¤æ–¹æ³• æ–°å¢žäº†æŽ¥å£çš„é»˜è®¤æ–¹æ³•ã€‚ ç®€å•è¯´ï¼Œé»˜è®¤æ–¹æ³•å°±æ˜¯æŽ¥å£å¯ä»¥æœ‰å®žçŽ°æ–¹æ³•ï¼Œè€Œä¸”ä¸éœ€è¦å®žçŽ°ç±»åŽ»å®žçŽ°å…¶æ–¹æ³•ã€‚ æˆ‘ä»¬åªéœ€åœ¨æ–¹æ³•åå‰é¢åŠ ä¸ªdefaultå…³é”®å­—å³å¯å®žçŽ°é»˜è®¤æ–¹æ³•ã€‚ 6. Streamï¼ˆâ˜…â˜…ï¼‰ Demo ä»£ç ï¼šhttps://github.com/xkcoding/java8_learning/tree/master/java8-stream 6.1. å…³äºŽæµ 6.1.1. ä»€ä¹ˆæ˜¯æµï¼Ÿ æµæ˜¯Java8å¼•å…¥çš„å…¨æ–°æ¦‚å¿µï¼Œå®ƒç”¨æ¥å¤„ç†é›†åˆä¸­çš„æ•°æ®ï¼Œæš‚ä¸”å¯ä»¥æŠŠå®ƒç†è§£ä¸ºä¸€ç§é«˜çº§é›†åˆã€‚ ä¼—æ‰€å‘¨çŸ¥ï¼Œé›†åˆæ“ä½œéžå¸¸éº»çƒ¦ï¼Œè‹¥è¦å¯¹é›†åˆè¿›è¡Œç­›é€‰ã€æŠ•å½±ï¼Œéœ€è¦å†™å¤§é‡çš„ä»£ç ï¼Œè€Œæµæ˜¯ä»¥å£°æ˜Žçš„å½¢å¼æ“ä½œé›†åˆï¼Œå®ƒå°±åƒSQLè¯­å¥ï¼Œæˆ‘ä»¬åªéœ€å‘Šè¯‰æµéœ€è¦å¯¹é›†åˆè¿›è¡Œä»€ä¹ˆæ“ä½œï¼Œå®ƒå°±ä¼šè‡ªåŠ¨è¿›è¡Œæ“ä½œï¼Œå¹¶å°†æ‰§è¡Œç»“æžœäº¤ç»™ä½ ï¼Œæ— éœ€æˆ‘ä»¬è‡ªå·±æ‰‹å†™ä»£ç ã€‚ å› æ­¤ï¼Œæµçš„é›†åˆæ“ä½œå¯¹æˆ‘ä»¬æ¥è¯´æ˜¯é€æ˜Žçš„ï¼Œæˆ‘ä»¬åªéœ€å‘æµä¸‹è¾¾å‘½ä»¤ï¼Œå®ƒå°±ä¼šè‡ªåŠ¨æŠŠæˆ‘ä»¬æƒ³è¦çš„ç»“æžœç»™æˆ‘ä»¬ã€‚ç”±äºŽæ“ä½œè¿‡ç¨‹å®Œå…¨ç”±Javaå¤„ç†ï¼Œå› æ­¤å®ƒå¯ä»¥æ ¹æ®å½“å‰ç¡¬ä»¶çŽ¯å¢ƒé€‰æ‹©æœ€ä¼˜çš„æ–¹æ³•å¤„ç†ï¼Œæˆ‘ä»¬ä¹Ÿæ— éœ€ç¼–å†™å¤æ‚åˆå®¹æ˜“å‡ºé”™çš„å¤šçº¿ç¨‹ä»£ç äº†ã€‚ 6.1.2. æµçš„ç‰¹ç‚¹ åªèƒ½éåŽ†ä¸€æ¬¡ æˆ‘ä»¬å¯ä»¥æŠŠæµæƒ³è±¡æˆä¸€æ¡æµæ°´çº¿ï¼Œæµæ°´çº¿çš„æºå¤´æ˜¯æˆ‘ä»¬çš„æ•°æ®æº(ä¸€ä¸ªé›†åˆ)ï¼Œæ•°æ®æºä¸­çš„å…ƒç´ ä¾æ¬¡è¢«è¾“é€åˆ°æµæ°´çº¿ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æµæ°´çº¿ä¸Šå¯¹å…ƒç´ è¿›è¡Œå„ç§æ“ä½œã€‚ ä¸€æ—¦å…ƒç´ èµ°åˆ°äº†æµæ°´çº¿çš„å¦ä¸€å¤´ï¼Œé‚£ä¹ˆè¿™äº›å…ƒç´ å°±è¢«â€œæ¶ˆè´¹æŽ‰äº†â€ï¼Œæˆ‘ä»¬æ— æ³•å†å¯¹è¿™ä¸ªæµè¿›è¡Œæ“ä½œã€‚å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥ä»Žæ•°æ®æºé‚£é‡Œå†èŽ·å¾—ä¸€ä¸ªæ–°çš„æµé‡æ–°éåŽ†ä¸€éã€‚ é‡‡ç”¨å†…éƒ¨è¿­ä»£æ–¹å¼ è‹¥è¦å¯¹é›†åˆè¿›è¡Œå¤„ç†ï¼Œåˆ™éœ€æˆ‘ä»¬æ‰‹å†™å¤„ç†ä»£ç ï¼Œè¿™å°±å«åšå¤–éƒ¨è¿­ä»£ã€‚ è€Œè¦å¯¹æµè¿›è¡Œå¤„ç†ï¼Œæˆ‘ä»¬åªéœ€å‘Šè¯‰æµæˆ‘ä»¬éœ€è¦ä»€ä¹ˆç»“æžœï¼Œå¤„ç†è¿‡ç¨‹ç”±æµè‡ªè¡Œå®Œæˆï¼Œè¿™å°±ç§°ä¸ºå†…éƒ¨è¿­ä»£ã€‚ 6.1.3. æµçš„æ“ä½œç§ç±» æµçš„æ“ä½œåˆ†ä¸ºä¸¤ç§ï¼Œåˆ†åˆ«ä¸ºä¸­é—´æ“ä½œå’Œç»ˆç«¯æ“ä½œã€‚ ä¸­é—´æ“ä½œ å½“æ•°æ®æºä¸­çš„æ•°æ®ä¸Šäº†æµæ°´çº¿åŽï¼Œè¿™ä¸ªè¿‡ç¨‹å¯¹æ•°æ®è¿›è¡Œçš„æ‰€æœ‰æ“ä½œéƒ½ç§°ä¸ºâ€œä¸­é—´æ“ä½œâ€ã€‚ ä¸­é—´æ“ä½œä»ç„¶ä¼šè¿”å›žä¸€ä¸ªæµå¯¹è±¡ï¼Œå› æ­¤å¤šä¸ªä¸­é—´æ“ä½œå¯ä»¥ä¸²è¿žèµ·æ¥å½¢æˆä¸€ä¸ªæµæ°´çº¿ã€‚ ç»ˆç«¯æ“ä½œ å½“æ‰€æœ‰çš„ä¸­é—´æ“ä½œå®ŒæˆåŽï¼Œè‹¥è¦å°†æ•°æ®ä»Žæµæ°´çº¿ä¸Šæ‹¿ä¸‹æ¥ï¼Œåˆ™éœ€è¦æ‰§è¡Œç»ˆç«¯æ“ä½œã€‚ ç»ˆç«¯æ“ä½œå°†è¿”å›žä¸€ä¸ªæ‰§è¡Œç»“æžœï¼Œè¿™å°±æ˜¯ä½ æƒ³è¦çš„æ•°æ®ã€‚ 6.1.4. æµçš„æ“ä½œè¿‡ç¨‹ ä½¿ç”¨æµä¸€å…±éœ€è¦ä¸‰æ­¥ï¼š å‡†å¤‡ä¸€ä¸ªæ•°æ®æº æ‰§è¡Œä¸­é—´æ“ä½œ ä¸­é—´æ“ä½œå¯ä»¥æœ‰å¤šä¸ªï¼Œå®ƒä»¬å¯ä»¥ä¸²è¿žèµ·æ¥å½¢æˆæµæ°´çº¿ã€‚ æ‰§è¡Œç»ˆç«¯æ“ä½œ æ‰§è¡Œç»ˆç«¯æ“ä½œåŽæœ¬æ¬¡æµç»“æŸï¼Œä½ å°†èŽ·å¾—ä¸€ä¸ªæ‰§è¡Œç»“æžœã€‚ 6.2. ä½¿ç”¨æµ 6.2.1. åˆ›å»ºæµ åœ¨ä½¿ç”¨æµä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦æ‹¥æœ‰ä¸€ä¸ªæ•°æ®æºï¼Œå¹¶é€šè¿‡StreamAPIæä¾›çš„ä¸€äº›æ–¹æ³•èŽ·å–è¯¥æ•°æ®æºçš„æµå¯¹è±¡ã€‚æ•°æ®æºå¯ä»¥æœ‰å¤šç§å½¢å¼ï¼š 1. é›†åˆ è¿™ç§æ•°æ®æºè¾ƒä¸ºå¸¸ç”¨ï¼Œé€šè¿‡stream()æ–¹æ³•å³å¯èŽ·å–æµå¯¹è±¡ï¼š 12List&lt;Person&gt; list = new ArrayList&lt;Person&gt;(); Stream&lt;Person&gt; stream = list.stream(); 2. æ•°ç»„ é€šè¿‡Arraysç±»æä¾›çš„é™æ€å‡½æ•°stream()èŽ·å–æ•°ç»„çš„æµå¯¹è±¡ï¼š 12String[] names = &#123;"chaimm","peter","john"&#125;;Stream&lt;String&gt; stream = Arrays.stream(names); 3. å€¼ ç›´æŽ¥å°†å‡ ä¸ªå€¼å˜æˆæµå¯¹è±¡ï¼š 1Stream&lt;String&gt; stream = Stream.of("chaimm","peter","john"); 4. æ–‡ä»¶ 1234try(Stream lines = Files.lines(Paths.get("æ–‡ä»¶è·¯å¾„å"),Charset.defaultCharset()))&#123; //å¯å¯¹linesåšä¸€äº›æ“ä½œ&#125;catch(IOException e)&#123;&#125; PSï¼šJava7ç®€åŒ–äº†IOæ“ä½œï¼ŒæŠŠæ‰“å¼€IOæ“ä½œæ”¾åœ¨tryåŽçš„æ‹¬å·ä¸­å³å¯çœç•¥å…³é—­IOçš„ä»£ç ã€‚ 5. iterator åˆ›å»ºæ— é™æµ 123Stream.iterate(0, n -&gt; n + 2) .limit(10) .forEach(System.out::println); 6.2.2. ç­›é€‰ filter filter å‡½æ•°æŽ¥æ”¶ä¸€ä¸ªLambdaè¡¨è¾¾å¼ä½œä¸ºå‚æ•°ï¼Œè¯¥è¡¨è¾¾å¼è¿”å›žbooleanï¼Œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæµå°†å…ƒç´ é€ä¸€è¾“é€ç»™filterï¼Œå¹¶ç­›é€‰å‡ºæ‰§è¡Œç»“æžœä¸ºtrueçš„å…ƒç´ ã€‚ å¦‚ï¼Œç­›é€‰å‡ºæ‰€æœ‰å­¦ç”Ÿï¼š 123List&lt;Person&gt; result = list.stream() .filter(Person::isStudent) .collect(Collectors.toList()); 6.2.3. åŽ»é‡distinct åŽ»æŽ‰é‡å¤çš„ç»“æžœï¼š 123List&lt;Person&gt; result = list.stream() .distinct() .collect(Collectors.toList()); PSï¼šå¯¹è±¡åŽ»é‡çš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„é‡å†™ equals å’Œ hashcode æ–¹æ³• 6.2.4. æˆªå– æˆªå–æµçš„å‰Nä¸ªå…ƒç´ ï¼š 123List&lt;Person&gt; result = list.stream() .limit(3) .collect(Collectors.toList()); 6.2.5. è·³è¿‡ è·³è¿‡æµçš„å‰nä¸ªå…ƒç´ ï¼š 123List&lt;Person&gt; result = list.stream() .skip(3) .collect(Collectors.toList()); 6.2.6. æ˜ å°„ å¯¹æµä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼Œä½¿å¾—å…ƒç´ è½¬æ¢æˆå¦ä¸€ç§ç±»åž‹è¾“å‡ºã€‚æµä¼šå°†æ¯ä¸€ä¸ªå…ƒç´ è¾“é€ç»™mapå‡½æ•°ï¼Œå¹¶æ‰§è¡Œmapä¸­çš„Lambdaè¡¨è¾¾å¼ï¼Œæœ€åŽå°†æ‰§è¡Œç»“æžœå­˜å…¥ä¸€ä¸ªæ–°çš„æµä¸­ã€‚ å¦‚ï¼ŒèŽ·å–æ¯ä¸ªäººçš„å§“å(å®žåˆ™æ˜¯å°†Perosnç±»åž‹è½¬æ¢æˆStringç±»åž‹)ï¼š 123List&lt;String&gt; result = list.stream() .map(Person::getName) .collect(Collectors.toList()); 6.2.7. åˆå¹¶å¤šä¸ªæµ ä¾‹ï¼šåˆ—å‡ºListä¸­å„ä¸ç›¸åŒçš„å•è¯ï¼ŒListé›†åˆå¦‚ä¸‹ï¼š 1234List&lt;String&gt; list = new ArrayList&lt;String&gt;();list.add("I am a boy");list.add("I love the girl");list.add("But the girl loves another girl"); æ€è·¯å¦‚ä¸‹ï¼š é¦–å…ˆå°†listå˜æˆæµï¼š 1list.stream(); æŒ‰ç©ºæ ¼åˆ†è¯ï¼š 12list.stream() .map(line-&gt;line.split(" ")); åˆ†å®Œè¯ä¹‹åŽï¼Œæ¯ä¸ªå…ƒç´ å˜æˆäº†ä¸€ä¸ªString[]æ•°ç»„ã€‚ å°†æ¯ä¸ª String[] å˜æˆæµï¼š 123list.stream() .map(line-&gt;line.split(" ")) .map(Arrays::stream) æ­¤æ—¶ä¸€ä¸ªå¤§æµé‡Œé¢åŒ…å«äº†ä¸€ä¸ªä¸ªå°æµï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™äº›å°æµåˆå¹¶æˆä¸€ä¸ªæµã€‚ å°†å°æµåˆå¹¶æˆä¸€ä¸ªå¤§æµï¼šç”¨ flatMap æ›¿æ¢åˆšæ‰çš„ map 123list.stream() .map(line-&gt;line.split(" ")) .flatMap(Arrays::stream) åŽ»é‡ 12345list.stream() .map(line-&gt;line.split(" ")) .flatMap(Arrays::stream) .distinct() .collect(Collectors.toList()); 6.2.8. æ˜¯å¦åŒ¹é…ä»»ä¸€å…ƒç´ ï¼šanyMatch anyMatchç”¨äºŽåˆ¤æ–­æµä¸­æ˜¯å¦å­˜åœ¨è‡³å°‘ä¸€ä¸ªå…ƒç´ æ»¡è¶³æŒ‡å®šçš„æ¡ä»¶ï¼Œè¿™ä¸ªåˆ¤æ–­æ¡ä»¶é€šè¿‡Lambdaè¡¨è¾¾å¼ä¼ é€’ç»™anyMatchï¼Œæ‰§è¡Œç»“æžœä¸ºbooleanç±»åž‹ã€‚ å¦‚ï¼Œåˆ¤æ–­listä¸­æ˜¯å¦æœ‰å­¦ç”Ÿï¼š 12boolean result = list.stream() .anyMatch(Person::isStudent); 6.2.9. æ˜¯å¦åŒ¹é…æ‰€æœ‰å…ƒç´ ï¼šallMatch allMatchç”¨äºŽåˆ¤æ–­æµä¸­çš„æ‰€æœ‰å…ƒç´ æ˜¯å¦éƒ½æ»¡è¶³æŒ‡å®šæ¡ä»¶ï¼Œè¿™ä¸ªåˆ¤æ–­æ¡ä»¶é€šè¿‡Lambdaè¡¨è¾¾å¼ä¼ é€’ç»™anyMatchï¼Œæ‰§è¡Œç»“æžœä¸ºbooleanç±»åž‹ã€‚ å¦‚ï¼Œåˆ¤æ–­æ˜¯å¦æ‰€æœ‰äººéƒ½æ˜¯å­¦ç”Ÿï¼š 12boolean result = list.stream() .allMatch(Person::isStudent); 6.2.10. æ˜¯å¦æœªåŒ¹é…æ‰€æœ‰å…ƒç´ ï¼šnoneMatch noneMatchä¸ŽallMatchæ°æ°ç›¸åï¼Œå®ƒç”¨äºŽåˆ¤æ–­æµä¸­çš„æ‰€æœ‰å…ƒç´ æ˜¯å¦éƒ½ä¸æ»¡è¶³æŒ‡å®šæ¡ä»¶ï¼š 12boolean result = list.stream() .noneMatch(Person::isStudent); 6.2.11. èŽ·å–ä»»ä¸€å…ƒç´ findAny findAnyèƒ½å¤Ÿä»Žæµä¸­éšä¾¿é€‰ä¸€ä¸ªå…ƒç´ å‡ºæ¥ï¼Œå®ƒè¿”å›žä¸€ä¸ªOptionalç±»åž‹çš„å…ƒç´ ã€‚ 1Optional&lt;Person&gt; person = list.stream().findAny(); 6.2.12. èŽ·å–ç¬¬ä¸€ä¸ªå…ƒç´ findFirst 1Optional&lt;Person&gt; person = list.stream().findFirst(); 6.2.13. å½’çº¦ å½’çº¦æ˜¯å°†é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ç»è¿‡æŒ‡å®šè¿ç®—ï¼ŒæŠ˜å æˆä¸€ä¸ªå…ƒç´ è¾“å‡ºï¼Œå¦‚ï¼šæ±‚æœ€å€¼ã€å¹³å‡æ•°ç­‰ï¼Œè¿™äº›æ“ä½œéƒ½æ˜¯å°†ä¸€ä¸ªé›†åˆçš„å…ƒç´ æŠ˜å æˆä¸€ä¸ªå…ƒç´ è¾“å‡ºã€‚ åœ¨æµä¸­ï¼Œreduceå‡½æ•°èƒ½å®žçŽ°å½’çº¦ã€‚ reduceå‡½æ•°æŽ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š åˆå§‹å€¼ è¿›è¡Œå½’çº¦æ“ä½œçš„Lambdaè¡¨è¾¾å¼ å…ƒç´ æ±‚å’Œï¼šè‡ªå®šä¹‰Lambdaè¡¨è¾¾å¼å®žçŽ°æ±‚å’Œ ä¾‹ï¼šè®¡ç®—æ‰€æœ‰äººçš„å¹´é¾„æ€»å’Œ 1int age = list.stream().reduce(0, (person1,person2)-&gt;person1.getAge()+person2.getAge()); reduceçš„ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºåˆå§‹å€¼ä¸º0ï¼› reduceçš„ç¬¬äºŒä¸ªå‚æ•°ä¸ºéœ€è¦è¿›è¡Œçš„å½’çº¦æ“ä½œï¼Œå®ƒæŽ¥æ”¶ä¸€ä¸ªæ‹¥æœ‰ä¸¤ä¸ªå‚æ•°çš„Lambdaè¡¨è¾¾å¼ï¼Œreduceä¼šæŠŠæµä¸­çš„å…ƒç´ ä¸¤ä¸¤è¾“ç»™Lambdaè¡¨è¾¾å¼ï¼Œæœ€åŽå°†è®¡ç®—å‡ºç´¯åŠ ä¹‹å’Œã€‚ å…ƒç´ æ±‚å’Œï¼šä½¿ç”¨Integer.sumå‡½æ•°æ±‚å’Œ ä¸Šé¢çš„æ–¹æ³•ä¸­æˆ‘ä»¬è‡ªå·±å®šä¹‰äº†Lambdaè¡¨è¾¾å¼å®žçŽ°æ±‚å’Œè¿ç®—ï¼Œå¦‚æžœå½“å‰æµçš„å…ƒç´ ä¸ºæ•°å€¼ç±»åž‹ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨Integeræä¾›äº†sumå‡½æ•°ä»£æ›¿è‡ªå®šä¹‰çš„Lambdaè¡¨è¾¾å¼ï¼Œå¦‚ï¼š 1int age = list.stream().reduce(0, Integer::sum); Integerç±»è¿˜æä¾›äº† minã€max ç­‰ä¸€ç³»åˆ—æ•°å€¼æ“ä½œï¼Œå½“æµä¸­å…ƒç´ ä¸ºæ•°å€¼ç±»åž‹æ—¶å¯ä»¥ç›´æŽ¥ä½¿ç”¨ã€‚ 6.2.14. æ•°å€¼æµçš„ä½¿ç”¨ é‡‡ç”¨reduceè¿›è¡Œæ•°å€¼æ“ä½œä¼šæ¶‰åŠåˆ°åŸºæœ¬æ•°å€¼ç±»åž‹å’Œå¼•ç”¨æ•°å€¼ç±»åž‹ä¹‹é—´çš„è£…ç®±ã€æ‹†ç®±æ“ä½œï¼Œå› æ­¤æ•ˆçŽ‡è¾ƒä½Žã€‚ å½“æµæ“ä½œä¸ºçº¯æ•°å€¼æ“ä½œæ—¶ï¼Œä½¿ç”¨æ•°å€¼æµèƒ½èŽ·å¾—è¾ƒé«˜çš„æ•ˆçŽ‡ã€‚ å°†æ™®é€šæµè½¬æ¢æˆæ•°å€¼æµ StreamAPIæä¾›äº†ä¸‰ç§æ•°å€¼æµï¼šIntStreamã€DoubleStreamã€LongStreamï¼Œä¹Ÿæä¾›äº†å°†æ™®é€šæµè½¬æ¢æˆæ•°å€¼æµçš„ä¸‰ç§æ–¹æ³•ï¼šmapToIntã€mapToDoubleã€mapToLongã€‚ å¦‚ï¼Œå°†Personä¸­çš„ageè½¬æ¢æˆæ•°å€¼æµï¼š 1IntStream stream = list.stream().mapToInt(Person::getAge); æ•°å€¼è®¡ç®— æ¯ç§æ•°å€¼æµéƒ½æä¾›äº†æ•°å€¼è®¡ç®—å‡½æ•°ï¼Œå¦‚maxã€minã€sumç­‰ã€‚å¦‚ï¼Œæ‰¾å‡ºæœ€å¤§çš„å¹´é¾„ï¼š 123OptionalInt maxAge = list.stream() .mapToInt(Person::getAge) .max(); ç”±äºŽæ•°å€¼æµå¯èƒ½ä¸ºç©ºï¼Œå¹¶ä¸”ç»™ç©ºçš„æ•°å€¼æµè®¡ç®—æœ€å¤§å€¼æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå› æ­¤maxå‡½æ•°è¿”å›žOptionalIntï¼Œå®ƒæ˜¯Optionalçš„ä¸€ä¸ªå­ç±»ï¼Œèƒ½å¤Ÿåˆ¤æ–­æµæ˜¯å¦ä¸ºç©ºï¼Œå¹¶å¯¹æµä¸ºç©ºçš„æƒ…å†µä½œç›¸åº”çš„å¤„ç†ã€‚ æ­¤å¤–ï¼ŒmapToIntã€mapToDoubleã€mapToLongè¿›è¡Œæ•°å€¼æ“ä½œåŽçš„è¿”å›žç»“æžœåˆ†åˆ«ä¸ºï¼šOptionalIntã€OptionalDoubleã€OptionalLong 6.3. ä¸­é—´æ“ä½œå’Œæ”¶é›†æ“ä½œ æ“ä½œ ç±»åž‹ è¿”å›žç±»åž‹ ä½¿ç”¨çš„ç±»åž‹/å‡½æ•°å¼æŽ¥å£ å‡½æ•°æè¿°ç¬¦ filter ä¸­é—´ Stream&lt;T&gt; Predicate&lt;T&gt; T -&gt; boolean distinct ä¸­é—´ Stream&lt;T&gt; skip ä¸­é—´ Stream&lt;T&gt; long map ä¸­é—´ Stream&lt;R&gt; Function&lt;T, R&gt; T -&gt; R flatMap ä¸­é—´ Stream&lt;R&gt; Function&lt;T, Stream&lt;R&gt;&gt; T -&gt; Stream&lt;R&gt; limit ä¸­é—´ Stream&lt;T&gt; long sorted ä¸­é—´ Stream&lt;T&gt; Comparator&lt;T&gt; (T, T) -&gt; int anyMatch ç»ˆç«¯ boolean Predicate&lt;T&gt; T -&gt; boolean noneMatch ç»ˆç«¯ boolean Predicate&lt;T&gt; T -&gt; boolean allMatch ç»ˆç«¯ boolean Predicate&lt;T&gt; T -&gt; boolean findAny ç»ˆç«¯ Optional&lt;T&gt; findFirst ç»ˆç«¯ Optional&lt;T&gt; forEach ç»ˆç«¯ void Consumer&lt;T&gt; T -&gt; void collect ç»ˆç«¯ R Collector&lt;T, A, R&gt; reduce ç»ˆç«¯ Optional&lt;T&gt; BinaryOperator&lt;T&gt; (T, T) -&gt; T count ç»ˆç«¯ long 6.4. Collectors æ”¶é›† æ”¶é›†å™¨ç”¨æ¥å°†ç»è¿‡ç­›é€‰ã€æ˜ å°„çš„æµè¿›è¡Œæœ€åŽçš„æ•´ç†ï¼Œå¯ä»¥ä½¿å¾—æœ€åŽçš„ç»“æžœä»¥ä¸åŒçš„å½¢å¼å±•çŽ°ã€‚ collect æ–¹æ³•å³ä¸ºæ”¶é›†å™¨ï¼Œå®ƒæŽ¥æ”¶ Collector æŽ¥å£çš„å®žçŽ°ä½œä¸ºå…·ä½“æ”¶é›†å™¨çš„æ”¶é›†æ–¹æ³•ã€‚ Collector æŽ¥å£æä¾›äº†å¾ˆå¤šé»˜è®¤å®žçŽ°çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æŽ¥ä½¿ç”¨å®ƒä»¬æ ¼å¼åŒ–æµçš„ç»“æžœï¼›ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ Collector æŽ¥å£çš„å®žçŽ°ï¼Œä»Žè€Œå®šåˆ¶è‡ªå·±çš„æ”¶é›†å™¨ã€‚ 6.4.1. å½’çº¦ æµç”±ä¸€ä¸ªä¸ªå…ƒç´ ç»„æˆï¼Œå½’çº¦å°±æ˜¯å°†ä¸€ä¸ªä¸ªå…ƒç´ â€œæŠ˜å â€æˆä¸€ä¸ªå€¼ï¼Œå¦‚æ±‚å’Œã€æ±‚æœ€å€¼ã€æ±‚å¹³å‡å€¼éƒ½æ˜¯å½’çº¦æ“ä½œã€‚ 6.4.2. ä¸€èˆ¬æ€§å½’çº¦ è‹¥ä½ éœ€è¦è‡ªå®šä¹‰ä¸€ä¸ªå½’çº¦æ“ä½œï¼Œé‚£ä¹ˆéœ€è¦ä½¿ç”¨ Collectors.reducing å‡½æ•°ï¼Œè¯¥å‡½æ•°æŽ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå½’çº¦çš„åˆå§‹å€¼ ç¬¬äºŒä¸ªå‚æ•°ä¸ºå½’çº¦æ“ä½œè¿›è¡Œçš„å­—æ®µ ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºå½’çº¦æ“ä½œçš„è¿‡ç¨‹ 6.5. æ±‡æ€» Collectorsç±»ä¸“é—¨ä¸ºæ±‡æ€»æä¾›äº†ä¸€ä¸ªå·¥åŽ‚æ–¹æ³•ï¼šCollectors.summingIntã€‚ å®ƒå¯æŽ¥å—ä¸€ ä¸ªæŠŠå¯¹è±¡æ˜ å°„ä¸ºæ±‚å’Œæ‰€éœ€intçš„å‡½æ•°ï¼Œå¹¶è¿”å›žä¸€ä¸ªæ”¶é›†å™¨ï¼›è¯¥æ”¶é›†å™¨åœ¨ä¼ é€’ç»™æ™®é€šçš„ collect æ–¹æ³•åŽå³æ‰§è¡Œæˆ‘ä»¬éœ€è¦çš„æ±‡æ€»æ“ä½œã€‚ 6.5.1. åˆ†ç»„ æ•°æ®åˆ†ç»„æ˜¯ä¸€ç§æ›´è‡ªç„¶çš„åˆ†å‰²æ•°æ®æ“ä½œï¼Œåˆ†ç»„å°±æ˜¯å°†æµä¸­çš„å…ƒç´ æŒ‰ç…§æŒ‡å®šç±»åˆ«è¿›è¡Œåˆ’åˆ†ï¼Œç±»ä¼¼äºŽSQLè¯­å¥ä¸­çš„ GROUPBYã€‚ 6.5.2. å¤šçº§åˆ†ç»„ å¤šçº§åˆ†ç»„å¯ä»¥æ”¯æŒåœ¨å®Œæˆä¸€æ¬¡åˆ†ç»„åŽï¼Œåˆ†åˆ«å¯¹æ¯ä¸ªå°ç»„å†è¿›è¡Œåˆ†ç»„ã€‚ ä½¿ç”¨å…·æœ‰ä¸¤ä¸ªå‚æ•°çš„ groupingBy é‡è½½æ–¹æ³•å³å¯å®žçŽ°å¤šçº§åˆ†ç»„ã€‚ ç¬¬ä¸€ä¸ªå‚æ•°ï¼šä¸€çº§åˆ†ç»„çš„æ¡ä»¶ ç¬¬äºŒä¸ªå‚æ•°ï¼šä¸€ä¸ªæ–°çš„ groupingBy å‡½æ•°ï¼Œè¯¥å‡½æ•°åŒ…å«äºŒçº§åˆ†ç»„çš„æ¡ä»¶ Collectors ç±»çš„é™æ€å·¥åŽ‚æ–¹æ³• å·¥åŽ‚æ–¹æ³• è¿”å›žç±»åž‹ ç”¨é€” ç¤ºä¾‹ toList List&lt;T&gt; æŠŠæµä¸­æ‰€æœ‰é¡¹ç›®æ”¶é›†åˆ°ä¸€ä¸ª List List&lt;Project&gt; projects = projectStream.collect(toList()); toSet Set&lt;T&gt; æŠŠæµä¸­æ‰€æœ‰é¡¹ç›®æ”¶é›†åˆ°ä¸€ä¸ª Setï¼Œåˆ é™¤é‡å¤é¡¹ Set&lt;Project&gt; projects = projectStream.collect(toSet()); toCollection Collection&lt;T&gt; æŠŠæµä¸­æ‰€æœ‰é¡¹ç›®æ”¶é›†åˆ°ç»™å®šçš„ä¾›åº”æºåˆ›å»ºçš„é›†åˆ Collection&lt;Project&gt; projects = projectStream.collect(toCollection(), ArrayList::new); counting Long è®¡ç®—æµä¸­å…ƒç´ çš„ä¸ªæ•° long howManyProjects = projectStream.collect(counting()); summingInt Integer å¯¹æµä¸­é¡¹ç›®çš„ä¸€ä¸ªæ•´æ•°å±žæ€§æ±‚å’Œ int totalStars = projectStream.collect(summingInt(Project::getStars)); averagingInt Double è®¡ç®—æµä¸­é¡¹ç›® Integer å±žæ€§çš„å¹³å‡å€¼ double avgStars = projectStream.collect(averagingInt(Project::getStars)); summarizingInt IntSummaryStatistics æ”¶é›†å…³äºŽæµä¸­é¡¹ç›® Integer å±žæ€§çš„ç»Ÿè®¡å€¼ï¼Œä¾‹å¦‚æœ€å¤§ã€æœ€å°ã€ æ€»å’Œä¸Žå¹³å‡å€¼ IntSummaryStatistics projectStatistics = projectStream.collect(summarizingInt(Project::getStars)); joining String è¿žæŽ¥å¯¹æµä¸­æ¯ä¸ªé¡¹ç›®è°ƒç”¨ toString æ–¹æ³•æ‰€ç”Ÿæˆçš„å­—ç¬¦ä¸² String shortProject = projectStream.map(Project::getName).collect(joining(&quot;, &quot;)); maxBy Optional&lt;T&gt; æŒ‰ç…§ç»™å®šæ¯”è¾ƒå™¨é€‰å‡ºçš„æœ€å¤§å…ƒç´ çš„ Optionalï¼Œ æˆ–å¦‚æžœæµä¸ºç©ºåˆ™ä¸º Optional.empty() Optional&lt;Project&gt; fattest = projectStream.collect(maxBy(comparingInt(Project::getStars))); minBy Optional&lt;T&gt; æŒ‰ç…§ç»™å®šæ¯”è¾ƒå™¨é€‰å‡ºçš„æœ€å°å…ƒç´ çš„ Optionalï¼Œ æˆ–å¦‚æžœæµä¸ºç©ºåˆ™ä¸º Optional.empty() Optional&lt;Project&gt; fattest = projectStream.collect(minBy(comparingInt(Project::getStars))); reducing å½’çº¦æ“ä½œäº§ç”Ÿçš„ç±»åž‹ ä»Žä¸€ä¸ªä½œä¸ºç´¯åŠ å™¨çš„åˆå§‹å€¼å¼€å§‹ï¼Œåˆ©ç”¨ BinaryOperator ä¸Žæµä¸­çš„å…ƒç´ é€ä¸ªç»“åˆï¼Œä»Žè€Œå°†æµå½’çº¦ä¸ºå•ä¸ªå€¼ int totalStars = projectStream.collect(reducing(0, Project::getStars, Integer::sum)); collectingAndThen è½¬æ¢å‡½æ•°è¿”å›žçš„ç±»åž‹ åŒ…å«å¦ä¸€ä¸ªæ”¶é›†å™¨ï¼Œå¯¹å…¶ç»“æžœåº”ç”¨è½¬æ¢å‡½æ•° int howManyProjects = projectStream.collect(collectingAndThen(toList(), List::size)); groupingBy Map&lt;K, List&lt;T&gt;&gt; æ ¹æ®é¡¹ç›®çš„ä¸€ä¸ªå±žæ€§çš„å€¼å¯¹æµä¸­çš„é¡¹ç›®ä½œé—®ç»„ï¼Œå¹¶å°†å±žæ€§å€¼ä½œ ä¸ºç»“æžœ Map çš„é”® Map&lt;String,List&lt;Project&gt;&gt; projectByLanguage = projectStream.collect(groupingBy(Project::getLanguage)); partitioningBy Map&lt;Boolean,List&lt;T&gt;&gt; æ ¹æ®å¯¹æµä¸­æ¯ä¸ªé¡¹ç›®åº”ç”¨æ–­è¨€çš„ç»“æžœæ¥å¯¹é¡¹ç›®è¿›è¡Œåˆ†åŒº Map&lt;Boolean,List&lt;Project&gt;&gt; vegetarianDishes = projectStream.collect(partitioningBy(Project::isVegetarian)); 6.5.3. è½¬æ¢ç±»åž‹ æœ‰ä¸€äº›æ”¶é›†å™¨å¯ä»¥ç”Ÿæˆå…¶ä»–é›†åˆã€‚æ¯”å¦‚å‰é¢å·²ç»è§è¿‡çš„ toListï¼Œç”Ÿæˆäº† java.util.List ç±»çš„å®žä¾‹ã€‚ è¿˜æœ‰ toSet å’Œ toCollectionï¼Œåˆ†åˆ«ç”Ÿæˆ Set å’Œ Collection ç±»çš„å®žä¾‹ã€‚ åˆ°ç›®å‰ä¸ºæ­¢ï¼Œ æˆ‘å·²ç»è®²äº†å¾ˆå¤šæµä¸Šçš„é“¾å¼æ“ä½œï¼Œä½†æ€»æœ‰ä¸€äº›æ—¶å€™ï¼Œéœ€è¦æœ€ç»ˆç”Ÿæˆä¸€ä¸ªé›†åˆâ€”â€”æ¯”å¦‚ï¼š å·²æœ‰ä»£ç æ˜¯ä¸ºé›†åˆç¼–å†™çš„ï¼Œå› æ­¤éœ€è¦å°†æµè½¬æ¢æˆé›†åˆä¼ å…¥ï¼› åœ¨é›†åˆä¸Šè¿›è¡Œä¸€ç³»åˆ—é“¾å¼æ“ä½œåŽï¼Œæœ€ç»ˆå¸Œæœ›ç”Ÿæˆä¸€ä¸ªå€¼ï¼› å†™å•å…ƒæµ‹è¯•æ—¶ï¼Œéœ€è¦å¯¹æŸä¸ªå…·ä½“çš„é›†åˆåšæ–­è¨€ã€‚ ä½¿ç”¨ Collectors.toCollectionï¼Œç”¨å®šåˆ¶çš„é›†åˆæ”¶é›†å…ƒç´  1stream.collect(Collectors.toCollection(TreeSet::new)); è¿˜å¯ä»¥åˆ©ç”¨æ”¶é›†å™¨è®©æµç”Ÿæˆä¸€ä¸ªå€¼ã€‚ maxBy å’Œ minBy å…è®¸ç”¨æˆ·æŒ‰æŸç§ç‰¹å®šçš„é¡ºåºç”Ÿæˆä¸€ä¸ªå€¼ã€‚ 6.5.4. æ•°æ®åˆ†åŒº åˆ†åŒºæ˜¯åˆ†ç»„çš„ç‰¹æ®Šæƒ…å†µï¼šç”±ä¸€ä¸ªæ–­è¨€ï¼ˆè¿”å›žä¸€ä¸ªå¸ƒå°”å€¼çš„å‡½æ•°ï¼‰ä½œä¸ºåˆ†ç±»å‡½æ•°ï¼Œå®ƒç§°åˆ†åŒºå‡½æ•°ã€‚ åˆ†åŒºå‡½æ•°è¿”å›žä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¿™æ„å‘³ç€å¾—åˆ°çš„åˆ†ç»„ Map çš„é”®ç±»åž‹æ˜¯ Booleanï¼ŒäºŽæ˜¯å®ƒæœ€å¤šå¯ä»¥åˆ†ä¸ºä¸¤ç»„: trueæ˜¯ä¸€ç»„ï¼Œfalseæ˜¯ä¸€ç»„ã€‚ åˆ†åŒºçš„å¥½å¤„åœ¨äºŽä¿ç•™äº†åˆ†åŒºå‡½æ•°è¿”å›žtrueæˆ–falseçš„ä¸¤å¥—æµå…ƒç´ åˆ—è¡¨ã€‚ 6.5.5. å¹¶è¡Œæµ å¹¶è¡Œæµå°±æ˜¯ä¸€ä¸ªæŠŠå†…å®¹åˆ†æˆå¤šä¸ªæ•°æ®å—ï¼Œå¹¶ç”¨ä¸ä¸åŒçš„çº¿ç¨‹åˆ†åˆ«å¤„ç†æ¯ä¸ªæ•°æ®å—çš„æµã€‚æœ€åŽåˆå¹¶æ¯ä¸ªæ•°æ®å—çš„è®¡ç®—ç»“æžœã€‚ å°†ä¸€ä¸ªé¡ºåºæ‰§è¡Œçš„æµè½¬å˜æˆä¸€ä¸ªå¹¶å‘çš„æµåªè¦è°ƒç”¨ parallel() æ–¹æ³• 123public static long parallelSum(long n)&#123; return Stream.iterate(1L, i -&gt; i +1).limit(n).parallel().reduce(0L,Long::sum);&#125; å°†ä¸€ä¸ªå¹¶å‘æµè½¬æˆé¡ºåºçš„æµåªè¦è°ƒç”¨ sequential() æ–¹æ³• 1stream.parallel().filter(...).sequential().map(...).parallel().reduce(); è¿™ä¸¤ä¸ªæ–¹æ³•å¯ä»¥å¤šæ¬¡è°ƒç”¨ï¼Œåªæœ‰æœ€åŽä¸€ä¸ªè°ƒç”¨å†³å®šè¿™ä¸ªæµæ˜¯é¡ºåºçš„è¿˜æ˜¯å¹¶å‘çš„ã€‚ å¹¶å‘æµä½¿ç”¨çš„é»˜è®¤çº¿ç¨‹æ•°ç­‰äºŽä½ æœºå™¨çš„å¤„ç†å™¨æ ¸å¿ƒæ•°ã€‚ é€šè¿‡è¿™ä¸ªæ–¹æ³•å¯ä»¥ä¿®æ”¹è¿™ä¸ªå€¼ï¼Œè¿™æ˜¯å…¨å±€å±žæ€§ã€‚ 1System.setProperty("java.util.concurrent.ForkJoinPool.common.parallelism", "12"); å¹¶éžä½¿ç”¨å¤šçº¿ç¨‹å¹¶è¡Œæµå¤„ç†æ•°æ®çš„æ€§èƒ½ä¸€å®šé«˜äºŽå•çº¿ç¨‹é¡ºåºæµçš„æ€§èƒ½ï¼Œå› ä¸ºæ€§èƒ½å—åˆ°å¤šç§å› ç´ çš„å½±å“ã€‚ å¦‚ä½•é«˜æ•ˆä½¿ç”¨å¹¶å‘æµçš„ä¸€äº›å»ºè®®ï¼š å¦‚æžœä¸ç¡®å®šï¼Œ å°±è‡ªå·±æµ‹è¯•ã€‚ å°½é‡ä½¿ç”¨åŸºæœ¬ç±»åž‹çš„æµ IntStream, LongStream, DoubleStream æœ‰äº›æ“ä½œä½¿ç”¨å¹¶å‘æµçš„æ€§èƒ½ä¼šæ¯”é¡ºåºæµçš„æ€§èƒ½æ›´å·®ï¼Œæ¯”å¦‚limitï¼ŒfindFirstï¼Œä¾èµ–å…ƒç´ é¡ºåºçš„æ“ä½œåœ¨å¹¶å‘æµä¸­æ˜¯æžå…¶æ¶ˆè€—æ€§èƒ½çš„ã€‚findAnyçš„æ€§èƒ½å°±ä¼šå¥½å¾ˆå¤šï¼Œåº”ä¸ºä¸ä¾èµ–é¡ºåºã€‚ è€ƒè™‘æµä¸­è®¡ç®—çš„æ€§èƒ½(Q)å’Œæ“ä½œçš„æ€§èƒ½(N)çš„å¯¹æ¯”, Qè¡¨ç¤ºå•ä¸ªå¤„ç†æ‰€éœ€çš„æ—¶é—´ï¼ŒNè¡¨ç¤ºéœ€è¦å¤„ç†çš„æ•°é‡ï¼Œå¦‚æžœQçš„å€¼è¶Šå¤§, ä½¿ç”¨å¹¶å‘æµçš„æ€§èƒ½å°±ä¼šè¶Šé«˜ã€‚ æ•°æ®é‡ä¸å¤§æ—¶ä½¿ç”¨å¹¶å‘æµï¼Œæ€§èƒ½å¾—ä¸åˆ°æå‡ã€‚ è€ƒè™‘æ•°æ®ç»“æž„ï¼šå¹¶å‘æµéœ€è¦å¯¹æ•°æ®è¿›è¡Œåˆ†è§£ï¼Œä¸åŒçš„æ•°æ®ç»“æž„è¢«åˆ†è§£çš„æ€§èƒ½æ—¶ä¸ä¸€æ ·çš„ã€‚ æµçš„æ•°æ®æºå’Œå¯åˆ†è§£æ€§ æº å¯åˆ†è§£æ€§ ArrayList éžå¸¸å¥½ LinkedList å·® IntStream.range éžå¸¸å¥½ Stream.iterate å·® HashSet å¥½ TreeSet å¥½ æµçš„ç‰¹æ€§ä»¥åŠä¸­é—´æ“ä½œå¯¹æµçš„ä¿®æ”¹éƒ½ä¼šå¯¹æ•°æ®å¯¹åˆ†è§£æ€§èƒ½é€ æˆå½±å“ã€‚ æ¯”å¦‚å›ºå®šå¤§å°çš„æµåœ¨ä»»åŠ¡åˆ†è§£çš„æ—¶å€™å°±å¯ä»¥å¹³å‡åˆ†é…ï¼Œä½†æ˜¯å¦‚æžœæœ‰filteræ“ä½œï¼Œé‚£ä¹ˆæµå°±ä¸èƒ½é¢„å…ˆçŸ¥é“åœ¨è¿™ä¸ªæ“ä½œåŽè¿˜ä¼šå‰©ä½™å¤šå°‘å…ƒç´ ã€‚ è€ƒè™‘ç»ˆç«¯æ“ä½œçš„æ€§èƒ½ï¼šå¦‚æžœç»ˆç«¯æ“ä½œåœ¨åˆå¹¶å¹¶å‘æµçš„è®¡ç®—ç»“æžœæ—¶çš„æ€§èƒ½æ¶ˆè€—å¤ªå¤§ï¼Œé‚£ä¹ˆä½¿ç”¨å¹¶å‘æµæå‡çš„æ€§èƒ½å°±ä¼šå¾—ä¸å¿å¤±ã€‚ 7. Optional ç±»ï¼ˆâ˜…ï¼‰ Optional ç±»æ˜¯ä¸€ä¸ªå¯ä»¥ä¸ºnullçš„å®¹å™¨å¯¹è±¡ã€‚å¦‚æžœå€¼å­˜åœ¨åˆ™isPresent()æ–¹æ³•ä¼šè¿”å›žtrueï¼Œè°ƒç”¨get()æ–¹æ³•ä¼šè¿”å›žè¯¥å¯¹è±¡ã€‚ Optional æ˜¯ä¸ªå®¹å™¨ï¼šå®ƒå¯ä»¥ä¿å­˜ç±»åž‹Tçš„å€¼ï¼Œæˆ–è€…ä»…ä»…ä¿å­˜nullã€‚Optionalæä¾›å¾ˆå¤šæœ‰ç”¨çš„æ–¹æ³•ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨æ˜¾å¼è¿›è¡Œç©ºå€¼æ£€æµ‹ã€‚ Optional ç±»çš„å¼•å…¥å¾ˆå¥½çš„è§£å†³ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚ Optionalç±»çš„æ–¹æ³• æ–¹æ³• æè¿° empty è¿”å›žä¸€ä¸ªç©ºçš„ Optional å®žä¾‹ filter å¦‚æžœå€¼å­˜åœ¨å¹¶ä¸”æ»¡è¶³æä¾›çš„æ–­è¨€ï¼Œ å°±è¿”å›žåŒ…å«è¯¥å€¼çš„ Optional å¯¹è±¡ï¼›å¦åˆ™è¿”å›žä¸€ä¸ªç©ºçš„ Optional å¯¹è±¡ map å¦‚æžœå€¼å­˜åœ¨ï¼Œå°±å¯¹è¯¥å€¼æ‰§è¡Œæä¾›çš„ mapping å‡½æ•°è°ƒç”¨ flatMap å¦‚æžœå€¼å­˜åœ¨ï¼Œå°±å¯¹è¯¥å€¼æ‰§è¡Œæä¾›çš„ mapping å‡½æ•°è°ƒç”¨ï¼Œè¿”å›žä¸€ä¸ª Optional ç±»åž‹çš„å€¼ï¼Œå¦åˆ™å°±è¿” å›žä¸€ä¸ªç©ºçš„ Optional å¯¹è±¡ get å¦‚æžœè¯¥å€¼å­˜åœ¨ï¼Œå°†è¯¥å€¼ç”¨ Optional å°è£…è¿”å›žï¼Œå¦åˆ™æŠ›å‡ºä¸€ä¸ª NoSuchElementException å¼‚å¸¸ ifPresent å¦‚æžœå€¼å­˜åœ¨ï¼Œå°±æ‰§è¡Œä½¿ç”¨è¯¥å€¼çš„æ–¹æ³•è°ƒç”¨ï¼Œå¦åˆ™ä»€ä¹ˆä¹Ÿä¸åš isPresent å¦‚æžœå€¼å­˜åœ¨å°±è¿”å›ž trueï¼Œå¦åˆ™è¿”å›ž false of å°†æŒ‡å®šå€¼ç”¨ Optional å°è£…ä¹‹åŽè¿”å›žï¼Œå¦‚æžœè¯¥å€¼ä¸º nullï¼Œåˆ™æŠ›å‡ºä¸€ä¸ª NullPointerException å¼‚å¸¸ ofNullable å°†æŒ‡å®šå€¼ç”¨ Optional å°è£…ä¹‹åŽè¿”å›žï¼Œå¦‚æžœè¯¥å€¼ä¸º nullï¼Œåˆ™è¿”å›žä¸€ä¸ªç©ºçš„ Optional å¯¹è±¡ orElse å¦‚æžœæœ‰å€¼åˆ™å°†å…¶è¿”å›žï¼Œå¦åˆ™è¿”å›žä¸€ä¸ªé»˜è®¤å€¼ orElseGet å¦‚æžœæœ‰å€¼åˆ™å°†å…¶è¿”å›žï¼Œå¦åˆ™è¿”å›žä¸€ä¸ªç”±æŒ‡å®šçš„ Supplier æŽ¥å£ç”Ÿæˆçš„å€¼ orElseThrow å¦‚æžœæœ‰å€¼åˆ™å°†å…¶è¿”å›žï¼Œå¦åˆ™æŠ›å‡ºä¸€ä¸ªç”±æŒ‡å®šçš„ Supplier æŽ¥å£ç”Ÿæˆçš„å¼‚å¸¸ 8. Nashorn, JavaScript å¼•æ“Ž Nashorn ä¸€ä¸ª javascript å¼•æ“Žã€‚ ä»ŽJDK 1.8å¼€å§‹ï¼ŒNashornå–ä»£Rhino(JDK 1.6, JDK1.7)æˆä¸ºJavaçš„åµŒå…¥å¼JavaScriptå¼•æ“Žã€‚Nashornå®Œå…¨æ”¯æŒECMAScript 5.1è§„èŒƒä»¥åŠä¸€äº›æ‰©å±•ã€‚å®ƒä½¿ç”¨åŸºäºŽJSR 292çš„æ–°è¯­è¨€ç‰¹æ€§ï¼Œå…¶ä¸­åŒ…å«åœ¨JDK 7ä¸­å¼•å…¥çš„invokedynamicï¼Œå°†JavaScriptç¼–è¯‘æˆJavaå­—èŠ‚ç ã€‚ ä¸Žå…ˆå‰çš„Rhinoå®žçŽ°ç›¸æ¯”ï¼Œè¿™å¸¦æ¥äº†2åˆ°10å€çš„æ€§èƒ½æå‡ã€‚ 9. æ–°çš„æ—¥æœŸæ—¶é—´ APIï¼ˆâ˜…â˜…ï¼‰ Demo ä»£ç ï¼šhttps://github.com/xkcoding/java8_learning/tree/master/java8-datetime ZoneId Java 8ä¸­çš„æ—¶åŒºæ“ä½œè¢«å¾ˆå¤§ç¨‹åº¦ä¸Šç®€åŒ–äº†ï¼Œæ–°çš„æ—¶åŒºç±» java.time.ZoneId æ˜¯åŽŸæœ‰çš„ java.util.TimeZone ç±»çš„æ›¿ä»£å“ã€‚ ZoneIdå¯¹è±¡å¯ä»¥é€šè¿‡ ZoneId.of() æ–¹æ³•åˆ›å»ºï¼Œä¹Ÿå¯ä»¥é€šè¿‡ ZoneId.systemDefault() èŽ·å–ç³»ç»Ÿé»˜è®¤æ—¶åŒºï¼š 12ZoneId shanghaiZoneId = ZoneId.of("Asia/Shanghai");ZoneId systemZoneId = ZoneId.systemDefault(); of() æ–¹æ³•æŽ¥æ”¶ä¸€ä¸ªâ€œåŒºåŸŸ/åŸŽå¸‚â€çš„å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œä½ å¯ä»¥é€šè¿‡ getAvailableZoneIds() æ–¹æ³•èŽ·å–æ‰€æœ‰åˆæ³•çš„â€œåŒºåŸŸ/åŸŽå¸‚â€å­—ç¬¦ä¸²ï¼š 1Set&lt;String&gt; zoneIds = ZoneId.getAvailableZoneIds(); å¯¹äºŽè€çš„æ—¶åŒºç±» TimeZoneï¼ŒJava 8ä¹Ÿæä¾›äº†è½¬åŒ–æ–¹æ³•ï¼š 1ZoneId oldToNewZoneId = TimeZone.getDefault().toZoneId(); æœ‰äº† ZoneIdï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†ä¸€ä¸ª LocalDateã€LocalTime æˆ– LocalDateTime å¯¹è±¡è½¬åŒ–ä¸º ZonedDateTime å¯¹è±¡ï¼š 12LocalDateTime localDateTime = LocalDateTime.now();ZonedDateTime zonedDateTime = ZonedDateTime.of(localDateTime, shanghaiZoneId); ZonedDateTime å¯¹è±¡ç”±ä¸¤éƒ¨åˆ†æž„æˆï¼ŒLocalDateTime å’Œ ZoneIdï¼Œå…¶ä¸­ 2018-03-03T15:26:56.147 éƒ¨åˆ†ä¸º LocalDateTimeï¼Œ+08:00[Asia/Shanghai] éƒ¨åˆ†ä¸ºZoneIdã€‚ å¦ä¸€ç§è¡¨ç¤ºæ—¶åŒºçš„æ–¹å¼æ˜¯ä½¿ç”¨ ZoneOffsetï¼Œå®ƒæ˜¯ä»¥å½“å‰æ—¶é—´å’Œ ä¸–ç•Œæ ‡å‡†æ—¶é—´ï¼ˆUTCï¼‰/æ ¼æž—å¨æ²»æ—¶é—´ï¼ˆGMTï¼‰ çš„åå·®æ¥è®¡ç®—ï¼Œä¾‹å¦‚ï¼š 123ZoneOffset zoneOffset = ZoneOffset.of("+09:00");LocalDateTime localDateTime = LocalDateTime.now();OffsetDateTime offsetDateTime = OffsetDateTime.of(localDateTime, zoneOffset); Instant Instantç±»åœ¨Javaæ—¥æœŸä¸Žæ—¶é—´åŠŸèƒ½ä¸­ï¼Œè¡¨ç¤ºäº†æ—¶é—´çº¿ä¸Šä¸€ä¸ªç¡®åˆ‡çš„ç‚¹ï¼Œå®šä¹‰ä¸ºè·ç¦»åˆå§‹æ—¶é—´çš„æ—¶é—´å·®ï¼ˆåˆå§‹æ—¶é—´ä¸ºGMT 1970å¹´1æœˆ1æ—¥00:00ï¼‰ç»æµ‹é‡ä¸€å¤©æœ‰86400ç§’ï¼Œä»Žåˆå§‹æ—¶é—´å¼€å§‹ä¸æ–­å‘å‰ç§»åŠ¨ã€‚ åˆ›å»ºä¸€ä¸ªInstantå®žä¾‹ ä½ å¯ä»¥é€šè¿‡Instantç±»çš„å·¥åŽ‚æ–¹æ³•åˆ›å»ºä¸€ä¸ªInstantå®žä¾‹ï¼Œä¾‹å¦‚ä½ å¯ä»¥è°ƒç”¨instant.now()æ¥åˆ›å»ºä¸€ä¸ªç¡®åˆ‡çš„è¡¨è¾¾å½“å‰æ—¶é—´çš„Instantå¯¹è±¡ï¼š 1Instant now = Instant.now(); å¦å¤–ä¹Ÿæœ‰ä¸€äº›å…¶å®ƒæ–¹æ³•èƒ½åˆ›å»ºInstantï¼Œå…·ä½“è¯·æŸ¥é˜…Javaå®˜æ–¹æ–‡æ¡£ã€‚ è®¿é—®Instantçš„æ—¶é—´ ä¸€ä¸ªInstantå¯¹è±¡é‡Œæœ‰ä¸¤ä¸ªåŸŸï¼šè·ç¦»åˆå§‹æ—¶é—´çš„ç§’é’Ÿæ•°ã€åœ¨å½“å‰ä¸€ç§’å†…çš„ç¬¬å‡ çº³ç§’ï¼Œä»–ä»¬çš„ç»„åˆè¡¨è¾¾äº†å½“å‰æ—¶é—´ç‚¹ã€‚ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•å¾—åˆ°å®ƒä»¬çš„å€¼ï¼š 12long seconds = now.getEpochSecond()int nanos = now.getNano() Instantçš„è®¡ç®— Instantç±»æœ‰ä¸€äº›æ–¹æ³•ï¼Œå¯ä»¥ç”¨äºŽèŽ·å¾—å¦ä¸€Instantçš„å€¼ï¼Œä¾‹å¦‚ï¼š plusSeconds() plusMillis() plusNanos() minusSeconds() minusMillis() minusNanos() æˆ‘ä¸‹é¢å°†å‘ä½ å±•ç¤ºä¸¤ä¸ªä¾‹å­ï¼Œæ¥è¯´æ˜Žè¿™äº›æ–¹æ³•å¦‚ä½•ä½¿ç”¨ï¼š 123Instant now = Instant.now();Instant later = now.plusSeconds(3);Instant earlier = now.minusSeconds(3); ç¬¬ä¸€è¡ŒèŽ·å¾—äº†ä¸€ä¸ªInstantå¯¹è±¡ï¼Œè¡¨ç¤ºå½“å‰æ—¶é—´ã€‚ç¬¬äºŒè¡Œåˆ›å»ºäº†ä¸€ä¸ªInstantè¡¨ç¤ºä¸‰ç§’åŽï¼Œç¬¬ä¸‰è¡Œåˆ›å»ºäº†ä¸€ä¸ªInstantè¡¨ç¤ºä¸‰ç§’å‰ã€‚ seconds è¡¨ç¤ºä»Ž 1970-01-01 00:00:00 å¼€å§‹åˆ°çŽ°åœ¨çš„ç§’æ•°ï¼Œnanos è¡¨ç¤ºçº³ç§’éƒ¨åˆ†ï¼ˆnanosçš„å€¼ä¸ä¼šè¶…è¿‡999,999,999ï¼‰ Clock Clockç±»æä¾›äº†è®¿é—®å½“å‰æ—¥æœŸå’Œæ—¶é—´çš„æ–¹æ³•ï¼ŒClockæ˜¯æ—¶åŒºæ•æ„Ÿçš„ï¼Œå¯ä»¥ç”¨æ¥å–ä»£ System.currentTimeMillis() æ¥èŽ·å–å½“å‰çš„å¾®ç§’æ•°ã€‚ æŸä¸€ä¸ªç‰¹å®šçš„æ—¶é—´ç‚¹ä¹Ÿå¯ä»¥ä½¿ç”¨Instantç±»æ¥è¡¨ç¤ºï¼ŒInstant ç±»ä¹Ÿå¯ä»¥ç”¨æ¥åˆ›å»ºè€çš„ java.util.Date å¯¹è±¡ã€‚ 1234Clock clock = Clock.systemDefaultZone(); long millis = clock.millis(); Instant instant = clock.instant(); Date legacyDate = Date.from(instant); // legacy java.util.Date LocalDate LocalDateç±»æ˜¯Java 8ä¸­æ—¥æœŸæ—¶é—´åŠŸèƒ½é‡Œè¡¨ç¤ºä¸€ä¸ªæœ¬åœ°æ—¥æœŸçš„ç±»ï¼Œå®ƒçš„æ—¥æœŸæ˜¯æ— æ—¶åŒºå±žæ€§çš„ã€‚ å¯ä»¥ç”¨æ¥è¡¨ç¤ºç”Ÿæ—¥ã€èŠ‚å‡æ—¥æœŸç­‰ç­‰ã€‚è¿™ä¸ªç±»ç”¨äºŽè¡¨ç¤ºä¸€ä¸ªç¡®åˆ‡çš„æ—¥æœŸï¼Œè€Œä¸æ˜¯è¿™ä¸ªæ—¥æœŸæ‰€åœ¨çš„æ—¶é—´ï¼ˆå¦‚java.util.Dateä¸­çš„2000.01.01è¡¨ç¤ºçš„å®žé™…æ˜¯è¿™ä¸€å¤©çš„00:00è¿™ä¸ªçž¬é—´ï¼‰ã€‚ LocalDateç±»ä½äºŽjava.timeåŒ…ä¸‹ï¼Œç±»åå«java.time.LocalDateï¼Œåˆ›å»ºå‡ºæ¥çš„å®žä¾‹ä¹Ÿæ˜¯ä¸å¯å˜å¯¹è±¡ï¼Œæ‰€ä»¥æ¶‰åŠå®ƒçš„è®¡ç®—æ–¹æ³•å°†è¿”å›žä¸€ä¸ªæ–°çš„LocalDateã€‚ åˆ›å»ºä¸€ä¸ªLocalDateå®žä¾‹ æˆ‘ä»¬æœ‰å¤šç§æ–¹å¼å¯ä»¥åˆ›å»ºå‡º LocalDate å®žä¾‹ã€‚ç¬¬ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ now() æ–¹æ³•èŽ·å¾—å€¼ä¸ºä»Šå¤©å½“æ—¥çš„ LocalDate å¯¹è±¡ï¼š 1LocalDate localDate = LocalDate.now(); å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨å¹´æœˆæ—¥ä¿¡æ¯æž„é€ å‡ºLocalDateå¯¹è±¡ï¼š 1LocalDate localDate2 = LocalDate.of(2018, 7, 19); LocalDate çš„ of() æ–¹æ³•åˆ›å»ºå‡ºä¸€ä¸ªæŒ‡å®šå¹´æœˆæ—¥çš„æ—¥æœŸï¼Œå¹¶ä¸”æ²¡æœ‰æ—¶åŒºä¿¡æ¯ã€‚ è®¿é—®æ—¥æœŸä¿¡æ¯ å¯ä»¥ç”¨å¦‚ä¸‹æ–¹æ³•è®¿é—®LocalDateä¸­çš„æ—¥æœŸä¿¡æ¯ï¼š 12345int year = localDate.getYear();Month month = localDate.getMonth();int dayOfMonth = localDate.getDayOfMonth();int dayOfYear = localDate.getDayOfYear();DayOfWeek dayOfWeek = localDate.getDayOfWeek(); å¯ä»¥æ³¨æ„åˆ°getMonth()ä¸ŽgetDayOfWeek()æ–¹æ³•è¿”å›žäº†ä¸€ä¸ªæžšä¸¾ç±»åž‹ä»£æ›¿ä¸€ä¸ªintã€‚ä½ å¯ä»¥é€šè¿‡æžšä¸¾ç±»åž‹ä¸­çš„getValue()æ¥èŽ·å¾—ä¿¡æ¯ã€‚ LocalDateè®¡ç®— ä½ å¯ä»¥è¿›è¡Œä¸€å †ç®€å•çš„æ—¥æœŸè®¡ç®—ï¼Œåªè¦ä½¿ç”¨å¦‚ä¸‹çš„æ–¹æ³•ï¼š plusDays() plusWeeks() plusMonths() plusYears() minusDays() minusWeeks() minusMonths() minusYears() ä»¥ä¸‹ä¸¾å‡ ä¸ªä½¿ç”¨çš„ä¾‹å­æ¥å¸®åŠ©ç†è§£ä½¿ç”¨ï¼š 123LocalDate d = LocalDate.of(2018, 7, 19);LocalDate d1 = localDate.plusYears(3);LocalDate d2 = localDate.minusYears(3); ç¬¬ä¸€è¡Œåˆ›å»ºå‡ºä¸€ä¸ªæ–°çš„LocalDateå¯¹è±¡dï¼Œè¡¨ç¤º2018.7.19ã€‚ ç¬¬äºŒè¡Œåˆ›å»ºäº†å€¼ç­‰äºŽdæ—¥æœŸ3å¹´åŽçš„LocalDateå¯¹è±¡ï¼Œç¬¬ä¸‰è¡Œä¹Ÿæ˜¯ä¸€æ ·ï¼Œåªæ˜¯å€¼æ”¹ä¸ºdæ—¥æœŸçš„ä¸‰å¹´å‰ã€‚ LocalTime LocalTimeç±»æ˜¯Java 8ä¸­æ—¥æœŸæ—¶é—´åŠŸèƒ½é‡Œè¡¨ç¤ºä¸€æ•´å¤©ä¸­æŸä¸ªæ—¶é—´ç‚¹çš„ç±»ï¼Œå®ƒçš„æ—¶é—´æ˜¯æ— æ—¶åŒºå±žæ€§çš„ï¼ˆæ—©ä¸Š10ç‚¹ç­‰ç­‰ï¼‰ã€‚æ¯”å¦‚ä½ éœ€è¦æè¿°å­¦æ ¡å‡ ç‚¹å¼€å­¦ï¼Œè¿™ä¸ªæ—¶é—´ä¸æ¶‰åŠåœ¨ä»€ä¹ˆåŸŽå¸‚ï¼Œè¿™ä¸ªæè¿°æ˜¯å¯¹ä»»ä½•å›½å®¶åŸŽå¸‚éƒ½é€‚ç”¨çš„ï¼Œæ­¤æ—¶ä½¿ç”¨æ— æ—¶åŒºçš„LocalTimeå°±è¶³å¤Ÿäº†ã€‚ LocalTimeç±»çš„å¯¹è±¡ä¹Ÿæ˜¯ä¸å¯å˜çš„ï¼Œæ‰€ä»¥è®¡ç®—æ–¹æ³•ä¼šè¿”å›žä¸€ä¸ªæ–°çš„LocalTimeå®žä¾‹ã€‚ åˆ›å»ºä¸€ä¸ªLocatTimeå®žä¾‹ æœ‰å¤šç§æ–¹å¼å¯ä»¥æ–°å»ºLocalTimeå®žä¾‹ã€‚æ¯”å¦‚ä½¿ç”¨å½“å‰æ—¶é—´ä½œä¸ºå€¼æ–°å»ºå¯¹è±¡ï¼š 1LocalTime localTime = LocalTime.now(); å¦ä¸€ç§æ–¹å¼æ˜¯ä½¿ç”¨æŒ‡å®šçš„æ—¶åˆ†ç§’å’Œçº³ç§’æ¥æ–°å»ºå¯¹è±¡ï¼š 1LocalTime localTime2 = LocalTime.of(21, 30, 59, 11001); ä¹Ÿæœ‰å¦ä¸€ç§ç‰ˆæœ¬çš„ of() æ–¹æ³•åªéœ€è¦å°æ—¶åˆ†é’Ÿä¸¤é¡¹ï¼Œæˆ–æ—¶åˆ†ç§’ä¸‰é¡¹å€¼ä½œä¸ºå‚æ•°ã€‚ è®¿é—®LocalTimeå¯¹è±¡çš„æ—¶é—´ ä½ å¯ä»¥é€šè¿‡è¿™äº›æ–¹æ³•è®¿é—®å…¶æ—¶ã€åˆ†ã€ç§’ã€çº³ç§’ï¼š getHour() getMinute() getSecond() getNano() LocalTimeçš„è®¡ç®— LocalTimeç±»åŒ…å«ä¸€ç³»åˆ—æ–¹æ³•ï¼Œèƒ½å¸®ä½ å®Œæˆæ—¶é—´è®¡ç®—ï¼š plusHours() plusMinutes() plusSeconds() plusNanos() minusHours() minusMinutes() minusSeconds() minusNanos() ä»¥ä¸‹ä¸¾ä¸€ä¸ªä¾‹å­ï¼š 123LocalTime localTime2 = LocalTime.of(21, 30, 59, 11001);LocalTime localTimeLater = localTime.plusHours(3);LocalTime localTimeEarlier = localTime.minusHours(3); ç¬¬ä¸€è¡Œæ–°å»ºä¸€ä¸ªLocalTimeå®žä¾‹ï¼Œè¡¨ç¤º21:30:50çš„ç¬¬11001çº³ç§’ã€‚ ç¬¬äºŒè¡Œæ–°å»ºäº†ä¸€ä¸ªLocalTimeå®žä¾‹è¡¨ç¤ºè¿™ä¸ªæ—¶é—´çš„ä¸‰å°æ—¶åŽï¼Œç¬¬ä¸‰è¡Œè¡¨ç¤ºä¸‰å°æ—¶å‰ã€‚ LocalTimeç±»æ˜¯Java 8ä¸­æ—¥æœŸæ—¶é—´åŠŸèƒ½é‡Œè¡¨ç¤ºä¸€æ•´å¤©ä¸­æŸä¸ªæ—¶é—´ç‚¹çš„ç±»ï¼Œå®ƒçš„æ—¶é—´æ˜¯æ— æ—¶åŒºå±žæ€§çš„ï¼ˆæ—©ä¸Š10ç‚¹ç­‰ç­‰ï¼‰ã€‚æ¯”å¦‚ä½ éœ€è¦æè¿°å­¦æ ¡å‡ ç‚¹å¼€å­¦ï¼Œè¿™ä¸ªæ—¶é—´ä¸æ¶‰åŠåœ¨ä»€ä¹ˆåŸŽå¸‚ï¼Œè¿™ä¸ªæè¿°æ˜¯å¯¹ä»»ä½•å›½å®¶åŸŽå¸‚éƒ½é€‚ç”¨çš„ï¼Œæ­¤æ—¶ä½¿ç”¨æ— æ—¶åŒºçš„LocalTimeå°±è¶³å¤Ÿäº†ã€‚ LocalTimeç±»çš„å¯¹è±¡ä¹Ÿæ˜¯ä¸å¯å˜çš„ï¼Œæ‰€ä»¥è®¡ç®—æ–¹æ³•ä¼šè¿”å›žä¸€ä¸ªæ–°çš„LocalTimeå®žä¾‹ã€‚ LocalDateTime LocalDateTimeç±»æ˜¯Java 8ä¸­æ—¥æœŸæ—¶é—´åŠŸèƒ½é‡Œï¼Œç”¨äºŽè¡¨ç¤ºå½“åœ°çš„æ—¥æœŸä¸Žæ—¶é—´çš„ç±»ï¼Œå®ƒçš„å€¼æ˜¯æ— æ—¶åŒºå±žæ€§çš„ã€‚ä½ å¯ä»¥å°†å…¶è§†ä¸ºJava 8ä¸­LocalDateä¸ŽLocalTimeä¸¤ä¸ªç±»çš„ç»“åˆã€‚ LocalDateTimeç±»çš„å€¼æ˜¯ä¸å¯å˜çš„ï¼Œæ‰€ä»¥å…¶è®¡ç®—æ–¹æ³•ä¼šè¿”å›žä¸€ä¸ªæ–°çš„LocalDateTimeå®žä¾‹ã€‚ åˆ›å»ºä¸€ä¸ªLocatDateTimeå®žä¾‹ å¯ä»¥é€šè¿‡LocalDateTimeçš„é™æ€å·¥åŽ‚æ–¹æ³•æ¥åˆ›å»ºLocalDateTimeå®žä¾‹ã€‚ä»¥ä¸‹ä¸¾ä¾‹ä½¿ç”¨ now() æ–¹æ³•åˆ›å»ºï¼š 1LocalDateTime localDateTime = LocalDateTime.now(); å¦ä¸€ç§æ–¹å¼æ˜¯ä½¿ç”¨æŒ‡å®šçš„å¹´æœˆæ—¥ã€æ—¶åˆ†ç§’ã€çº³ç§’æ¥æ–°å»ºå¯¹è±¡ï¼š 1LocalDateTime localDateTime2 = LocalDateTime.of(2018, 7, 19, 13, 55, 36, 123); è®¿é—®LocalDateTimeå¯¹è±¡çš„æ—¶é—´ ä½ å¯ä»¥é€šè¿‡è¿™äº›æ–¹æ³•è®¿é—®å…¶æ—¥æœŸæ—¶é—´ï¼š getYear() getMonth() getDayOfMonth() getDayOfWeek() getDayOfYear() getHour() getMinute() getSecond() getNano() è¿™äº›æ–¹æ³•ä¸­æœ‰ä¸€äº›è¿”å›žintæœ‰ä¸€äº›è¿”å›žæžšä¸¾ç±»åž‹ï¼Œä½ å¯ä»¥é€šè¿‡æžšä¸¾ç±»åž‹ä¸­çš„ getValue() æ–¹æ³•æ¥èŽ·å¾—intå€¼ã€‚ LocalDateTimeçš„è®¡ç®— LocalDateTime ç±»åŒ…å«ä¸€ç³»åˆ—æ–¹æ³•ï¼Œèƒ½å¸®ä½ å®Œæˆæ—¶é—´è®¡ç®—ï¼š plusYears() plusMonths() plusDays() plusHours() plusMinutes() plusSeconds() plusNanos() minusYears() minusMonths() minusDays() minusHours() minusMinutes() minusSeconds() minusNanos() ä»¥ä¸‹ä¸¾ä¸€ä¸ªä¾‹å­ï¼š 123LocalDateTime localDateTime = LocalDateTime.now();LocalDateTime localDateTime1 = localDateTime.plusYears(3);LocalDateTime localDateTime2 = localDateTime.minusYears(3); ç¬¬ä¸€è¡Œæ–°å»ºä¸€ä¸ªLocalDateTimeå®žä¾‹è¡¨ç¤ºå½“å‰è¿™ä¸ªæ—¶é—´ã€‚ ç¬¬äºŒè¡Œæ–°å»ºäº†ä¸€ä¸ªLocalDateTimeå®žä¾‹è¡¨ç¤ºä¸‰å¹´åŽã€‚ ç¬¬ä¸‰è¡Œä¹Ÿæ–°å»ºäº†ä¸€ä¸ªLocalDateTimeå®žä¾‹è¡¨ç¤ºä¸‰å°æ—¶å‰ã€‚ ZonedDateTime ZonedDateTimeç±»æ˜¯Java 8ä¸­æ—¥æœŸæ—¶é—´åŠŸèƒ½é‡Œï¼Œç”¨äºŽè¡¨ç¤ºå¸¦æ—¶åŒºçš„æ—¥æœŸä¸Žæ—¶é—´ä¿¡æ¯çš„ç±»ã€‚å¯ä»¥ç”¨äºŽè¡¨ç¤ºä¸€ä¸ªçœŸå®žäº‹ä»¶çš„å¼€å§‹æ—¶é—´ï¼Œå¦‚æŸç«ç®­å‡ç©ºæ—¶é—´ç­‰ç­‰ã€‚ ZonedDateTime ç±»çš„å€¼æ˜¯ä¸å¯å˜çš„ï¼Œæ‰€ä»¥å…¶è®¡ç®—æ–¹æ³•ä¼šè¿”å›žä¸€ä¸ªæ–°çš„ZonedDateTime å®žä¾‹ã€‚ åˆ›å»ºä¸€ä¸ªZonedDateTimeå®žä¾‹ æœ‰å¤šç§æ–¹å¼å¯ä»¥æ–°å»ºZonedDateTimeå®žä¾‹ã€‚æ¯”å¦‚ä½¿ç”¨å½“å‰æ—¶é—´ä½œä¸ºå€¼æ–°å»ºå¯¹è±¡ï¼š 1ZonedDateTime dateTime = ZonedDateTime.now(); å¦ä¸€ç§æ–¹å¼æ˜¯ä½¿ç”¨æŒ‡å®šçš„å¹´æœˆæ—¥ã€æ—¶åˆ†ç§’ã€çº³ç§’ä»¥åŠæ—¶åŒºIDæ¥æ–°å»ºå¯¹è±¡ï¼š 12ZoneId zoneId = ZoneId.of("UTC+1");ZonedDateTime dateTime2 = ZonedDateTime.of(2018, 7, 19, 11, 45, 59, 1234, zoneId); è®¿é—®ZonedDateTimeå¯¹è±¡çš„æ—¶é—´ ä½ å¯ä»¥é€šè¿‡è¿™äº›æ–¹æ³•è®¿é—®å…¶æ—¥æœŸæ—¶é—´ï¼š getYear() getMonth() getDayOfMonth() getDayOfWeek() getDayOfYear() getHour() getMinute() getSecond() getNano() è¿™äº›æ–¹æ³•ä¸­æœ‰ä¸€äº›è¿”å›žintæœ‰ä¸€äº›è¿”å›žæžšä¸¾ç±»åž‹ï¼Œä½†å¯ä»¥é€šè¿‡æžšä¸¾ç±»åž‹ä¸­çš„getValue()æ–¹æ³•æ¥èŽ·å¾—intå€¼ã€‚ ZonedDateTimeçš„è®¡ç®— ZonedDateTimeç±»åŒ…å«ä¸€ç³»åˆ—æ–¹æ³•ï¼Œèƒ½å¸®ä½ å®Œæˆæ—¶é—´è®¡ç®—ï¼š plusYears() plusMonths() plusDays() plusHours() plusMinutes() plusSeconds() plusNanos() minusYears() minusMonths() minusDays() minusHours() minusMinutes() minusSeconds() minusNanos() ä½†æ³¨æ„è®¡ç®—æ—¶ï¼Œè‹¥ä¸å·§è·¨è¶Šäº†å¤ä»¤æ—¶ï¼ˆä¼šè¡¥ä¸€å°æ—¶æˆ–å‡ä¸€å°æ—¶ï¼‰ï¼Œå¯èƒ½å¾—ä¸åˆ°å¸Œæœ›çš„ç»“æžœã€‚ä¸€ä¸ªæ›¿ä»£çš„æ­£ç¡®åšæ³•æ˜¯ä½¿ç”¨Periodï¼š 1ZonedDateTime zoneDateTime = previousDateTime.plus(Period.ofDays(3)); æ—¶åŒº æ—¶åŒºæ˜¯ç”¨ZoneIdç±»è¡¨ç¤ºçš„ï¼Œä½ å¯ä»¥ä½¿ç”¨ZoneId.now()æˆ–ZoneId.of(â€œxxxâ€)æ¥å®žä¾‹åŒ–ï¼š 1ZoneId zoneId = ZoneId.of("UTC+1"); ä¼ ç»™ of() æ–¹æ³•çš„å‚æ•°æ˜¯æ—¶åŒºçš„IDï¼Œå¦‚â€œUTC+1â€æŒ‡è·ç¦»UTCï¼ˆæ ¼æž—å¨æ²»æ—¶é—´ï¼‰æœ‰ä¸€å°æ—¶çš„æ—¶å·®ï¼Œä½ å¯ä»¥ä½¿ç”¨ä½ æƒ³è¦çš„æ—¶å·®æ¥è¡¨ç¤ºZoneIdï¼ˆå¦‚+1ä¸Ž-5ç­‰ç­‰ï¼‰ ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å¦ä¸€ç§æ–¹å¼è¡¨ç¤ºzone idï¼Œå³ä½¿ç”¨åœ°åŒºåå­—ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ï¼š 12ZoneId zoneId2 = ZoneId.of("Europe/Copenhagen");ZoneId zoneId3 = ZoneId.of("Europe/Paris"); DateTimeFormatter DateTimeFormatterç±»æ˜¯Java 8ä¸­æ—¥æœŸæ—¶é—´åŠŸèƒ½é‡Œï¼Œç”¨äºŽè§£æžå’Œæ ¼å¼åŒ–æ—¥æœŸæ—¶é—´çš„ç±»ï¼Œä½äºŽ java.time.format åŒ…ä¸‹ã€‚ é¢„å®šä¹‰çš„DateTimeFormatterå®žä¾‹ DateTimeFormatterç±»åŒ…å«ä¸€ç³»åˆ—é¢„å®šä¹‰ï¼ˆå¸¸é‡ï¼‰çš„å®žä¾‹ï¼Œå¯ä»¥è§£æžå’Œæ ¼å¼åŒ–ä¸€äº›æ ‡å‡†æ—¶é—´æ ¼å¼ã€‚è¿™å°†è®©ä½ å…é™¤éº»çƒ¦çš„æ—¶é—´æ ¼å¼å®šä¹‰ï¼Œç±»ä¸­åŒ…å«å¦‚ä¸‹é¢„å®šä¹‰çš„å®žä¾‹ï¼š 12345678910111213141516171819202122BASIC_ISO_DATEISO_LOCAL_DATEISO_LOCAL_TIMEISO_LOCAL_DATE_TIMEISO_OFFSET_DATEISO_OFFSET_TIMEISO_OFFSET_DATE_TIMEISO_ZONED_DATE_TIMEISO_INSTANTISO_DATEISO_TIMEISO_DATE_TIMEISO_ORDINAL_TIMEISO_WEEK_DATERFC_1123_DATE_TIME æ¯ä¸ªé¢„å®šä¹‰çš„DateTimeFormatterå®žä¾‹éƒ½æœ‰ä¸åŒçš„æ—¥æœŸæ ¼å¼ï¼Œå…·ä½“çš„å¯ä»¥æŸ¥é˜…Javaå®˜æ–¹æ–‡æ¡£ã€‚ PSï¼šæŽ¨èä½¿ç”¨ä¸‹æœŸåˆ†äº«çš„ Hutool å·¥å…·ç±»åšè¿™äº›æ ¼å¼åŒ–å·¥ä½œï¼Œæ ¼å¼æ›´åŠ ä¸°å¯Œã€‚ æ ¼å¼åŒ–æ—¥æœŸ å½“ä½ èŽ·å–ä¸€ä¸ªDateTimeFormatterå®žä¾‹åŽï¼Œå°±å¯ä»¥ç”¨format()æ–¹ä¾¿æ¥å°†ä¸€ä¸ªæ—¥æœŸæ ¼å¼åŒ–ä¸ºæŸç§å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼š 123DateTimeFormatter formatter = DateTimeFormatter.BASIC_ISO_DATE;String formattedDate = formatter.format(LocalDate.now());System.out.println(formattedDate); è¿™ä¸ªæ ·ä¾‹æŠŠLocalDateå¯¹è±¡æ ¼å¼åŒ–äº†ï¼Œå¹¶è¾“å‡º20180719ï¼Œè¿™ä¸ªè¾“å‡ºè¡¨ç¤ºçŽ°åœ¨2018å¹´ï¼Œ7æœˆ19æ—¥ã€‚ å†ä¸¾ä¸€ä¸ªå…³äºŽZonedDateTimeçš„ä¾‹å­ï¼š 123DateTimeFormatter formatter = DateTimeFormatter.BASIC_ISO_DATE;String formattedZonedDate = formatter.format(ZonedDateTime.now());System.out.println("formattedZonedDate = " + formattedZonedDate); è¿™ä¸ªä¾‹å­ä¼šè¾“å‡ºï¼š20180719+0800 è¡¨ç¤ºä»Šå¹´2018å¹´ï¼Œ7æœˆ19æ—¥ï¼Œä½äºŽUTC+8æ—¶åŒºã€‚ Duration ä¸€ä¸ªDurationå¯¹è±¡è¡¨ç¤ºä¸¤ä¸ªInstanté—´çš„ä¸€æ®µæ—¶é—´ï¼Œæ˜¯åœ¨Java 8ä¸­åŠ å…¥çš„æ–°åŠŸèƒ½ã€‚ ä¸€ä¸ªDurationå®žä¾‹æ˜¯ä¸å¯å˜çš„ï¼Œå½“åˆ›å»ºå‡ºå¯¹è±¡åŽå°±ä¸èƒ½æ”¹å˜å®ƒçš„å€¼äº†ã€‚ä½ åªèƒ½é€šè¿‡Durationçš„è®¡ç®—æ–¹æ³•ï¼Œæ¥åˆ›å»ºå‡ºä¸€ä¸ªæ–°çš„Durtaionå¯¹è±¡ã€‚ä½ ä¼šåœ¨ä¹‹åŽçš„æ•™ç¨‹ä¸­è§åˆ°çš„ã€‚ åˆ›å»ºDurationå®žä¾‹ ä½¿ç”¨ Duration ç±»çš„å·¥åŽ‚æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ª Duration å¯¹è±¡ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨ between() çš„ä¾‹å­ï¼š 1234Instant first = Instant.now();// è€—æ—¶æ“ä½œï¼Œæˆ–è€… Sleep ä¸€æ®µæ—¶é—´Instant second = Instant.now();Duration duration = Duration.between(first, second); è®¿é—®Durationçš„æ—¶é—´ ä¸€ä¸ªDurationå¯¹è±¡é‡Œæœ‰ä¸¤ä¸ªåŸŸï¼šçº³ç§’å€¼ï¼ˆå°äºŽä¸€ç§’çš„éƒ¨åˆ†ï¼‰ï¼Œç§’é’Ÿå€¼ï¼ˆä¸€å…±æœ‰å‡ ç§’ï¼‰ï¼Œä»–ä»¬çš„ç»„åˆè¡¨è¾¾äº†æ—¶é—´é•¿åº¦ã€‚æ³¨æ„ä¸Žä½¿ç”¨System.getCurrentTimeMillis()æ—¶ä¸åŒï¼ŒDurationä¸åŒ…å«æ¯«ç§’è¿™ä¸ªå±žæ€§ã€‚ ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•å¾—åˆ°å®ƒä»¬çš„å€¼ï¼š 12long seconds = duration.getSeconds()int nanos = duration.getNano() ä½ ä¹Ÿå¯ä»¥è½¬æ¢æ•´ä¸ªæ—¶é—´åˆ°å…¶å®ƒå•ä½å¦‚çº³ç§’ã€åˆ†é’Ÿã€å°æ—¶ã€å¤©ï¼š toNanos() toMillis() toMinutes() toHours() toDays() ä¸¾ä¾‹è€Œè¨€ï¼štoNanos() ä¸Ž getNano() ä¸åŒï¼ŒtoNanos() èŽ·å¾—çš„æ˜¯ Duration æ•´ä¸ªæ—¶é—´å…±æœ‰å¤šå°‘çº³ç§’ï¼Œ è€Œ getNano() åªæ˜¯èŽ·å¾—è¿™æ®µæ—¶é—´ä¸­å°äºŽä¸€ç§’çš„éƒ¨åˆ†ã€‚ Durationè®¡ç®— Durationç±»åŒ…å«ä¸€ç³»åˆ—çš„è®¡ç®—æ–¹æ³•ï¼š plusNanos() plusMillis() plusSeconds() plusMinutes() plusHours() plusDays() minusNanos() minusMillis() minusSeconds() minusMinutes() minusHours() minusDays() è¿™äº›æ–¹æ³•æ‰€åšçš„äº‹éƒ½æ˜¯ç›¸ä¼¼çš„ï¼Œè¿™é‡Œå±•ç¤ºä¸€ä¸ªåŠ å‡çš„ä¾‹å­ï¼š 123Duration start = ... //obtain a start durationDuration added = start.plusDays(3);Duration subtracted = start.minusDays(3); ç¬¬ä¸€è¡Œåˆ›å»ºäº†ä¸€ä¸ªDurationå¯¹è±¡å«startï¼Œå…·ä½“æ€Žä¹ˆåˆ›å»ºå¯ä»¥å‚è€ƒå‰é¢çš„ä»£ç ã€‚ ç¬¬äºŒä¸‰è¡Œæ ·ä¾‹åˆ›å»ºäº†ä¸¤ä¸ªæ–°çš„Durationï¼Œé€šè¿‡è°ƒç”¨startçš„åŠ å‡æ“ä½œï¼Œä½¿å¾—addedå¯¹è±¡è¡¨ç¤ºçš„æ—¶é—´æ¯”startå¤šä¸‰å¤©ï¼Œè€Œsubstractedåˆ™å°‘ä¸‰å¤©ã€‚ æ‰€æœ‰çš„è®¡ç®—æ–¹æ³•éƒ½ä¼šè¿”å›žä¸€ä¸ªæ–°çš„Durationï¼Œä»¥ä¿è¯Durationçš„ä¸å¯å˜å±žæ€§ã€‚ 123456long days = duration.toDays(); // è¿™æ®µæ—¶é—´çš„æ€»å¤©æ•°long hours = duration.toHours(); // è¿™æ®µæ—¶é—´çš„å°æ—¶æ•°long minutes = duration.toMinutes(); // è¿™æ®µæ—¶é—´çš„åˆ†é’Ÿæ•°long seconds = duration.getSeconds(); // è¿™æ®µæ—¶é—´çš„ç§’æ•°long milliSeconds = duration.toMillis(); // è¿™æ®µæ—¶é—´çš„æ¯«ç§’æ•°long nanoSeconds = duration.toNanos(); // è¿™æ®µæ—¶é—´çš„çº³ç§’æ•° å…¶ä»–æ“ä½œ å¢žåŠ å’Œå‡å°‘æ—¥æœŸ Java 8ä¸­çš„æ—¥æœŸ/æ—¶é—´ç±»éƒ½æ˜¯ä¸å¯å˜çš„ï¼Œè¿™æ˜¯ä¸ºäº†ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚å½“ç„¶ï¼Œæ–°çš„æ—¥æœŸ/æ—¶é—´ç±»ä¹Ÿæä¾›äº†æ–¹æ³•ç”¨äºŽåˆ›å»ºå¯¹è±¡çš„å¯å˜ç‰ˆæœ¬ï¼Œæ¯”å¦‚å¢žåŠ ä¸€å¤©æˆ–è€…å‡å°‘ä¸€å¤©ï¼š 123456789LocalDate date = LocalDate.of(2017, 1, 5); // 2017-01-05LocalDate date1 = date.withYear(2016); // ä¿®æ”¹ä¸º 2016-01-05LocalDate date2 = date.withMonth(2); // ä¿®æ”¹ä¸º 2017-02-05LocalDate date3 = date.withDayOfMonth(1); // ä¿®æ”¹ä¸º 2017-01-01LocalDate date4 = date.plusYears(1); // å¢žåŠ ä¸€å¹´ 2018-01-05LocalDate date5 = date.minusMonths(2); // å‡å°‘ä¸¤ä¸ªæœˆ 2016-11-05LocalDate date6 = date.plus(5, ChronoUnit.DAYS); // å¢žåŠ 5å¤© 2017-01-10 ä¸Šé¢ä¾‹å­ä¸­å¯¹äºŽæ—¥æœŸçš„æ“ä½œæ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯æœ‰äº›æ—¶å€™æˆ‘ä»¬è¦é¢ä¸´æ›´å¤æ‚çš„æ—¶é—´æ“ä½œï¼Œæ¯”å¦‚å°†æ—¶é—´è°ƒåˆ°ä¸‹ä¸€ä¸ªå·¥ä½œæ—¥ï¼Œ æˆ–è€…æ˜¯ä¸‹ä¸ªæœˆçš„æœ€åŽä¸€å¤©ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ with() æ–¹æ³•çš„å¦ä¸€ä¸ªé‡è½½æ–¹æ³•ï¼Œå®ƒæŽ¥æ”¶ä¸€ä¸ªTemporalAdjusterå‚æ•°ï¼Œ å¯ä»¥ä½¿æˆ‘ä»¬æ›´åŠ çµæ´»çš„è°ƒæ•´æ—¥æœŸï¼š 12LocalDate date7 = date.with(nextOrSame(DayOfWeek.SUNDAY)); // è¿”å›žä¸‹ä¸€ä¸ªè·ç¦»å½“å‰æ—¶é—´æœ€è¿‘çš„æ˜ŸæœŸæ—¥LocalDate date9 = date.with(lastInMonth(DayOfWeek.SATURDAY)); // è¿”å›žæœ¬æœˆæœ€åŽä¸€ä¸ªæ˜ŸæœŸå…­ è¦ä½¿ä¸Šé¢çš„ä»£ç æ­£ç¡®ç¼–è¯‘ï¼Œä½ éœ€è¦ä½¿ç”¨é™æ€å¯¼å…¥ TemporalAdjusters å¯¹è±¡ï¼š import static java.time.temporal.TemporalAdjusters.*; TemporalAdjusters ç±»ä¸­åŒ…å«äº†å¾ˆå¤šé™æ€æ–¹æ³•å¯ä»¥ç›´æŽ¥ä½¿ç”¨ï¼Œä¸‹é¢çš„è¡¨æ ¼åˆ—å‡ºäº†ä¸€äº›æ–¹æ³•ï¼š æ–¹æ³•å æè¿° dayOfWeekInMonth è¿”å›žåŒä¸€ä¸ªæœˆä¸­æ¯å‘¨çš„ç¬¬å‡ å¤© firstDayOfMonth è¿”å›žå½“æœˆçš„ç¬¬ä¸€å¤© firstDayOfNextMonth è¿”å›žä¸‹æœˆçš„ç¬¬ä¸€å¤© firstDayOfNextYear è¿”å›žä¸‹ä¸€å¹´çš„ç¬¬ä¸€å¤© firstDayOfYear è¿”å›žæœ¬å¹´çš„ç¬¬ä¸€å¤© firstInMonth è¿”å›žåŒä¸€ä¸ªæœˆä¸­ç¬¬ä¸€ä¸ªæ˜ŸæœŸå‡  lastDayOfMonth è¿”å›žå½“æœˆçš„æœ€åŽä¸€å¤© lastDayOfNextMonth è¿”å›žä¸‹æœˆçš„æœ€åŽä¸€å¤© lastDayOfNextYear è¿”å›žä¸‹ä¸€å¹´çš„æœ€åŽä¸€å¤© lastDayOfYear è¿”å›žæœ¬å¹´çš„æœ€åŽä¸€å¤© lastInMonth è¿”å›žåŒä¸€ä¸ªæœˆä¸­æœ€åŽä¸€ä¸ªæ˜ŸæœŸå‡  next / previous è¿”å›žåŽä¸€ä¸ª/å‰ä¸€ä¸ªç»™å®šçš„æ˜ŸæœŸå‡  nextOrSame / previousOrSame è¿”å›žåŽä¸€ä¸ª/å‰ä¸€ä¸ªç»™å®šçš„æ˜ŸæœŸå‡ ï¼Œå¦‚æžœè¿™ä¸ªå€¼æ»¡è¶³æ¡ä»¶ï¼Œç›´æŽ¥è¿”å›ž å¦‚æžœä¸Šé¢è¡¨æ ¼ä¸­åˆ—å‡ºçš„æ–¹æ³•ä¸èƒ½æ»¡è¶³ä½ çš„éœ€æ±‚ï¼Œä½ è¿˜å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰çš„ TemporalAdjuster æŽ¥å£çš„å®žçŽ°ï¼Œ TemporalAdjuster ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°å¼æŽ¥å£ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Lambdaè¡¨è¾¾å¼ï¼š 1234@FunctionalInterfacepublic interface TemporalAdjuster &#123; Temporal adjustInto(Temporal temporal);&#125; æ¯”å¦‚ç»™å®šä¸€ä¸ªæ—¥æœŸï¼Œè®¡ç®—è¯¥æ—¥æœŸçš„ä¸‹ä¸€ä¸ªå·¥ä½œæ—¥ï¼ˆä¸åŒ…æ‹¬æ˜ŸæœŸå…­å’Œæ˜ŸæœŸå¤©ï¼‰ï¼š 1234567891011121314151617181920LocalDate date = LocalDate.of(2018, 7, 19);date.with(temporal -&gt; &#123; // å½“å‰æ—¥æœŸ DayOfWeek dayOfWeek = DayOfWeek.of(temporal.get(ChronoField.DAY_OF_WEEK)); // æ­£å¸¸æƒ…å†µä¸‹ï¼Œæ¯æ¬¡å¢žåŠ ä¸€å¤© int dayToAdd = 1; // å¦‚æžœæ˜¯æ˜ŸæœŸäº”ï¼Œå¢žåŠ ä¸‰å¤© if (dayOfWeek == DayOfWeek.FRIDAY) &#123; dayToAdd = 3; &#125; // å¦‚æžœæ˜¯æ˜ŸæœŸå…­ï¼Œå¢žåŠ ä¸¤å¤© if (dayOfWeek == DayOfWeek.SATURDAY) &#123; dayToAdd = 2; &#125; return temporal.plus(dayToAdd, ChronoUnit.DAYS);&#125;); å…¶ä»–åŽ†æ³• Javaä¸­ä½¿ç”¨çš„åŽ†æ³•æ˜¯ISO 8601æ—¥åŽ†ç³»ç»Ÿï¼Œå®ƒæ˜¯ä¸–ç•Œæ°‘ç”¨åŽ†æ³•ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„å…¬åŽ†ã€‚å¹³å¹´æœ‰365å¤©ï¼Œé—°å¹´æ˜¯366å¤©ã€‚é—°å¹´çš„å®šä¹‰æ˜¯ï¼šéžä¸–çºªå¹´ï¼Œèƒ½è¢«4æ•´é™¤ï¼›ä¸–çºªå¹´èƒ½è¢«400æ•´é™¤ã€‚ä¸ºäº†è®¡ç®—çš„ä¸€è‡´æ€§ï¼Œå…¬å…ƒ1å¹´çš„å‰ä¸€å¹´è¢«å½“åšå…¬å…ƒ0å¹´ï¼Œä»¥æ­¤ç±»æŽ¨ã€‚ æ­¤å¤–Java 8è¿˜æä¾›äº†4å¥—å…¶ä»–åŽ†æ³•ï¼ˆå¾ˆå¥‡æ€ªä¸ºä»€ä¹ˆæ²¡æœ‰æ±‰æ—äººä½¿ç”¨çš„å†œåŽ†ï¼‰ï¼Œæ¯å¥—åŽ†æ³•éƒ½åŒ…å«ä¸€ä¸ªæ—¥æœŸç±»ï¼Œåˆ†åˆ«æ˜¯ï¼š ThaiBuddhistDateï¼šæ³°å›½ä½›æ•™åŽ† MinguoDateï¼šä¸­åŽæ°‘å›½åŽ† JapaneseDateï¼šæ—¥æœ¬åŽ† HijrahDateï¼šä¼Šæ–¯å…°åŽ† æ¯ä¸ªæ—¥æœŸç±»éƒ½ç»§æ‰¿ ChronoLocalDate ç±»ï¼Œæ‰€ä»¥å¯ä»¥åœ¨ä¸çŸ¥é“å…·ä½“åŽ†æ³•çš„æƒ…å†µä¸‹ä¹Ÿå¯ä»¥æ“ä½œã€‚ä¸è¿‡è¿™äº›åŽ†æ³•ä¸€èˆ¬ä¸å¸¸ç”¨ï¼Œé™¤éžæ˜¯æœ‰æŸäº›ç‰¹æ®Šéœ€æ±‚æƒ…å†µä¸‹æ‰ä¼šä½¿ç”¨ã€‚ è¿™äº›ä¸åŒçš„åŽ†æ³•ä¹Ÿå¯ä»¥ç”¨äºŽå‘å…¬åŽ†è½¬æ¢ï¼š 12LocalDate date = LocalDate.now();JapaneseDate jpDate = JapaneseDate.from(date); ç”±äºŽå®ƒä»¬éƒ½ç»§æ‰¿ChronoLocalDateç±»ï¼Œæ‰€ä»¥åœ¨ä¸çŸ¥é“å…·ä½“åŽ†æ³•æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡ChronoLocalDateç±»æ“ä½œæ—¥æœŸï¼š 12Chronology jpChronology = Chronology.ofLocale(Locale.JAPANESE);ChronoLocalDate jpChronoLocalDate = jpChronology.dateNow(); æˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­åº”è¯¥å°½é‡é¿å…ä½¿ç”¨ ChronoLocalDateï¼Œå°½é‡ç”¨ä¸ŽåŽ†æ³•æ— å…³çš„æ–¹å¼æ“ä½œæ—¶é—´ï¼Œå› ä¸ºä¸åŒçš„åŽ†æ³•è®¡ç®—æ—¥æœŸçš„æ–¹å¼ä¸ä¸€æ ·ï¼Œæ¯”å¦‚å¼€å‘è€…ä¼šåœ¨ç¨‹åºä¸­åšä¸€äº›å‡è®¾ï¼Œå‡è®¾ä¸€å¹´ä¸­æœ‰12ä¸ªæœˆï¼Œå¦‚æžœæ˜¯ä¸­å›½å†œåŽ†ä¸­åŒ…å«äº†é—°æœˆï¼Œä¸€å¹´æœ‰å¯èƒ½æ˜¯13ä¸ªæœˆï¼Œä½†å¼€å‘è€…è®¤ä¸ºæ˜¯12ä¸ªæœˆï¼Œå¤šå‡ºæ¥çš„ä¸€ä¸ªæœˆå±žäºŽæ˜Žå¹´çš„ã€‚ å†æ¯”å¦‚å‡è®¾å¹´ä»½æ˜¯ç´¯åŠ çš„ï¼Œè¿‡äº†ä¸€å¹´å°±åœ¨åŽŸæ¥çš„å¹´ä»½ä¸ŠåŠ ä¸€ï¼Œä½†æ—¥æœ¬å¤©çš‡åœ¨æ¢ä»£ä¹‹åŽéœ€è¦é‡æ–°çºªå¹´ï¼Œæ‰€ä»¥è¿‡äº†ä¸€å¹´å¹´ä»½å¯èƒ½ä¼šä»Ž1å¼€å§‹è®¡ç®—ã€‚ åœ¨å®žé™…å¼€å‘è¿‡ç¨‹ä¸­å»ºè®®ä½¿ç”¨ LocalDateï¼ŒåŒ…æ‹¬å­˜å‚¨ã€æ“ä½œã€ä¸šåŠ¡è§„åˆ™çš„è§£è¯»ï¼›é™¤éžéœ€è¦å°†ç¨‹åºçš„è¾“å…¥æˆ–è€…è¾“å‡ºæœ¬åœ°åŒ–ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨ ChronoLocalDate ç±»ã€‚ 10. Base64 åœ¨Java 8ä¸­ï¼ŒBase64ç¼–ç å·²ç»æˆä¸ºJavaç±»åº“çš„æ ‡å‡†ã€‚ Java 8 å†…ç½®äº† Base64 ç¼–ç çš„ç¼–ç å™¨å’Œè§£ç å™¨ï¼Œè¿™æ ·ä¸éœ€è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“å°±å¯ä»¥è¿›è¡ŒBase64ç¼–ç ã€‚ Base64å·¥å…·ç±»æä¾›äº†ä¸€å¥—é™æ€æ–¹æ³•èŽ·å–ä¸‹é¢ä¸‰ç§BASE64ç¼–è§£ç å™¨ï¼š **åŸºæœ¬ï¼š**è¾“å‡ºè¢«æ˜ å°„åˆ°ä¸€ç»„å­—ç¬¦A-Za-z0-9+/ï¼Œç¼–ç ä¸æ·»åŠ ä»»ä½•è¡Œæ ‡ï¼Œè¾“å‡ºçš„è§£ç ä»…æ”¯æŒA-Za-z0-9+/ã€‚ **URLï¼š**è¾“å‡ºæ˜ å°„åˆ°ä¸€ç»„å­—ç¬¦A-Za-z0-9+_ï¼Œè¾“å‡ºæ˜¯URLå’Œæ–‡ä»¶ã€‚ **MIMEï¼š**è¾“å‡ºéšå°„åˆ°MIMEå‹å¥½æ ¼å¼ã€‚è¾“å‡ºæ¯è¡Œä¸è¶…è¿‡76å­—ç¬¦ï¼Œå¹¶ä¸”ä½¿ç”¨â€™\râ€™å¹¶è·Ÿéšâ€™\nâ€™ä½œä¸ºåˆ†å‰²ã€‚ç¼–ç è¾“å‡ºæœ€åŽæ²¡æœ‰è¡Œåˆ†å‰²ã€‚ ç¤ºä¾‹ï¼š 1234567891011final String text = "æµ‹è¯•Base64ç¼–ç ";final String encoded = Base64 .getEncoder() .encodeToString(text.getBytes(StandardCharsets.UTF_8));System.out.println(encoded);final String decoded = new String( Base64.getDecoder().decode(encoded), StandardCharsets.UTF_8);System.out.println(decoded); 11. å‚è€ƒèµ„æ–™ Java 8 æ–°ç‰¹æ€§ SimpleDateFormatçš„çº¿ç¨‹å®‰å…¨é—®é¢˜ä¸Žè§£å†³æ–¹æ¡ˆ ä¸ºä»€ä¹ˆSimpleDateFormatä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ JavaèŽ·å–Nå¤©å‰ï¼ŒNå¤©åŽçš„æ—¥æœŸï¼ˆå¦‚3å¤©ï¼‰ Whatâ€™s New in JDK 8 12. é™„å½• ç¤ºä¾‹ä»£ç åœ°å€ï¼šhttps://github.com/xkcoding/java8_learning å¦‚æžœå¯ä»¥çš„è¯ï¼Œéº»çƒ¦ç»™ä¸ª Star å§ (â™¥â— â€¿â— )ï¾‰ï¾ž]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼]]></title>
    <url>%2F2018%2F02%2F07%2Fregular-expression-list.html</url>
    <content type="text"><![CDATA[æ ¡éªŒæ•°å­—çš„è¡¨è¾¾å¼ 12345678910111213141516171819æ•°å­—ï¼š^[0-9]*$nä½çš„æ•°å­—ï¼š^\d&#123;n&#125;$è‡³å°‘nä½çš„æ•°å­—ï¼š^\d&#123;n,&#125;$m-nä½çš„æ•°å­—ï¼š^\d&#123;m,n&#125;$é›¶å’Œéžé›¶å¼€å¤´çš„æ•°å­—ï¼š^(0|[1-9][0-9]*)$éžé›¶å¼€å¤´çš„æœ€å¤šå¸¦ä¸¤ä½å°æ•°çš„æ•°å­—ï¼š^([1-9][0-9]*)+(.[0-9]&#123;1,2&#125;)?$å¸¦1-2ä½å°æ•°çš„æ­£æ•°æˆ–è´Ÿæ•°ï¼š^(\-)?\d+(\.\d&#123;1,2&#125;)?$æ­£æ•°ã€è´Ÿæ•°ã€å’Œå°æ•°ï¼š^(\-|\+)?\d+(\.\d+)?$æœ‰ä¸¤ä½å°æ•°çš„æ­£å®žæ•°ï¼š^[0-9]+(.[0-9]&#123;2&#125;)?$æœ‰1~3ä½å°æ•°çš„æ­£å®žæ•°ï¼š^[0-9]+(.[0-9]&#123;1,3&#125;)?$éžé›¶çš„æ­£æ•´æ•°ï¼š^[1-9]\d*$ æˆ– ^([1-9][0-9]*)&#123;1,3&#125;$ æˆ– ^\+?[1-9][0-9]*$éžé›¶çš„è´Ÿæ•´æ•°ï¼š^\-[1-9][]0-9"*$ æˆ– ^-[1-9]\d*$éžè´Ÿæ•´æ•°ï¼š^\d+$ æˆ– ^[1-9]\d*|0$éžæ­£æ•´æ•°ï¼š^-[1-9]\d*|0$ æˆ– ^((-\d+)|(0+))$éžè´Ÿæµ®ç‚¹æ•°ï¼š^\d+(\.\d+)?$ æˆ– ^[1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0$éžæ­£æµ®ç‚¹æ•°ï¼š^((-\d+(\.\d+)?)|(0+(\.0+)?))$ æˆ– ^(-([1-9]\d*\.\d*|0\.\d*[1-9]\d*))|0?\.0+|0$æ­£æµ®ç‚¹æ•°ï¼š^[1-9]\d*\.\d*|0\.\d*[1-9]\d*$ æˆ– ^(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*))$è´Ÿæµ®ç‚¹æ•°ï¼š^-([1-9]\d*\.\d*|0\.\d*[1-9]\d*)$ æˆ– ^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$æµ®ç‚¹æ•°ï¼š^(-?\d+)(\.\d+)?$ æˆ– ^-?([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0)$ æ ¡éªŒå­—ç¬¦çš„è¡¨è¾¾å¼ 123456789101112æ±‰å­—ï¼š^[\u4e00-\u9fa5]&#123;0,&#125;$è‹±æ–‡å’Œæ•°å­—ï¼š^[A-Za-z0-9]+$ æˆ– ^[A-Za-z0-9]&#123;4,40&#125;$é•¿åº¦ä¸º3-20çš„æ‰€æœ‰å­—ç¬¦ï¼š^.&#123;3,20&#125;$ç”±26ä¸ªè‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š^[A-Za-z]+$ç”±26ä¸ªå¤§å†™è‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š^[A-Z]+$ç”±26ä¸ªå°å†™è‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š^[a-z]+$ç”±æ•°å­—å’Œ26ä¸ªè‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š^[A-Za-z0-9]+$ç”±æ•°å­—ã€26ä¸ªè‹±æ–‡å­—æ¯æˆ–è€…ä¸‹åˆ’çº¿ç»„æˆçš„å­—ç¬¦ä¸²ï¼š^\w+$ æˆ– ^\w&#123;3,20&#125;$ä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—åŒ…æ‹¬ä¸‹åˆ’çº¿ï¼š^[\u4E00-\u9FA5A-Za-z0-9_]+$ä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—ä½†ä¸åŒ…æ‹¬ä¸‹åˆ’çº¿ç­‰ç¬¦å·ï¼š^[\u4E00-\u9FA5A-Za-z0-9]+$ æˆ– ^[\u4E00-\u9FA5A-Za-z0-9]&#123;2,20&#125;$å¯ä»¥è¾“å…¥å«æœ‰^%&amp;',;=?$\"ç­‰å­—ç¬¦ï¼š[^%&amp;',;=?$\x22]+ç¦æ­¢è¾“å…¥å«æœ‰~çš„å­—ç¬¦ï¼š[^~\x22]+ ç‰¹æ®Šéœ€æ±‚è¡¨è¾¾å¼ 123456789101112131415161718192021222324252627282930313233Emailåœ°å€ï¼š^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$åŸŸåï¼š[a-zA-Z0-9][-a-zA-Z0-9]&#123;0,62&#125;(/.[a-zA-Z0-9][-a-zA-Z0-9]&#123;0,62&#125;)+/.?InternetURLï¼š[a-zA-z]+://[^\s]* æˆ– ^http://([\w-]+\.)+[\w-]+(/[\w-./?%&amp;=]*)?$æ‰‹æœºå·ç ï¼š^(13[0-9]|14[0-9]|15[0-9]|166|17[0-9]|18[0-9]|19[8|9])\d&#123;8&#125;$ç”µè¯å·ç ("XXX-XXXXXXX"ã€"XXXX-XXXXXXXX"ã€"XXX-XXXXXXX"ã€"XXX-XXXXXXXX"ã€"XXXXXXX"å’Œ"XXXXXXXX)ï¼š^(\(\d&#123;3,4&#125;-)|\d&#123;3.4&#125;-)?\d&#123;7,8&#125;$ å›½å†…ç”µè¯å·ç (0511-4405222ã€021-87888822)ï¼š\d&#123;3&#125;-\d&#123;8&#125;|\d&#123;4&#125;-\d&#123;7&#125; 18ä½èº«ä»½è¯å·ç (æ•°å­—ã€å­—æ¯xç»“å°¾)ï¼š^((\d&#123;18&#125;)|([0-9x]&#123;18&#125;)|([0-9X]&#123;18&#125;))$å¸å·æ˜¯å¦åˆæ³•(å­—æ¯å¼€å¤´ï¼Œå…è®¸5-16å­—èŠ‚ï¼Œå…è®¸å­—æ¯æ•°å­—ä¸‹åˆ’çº¿)ï¼š^[a-zA-Z][a-zA-Z0-9_]&#123;4,15&#125;$å¯†ç (ä»¥å­—æ¯å¼€å¤´ï¼Œé•¿åº¦åœ¨6~18ä¹‹é—´ï¼Œåªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿)ï¼š^[a-zA-Z]\w&#123;5,17&#125;$å¼ºå¯†ç (å¿…é¡»åŒ…å«å¤§å°å†™å­—æ¯å’Œæ•°å­—çš„ç»„åˆï¼Œä¸èƒ½ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦ï¼Œé•¿åº¦åœ¨8-10ä¹‹é—´)ï¼š^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).&#123;8,10&#125;$ æ—¥æœŸæ ¼å¼ï¼š^\d&#123;4&#125;-\d&#123;1,2&#125;-\d&#123;1,2&#125;ä¸€å¹´çš„12ä¸ªæœˆ(01ï½ž09å’Œ1ï½ž12)ï¼š^(0?[1-9]|1[0-2])$ä¸€ä¸ªæœˆçš„31å¤©(01ï½ž09å’Œ1ï½ž31)ï¼š^((0?[1-9])|((1|2)[0-9])|30|31)$ é’±çš„è¾“å…¥æ ¼å¼ï¼š 1.æœ‰å››ç§é’±çš„è¡¨ç¤ºå½¢å¼æˆ‘ä»¬å¯ä»¥æŽ¥å—:"10000.00" å’Œ "10,000.00", å’Œæ²¡æœ‰ "åˆ†" çš„ "10000" å’Œ "10,000"ï¼š^[1-9][0-9]*$ 2.è¿™è¡¨ç¤ºä»»æ„ä¸€ä¸ªä¸ä»¥0å¼€å¤´çš„æ•°å­—,ä½†æ˜¯,è¿™ä¹Ÿæ„å‘³ç€ä¸€ä¸ªå­—ç¬¦"0"ä¸é€šè¿‡,æ‰€ä»¥æˆ‘ä»¬é‡‡ç”¨ä¸‹é¢çš„å½¢å¼ï¼š^(0|[1-9][0-9]*)$ 3.ä¸€ä¸ª0æˆ–è€…ä¸€ä¸ªä¸ä»¥0å¼€å¤´çš„æ•°å­—.æˆ‘ä»¬è¿˜å¯ä»¥å…è®¸å¼€å¤´æœ‰ä¸€ä¸ªè´Ÿå·ï¼š^(0|-?[1-9][0-9]*)$ 4.è¿™è¡¨ç¤ºä¸€ä¸ª0æˆ–è€…ä¸€ä¸ªå¯èƒ½ä¸ºè´Ÿçš„å¼€å¤´ä¸ä¸º0çš„æ•°å­—.è®©ç”¨æˆ·ä»¥0å¼€å¤´å¥½äº†.æŠŠè´Ÿå·çš„ä¹ŸåŽ»æŽ‰,å› ä¸ºé’±æ€»ä¸èƒ½æ˜¯è´Ÿçš„å§.ä¸‹é¢æˆ‘ä»¬è¦åŠ çš„æ˜¯è¯´æ˜Žå¯èƒ½çš„å°æ•°éƒ¨åˆ†ï¼š^[0-9]+(.[0-9]+)?$ 5.å¿…é¡»è¯´æ˜Žçš„æ˜¯,å°æ•°ç‚¹åŽé¢è‡³å°‘åº”è¯¥æœ‰1ä½æ•°,æ‰€ä»¥"10."æ˜¯ä¸é€šè¿‡çš„,ä½†æ˜¯ "10" å’Œ "10.2" æ˜¯é€šè¿‡çš„ï¼š^[0-9]+(.[0-9]&#123;2&#125;)?$ 6.è¿™æ ·æˆ‘ä»¬è§„å®šå°æ•°ç‚¹åŽé¢å¿…é¡»æœ‰ä¸¤ä½,å¦‚æžœä½ è®¤ä¸ºå¤ªè‹›åˆ»äº†,å¯ä»¥è¿™æ ·ï¼š^[0-9]+(.[0-9]&#123;1,2&#125;)?$ 7.è¿™æ ·å°±å…è®¸ç”¨æˆ·åªå†™ä¸€ä½å°æ•°.ä¸‹é¢æˆ‘ä»¬è¯¥è€ƒè™‘æ•°å­—ä¸­çš„é€—å·äº†,æˆ‘ä»¬å¯ä»¥è¿™æ ·ï¼š^[0-9]&#123;1,3&#125;(,[0-9]&#123;3&#125;)*(.[0-9]&#123;1,2&#125;)?$ 8.1åˆ°3ä¸ªæ•°å­—,åŽé¢è·Ÿç€ä»»æ„ä¸ª é€—å·+3ä¸ªæ•°å­—,é€—å·æˆä¸ºå¯é€‰,è€Œä¸æ˜¯å¿…é¡»ï¼š^([0-9]+|[0-9]&#123;1,3&#125;(,[0-9]&#123;3&#125;)*)(.[0-9]&#123;1,2&#125;)?$ å¤‡æ³¨ï¼šè¿™å°±æ˜¯æœ€ç»ˆç»“æžœäº†,åˆ«å¿˜äº†"+"å¯ä»¥ç”¨"*"æ›¿ä»£å¦‚æžœä½ è§‰å¾—ç©ºå­—ç¬¦ä¸²ä¹Ÿå¯ä»¥æŽ¥å—çš„è¯(å¥‡æ€ª,ä¸ºä»€ä¹ˆ?)æœ€åŽ,åˆ«å¿˜äº†åœ¨ç”¨å‡½æ•°æ—¶åŽ»æŽ‰åŽ»æŽ‰é‚£ä¸ªåæ–œæ ,ä¸€èˆ¬çš„é”™è¯¯éƒ½åœ¨è¿™é‡Œxmlæ–‡ä»¶ï¼š^([a-zA-Z]+-?)+[a-zA-Z0-9]+\\.[x|X][m|M][l|L]$ä¸­æ–‡å­—ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š[\u4e00-\u9fa5]åŒå­—èŠ‚å­—ç¬¦ï¼š[^\x00-\xff] (åŒ…æ‹¬æ±‰å­—åœ¨å†…ï¼Œå¯ä»¥ç”¨æ¥è®¡ç®—å­—ç¬¦ä¸²çš„é•¿åº¦(ä¸€ä¸ªåŒå­—èŠ‚å­—ç¬¦é•¿åº¦è®¡2ï¼ŒASCIIå­—ç¬¦è®¡1))ç©ºç™½è¡Œçš„æ­£åˆ™è¡¨è¾¾å¼ï¼š\n\s*\r (å¯ä»¥ç”¨æ¥åˆ é™¤ç©ºç™½è¡Œ)HTMLæ ‡è®°çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š&lt;(\S*?)[^&gt;]*&gt;.*?&lt;/\1&gt;|&lt;.*? /&gt; (ç½‘ä¸Šæµä¼ çš„ç‰ˆæœ¬å¤ªç³Ÿç³•ï¼Œä¸Šé¢è¿™ä¸ªä¹Ÿä»…ä»…èƒ½éƒ¨åˆ†ï¼Œå¯¹äºŽå¤æ‚çš„åµŒå¥—æ ‡è®°ä¾æ—§æ— èƒ½ä¸ºåŠ›)é¦–å°¾ç©ºç™½å­—ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š^\s*|\s*$æˆ–(^\s*)|(\s*$) (å¯ä»¥ç”¨æ¥åˆ é™¤è¡Œé¦–è¡Œå°¾çš„ç©ºç™½å­—ç¬¦(åŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢é¡µç¬¦ç­‰ç­‰)ï¼Œéžå¸¸æœ‰ç”¨çš„è¡¨è¾¾å¼)è…¾è®¯QQå·ï¼š[1-9][0-9]&#123;4,&#125; (è…¾è®¯QQå·ä»Ž10000å¼€å§‹)ä¸­å›½é‚®æ”¿ç¼–ç ï¼š[1-9]\d&#123;5&#125;(?!\d) (ä¸­å›½é‚®æ”¿ç¼–ç ä¸º6ä½æ•°å­—)IPåœ°å€ï¼š\d+\.\d+\.\d+\.\d+ (æå–IPåœ°å€æ—¶æœ‰ç”¨)IPåœ°å€ï¼š((?:(?:25[0-5]|2[0-4]\\d|[01]?\\d?\\d)\\.)&#123;3&#125;(?:25[0-5]|2[0-4]\\d|[01]?\\d?\\d))]]></content>
      <categories>
        <category>ä»£ç ç‰‡æ®µ</category>
        <category>regex</category>
      </categories>
      <tags>
        <tag>ä»£ç ç‰‡æ®µ</tag>
        <tag>regex</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[OSX å¸¸ç”¨è½¯ä»¶æ±‡æ€»]]></title>
    <url>%2F2018%2F02%2F05%2Fosx-software-lists.html</url>
    <content type="text"><![CDATA[æ¯æ¬¡é‡è£…ç³»ç»Ÿï¼Œæˆ–è€…æ–°ç”µè„‘åˆ°æ‰‹çš„æ—¶å€™ï¼Œæœ€éº»çƒ¦çš„èŽ«è¿‡äºŽé‡æ–°å®‰è£…ä¹‹å‰å¸¸ç”¨çš„ä¸€äº›è½¯ä»¶äº†ã€‚ä½†æ˜¯ï¼Œå¹³æ—¶å¸¸ç”¨çš„è½¯ä»¶å®žåœ¨æœ‰ç‚¹å¤šï¼ŒäºŽæ˜¯ä¹Žï¼Œæ•´ç†ä¸€ä¸ª OSX å¸¸ç”¨è½¯ä»¶çš„åˆ—è¡¨ï¼Œä¾¿äºŽä»¥åŽæŸ¥æ‰¾ä½¿ç”¨ï¼Œä»¥ä¸‹æ•´ç†çš„è½¯ä»¶ä»…ä»£è¡¨æˆ‘ä¸ªäººå¹³æ—¶å¸¸ç”¨çš„è½¯ä»¶ï¼Œä¸å–œå‹¿å–·ã€‚ æœ€å–œæ¬¢çš„ä¸€ä¸ªã€Œå…ï¼ˆç ´ï¼‰è´¹ï¼ˆè§£ï¼‰ã€çš„ osx è½¯ä»¶ä¸‹è½½ç½‘å€ï¼šxclient.info ï¼Œæœ‰ç»æµŽèƒ½åŠ›çš„ç«¥éž‹è¿˜æ˜¯è¯·æ”¯æŒæ­£ç‰ˆã€‚ã€‚ã€‚ èŠå¤©ç±»è½¯ä»¶ è½¯ä»¶ ä»‹ç»åŠä¸‹è½½åœ°å€ QQ ç•¥ï¼Œhttp://im.qq.com/macqq/ å¾®ä¿¡ ç•¥ï¼ŒMac App Store é˜¿é‡Œæ—ºæ—º æ·˜å®ä¹°å®¶ä¸Žå–å®¶ä¹‹é—´çš„æ²Ÿé€šå·¥å…·ï¼Œhttps://alimarket.taobao.com/markets/qnww/portal-group/ww/download é’‰é’‰ æ™ºèƒ½ç§»åŠ¨åŠžå…¬å¹³å°ï¼Œhttps://www.dingtalk.com/ å½±éŸ³ç±»è½¯ä»¶ è½¯ä»¶ ä»‹ç»åŠä¸‹è½½åœ°å€ ç½‘æ˜“äº‘éŸ³ä¹ ç½‘æ˜“ä¸€æ¬¾è‰¯å¿ƒä¹‹ä½œï¼Œå¬æ­Œå¾ˆæ£’ï¼Œå¬æ­Œçœ‹è¯„è®ºæ›´æ£’ï¼Œhttps://music.163.com/#/download Movist å¯¹æ¯”è¿‡å¾ˆå¤šè§†é¢‘æ’­æ”¾å™¨ï¼Œæœ€ç»ˆè¿™æ¬¾æˆ‘æ¯”è¾ƒå–œæ¬¢ï¼Œhttp://xclient.info/s/movist.html?_=80fb58a8555e8bf529af34d2f81df569 ç¬”è®°ç±»è½¯ä»¶ è½¯ä»¶ ä»‹ç»åŠä¸‹è½½åœ°å€ æœ‰é“äº‘ç¬”è®° ç•¥ï¼Œhttp://note.youdao.com/download.html#mac Evernote ç•¥ï¼Œhttps://www.yinxiang.com/download/ MWeb ä¸€æ¬¾ markdown ç¼–è¾‘å™¨ï¼Œæ¯”è¾ƒå–œæ¬¢çš„æ˜¯å¯ä»¥å°†å›¾ç‰‡ä¸Šä¼ è‡³ä¸ƒç‰›äº‘ç­‰åœ°æ–¹ï¼Œé€‚åˆåšç¬”è®°ï¼Œhttp://xclient.info/s/mweb.html?_=80fb58a8555e8bf529af34d2f81df569 Typora å’Œ MWeb ä¸€æ ·ï¼Œæ˜¯ä¸€æ¬¾ markdown ç¼–è¾‘å™¨ï¼Œæœ¬æ–‡å°±æ˜¯ç”¨è¿™ä¸ªè½¯ä»¶å†™çš„ï¼Œæ‰€è§å³æ‰€å¾—ï¼Œé€‚åˆå†™åšå®¢æ–‡ç« ï¼Œhttps://www.typora.io/ æ‘„å½±ç±»è½¯ä»¶ è½¯ä»¶ ä»‹ç»åŠä¸‹è½½åœ°å€ æ³¼è¾£ä¿®å›¾ å›½äººå¼€å‘çš„ä¸€æ¬¾å¥½ç”¨çš„ä¿®å›¾è½¯ä»¶ï¼ŒåŒ…å«åŠå…¶ä¸°å¯Œçš„æ»¤é•œï¼Œhttp://xclient.info/s/polarr-photo-editor.html?_=80fb58a8555e8bf529af34d2f81df569 Snapseed ä¸€æ¬¾å›½å†…å¤–çŸ¥åçš„ä¿®å›¾è½¯ä»¶ï¼Œéœ€è¦ä¸€å®šçš„æ“ä½œï¼ŒMac App Store Super PhotoCut Pro è¶…çº§æŠ å›¾ï¼Œhttp://xclient.info/s/super-photocut.html?_=80fb58a8555e8bf529af34d2f81df569 Photoshop è¿™ä¸ªå°±ä¸ä»‹ç»äº†ï¼Œæ‘„å½±ã€ä¿®å›¾å¿…å¤‡ï¼Œhttp://xclient.info/s/adobe-photoshop-cc.html?_=80fb58a8555e8bf529af34d2f81df569 Lightroom å¯¹ RAW æ ¼å¼çš„ç…§ç‰‡åšå¤„ç†ï¼Œhttp://xclient.info/s/adobe-lightroom-cc.html?_=80fb58a8555e8bf529af34d2f81df569 æ•ˆçŽ‡ç±»è½¯ä»¶ è½¯ä»¶ ä»‹ç»åŠä¸‹è½½åœ°å€ Alfred æ•ˆçŽ‡ç¥žå™¨ï¼Œå¯ä»¥ä¸ç”¨é¼ æ ‡ï¼Œå¬å”¤å‡ºä½ æƒ³è¦çš„ä¸€åˆ‡ï¼Œhttp://xclient.info/s/alfred.html?_=80fb58a8555e8bf529af34d2f81df569 Clean My Mac 3 Mac çš„ä¸€æ¬¾åŒ…å«ç£ç›˜åžƒåœ¾æ¸…ç†åŠç¡¬ä»¶èµ„æºç›‘æŽ§ç­‰åŠŸèƒ½çš„è½¯ä»¶ï¼Œhttp://www.mycleanmymac.com/ CheetSheat é•¿æŒ‰âŒ˜é”®ï¼Œå±•ç¤ºå½“å‰çª—å£åº”ç”¨çš„å¿«æ·é”®ï¼Œhttps://www.mediaatelier.com/CheatSheet/ Dash å¼€å‘è€…å¿…å¤‡ APIæ–‡æ¡£èšåˆï¼Œhttp://xclient.info/s/dash.html?_=80fb58a8555e8bf529af34d2f81df569 MindNote æ€ç»´å¯¼å›¾å·¥å…·ï¼Œhttp://xclient.info/s/mind-node-pro.html?_=80fb58a8555e8bf529af34d2f81df569 XMind æ€ç»´å¯¼å›¾å·¥å…·ï¼Œhttps://www.xmind.cn/download/ iTerm æ›¿æ¢è‡ªå¸¦çš„ Terminal ç¨‹åºï¼Œæ›´å¥½ç”¨ï¼Œhttp://www.iterm2.com/ Moom å¼ºå¤§çš„çª—å£å¸ƒå±€å·¥å…·ï¼Œhttp://xclient.info/s/moom.html?_=80fb58a8555e8bf529af34d2f81df569 Microsoft PowerPoint PPTï¼ŒMicrosoft Office 2016 for Mac å¥—ä»¶ä¸­ï¼Œhttp://xclient.info/s/office-for-mac-2016.html?_=80fb58a8555e8bf529af34d2f81df569 Microsoft Excel Excelï¼ŒMicrosoft Office 2016 for Mac å¥—ä»¶ä¸­ï¼ŒåŒä¸Š Microsoft Word Wordï¼ŒMicrosoft Office 2016 for Mac å¥—ä»¶ä¸­ï¼ŒåŒä¸Š Microsoft OneNote OneNoteï¼ŒMicrosoft Office 2016 for Mac å¥—ä»¶ä¸­ï¼ŒåŒä¸Š Pages ä¸€æ¬¾æ–‡å­—å¤„ç†å’Œé¡µé¢æŽ’ç‰ˆå·¥å…·ï¼Œç±»ä¼¼ Wordï¼ŒMac App Store Keynote è¿è¡ŒäºŽMac OS Xæ“ä½œç³»ç»Ÿä¸‹çš„æ¼”ç¤ºå¹»ç¯ç‰‡åº”ç”¨è½¯ä»¶ï¼Œç±»ä¼¼ PPTï¼ŒMac App Store Numbers ä¸€æ¬¾ç”µå­è¡¨å•åº”ç”¨ç¨‹åºï¼Œç±»ä¼¼ Excelï¼ŒMac App Store OmniPlan æœ€NBçš„é¡¹ç›®ç®¡ç†æµç¨‹è½¯ä»¶ï¼Œhttp://xclient.info/s/omni-plan.html?_=80fb58a8555e8bf529af34d2f81df569 OmniGraffle å¼ºå¤§çš„å›¾å½¢å·¥å…·ï¼Œå¯ä»¥ç”¨æ¥ç»˜åˆ¶å›¾è¡¨ï¼Œæµç¨‹å›¾ï¼Œç»„ç»‡ç»“æž„å›¾ä»¥åŠæ’å›¾ï¼Œhttp://xclient.info/s/omnigraffle.html?_=80fb58a8555e8bf529af34d2f81df569 å®žç”¨å·¥å…·ç±»è½¯ä»¶ è½¯ä»¶ ä»‹ç»åŠä¸‹è½½åœ°å€ NewFileMenu å¯ä»¥åœ¨ Mac ä¸Šä½¿ç”¨å³é”®åˆ›å»ºæ–‡æ¡£ï¼Œhttp://xclient.info/s/new-file-menu.html?_=80fb58a8555e8bf529af34d2f81df569 ScreenFlow ä¸€æ¬¾ä¼˜ç§€çš„å±å¹•å½•åƒè½¯ä»¶ï¼Œhttp://xclient.info/s/screenflow.html?_=80fb58a8555e8bf529af34d2f81df569 ç™¾åº¦ç½‘ç›˜ æä¾›æ–‡ä»¶çš„ç½‘ç»œå¤‡ä»½ã€åŒæ­¥å’Œåˆ†äº«æœåŠ¡ï¼Œhttps://pan.baidu.com/download#pan FlashFTP ä¸€æ¬¾é«˜æ•ˆçš„FTPã€SFTPæ–‡ä»¶ä¼ è¾“å®¢æˆ·ç«¯ï¼ŒMac App Store è¿…é›· ä¸‹è½½å·¥å…·ï¼Œhttp://mac.xunlei.com/ SpechtLite ç§‘å­¦ä¸Šç½‘å·¥å…·ï¼Œéœ€é…åˆã€Œç†ŠçŒ«ç¿»æ»šã€ä½¿ç”¨ï¼Œhttps://upcloud-pic.b0.upaiyun.com/panda/spechlite/0.10.7.zip PDF Expert ä¸€æ¬¾å¯ä»¥å¯¹ PDF è¿›è¡Œæ ‡æ³¨çš„é˜…è¯»å™¨ï¼ŒMac App Store Rar Sharp raræ–‡ä»¶è§£åŽ‹å·¥å…·ï¼ŒMac App Store Things 3 ä¸€æ¬¾ä¼˜ç§€çš„ GTD ä»»åŠ¡ç®¡ç†å·¥å…·ï¼Œhttp://xclient.info/s/things.html?_=80fb58a8555e8bf529af34d2f81df569 VMware Fusion å¼ºå¤§çš„è™šæ‹Ÿæœºåº”ç”¨ï¼Œhttp://xclient.info/s/vmware-fusion.html?_=80fb58a8555e8bf529af34d2f81df569 Gemini 2 é«˜æ•ˆçš„é‡å¤æ–‡ä»¶æŸ¥æ‰¾å™¨ï¼Œhttp://xclient.info/s/gemini.html?_=80fb58a8555e8bf529af34d2f81df569 EdrawMax åŸºäºŽçŸ¢é‡çš„ç»˜å›¾å·¥å…·ï¼Œè½»æ¾ç»˜åˆ¶æµç¨‹å›¾ PPåŠ©æ‰‹ å¯ä»¥å°†æ–‡ä»¶ä¼ ç»™ iPhoneï¼Œä¸å–œæ¬¢ iTunesï¼Œhttps://pro.25pp.com/pp_mac_ios Charles æŠ“åŒ…å·¥å…·ï¼Œhttp://charles.iiilab.com/ VirtualBox å…è´¹çš„è™šæ‹Ÿæœºè½¯ä»¶ï¼Œhttps://www.virtualbox.org/ duet å¯ä»¥å°† mac å±å¹•æŠ•å½±åˆ° iPhone æˆ–è€… ipad ä¸Šï¼Œå°†å…¶ä½œä¸ºç¬¬äºŒå±ï¼Œhttps://www.duetdisplay.com/ Lantern å…è´¹çš„ç§‘å­¦ä¸Šç½‘ç¥žå™¨ï¼Œhttps://github.com/getlantern/lantern/releases/tag/latest TeamViewer è¿œç¨‹æ”¯æŒã€è¿œç¨‹è®¿é—®ã€åœ¨çº¿åä½œå’Œä¼šè®®ï¼Œhttps://www.teamviewer.com/zhcn/download/mac/ Microsoft Remote Desktop Beta æ”¯æŒè®© Mac è¿œç¨‹è¿žæŽ¥åˆ° windows æœåŠ¡å™¨ï¼Œhttps://rink.hockeyapp.net/apps/5e0c144289a51fca2d3bfa39ce7f2b06/ Xee3 æ”¯æŒå¤šæ ¼å¼çš„å›¾ç‰‡æµè§ˆå·¥å…·ï¼Œhttp://xclient.info/s/xee3.html?_=80fb58a8555e8bf529af34d2f81df569 Tuxera Disk Manager è®©ä½ çš„ Mac æ”¯æŒè¯»å– NTFS æ ¼å¼çš„ç¡¬ç›˜ iStatistica ä¸€æ¬¾é«˜é¢œå€¼çš„ç³»ç»Ÿç›‘æŽ§å·¥å…·ï¼Œhttp://xclient.info/s/istatistica.html?_=80fb58a8555e8bf529af34d2f81df569 TinyCal ä¸€æ¬¾å°è€Œç¾Žçš„æ—¥åŽ†ï¼Œå¯ä»¥æ”¾ç½®åœ¨é€šçŸ¥æ ä¸Šï¼Œæ”¯æŒé˜´åŽ†ï¼Œhttp://xclient.info/s/tinycal.html?_=80fb58a8555e8bf529af34d2f81df569 å¼€å‘ç±»è½¯ä»¶ è½¯ä»¶ ä»‹ç»åŠä¸‹è½½åœ°å€ IntelliJ IDEA Java ä¸»åŠ›å¼€å‘è½¯ä»¶ï¼Œhttp://www.jetbrains.com/idea/ WebStorm å‰ç«¯å¼€å‘ï¼Œhttp://www.jetbrains.com/webstorm/ PyCharm Python å¼€å‘ï¼Œhttp://www.jetbrains.com/pycharm/ Android Studio Android å¼€å‘ï¼Œhttps://developer.android.com/studio/index.html Xcode IOS å¼€å‘ï¼ŒMac App Store HBuilder è·¨å¹³å°çš„ mui åº”ç”¨å¼€å‘ï¼Œhttp://www.dcloud.io/ Sublime text æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œhttps://www.sublimetext.com/ Virtual Studio Code æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œhttps://code.visualstudio.com/download Navicat Premium ä¸€ä¸ªå¯å¤šé‡è¿žæŽ¥çš„æ•°æ®åº“ç®¡ç†å·¥å…·ï¼Œæ”¯æŒçš„æ•°æ®åº“æœ‰ï¼š MySQLã€SQL Serverã€SQLiteã€Oracle åŠ PostgreSQLï¼Œhttp://xclient.info/s/navicat-premium.html?_=80fb58a8555e8bf529af34d2f81df569 JD-GUI åç¼–è¯‘ class æ–‡ä»¶ï¼Œhttp://jd.benow.ca/ docker å®¹å™¨ï¼Œhttps://www.docker.com/get-docker rdm redis æ¡Œé¢ç®¡ç†è½¯ä»¶ï¼Œhttps://github.com/uglide/RedisDesktopManager Genymotion å®‰å“æ¨¡æ‹Ÿå™¨ï¼Œhttps://www.genymotion.com/ Beyond Compare æ–‡ä»¶æ¯”å¯¹è½¯ä»¶ Mock Plus åŽŸåž‹å›¾è½¯ä»¶ï¼Œhttps://www.mockplus.cn/ Sketch ç§»åŠ¨åº”ç”¨çŸ¢é‡ç»˜å›¾è®¾è®¡å·¥å…·ï¼Œhttp://xclient.info/s/sketch.html?_=80fb58a8555e8bf529af34d2f81df569 Axure RP 8 å¿«é€ŸåŽŸåž‹è®¾è®¡å·¥å…·ï¼Œhttp://xclient.info/s/axure-rp.html?_=80fb58a8555e8bf529af34d2f81df569 Postman HTTP æ¨¡æ‹Ÿè¯·æ±‚å·¥å…·ï¼Œhttps://www.getpostman.com/ Insomnia HTTP æ¨¡æ‹Ÿè¯·æ±‚å·¥å…·ï¼Œæ¯” Postman ç•Œé¢æ›´å¹²å‡€ï¼Œhttps://insomnia.rest/ SSH Shell è¿œç¨‹è¿žæŽ¥åˆ° Linux æœåŠ¡å™¨ï¼Œç®¡ç†å¤šä¸ª SSH ä¼šè¯ï¼Œhttp://xclient.info/s/ssh-shell.html?_=80fb58a8555e8bf529af34d2f81df569 LaunchRocket ç»Ÿä¸€ç®¡ç† Mac ä¸Šçš„ä¸€äº›æœåŠ¡ï¼Œæ¯”å¦‚è¯´ redisã€mysqlã€zookeeperã€rabbitmqç­‰ç­‰æœåŠ¡ï¼Œhttps://github.com/jimbojsb/launchrocket]]></content>
      <categories>
        <category>ç³»ç»Ÿ</category>
      </categories>
      <tags>
        <tag>Mac</tag>
        <tag>è½¯ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äºŽ MSSQL/MYSQL/ORACLE çš„åˆ†é¡µè¯­å¥]]></title>
    <url>%2F2018%2F01%2F16%2Fdb-page-sqls.html</url>
    <content type="text"><![CDATA[MSSQL çš„å‰ N æ¡è®°å½• 12--æŸ¥è¯¢å‰ N æ¡è®°å½•ï¼Œå¯ä»¥æ”¹æˆéœ€è¦çš„æ•°å­—SELECT TOP N * FROM TABLE_NAME MSSQL çš„åˆ†é¡µè¯­å¥ï¼Œç¬¬ N æ¡åˆ°ç¬¬ M æ¡è®°å½• 1SELECT TOP N T.* FROM ( SELECT TOP M * FROM TABLE_NAME ORDER BY COLUMN_NAME ) T ORDER BY T.COLUMN_NAME DESC MYSQL çš„å‰ N æ¡è®°å½• 12-- é€šå¸¸0æ˜¯å¯ä»¥çœç•¥çš„ï¼Œç›´æŽ¥å†™æˆ LIMIT Nã€‚0ä»£è¡¨ä»Žç¬¬0æ¡è®°å½•åŽé¢å¼€å§‹ï¼Œä¹Ÿå°±æ˜¯ä»Žç¬¬ä¸€æ¡å¼€å§‹SELECT * FROM TABLE_NAME LIMIT 0,N MYSQL çš„åˆ†é¡µè¯­å¥ï¼Œç¬¬ N æ¡å¼€å§‹ï¼Œæ¯é¡µ M æ¡ 1SELECT * FROM TABLE_NAME LIMIT N,M ORACLE çš„å‰ N æ¡è®°å½• 12-- N ä¸ºå‰å¤šå°‘æ¡è®°å½•SELECT * FROM TABLE_NAME WHERE ROWNUM &lt; N ORACLE çš„åˆ†é¡µè¯­å¥ï¼Œç¬¬ N æ¡åˆ°ç¬¬ M æ¡è®°å½• 12-- è¿™å¥å°±æ˜¯ä»Ž N åˆ° M çš„æ•°æ®ï¼Œåˆ†ä¸ºä¸‰å±‚ç»“æž„SELECT * FROM ( SELECT T.*,T.ROWNUM RN FROM ( SELECT * FROM TABLE_NAME ) T WHERE T.ROWNUM &lt; M ) WHERE RN &gt; N]]></content>
      <categories>
        <category>ä»£ç ç‰‡æ®µ</category>
        <category>sql</category>
      </categories>
      <tags>
        <tag>ä»£ç ç‰‡æ®µ</tag>
        <tag>sql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ElasticSearch ç¬”è®°]]></title>
    <url>%2F2018%2F01%2F12%2Felasticsearch_note.html</url>
    <content type="text"><![CDATA[ElasticSearchæ˜¯ä¸€ä¸ªåŸºäºŽ Lucene çš„åˆ†å¸ƒå¼æœç´¢å¼•æ“Žï¼Œä¸šå†…ç®€ç§°ESã€‚å®ƒæä¾›äº†åŸºäºŽ RESTful é£Žæ ¼çš„å…¨æ–‡æœç´¢APIã€‚Elasticsearch æ˜¯ç”¨ Java å¼€å‘çš„ï¼Œå¹¶ä½œä¸º Apache è®¸å¯æ¡æ¬¾ä¸‹çš„å¼€æ”¾æºç å‘å¸ƒï¼Œæ˜¯å½“å‰æœ€æµè¡Œçš„ä¼ä¸šçº§æœç´¢å¼•æ“Žã€‚å¦å¤–ï¼Œå®ƒçš„åˆ†å¸ƒå¼è®¾è®¡è®©å®ƒå¤©ç”Ÿå°±é€‚åˆç”¨äºŽäº‘è®¡ç®—ä¸­ï¼Œå¹¶èƒ½å¤Ÿè¾¾åˆ°å‡†å®žæ—¶æœç´¢ï¼Œè€Œä¸”å®‰è£…ä½¿ç”¨æ–¹ä¾¿ï¼Œè¿˜æ‹¥æœ‰ç¨³å®šï¼Œå¯é ï¼Œå¿«é€Ÿç­‰ç‰¹æ€§ã€‚æœ¬æ–‡æ˜¯æˆ‘å¯¹ ES çš„ä¸€ä¸ªå®Œæ•´è®°å½•ï¼Œæ–¹ä¾¿åŽæœŸæŸ¥é˜…ã€‚å¦å¤–å¤§å®¶è¿˜å¯ä»¥æŸ¥é˜…æ›´å¤šçš„ç›¸å…³èµ„æ–™å¯¹ ElasticSearch æœ‰æ›´æ·±å…¥çš„äº†è§£ã€‚ 1. å®‰è£… 1.1. å•æœºå®‰è£… ElasticSearch è¦æ±‚æœ¬åœ°çš„ JDK ç‰ˆæœ¬ä¸ä½ŽäºŽ1.8 åŽ»å®˜ç½‘ä¸‹è½½æœ€æ–°ç‰ˆçš„ ES è½¯ä»¶åŒ… https://www.elastic.co/downloads/elasticsearch ï¼Œç›®å‰ ES æœ€æ–°ç‰ˆæœ¬ä¸º6.1.1ï¼Œæˆ‘è¿™é‡Œé‡‡ç”¨ wget å‘½ä»¤åœ¨ç»ˆç«¯ä¸‹è½½ 12cd appswget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.1.1.tar.gz å¦‚æžœå‡ºçŽ° command not found: wgetï¼Œå¦‚æžœæ˜¯ Linuxï¼Œå¯ä»¥ç”¨ yum install -y wget ä¸‹è½½ï¼Œå¦‚æžœæ˜¯ Mac å°±å¯ä»¥ç”¨ brew install wget ä¸‹è½½ æ£€æŸ¥æœ¬åœ° JDK ç‰ˆæœ¬ï¼Œå¿…é¡»ä¿è¯ä¸º1.8ç‰ˆæœ¬ä»¥ä¸Š 1234$ java -versionjava version "1.8.0_131"Java(TM) SE Runtime Environment (build 1.8.0_131-b11)Java HotSpot(TM) 64-Bit Server VM (build 25.131-b11, mixed mode) è§£åŽ‹è½¯ä»¶åŒ… 1tar -zxvf elasticsearch-6.1.1.tar.gz å¯åŠ¨ ES 12cd elasticsearch-6.1.1./bin/elasticsearch æµ‹è¯•ï¼Œæ‰“å¼€ PostMan æµ‹è¯• http://localhost:9200 ï¼ŒæŸ¥çœ‹è¿”å›žçš„ JSON ä¿¡æ¯ 1.2. åˆ†å¸ƒå¼å®‰è£… è¿™é‡Œæˆ‘ä¼šåœ¨æœ¬åœ°å¯åŠ¨3ä¸ª ES èŠ‚ç‚¹ï¼Œåˆ†åˆ«ç”¨ä¸åŒçš„ç«¯å£å·æ¥æ¨¡æ‹Ÿåˆ†å¸ƒå¼çš„çŽ¯å¢ƒï¼Œä¸€ä¸ªèŠ‚ç‚¹ä¸º masterï¼Œå¦å¤–ä¸¤ä¸ªèŠ‚ç‚¹ä¸º slave èŠ‚ç‚¹ã€‚ ä¸‹è½½å®‰è£…åŒ…ï¼Œè§£åŽ‹3ä»½ï¼Œåˆ†åˆ«å‘½åä¸º elasticsearch-masterï¼Œelasticsearch-slave1ï¼Œelasticsearch-slave2 ä¿®æ”¹ elasticsearch-master çš„é…ç½®æ–‡ä»¶ï¼Œconfig/elasticsearch.yml 123456789101112http.cors.enabled: truehttp.cors.allow-origin: "*"## ç”¨äºŽæŒ‡å®šé›†ç¾¤åç§°cluster.name: xkcoding## ç”¨äºŽæŒ‡å®šèŠ‚ç‚¹åç§°node.name: master## ç”¨äºŽæŒ‡å®šå½“å‰èŠ‚ç‚¹æ˜¯ master èŠ‚ç‚¹node.master: truenetwork.host: 127.0.0.1http.port: 9200 ä¿®æ”¹ elasticsearch-slave1 çš„é…ç½®æ–‡ä»¶ï¼Œconfig/elasticsearch.yml 12345678910111213http.cors.enabled: truehttp.cors.allow-origin: "*"## ç”¨äºŽæŒ‡å®šé›†ç¾¤åç§°cluster.name: xkcoding## ç”¨äºŽæŒ‡å®šèŠ‚ç‚¹åç§°node.name: slave1network.host: 127.0.0.1http.port: 8200## ç”¨äºŽå‘çŽ° master èŠ‚ç‚¹discovery.zen.ping.unicast.hosts: ["127.0.0.1"] ä¿®æ”¹ elasticsearch-slave2 çš„é…ç½®æ–‡ä»¶ï¼Œconfig/elasticsearch.yml 12345678910111213http.cors.enabled: truehttp.cors.allow-origin: "*"## ç”¨äºŽæŒ‡å®šé›†ç¾¤åç§°cluster.name: xkcoding## ç”¨äºŽæŒ‡å®šèŠ‚ç‚¹åç§°node.name: slave2network.host: 127.0.0.1http.port: 7200## ç”¨äºŽå‘çŽ° master èŠ‚ç‚¹discovery.zen.ping.unicast.hosts: ["127.0.0.1"] å¯åŠ¨ head æ’ä»¶ï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® http://localhost:9100ï¼ŒæŸ¥çœ‹åˆ†å¸ƒå¼èŠ‚ç‚¹çš„è¿è¡ŒçŠ¶æ€ 1.3. æ’ä»¶å®‰è£… 1.3.1. head æ’ä»¶ ç‹¬ç«‹å®‰è£… ç‹¬ç«‹å®‰è£…æ˜¯æŒ‡ï¼Œheadæ’ä»¶å®‰è£…åœ¨eså¤–éƒ¨ï¼Œ ç‹¬ç«‹å®‰è£… head æ’ä»¶ï¼Œè¦æ±‚æœ¬åœ°çš„ Node ç‰ˆæœ¬ä¸ä½ŽäºŽ8.0 å‰å¾€ GitHub æœç´¢ elasticsearch-head ï¼Œè¿™é‡Œæˆ‘ç›´æŽ¥ç»™å‡ºæ’ä»¶çš„ GitHub ä»“åº“åœ°å€ï¼Œhttps://github.com/mobz/elasticsearch-head ï¼Œclone æºä»£ç  12cd ~/appsgit clone https://github.com/mobz/elasticsearch-head.git æ£€æŸ¥æœ¬åœ° Node ç‰ˆæœ¬ï¼Œå¿…é¡»ä¿è¯ä¸º8.0ç‰ˆæœ¬ä»¥ä¸Š 12$ node -vv8.5.0 ç¼–è¯‘ head æ’ä»¶ 12cd ~/apps/elasticsearch-headnpm install å¦‚æžœè§‰å¾—è¿™ä¸€æ­¥çš„ä¾èµ–ä¸‹è½½æ¯”è¾ƒæ…¢çš„è¯ï¼Œæœ‰ä¸¤ç§è§£å†³æ–¹å¼ï¼š å¯ä»¥é€‰æ‹©ç§‘å­¦ä¸Šç½‘ ä½¿ç”¨å›½å†…é˜¿é‡Œçš„é•œåƒæºï¼Œä½¿ç”¨ cnpm å®‰è£…ï¼Œå…·ä½“å¦‚ä½•é…ç½®ï¼Œæœ¬æ–‡ä¸åšèµ˜è¿°ã€‚å…·ä½“å‚è€ƒï¼šhttp://npm.taobao.org/ é…ç½® ES æ”¯æŒè·¨åŸŸè®¿é—®ï¼Œè®© head æ’ä»¶å¯ä»¥è®¿é—®åˆ° 12cd ~/apps/elasticsearch-6.1.1vim config/elasticsearch.yml æ·»åŠ è¿›ä¸‹é¢ä¸¤è¡Œå¯¹è·¨åŸŸçš„é…ç½® 12http.cors.enabled: truehttp.cors.allow-origin: "*" ä¿å­˜ :wq! é…ç½®æ–‡ä»¶ï¼Œå¯åŠ¨ ES 1./bin/elasticsearch è¿è¡Œ head æ’ä»¶ 12cd ~/apps/elasticsearch-headnpm run start æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® http://localhost:9100/ ï¼ŒæŸ¥çœ‹ head æ’ä»¶è¿è¡Œæ•ˆæžœ é›†æˆå®‰è£… ES ç‰ˆæœ¬ 5.x ä»¥ä¸Šï¼Œä¸æ”¯æŒè¿™ç§æ–¹å¼å®‰è£…ï¼Œå¦‚æžœæƒ³ä½¿ç”¨headæ’ä»¶ï¼Œè¯·ä½¿ç”¨ç‹¬ç«‹å®‰è£… ä½¿ç”¨ESæä¾›çš„æ’ä»¶å®‰è£…æ–¹å¼å®‰è£… 1./bin/plugin install mobz/elasticsearch-head æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® http://localhost:9200/_plugin/head/ ï¼ŒæŸ¥çœ‹ head æ’ä»¶è¿è¡Œæ•ˆæžœ 1.3.2. ik ä¸­æ–‡åˆ†è¯æ’ä»¶ ik åˆ†è¯æ’ä»¶ç‰ˆæœ¬ä¸ŽESç‰ˆæœ¬å¯¹ç…§ï¼Œè¯·æŸ¥é˜…ï¼šhttps://github.com/medcl/elasticsearch-analysis-ik#versions æ‰‹åŠ¨å®‰è£… åœ¨ ES çš„ plugins ç›®å½•ä¸‹åˆ›å»º ik ç›®å½• 1cd ./plugins &amp;&amp; mkdir ik ä¸‹è½½ç¼–è¯‘åŒ…åˆ° ik ç›®å½•ï¼Œä¸‹è½½åœ°å€ï¼šhttps://github.com/medcl/elasticsearch-analysis-ik/releases è§£åŽ‹ä¸‹è½½çš„åŽ‹ç¼©åŒ… 1unzip elasticsearch-analysis-ik-&#123; ES ç‰ˆæœ¬ &#125;.zip é‡å¯ ES è‡ªåŠ¨å®‰è£… ä½¿ç”¨ ES æä¾›çš„æ’ä»¶å®‰è£…æ–¹å¼å®‰è£…ï¼Œæ›¿æ¢ä¸‹é¢çš„ES ç‰ˆæœ¬ï¼Œå…·ä½“ä¿¡æ¯å¯ä»¥åŽ» https://github.com/medcl/elasticsearch-analysis-ik/releases æŸ¥çœ‹ 1./bin/elasticsearch-plugin install https://github.com/medcl/elasticsearch-analysis-ik/releases/download/&#123; ES ç‰ˆæœ¬ &#125;/elasticsearch-analysis-ik-&#123; ES ç‰ˆæœ¬ &#125;.zip é‡å¯ ES 2. å¸¸è§é”™è¯¯ é”™è¯¯1ï¼šè¿›ç¨‹è™šæ‹Ÿå†…å­˜ 1[3]: max virtual memory areas vm.max_map_count [65530] likely too low, increase to at least [262144] vm.max_map_countï¼šé™åˆ¶ä¸€ä¸ªè¿›ç¨‹å¯ä»¥æ‹¥æœ‰çš„VMA(è™šæ‹Ÿå†…å­˜åŒºåŸŸ)çš„æ•°é‡ã€‚ åˆ‡æ¢åˆ°rootç”¨æˆ·ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š 1vim /etc/sysctl.conf æ·»åŠ ä¸‹é¢çš„å†…å®¹ï¼š 1vm.max_map_count=655360 ç„¶åŽæ‰§è¡Œå‘½ä»¤ï¼š 1sysctl -p é”™è¯¯2ï¼šæ–‡ä»¶æƒé™ä¸è¶³ 1[1]: max file descriptors [4096] for elasticsearch process likely too low, increase to at least [65536] ç”¨çš„æ˜¯esç”¨æˆ·ï¼Œè€Œä¸æ˜¯rootï¼Œæ‰€ä»¥æ–‡ä»¶æƒé™ä¸è¶³ã€‚ ä½¿ç”¨rootç”¨æˆ·ç™»å½• ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š 1vim /etc/security/limits.conf æ·»åŠ ä¸‹é¢çš„å†…å®¹ï¼š 1234567* soft nofile 65536* hard nofile 131072* soft nproc 4096* hard nproc 4096 é‡å¯ç»ˆç«¯çª—å£ æ‰€æœ‰é”™è¯¯ä¿®æ”¹å®Œæ¯•ï¼Œä¸€å®šè¦é‡å¯ä½ çš„ç»ˆç«¯ï¼Œå¦åˆ™é…ç½®æ— æ•ˆã€‚ 3. åŸºç¡€æ¦‚å¿µ 3.1. é›†ç¾¤å’ŒèŠ‚ç‚¹ æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ª ES çš„å•ç‹¬å®žä¾‹ï¼Œé€šè¿‡ node_name æ¥æŒ‡å®šå„ä¸ªèŠ‚ç‚¹çš„åå­—ã€‚ é›†ç¾¤æ˜¯é€šè¿‡é…ç½®cluster_nameæ¥ä½¿å¾—èŠ‚ç‚¹æ‰¾åˆ°é›†ç¾¤ã€‚ 3.2. ç´¢å¼• ç´¢å¼•æ˜¯å«æœ‰ç›¸åŒå±žæ€§çš„æ–‡æ¡£é›†åˆï¼Œåœ¨ ES ä¸­æ˜¯é€šè¿‡ä¸€ä¸ªåå­—æ¥è¯†åˆ«çš„ï¼Œè€Œä¸”è¦æ±‚æ˜¯è‹±æ–‡å­—æ¯å°å†™ä¸”ä¸åŒ…å«ä¸­åˆ’çº¿ ç´¢å¼•å¯¹åº”äºŽ SQL çš„ database 3.3. ç±»åž‹ ç´¢å¼•å¯ä»¥å«æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªç±»åž‹ï¼Œæ–‡æ¡£å¿…é¡»å±žäºŽä¸€ä¸ªç±»åž‹ ç±»åž‹å¯¹åº”äºŽ SQL çš„ table 3.4. æ–‡æ¡£ æ–‡æ¡£æ˜¯å¯ä»¥è¢«ç´¢å¼•çš„åŸºæœ¬æ•°æ®å•ä½ æ–‡æ¡£å¯¹åº”äºŽ SQL çš„ä¸€æ¡è®°å½• 3.5. åˆ†ç‰‡ æ¯ä¸ªç´¢å¼•éƒ½æœ‰å¤šä¸ªåˆ†ç‰‡ï¼Œæ¯ä¸ªåˆ†ç‰‡éƒ½æ˜¯ä¸€ä¸ª Lucene ç´¢å¼• 3.6. å¤‡ä»½ æ‹·è´ä¸€ä»½åˆ†ç‰‡å°±å®Œæˆäº†åˆ†ç‰‡çš„å¤‡ä»½ 4. åŸºæœ¬ç”¨æ³• 4.1. è¯·æ±‚æ–¹å¼ API åŸºæœ¬æ ¼å¼ï¼šhttp://&lt;ip&gt;:&lt;port&gt;/&lt;ç´¢å¼•&gt;/&lt;ç±»åž‹&gt;/&lt;æ–‡æ¡£ id&gt; API è¯·æ±‚æ–¹å¼ï¼šGETã€POSTã€PUTã€DELETE 4.2. ç´¢å¼• åˆ›å»º å‡è®¾åˆ›å»ºä¸€ä¸ª people çš„ç´¢å¼•ï¼Œæ‰“å¼€ PostManï¼Œè¾“å…¥åœ°å€ http://localhost:9200/people ï¼Œå°†æ–¹æ³•æ”¹ä¸º PUT æ–¹æ³•ï¼Œå°†ðŸ‘‡çš„ json æ”¾å…¥ Body è¯·æ±‚ä½“ï¼Œç‚¹å‡» Sendï¼Œè‹¥å‡ºçŽ° &quot;acknowledged&quot;:trueï¼Œåˆ™ä»£è¡¨ç´¢å¼•åˆ›å»ºæˆåŠŸã€‚ è¯·æ±‚ä½“çš„ json: 12345678910111213141516171819202122232425&#123; "settings":&#123; "number_of_shards":3, "number_of_replicas":1 &#125;, "mappings":&#123; "person":&#123; "properties":&#123; "name":&#123; "type":"text" &#125;, "age":&#123; "type":"integer" &#125;, "country":&#123; "type":"keyword" &#125;, "birthday":&#123; "type":"date", "format":"yyyy-MM-dd HH:mm:ss||yyyy-MM-dd||epoch_millis" &#125; &#125; &#125; &#125;&#125; json è¯·æ±‚ä½“å­—æ®µè§£é‡Šï¼šsettings å­—æ®µå¯ä»¥ä¸æŒ‡å®šnumber_of_shards ä»£è¡¨åˆ†ç‰‡æ•°ï¼ˆé»˜è®¤ä¸º5ï¼‰number_of_replicas ä»£è¡¨å¤‡ä»½æ•°ï¼ˆé»˜è®¤ä¸º1ï¼‰text ç±»åž‹çš„å­—æ®µæœç´¢æ—¶å°†ä¼šè¢«åˆ†è¯keyword ç±»åž‹çš„å­—æ®µæœç´¢æ—¶å°†ä¸ä¼šè¢«åˆ†è¯epoch_millis ç±»åž‹ä»£è¡¨æ—¶é—´æˆ³æ ¼å¼ è¿”å›žå€¼ï¼š 12345&#123; "acknowledged": true, "shards_acknowledged": true, "index": "people"&#125; å¦‚å›¾æ‰€ç¤ºï¼š åˆ é™¤ æ‰“å¼€ PostManï¼Œè¾“å…¥åœ°å€ http://localhost:9200/people ï¼Œå°†æ–¹æ³•æ”¹ä¸º DELETE æ–¹æ³•ï¼Œç‚¹å‡» Sendã€‚ è¿”å›žå€¼ï¼š 123&#123; "acknowledged": true&#125; 4.3. æ’å…¥ çŽ°åœ¨æˆ‘ä»¬å‘ä¹‹å‰åˆ›å»ºçš„ç±»åž‹ä¸­æ·»åŠ ä¸€æ¡æ–‡æ¡£è®°å½•ï¼Œæ’å…¥åˆ†ä¸º2ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯æŒ‡å®š IDï¼Œä¸€ç§æ˜¯ä¸æŒ‡å®š IDï¼Œå½“ä¸æŒ‡å®š ID æ—¶ï¼ŒID ç”± ES ç”Ÿæˆã€‚ æŒ‡å®š ID æ’å…¥ æ‰“å¼€ PostManï¼Œè¾“å…¥åœ°å€ http://localhost:9200/people/person/1 ï¼Œå°†æ–‡æ¡£çš„ json æ”¾å…¥ Body è¯·æ±‚ä½“ï¼Œå°†æ–¹æ³•æ”¹ä¸º PUT æ–¹æ³•ï¼Œç‚¹å‡» Sendã€‚ æ–‡æ¡£å†…å®¹ï¼š 123456&#123; "name":"xkcoding", "age":24, "country":"ä¸­å›½", "birthday":"1994-11-22"&#125; è¿”å›žå€¼ï¼š 1234567891011121314&#123; "_index": "people", "_type": "person", "_id": "1", "_version": 1, "result": "created", "_shards": &#123; "total": 2, "successful": 2, "failed": 0 &#125;, "_seq_no": 0, "_primary_term": 1&#125; å¦‚å›¾æ‰€ç¤ºï¼š ä¸æŒ‡å®š ID æ’å…¥ æ‰“å¼€ PostManï¼Œè¾“å…¥åœ°å€ http://localhost:9200/people/person ï¼Œå°†æ–‡æ¡£çš„ json æ”¾å…¥ Body è¯·æ±‚ä½“ï¼Œå°†æ–¹æ³•æ”¹ä¸º POST æ–¹æ³•ï¼Œç‚¹å‡» Sendã€‚ æ–‡æ¡£å†…å®¹ï¼š 123456&#123; "name":"ä¸­å¹´xkcoding", "age":34, "country":"ä¸­å›½", "birthday":"1984-11-22"&#125; è¿”å›žå€¼ï¼š 1234567891011121314&#123; "_index": "people", "_type": "person", "_id": "I4_sAmEBVnl1iCRF78pG", "_version": 1, "result": "created", "_shards": &#123; "total": 2, "successful": 2, "failed": 0 &#125;, "_seq_no": 0, "_primary_term": 1&#125; å¦‚å›¾æ‰€ç¤ºï¼š ç„¶åŽå‰å¾€ head æ’ä»¶æŸ¥çœ‹æ˜¯å¦æ’å…¥æ•°æ® 4.4. ä¿®æ”¹ ä¿®æ”¹æ–‡æ¡£æ•°æ®ï¼Œæ‰“å¼€ PostManï¼Œè¾“å…¥åœ°å€ http://localhost:9200/people/person/1/_update ï¼Œå°†è¯·æ±‚çš„ json æ”¾å…¥ Body è¯·æ±‚ä½“ï¼Œå°†æ–¹æ³•æ”¹ä¸º POST æ–¹æ³•ï¼Œç‚¹å‡» Sendã€‚ è¯·æ±‚ä½“ï¼š 12345&#123; "doc":&#123; "name":"æ²ˆæ‰¬å‡¯" &#125;&#125; æ³¨æ„ï¼šä¿®æ”¹çš„æ—¶å€™ URL å¿…é¡»åŽé¢è·Ÿ_updateï¼Œç„¶åŽè¦ä¿®æ”¹çš„å­—æ®µå¿…é¡»æ”¾åœ¨ doc å­—æ®µé‡Œã€‚ è¿”å›žå€¼ï¼š 1234567891011121314&#123; "_index": "people", "_type": "person", "_id": "1", "_version": 2, "result": "updated", "_shards": &#123; "total": 2, "successful": 2, "failed": 0 &#125;, "_seq_no": 1, "_primary_term": 1&#125; å¦‚å›¾æ‰€ç¤ºï¼š 4.5. åˆ é™¤ æ‰“å¼€ PostManï¼Œè¾“å…¥åœ°å€ http://localhost:9200/people/person/1 ï¼Œå°†æ–¹æ³•æ”¹ä¸º DELETE æ–¹æ³•ï¼Œç‚¹å‡» Sendã€‚ è¿”å›žå€¼ï¼š 1234567891011121314&#123; "_index": "people", "_type": "person", "_id": "1", "_version": 3, "result": "deleted", "_shards": &#123; "total": 2, "successful": 2, "failed": 0 &#125;, "_seq_no": 2, "_primary_term": 1&#125; 4.6. æŸ¥è¯¢ ES æ­£å¦‚å…¶åï¼Œæœ¬å°±æ˜¯ä¸ºäº† Search è€Œç”Ÿï¼Œæ‰€ä»¥æŸ¥è¯¢æ˜¯ ES æœ€ç‰›é€¼çš„åœ°æ–¹ã€‚ä½¿ç”¨ä¸Šé¢æåˆ°çš„æ’å…¥è¯­æ³•ï¼Œé¢„å…ˆæ’å…¥ä¸€å †åŽŸå§‹æ•°æ®ï¼Œç”¨ head æŸ¥çœ‹ã€‚ ç®€å•æŸ¥è¯¢ æ‰“å¼€ PostManï¼Œè¾“å…¥åœ°å€ http://localhost:9200/people/person/1 ï¼Œå°†æ–¹æ³•æ”¹ä¸º GET æ–¹æ³•ï¼Œç‚¹å‡» Sendã€‚ è¿”å›ž id ä¸º1çš„æ–‡æ¡£æ•°æ®ï¼š 12345678910111213&#123; "_index": "people", "_type": "person", "_id": "1", "_version": 1, "found": true, "_source": &#123; "name": "xkcoding", "age": 24, "country": "ä¸­å›½", "birthday": "1994-11-22" &#125;&#125; æ¡ä»¶æŸ¥è¯¢ è¿™é‡Œè¿˜æ˜¯ä½¿ç”¨ PostMan æ¥æµ‹è¯•æˆ‘ä»¬çš„æ¡ä»¶æŸ¥è¯¢ è¯·æ±‚åœ°å€ï¼šhttp://localhost:9200/people/_search è¯·æ±‚æ–¹å¼ï¼šPOST è¿”å›žå€¼å› ä¸ºæ–‡ç« ç¯‡å¹…æœ‰é™ï¼Œå°±ä¸å°†è¿”å›žçš„å†…å®¹è´´åœ¨æ–‡ç« ä¸­äº†ï¼Œè¯·è‡ªè¡Œæµ‹è¯•ä¸‹æ–¹è¯·æ±‚ä½“ï¼ŒéªŒè¯ç»“æžœ æŸ¥è¯¢æ‰€æœ‰æ–‡æ¡£æ•°æ® è¯·æ±‚ä½“ï¼š 12345&#123; "query":&#123; "match_all":&#123;&#125; &#125;&#125; åˆ†é¡µæŸ¥è¯¢æ–‡æ¡£æ•°æ®ï¼Œç¬¬ 0 æ¡å¼€å§‹ï¼Œæ¯é¡µ 3 æ¡æ•°æ® è¯·æ±‚ä½“ï¼š 1234567&#123; "query":&#123; "match_all":&#123;&#125; &#125;, "from":0, "size":3&#125; æŸ¥è¯¢åå­—ä¸­åŒ…å«ã€Œå°ã€çš„æ–‡æ¡£ è¯·æ±‚ä½“ï¼š 1234567&#123; "query":&#123; "match":&#123; "name":"å°" &#125; &#125;&#125; æŸ¥è¯¢åå­—ä¸­åŒ…å«ã€Œå°ã€çš„æ–‡æ¡£ï¼Œå¹¶ä¸”æŒ‰ç…§ç”Ÿæ—¥é™åºæŽ’åº è¯·æ±‚ä½“ï¼š 1234567891011121314&#123; "query":&#123; "match":&#123; "name":"å°" &#125; &#125;, "sort":[ &#123; "birthday":&#123; "order":"desc" &#125; &#125; ]&#125; èšåˆæŸ¥è¯¢ è¯·æ±‚åœ°å€ï¼šhttp://localhost:9200/people/_search è¯·æ±‚æ–¹å¼ï¼šPOST æŒ‰ç…§å¹´é¾„èšåˆæ•°æ®ï¼ŒæŸ¥å‡ºæ–‡æ¡£ä¸­ä¸åŒå¹´é¾„æ‰€å çš„äººæ•° è¯·æ±‚ä½“ï¼š 123456789&#123; "aggs":&#123; "group_by_age":&#123; "terms":&#123; "field":"age" &#125; &#125; &#125;&#125; å¤šä¸ªèšåˆï¼Œåˆ†åˆ«æŒ‰ç…§å¹´é¾„ã€ç”Ÿæ—¥èšåˆæ•°æ® è¯·æ±‚ä½“ï¼š 1234567891011121314&#123; "aggs":&#123; "group_by_age":&#123; "terms":&#123; "field":"age" &#125; &#125;, "group_by_birthday":&#123; "terms":&#123; "field":"birthday" &#125; &#125; &#125;&#125; å¹´é¾„æœ€å° è¯·æ±‚ä½“ï¼š 123456789&#123; "aggs":&#123; "grades_ages":&#123; "min":&#123; "field":"age" &#125; &#125; &#125;&#125; å¹´é¾„æœ€å¤§ è¯·æ±‚ä½“ï¼š 123456789&#123; "aggs":&#123; "grades_ages":&#123; "max":&#123; "field":"age" &#125; &#125; &#125;&#125; å¹³å‡å¹´é¾„ è¯·æ±‚ä½“ï¼š 123456789&#123; "aggs":&#123; "grades_ages":&#123; "avg":&#123; "field":"age" &#125; &#125; &#125;&#125; å¹´é¾„æ€»å’Œ è¯·æ±‚ä½“ï¼š 123456789&#123; "aggs":&#123; "grades_ages":&#123; "sum":&#123; "field":"age" &#125; &#125; &#125;&#125; ç»Ÿè®¡ï¼Œå°†3ã€4ã€5ã€6çš„ä¿¡æ¯ç»Ÿä¸€æŸ¥è¯¢ è¯·æ±‚ä½“ï¼š 123456789&#123; "aggs":&#123; "grades_ages":&#123; "stats":&#123; "field":"age" &#125; &#125; &#125;&#125; 5. é«˜çº§æŸ¥è¯¢ 5.1. query æ¨¡ç³ŠåŒ¹é… æŸ¥è¯¢åå­—ä¸­åŒ…å«ã€Œå°ã€çš„æ–‡æ¡£ è¯·æ±‚ä½“ï¼š 1234567&#123; "query":&#123; "match":&#123; "name":"å°" &#125; &#125;&#125; è¯ç»„åŒ¹é… æŸ¥è¯¢åå­—åªåŒ…å«ã€Œå°å‡¯ã€çš„æ–‡æ¡£ï¼Œæˆ‘ä»¬å…ˆä½¿ç”¨å¦‚ä¸‹çš„è¯·æ±‚ä½“æŸ¥è¯¢ 1234567&#123; "query":&#123; "match":&#123; "name":"å°å‡¯" &#125; &#125;&#125; è¿”å›žçš„ç»“æžœï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243// çœç•¥å…¶ä½™éƒ¨åˆ†"hits": &#123; "total": 3, "max_score": 1.8386619, "hits": [ &#123; "_index": "people", "_type": "person", "_id": "2", "_score": 1.8386619, "_source": &#123; "name": "å¹´è½»çš„å°å‡¯", "age": 14, "country": "ä¸­å›½", "birthday": "2004-11-22" &#125; &#125;, &#123; "_index": "people", "_type": "person", "_id": "4", "_score": 0.8984401, "_source": &#123; "name": "ç‹‚å°ç‹—", "age": 20, "country": "ä¸­å›½", "birthday": "1998-01-01" &#125; &#125;, &#123; "_index": "people", "_type": "person", "_id": "9", "_score": 0.8142733, "_source": &#123; "name": "å°æ³½", "age": 32, "country": "æ—¥æœ¬", "birthday": "1986-02-02" &#125; &#125; ]&#125; é€šè¿‡ç»“æžœï¼Œå¯ä»¥å‘çŽ°ï¼Œé€šè¿‡ match åŽ»æŸ¥è¯¢çš„æ—¶å€™ï¼ŒES è¿”å›žçš„æ˜¯åˆ†åˆ«åŒ…å«ã€Œå°ã€ã€ã€Œå‡¯ã€çš„æ–‡æ¡£ï¼Œå¦‚ä½•åŽ»æŸ¥è¯¢ name å­—æ®µåªåŒ…å«ã€Œå°å‡¯ã€çš„æ–‡æ¡£å‘¢ï¼Ÿä½¿ç”¨ match_phrase å¯ä»¥æ»¡è¶³è¦æ±‚ã€‚ è¯·æ±‚ä½“ï¼š 1234567&#123; "query":&#123; "match_phrase":&#123; "name":"å°å‡¯" &#125; &#125;&#125; å­—æ®µæŸ¥è¯¢ æŸ¥è¯¢æ‰€æœ‰çš„ä¸­å›½äºº è¯·æ±‚ä½“ï¼š 1234567&#123; "query":&#123; "term":&#123; "country":"ä¸­å›½" &#125; &#125;&#125; èŒƒå›´æŸ¥è¯¢ï¼ˆæ”¯æŒæ•°å€¼åž‹å’Œæ—¥æœŸåž‹ï¼‰ æŸ¥è¯¢å¹´é¾„ 24 â‰¤ ageï¼œ30 ç›´æŽ¥çš„æ•°æ® è¯·æ±‚ä½“ï¼š 12345678910&#123; "query":&#123; "range":&#123; "age":&#123; "gte":24, "lt":30 &#125; &#125; &#125;&#125; 5.2. filter ä¸€èˆ¬ç»“åˆ bool ä¸€èµ·ä½¿ç”¨ï¼Œ æŸ¥è¯¢å¹´é¾„ä¸º23çš„æ–‡æ¡£æ•°æ® è¯·æ±‚ä½“ï¼š 1234567891011&#123; "query":&#123; "bool":&#123; "filter":&#123; "term":&#123; "age":23 &#125; &#125; &#125; &#125;&#125; 5.3. å¤åˆæ¡ä»¶æŸ¥è¯¢ å›ºå®šåˆ†æ•°æŸ¥è¯¢ æŸ¥è¯¢åå­—ä¸­åŒ…å«ã€Œå°ã€çš„æ–‡æ¡£ï¼Œå¹¶å›ºå®šæŸ¥è¯¢åˆ†æ•° è¯·æ±‚ä½“ï¼š 1234567891011&#123; "query":&#123; "constant_score":&#123; "filter":&#123; "match":&#123; "name":"å°" &#125; &#125; &#125; &#125;&#125; æŸ¥è¯¢åå­—ä¸­åŒ…å«ã€Œå°ã€çš„æ–‡æ¡£ï¼Œå¹¶å›ºå®šæŸ¥è¯¢åˆ†æ•°ä¸º2 è¯·æ±‚ä½“ï¼š 123456789101112&#123; "query":&#123; "constant_score":&#123; "filter":&#123; "match":&#123; "name":"å°" &#125; &#125;, "boost":2 &#125; &#125;&#125; å¸ƒå°”æŸ¥è¯¢ æŸ¥è¯¢æ˜¯å›½å®¶ä¸ºä¸­å›½æˆ–è€…å¹´é¾„ä¸º30çš„æ•°æ® è¯·æ±‚ä½“ï¼š 1234567891011121314151617&#123; "query":&#123; "bool":&#123; "should":[ &#123; "match":&#123; "country":"ä¸­å›½" &#125; &#125;,&#123; "match":&#123; "age":30 &#125; &#125; ] &#125; &#125;&#125; æŸ¥è¯¢å›½å®¶ä¸ºä¸­å›½å¹¶ä¸”å¹´é¾„ä¸º23çš„æ•°æ® è¯·æ±‚ä½“ï¼š 1234567891011121314151617&#123; "query":&#123; "bool":&#123; "must":[ &#123; "match":&#123; "country":"ä¸­å›½" &#125; &#125;,&#123; "match":&#123; "age":23 &#125; &#125; ] &#125; &#125;&#125; æŸ¥è¯¢å›½å®¶ä¸ºä¸­å›½å¹¶ä¸”å¹´é¾„ä¸º23å¹¶ä¸”ç”Ÿæ—¥æ¯”1995-07-01æ—©çš„æ•°æ® è¯·æ±‚ä½“ï¼š 123456789101112131415161718192021222324&#123; "query":&#123; "bool":&#123; "must":[ &#123; "match":&#123; "country":"ä¸­å›½" &#125; &#125;,&#123; "match":&#123; "age":23 &#125; &#125; ], "filter":[&#123; "range":&#123; "birthday":&#123; "lt":"1995-07-01" &#125; &#125; &#125;] &#125; &#125;&#125; 6. Spring Boot é›†æˆ ES ä»£ç æ‰˜ç®¡åœ¨ GitHubï¼šæˆ³æˆ‘èŽ·å–æºç  6.1. Spring Boot é›†æˆ ES çš„é…ç½®ç±» åœ¨ Spring Boot ä¸­é…ç½®ç±»éœ€è¦ä½¿ç”¨ @Configuration æ¥æ ‡æ³¨ application.yml 12345678server: port: 8080 context-path: /demoelasticsearch: host: 127.0.0.1 port: 9300 cluster: name: xkcoding ElasticSearchConfig.java 12345678910111213141516171819202122232425262728293031323334353637383940414243444546package com.xkcoding.springbootdemoelasticsearch.config;import org.elasticsearch.client.transport.TransportClient;import org.elasticsearch.common.settings.Settings;import org.elasticsearch.common.transport.TransportAddress;import org.elasticsearch.transport.client.PreBuiltTransportClient;import org.springframework.beans.factory.annotation.Value;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import java.net.InetAddress;import java.net.UnknownHostException;/** * &lt;p&gt; * ES çš„é…ç½®ç±» * &lt;/p&gt; * * @package: com.xkcoding.springbootdemoelasticsearch.config * @descriptionï¼š ES çš„é…ç½®ç±» * @author: yangkai.shen * @date: Created in 2018/1/18 ä¸‹åˆ4:41 * @copyright: Copyright (c) 2018 * @version: 0.0.1 * @modified: yangkai.shen */@Configurationpublic class ElasticSearchConfig &#123; @Value("$&#123;elasticsearch.host&#125;") private String host; @Value("$&#123;elasticsearch.port&#125;") private int port; @Value("$&#123;elasticsearch.cluster.name&#125;") private String clusterName; @Bean public TransportClient esClient() throws UnknownHostException &#123; Settings settings = Settings.builder().put("cluster.name", this.clusterName).put("client.transport.sniff", true).build(); TransportAddress master = new TransportAddress(InetAddress.getByName(host), port); TransportClient client = new PreBuiltTransportClient(settings).addTransportAddress(master); return client; &#125;&#125; 6.2. æ’å…¥ 123456789101112131415161718192021222324252627282930/** * æ’å…¥ä¸€æ¡æ•°æ®åˆ° ES ä¸­ï¼Œid ç”± ES ç”Ÿæˆ * * @param name åç§° * @param country å›½ç± * @param age å¹´é¾„ * @param birthday ç”Ÿæ—¥ * @return æ’å…¥æ•°æ®çš„ä¸»é”® */@PostMapping("/person")public ApiResponse add(@RequestParam String name, @RequestParam String country, @RequestParam Integer age, @RequestParam @DateTimeFormat(pattern = "yyyy-MM-dd HH:mm:ss") Date birthday) &#123; try &#123; XContentBuilder content = XContentFactory.jsonBuilder() .startObject() .field("name", name) .field("country", country) .field("age", age) .field("birthday", birthday.getTime()) .endObject(); IndexResponse response = esClient.prepareIndex(INDEX, TYPE).setSource(content).get(); return ApiResponse.ofSuccess(response.getId()); &#125; catch (IOException e) &#123; e.printStackTrace(); return ApiResponse.ofStatus(Status.INTERNAL_SERVER_ERROR); &#125;&#125; 6.3. ä¿®æ”¹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445/** * æ ¹æ®ä¸»é”®ï¼Œä¿®æ”¹ä¼ é€’å­—æ®µå¯¹åº”çš„å€¼ * * @param id ES ä¸­çš„ id * @param name å§“å * @param country å›½ç± * @param age å¹´é¾„ * @param birthday ç”Ÿæ—¥ * @return UPDATED ä»£è¡¨æ–‡æ¡£ä¿®æ”¹æˆåŠŸ */@PutMapping("/person/&#123;id&#125;")public ApiResponse update(@PathVariable String id, @RequestParam(value = "name", required = false) String name, @RequestParam(value = "country", required = false) String country, @RequestParam(value = "age", required = false) Integer age, @RequestParam(value = "birthday", required = false) @DateTimeFormat(pattern = "yyyy-MM-dd HH:mm:ss") Date birthday) &#123; UpdateRequest request = new UpdateRequest(INDEX, TYPE, id); try &#123; XContentBuilder builder = XContentFactory.jsonBuilder().startObject(); if (!Strings.isNullOrEmpty(name)) &#123; builder.field("name", name); &#125; if (!Strings.isNullOrEmpty(country)) &#123; builder.field("country", country); &#125; if (age != null &amp;&amp; age &gt; 0) &#123; builder.field("age", age); &#125; if (birthday != null) &#123; builder.field("birthday", birthday.getTime()); &#125; builder.endObject(); request.doc(builder); &#125; catch (IOException e) &#123; e.printStackTrace(); return ApiResponse.ofStatus(Status.INTERNAL_SERVER_ERROR); &#125; try &#123; UpdateResponse response = esClient.update(request).get(); return ApiResponse.ofSuccess(response); &#125; catch (Exception e) &#123; e.printStackTrace(); return ApiResponse.ofStatus(Status.INTERNAL_SERVER_ERROR); &#125;&#125; 6.4. åˆ é™¤ 1234567891011/** * æ ¹æ® id åˆ é™¤ ES çš„ä¸€æ¡è®°å½• * * @param id ES ä¸­çš„ id * @return DELETED ä»£è¡¨åˆ é™¤ */@DeleteMapping("/person/&#123;id&#125;")public ApiResponse delete(@PathVariable String id) &#123; DeleteResponse response = esClient.prepareDelete(INDEX, TYPE, id).get(); return ApiResponse.ofSuccess(response.getResult());&#125; 6.5. ç®€å•æŸ¥è¯¢ 1234567891011121314/** * ç®€å•æŸ¥è¯¢ æ ¹æ® id æŸ¥ ES ä¸­çš„æ–‡æ¡£å†…å®¹ * * @param id ES ä¸­å­˜å‚¨çš„ id * @return å¯¹åº” id çš„æ–‡æ¡£å†…å®¹ */@GetMapping("/person/&#123;id&#125;")public ApiResponse get(@PathVariable String id) &#123; GetResponse response = esClient.prepareGet(INDEX, TYPE, id).get(); if (!response.isExists() || response.isSourceEmpty()) &#123; return ApiResponse.ofStatus(Status.NOT_FOUND); &#125; return ApiResponse.ofSuccess(response.getSource());&#125; 6.6. å¤åˆæŸ¥è¯¢ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849/** * å¤åˆæŸ¥è¯¢ï¼Œæ ¹æ®ä¼ è¿›æ¥çš„æ¡ä»¶ï¼ŒæŸ¥è¯¢å…·ä½“å†…å®¹ * * @param name æ ¹æ®å§“ååŒ¹é… * @param country æ ¹æ®å›½ç±åŒ¹é… * @param gtAge å¤§äºŽå¹´é¾„ * @param ltAge å°äºŽå¹´é¾„ * @return æ»¡è¶³æ¡ä»¶çš„æ–‡æ¡£å†…å®¹ */@PostMapping("/person/query")public ApiResponse query(@RequestParam(value = "name", required = false) String name, @RequestParam(value = "country", required = false) String country, @RequestParam(value = "gt_age", defaultValue = "0") int gtAge, @RequestParam(value = "lt_age", required = false) Integer ltAge) &#123; BoolQueryBuilder boolQueryBuilder = QueryBuilders.boolQuery(); if (!Strings.isNullOrEmpty(name)) &#123; boolQueryBuilder.must(QueryBuilders.matchQuery("name", name)); &#125; if (!Strings.isNullOrEmpty(country)) &#123; boolQueryBuilder.must(QueryBuilders.matchQuery("country", country)); &#125; RangeQueryBuilder rangeQueryBuilder = QueryBuilders.rangeQuery("age").from(gtAge); if (ltAge != null &amp;&amp; ltAge &gt; 0) &#123; rangeQueryBuilder.to(ltAge); &#125; boolQueryBuilder.filter(rangeQueryBuilder); SearchRequestBuilder searchRequestBuilder = esClient.prepareSearch(INDEX) .setTypes(TYPE) .setSearchType(SearchType.DFS_QUERY_THEN_FETCH) .setQuery(boolQueryBuilder) .setFrom(0) .setSize(20); log.info("ã€queryã€‘:&#123;&#125;", searchRequestBuilder); SearchResponse searchResponse = searchRequestBuilder.get(); List&lt;Map&lt;String, Object&gt;&gt; result = Lists.newArrayList(); searchResponse.getHits().forEach(hit -&gt; &#123; result.add(hit.getSourceAsMap()); &#125;); return ApiResponse.ofSuccess(result);&#125; 6.8. æœç´¢å»ºè®®ï¼ˆæœ‰æ—¶é—´è¡¥å……ï¼‰ 6.7. èšåˆæŸ¥è¯¢ï¼ˆæœ‰æ—¶é—´è¡¥å……ï¼‰ 7. ç»“è¯­ ElasticSearch åœ¨çŽ°åœ¨æ˜¯ä¸€ä¸ªåº”ç”¨ååˆ†å¹¿æ³›ï¼Œä¸”ç«çƒ­çš„æŠ€æœ¯ï¼Œæœ¬æ–‡åªæ˜¯æˆ‘åœ¨å…¥é—¨ ES çš„ä¸€ç‚¹å°å°çš„è®°å½•ï¼Œæ›´å¤š ES çš„ä¸“ä¸šçŸ¥è¯†ï¼Œä¼˜åŒ–æŠ€å·§ï¼Œè¿˜éœ€è¦å¤§é‡çš„å­¦ä¹ ä¸Žå®žè·µï¼ æŽ¨èå­¦ä¹ åœ°å€ï¼š å®˜æ–¹æ–‡æ¡£ï¼šhttps://www.elastic.co/guide/en/elasticsearch/reference/current/getting-started.html Elastic ä¸­æ–‡ç¤¾åŒºï¼šhttps://elasticsearch.cn/]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>elasticsearch</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>elasticsearch</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é©¼å³°å‘½åå’Œä¸‹åˆ’çº¿å‘½åäº’ç›¸è½¬åŒ–]]></title>
    <url>%2F2018%2F01%2F11%2Fcamelcase-underline-transform.html</url>
    <content type="text"><![CDATA[12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758import java.util.regex.Matcher;import java.util.regex.Pattern;/** * &lt;p&gt; * é©¼å³°å‘½åå’Œä¸‹åˆ’çº¿å‘½åäº’è½¬ * &lt;/p&gt; * * @package: com.xkcoding * @descriptionï¼š é©¼å³°å‘½åå’Œä¸‹åˆ’çº¿å‘½åäº’è½¬ * @author: yangkai.shen * @date: Created in 2018/1/11 ä¸Šåˆ9:49 * @copyright: Copyright (c) 2018 * @version: 0.0.1 * @modified: yangkai.shen */public class CasesUtil &#123; private static final Pattern CAMELCASE_PATTERN = Pattern.compile("[A-Z]"); private static final Pattern UNDERLINE_PATTERN = Pattern.compile("_[a-z]"); private static final char UNDERLINE = '_'; /** * é©¼å³°å‘½åï¼ˆå½¢å¦‚ï¼šUserInfoï¼‰è½¬åŒ–ä¸ºä¸‹åˆ’çº¿å‘½åï¼ˆuser_infoï¼‰ * * @param camelCase é©¼å³°æ ¼å¼çš„å­—ç¬¦ä¸² * @return ä¸‹åˆ’çº¿å½¢å¼çš„å­—ç¬¦ä¸² */ public static String camelCase2UnderlineCase(String camelCase) &#123; Matcher matcher = CAMELCASE_PATTERN.matcher(camelCase); StringBuilder builder = new StringBuilder(camelCase); for (int i = 0; matcher.find(); i++) &#123; builder.replace(matcher.start() + i, matcher.end() + i, UNDERLINE + matcher.group().toLowerCase()); &#125; if (builder.charAt(0) == UNDERLINE) &#123; builder.deleteCharAt(0); &#125; return builder.toString(); &#125; /** * ä¸‹åˆ’çº¿å‘½åï¼ˆuser_infoï¼‰è½¬åŒ–ä¸ºé©¼å³°å‘½åï¼ˆå½¢å¦‚ï¼šuserInfoï¼‰ * * @param underlineCase ä¸‹åˆ’çº¿å½¢å¼çš„å­—ç¬¦ä¸² * @return é©¼å³°æ ¼å¼çš„å­—ç¬¦ä¸² */ public static String underlineCase2CamelCase(String underlineCase) &#123; Matcher matcher = UNDERLINE_PATTERN.matcher(underlineCase); StringBuilder builder = new StringBuilder(underlineCase); for (int i = 0; matcher.find(); i++) &#123; builder.replace(matcher.start() - i, matcher.end() - i, matcher.group().substring(1).toUpperCase()); &#125; if (Character.isUpperCase(builder.charAt(0))) &#123; builder.replace(0, 1, String.valueOf(Character.toLowerCase(builder.charAt(0)))); &#125; return builder.toString(); &#125;&#125;]]></content>
      <categories>
        <category>ä»£ç ç‰‡æ®µ</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>ä»£ç ç‰‡æ®µ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[DevOps ä¹‹ Jenkins å®‰è£…ã€é…ç½®ã€ç¾ŽåŒ–ã€æ’ä»¶åŠå¸¸è§é”™è¯¯å¤„ç†]]></title>
    <url>%2F2018%2F01%2F04%2Fdevops-jenkins.html</url>
    <content type="text"><![CDATA[ç»§ç»­ä¸Šä¸€ç¯‡çš„è¯é¢˜ï¼Œæ—¢ç„¶å·²ç»æ­å»ºäº† GitLab çš„ä»£ç ä»“åº“ï¼Œé‚£ä¹ˆçŽ°åœ¨å°±å¯ä»¥å¼€å§‹è¿›è¡Œä¸‹ä¸€æ­¥æŒç»­é›†æˆçŽ¯å¢ƒçš„æ­å»ºäº†ã€‚å…¬å¸å‡†å¤‡åˆ©ç”¨ Jenkins CI è¿›è¡ŒæŒç»­é›†æˆï¼Œæœ¬æ–‡è®°å½•äº† Jenkins çš„å®‰è£…ã€åŸºç¡€é…ç½®ã€ç•Œé¢ç¾ŽåŒ–ã€å¸¸ç”¨æ’ä»¶åŠå¸¸è§é”™è¯¯å¤„ç†ã€‚ 1. å®‰è£…Jenkins å‡†å¤‡å·¥ä½œ å®‰è£… JDKï¼Œå¹¶é…ç½®çŽ¯å¢ƒå˜é‡ å®‰è£… maven é…ç½®é˜¿é‡Œäº‘çš„ maven é•œåƒæºåœ°å€ï¼Œvim /usr/share/maven/conf/settings.xml å°†ðŸ‘‡å†…å®¹æ·»åŠ è¿› mirrors èŠ‚ç‚¹ 1234567&lt;mirror&gt; &lt;!--This sends everything else to /public --&gt; &lt;id&gt;nexus-aliyun&lt;/id&gt; &lt;mirrorOf&gt;*&lt;/mirrorOf&gt; &lt;name&gt;Nexus aliyun&lt;/name&gt; &lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public&lt;/url&gt;&lt;/mirror&gt; å®‰è£… git é…ç½®é•œåƒæºåœ°å€ 123sudo wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.reposudo rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io.keyyum install jenkins ä¿®æ”¹è®¿é—® IP å’Œ ç«¯å£å· vim /etc/sysconfig/jenkins JENKINS_PORT=&quot;10080&quot; é…ç½® JDK è·¯å¾„åˆ° Jenkins ä¸­ vim /etc/init.d/jenkins å°†è‡ªå·±çš„ java ç›®å½•åŠ å…¥åˆ° candidates é‡Œ 123456789candidates=&quot;/etc/alternatives/java/usr/lib/jvm/java-1.8.0/bin/java/usr/lib/jvm/jre-1.8.0/bin/java/usr/lib/jvm/java-1.7.0/bin/java/usr/lib/jvm/jre-1.7.0/bin/java/usr/bin/java/opt/jdk1.8.0_144/bin/java&quot; å®‰è£…å®Œæ¯•åŽå¯åŠ¨ 1sudo service jenkins start # å¯åŠ¨jenkinsæœåŠ¡ 2. é…ç½® Jenkins åˆå§‹åŒ–å¯†ç  cat /var/lib/jenkins/secrets/initialAdminPassword å®‰è£…æ’ä»¶ é€‰æ‹©å·¦ä¾§æŽ¨èçš„æ’ä»¶å®‰è£…å³å¯ é…ç½®ç®¡ç†å‘˜è´¦å·å¯†ç  é…ç½® JDKã€Mavenã€Gitã€Docker ç³»ç»Ÿç®¡ç† â†’ å…¨å±€å·¥å…·é…ç½®ï¼ˆå°½é‡åœ¨æœåŠ¡å™¨æœ¬åœ°å®‰è£…ï¼Œç„¶åŽè¾“å…¥å®‰è£…è·¯å¾„ï¼Œä¸æŽ¨èä½¿ç”¨åœ¨çº¿å®‰è£…ï¼Œå› ä¸ºåœ¨çº¿å®‰è£…æœ‰äº›èµ„æºéƒ½åœ¨å›½å¤–ï¼Œä¸‹è½½é€Ÿåº¦æžæ…¢ï¼‰ é…ç½®é‚®ä»¶æœåŠ¡å™¨ä¿¡æ¯ ç³»ç»Ÿç®¡ç† â†’ ç³»ç»Ÿè®¾ç½®ï¼Œâ‘ Jenkins Locationâ†’ç³»ç»Ÿç®¡ç†å‘˜é‚®ä»¶åœ°å€â‘¡Extended E-mail Notificationâ‘¢é‚®ä»¶é€šçŸ¥ã€‚ å…¶ä¸­Extended E-mail Notificationçš„ä¸¤ä¸ªåœ°æ–¹å¯ä»¥åšä¸ªæ€§åŒ–é…ç½®ï¼š Default Content Type é‚®ä»¶çš„å†…å®¹ç±»åž‹ï¼Œæ”¹ä¸ºHTML(text/html)ã€‚ Default Subject é‚®ä»¶çš„æ ‡é¢˜ï¼Œæ”¹ä¸ºæž„å»ºé€šçŸ¥ï¼š$PROJECT_NAME - Build # $BUILD_NUMBER - $BUILD_STATUS!ã€‚ Default Content é‚®ä»¶çš„å†…å®¹ï¼Œæ”¹ä¸ºðŸ‘‡å†…å®¹ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta charset="UTF-8"&gt;&lt;title&gt;$&#123;PROJECT_NAME&#125;-ç¬¬$&#123;BUILD_NUMBER&#125;æ¬¡æž„å»ºæ—¥å¿—&lt;/title&gt;&lt;/head&gt;&lt;body leftmargin="8" marginwidth="0" topmargin="8" marginheight="4" offset="0"&gt; &lt;table width="95%" cellpadding="0" cellspacing="0" style="font-size: 11pt; font-family: Tahoma, Arial, Helvetica, sans-serif"&gt; &lt;tr&gt; &lt;td&gt;(æœ¬é‚®ä»¶æ˜¯ç¨‹åºè‡ªåŠ¨ä¸‹å‘çš„ï¼Œè¯·å‹¿å›žå¤ï¼)&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;&lt;h2&gt; &lt;font color="#0000FF"&gt;æž„å»ºç»“æžœ - $&#123;BUILD_STATUS&#125;&lt;/font&gt; &lt;/h2&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;&lt;br /&gt; &lt;b&gt;&lt;font color="#0B610B"&gt;æž„å»ºä¿¡æ¯&lt;/font&gt;&lt;/b&gt; &lt;hr size="2" width="100%" align="center" /&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt; &lt;ul&gt; &lt;li&gt;é¡¹ç›®åç§°ï¼š $&#123;PROJECT_NAME&#125;&lt;/li&gt; &lt;li&gt;æž„å»ºç¼–å·ï¼š ç¬¬$&#123;BUILD_NUMBER&#125;æ¬¡æž„å»º&lt;/li&gt; &lt;li&gt;è§¦å‘åŽŸå› ï¼š $&#123;CAUSE&#125;&lt;/li&gt; &lt;li&gt;æž„å»ºæ—¥å¿—ï¼š &lt;a href="$&#123;BUILD_URL&#125;console"&gt;$&#123;BUILD_URL&#125;console&lt;/a&gt;&lt;/li&gt; &lt;li&gt;æž„å»ºUrlï¼š &lt;a href="$&#123;BUILD_URL&#125;"&gt;$&#123;BUILD_URL&#125;&lt;/a&gt;&lt;/li&gt; &lt;li&gt;å·¥ä½œç›®å½•ï¼š &lt;a href="$&#123;PROJECT_URL&#125;ws"&gt;$&#123;PROJECT_URL&#125;ws&lt;/a&gt;&lt;/li&gt; &lt;li&gt;é¡¹ç›®Urlï¼š &lt;a href="$&#123;PROJECT_URL&#125;"&gt;$&#123;PROJECT_URL&#125;&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;&lt;b&gt;&lt;font color="#0B610B"&gt;Changes Since Last Successful Build:&lt;/font&gt;&lt;/b&gt; &lt;hr size="2" width="100%" align="center" /&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt; &lt;ul&gt; &lt;li&gt;åŽ†å²å˜æ›´è®°å½• : &lt;a href="$&#123;PROJECT_URL&#125;changes"&gt;$&#123;PROJECT_URL&#125;changes&lt;/a&gt;&lt;/li&gt; &lt;/ul&gt; $&#123;CHANGES_SINCE_LAST_SUCCESS,reverse=true, format="Changes for Build #%n:&lt;br /&gt;%c&lt;br /&gt;",showPaths=true,changesFormat="&lt;pre&gt;[%a]&lt;br /&gt;%m&lt;/pre&gt;",pathFormat=" %p"&#125; &lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;&lt;b&gt;Test Informations&lt;/b&gt; &lt;hr size="2" width="100%" align="center" /&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;&lt;pre style="font-size: 11pt; font-family: Tahoma, Arial, Helvetica, sans-serif"&gt;Total:$&#123;TEST_COUNTS,var="total"&#125;,Pass:$&#123;TEST_COUNTS,var="pass"&#125;,Failed:$&#123;TEST_COUNTS,var="fail"&#125;,Skiped:$&#123;TEST_COUNTS,var="skip"&#125;&lt;/pre&gt; &lt;br /&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;&lt;b&gt;&lt;font color="#0B610B"&gt;æž„å»ºæ—¥å¿— (æœ€åŽ 100è¡Œ):&lt;/font&gt;&lt;/b&gt; &lt;hr size="2" width="100%" align="center" /&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;&lt;textarea cols="80" rows="30" readonly="readonly" style="font-family: Courier New"&gt;$&#123;BUILD_LOG, maxLines=100&#125;&lt;/textarea&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/table&gt;&lt;/body&gt;&lt;/html&gt; å‹¾é€‰ä¸Š Enable Debug Modeã€Require Administrator for Template Testingã€Enable watching for jobsã€Allow sending to unregistered users 3. ç¾ŽåŒ– Jenkins å®‰åˆ©ä¸€æ¬¾materialé£Žæ ¼çš„ä¸»é¢˜ï¼šhttp://afonsof.com/jenkins-material-theme/ ï¼Œæ”¯æŒä½¿ç”¨ CDNï¼Œä¹Ÿæ”¯æŒè‡ªå®šä¹‰å…¬å¸ logo ç­‰ç­‰ã€‚ 4. å¸¸ç”¨æ’ä»¶ Maven Integration pluginï¼šç”¨äºŽæž„å»º Maven é¡¹ç›® Gitlab Hook Pluginï¼šç”¨äºŽè§¦å‘ GitLab çš„ä¸€äº› WebHooks æ¥æž„å»ºé¡¹ç›® Simple Theme Pluginï¼šé…åˆä¸Šé¢çš„ç¾ŽåŒ– Jenkins ä½¿ç”¨ FireLine Pluginï¼šä»£ç è§„èŒƒæ£€æŸ¥ï¼Œå·²ç»é›†æˆäº†é˜¿é‡Œå·´å·´çš„ä»£ç è§„çº¦ï¼ˆP3Cï¼‰æ£€æŸ¥ HTML Publisher pluginï¼šå°†ä¸€äº›æµ‹è¯•ç»“æžœå˜æˆ HTML æ–‡æ¡£ JUnit Pluginï¼šJUnit æµ‹è¯• Checkstyle Plug-inï¼šæ£€æµ‹ä»£ç é£Žæ ¼ FindBugs Plug-inï¼šæ£€æµ‹æž„å»ºå‡ºæ¥çš„ class æ–‡ä»¶æ˜¯å¦å®‰å…¨ Static Analysis Collector Plug-inï¼šå¯¹7ã€8ä¸¤ä¸ªæ’ä»¶æ£€æµ‹å‡ºæ¥çš„ç»“æžœè¿›è¡Œæ±‡æ€» Extended E-mail Notificationï¼šä¸ªæ€§åŒ–é‚®ä»¶æ¨¡æ¿ Dingding[é’‰é’‰] Pluginï¼šé’‰é’‰é€šçŸ¥æ’ä»¶ 5. å¸¸è§é”™è¯¯è§£å†³ æ·»åŠ é•œåƒæºçš„æ—¶å€™å‡ºçŽ°å¦‚ä¸‹é”™è¯¯ï¼š 123Resolving pkg.jenkins-ci.org (pkg.jenkins-ci.org)... failed: Temporary failure in name resolution.wget: unable to resolve host address â€˜pkg.jenkins-ci.orgâ€™ è§£å†³æ–¹æ³•ï¼š vim /etc/resolv.conf æ·»åŠ ä¸€è¡Œ nameserver 8.8.8.8 HTML Publisher Plugin æ’ä»¶åœ¨æ–°çš„Jenkinsç‰ˆæœ¬ä¸­ï¼Œæ‰“å¼€ç”Ÿæˆçš„ç½‘é¡µä¸­æ— æ³•åŠ è½½CSSã€æ— æ³•ç‚¹å‡»æŒ‰é’®ç­‰æƒ…å†µï¼š ç”±äºŽ CSPï¼ˆContent Security Policyï¼‰æ‰€è‡´ï¼Œå¯åœ¨ ç³»ç»Ÿç®¡ç†â†’è„šæœ¬å‘½ä»¤è¡Œ ä¸­æ‰§è¡Œï¼š System.setProperty(&quot;hudson.model.DirectoryBrowserSupport.CSP&quot;,&quot;&quot;)]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>devops</tag>
        <tag>jenkins</tag>
        <tag>ci</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[DevOps ä¹‹ GitLab å®‰è£…ã€æ±‰åŒ–åŠå¸¸è§é”™è¯¯å¤„ç†]]></title>
    <url>%2F2018%2F01%2F03%2Fdevops-gitlab.html</url>
    <content type="text"><![CDATA[å…¬å¸çŽ°åœ¨å¼€å§‹å®žè¡Œ DevOps çš„å¼€å‘æ¨¡å¼ï¼Œä»£ç æ‰˜ç®¡é‡‡ç”¨äº† GitLab æ­å»ºç§æœ‰ä»£ç ä»“åº“ï¼Œæœ¬æ–‡è®°å½•äº† GitLab çš„å®‰è£…ã€æ±‰åŒ–åŠå¸¸è§é”™è¯¯å¤„ç†ã€‚ 1. å®‰è£…GitLab å‡†å¤‡å·¥ä½œ 12345678sudo yum install curl policycoreutils openssh-server openssh-clientssudo systemctl enable sshdsudo systemctl start sshdsudo yum install postfixsudo systemctl enable postfixsudo systemctl start postfixsudo firewall-cmd --permanent --add-service=httpsudo systemctl reload firewalld é…ç½®é•œåƒæºåœ°å€ 12curl -sS https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.rpm.sh | sudo bashsudo yum install gitlab-ce å®‰è£…å®Œæ¯•åŽæ‰§è¡Œæ³¨å†Œå¯åŠ¨ 1sudo gitlab-ctl reconfigure ä¿®æ”¹è®¿é—® IP å’Œ ç«¯å£å· vim /etc/gitlab/gitlab.rb ä¿®æ”¹ external_url ï¼Œæ¯”å¦‚ http://localhost:9080 é…ç½®é‚®ä»¶å‘é€æœåŠ¡ vim /etc/gitlab/gitlab.rb ä¿®æ”¹ä¸Ž email æœ‰å…³çš„é…ç½®é¡¹ 123456789101112131415161718192021222324252627## é‚®ç®±åŸºç¡€é…ç½®gitlab_rails[&apos;gitlab_email_enabled&apos;] = truegitlab_rails[&apos;gitlab_email_from&apos;] = &apos;237497819@qq.com&apos;gitlab_rails[&apos;gitlab_email_display_name&apos;] = &apos;237497819&apos;gitlab_rails[&apos;gitlab_email_reply_to&apos;] = &apos;237497819@qq.com&apos;gitlab_rails[&apos;gitlab_email_subject_suffix&apos;] = &apos;&apos;gitlab_rails[&apos;gitlab_default_can_create_group&apos;] = truegitlab_rails[&apos;gitlab_username_changing_enabled&apos;] = true## smtp é…ç½®gitlab_rails[&apos;smtp_enable&apos;] = truegitlab_rails[&apos;smtp_address&apos;] = &quot;smtp.qq.com&quot;gitlab_rails[&apos;smtp_port&apos;] = 25gitlab_rails[&apos;smtp_user_name&apos;] = &quot;237497819@qq.com&quot;gitlab_rails[&apos;smtp_password&apos;] = &quot;*********&quot;gitlab_rails[&apos;smtp_domain&apos;] = &quot;smtp.qq.com&quot;gitlab_rails[&apos;smtp_authentication&apos;] = &quot;login&quot;gitlab_rails[&apos;smtp_enable_starttls_auto&apos;] = truegitlab_rails[&apos;smtp_tls&apos;] = falsegitlab_rails[&apos;smtp_openssl_verify_mode&apos;] = &apos;none&apos;gitlab_rails[&apos;smtp_ca_path&apos;] = &quot;/etc/ssl/certs&quot;gitlab_rails[&apos;smtp_ca_file&apos;] = &quot;/etc/ssl/certs/ca-certificates.crt&quot;## ç”¨æˆ·é…ç½®user[&apos;git_user_email&apos;] = &quot;237497819@qq.com&quot; 2. æ±‰åŒ– GitLab æ³¨æ„ï¼šæ±‰åŒ–ä¹‹å‰æ˜¯å¿…é¡»è®¾ç½®rootå¯†ç ç™»å½•è¿‡çš„ï¼Œå¦åˆ™æœ‰äº›å¿…é¡»æ–‡ä»¶æ²¡æœ‰ç”Ÿæˆï¼Œæ±‰åŒ–ä¸æˆåŠŸã€‚ æ±‰åŒ–åŒ…ç‰ˆæœ¬é€‰æ‹©ï¼šversion â‰¤ 8.8ã€version &gt; 8.8 æŸ¥çœ‹å®‰è£…çš„ GitLab çš„ç‰ˆæœ¬ 12cat /opt/gitlab/embedded/service/gitlab-rails/VERSION10.3.2 åœæ­¢ GitLab æœåŠ¡ï¼šgitlab-ctl stop git clone https://gitlab.com/xhang/gitlab.git æ±‰åŒ–æ“ä½œï¼š 12cd gitlabyes|cp -rf ../gitlab/* /opt/gitlab/embedded/service/gitlab-rails/ é‡æ–°å¯åŠ¨æŸ¥çœ‹æ•ˆæžœï¼šgitlab-ctl start 3. æ—¥å¸¸ GitLab ç®¡ç† 1gitlab-ctl start|stop|status|restart 4. å¸¸è§é”™è¯¯è§£å†³ åœ¨å¸è½½ GitLab ç„¶åŽå†æ¬¡å®‰è£…æ‰§è¡Œ sudo gitlab-ctl reconfigure çš„æ—¶å€™å¾€å¾€ä¼šå‡ºçŽ°ï¼šruby_block[supervise_redis_sleep] action runï¼Œä¼šä¸€ç›´å¡æ— æ³•å¾€ä¸‹è¿›è¡Œã€‚ æŒ‰ä½ CTRL+C å¼ºåˆ¶ç»“æŸï¼› è¿è¡Œï¼šsudo systemctl restart gitlab-runsvdir å†æ¬¡æ‰§è¡Œï¼šsudo gitlab-ctl reconfigure gitlab-ctl reconfigure ä¹‹åŽï¼Œè®¿é—®æµè§ˆå™¨å‡ºçŽ°å¦‚ä¸‹é”™è¯¯ï¼šWhoops, GitLab is taking too much time to respond. ä½¿ç”¨ gitlab-ctl tail æŸ¥çœ‹å®Œæ•´çš„ gitlab-ctl reconfigure æ—¥å¿— æˆ‘å‡ºçŽ°è¿™ä¸ªçš„é”™è¯¯æ˜¯å› ä¸ºæ—¥å¿—ä¸­å‡ºçŽ°äº†ç«¯å£å ç”¨ 123==&gt; /var/log/gitlab/unicorn/unicorn_stderr.log &lt;==Errno::EADDRINUSE: Address already in use - bind(2) for 127.0.0.1:8080 vim /etc/gitlab/gitlab.rb åŽ»ä¿®æ”¹ unicorn çš„ url å’Œ port 12unicorn[&apos;listen&apos;] = &apos;127.0.0.1&apos;unicorn[&apos;port&apos;] = 8888 å†æ¬¡æ‰§è¡Œï¼šsudo gitlab-ctl reconfigure æœ‰æ—¶ä¹Ÿå¯èƒ½æ˜¯è¶…æ—¶å¼•èµ·çš„è¿™ä¸ªé”™è¯¯ï¼Œvim /etc/gitlab/gitlab.rb åŽ»ä¿®æ”¹ webhook_timeout 1234## unicorn è¿žæŽ¥è¶…æ—¶unicorn[&apos;worker_timeout&apos;] = 90## WebHook è¶…æ—¶æ—¶é—´gitlab_rails[&apos;webhook_timeout&apos;] = 60 5. é…ç½® push æ“ä½œæ—¶å‘é€ diff ä¿¡æ¯ç»™æŒ‡å®šäººé‚®ç®± åˆ›å»ºç”¨æˆ·çš„æ—¶å€™ï¼Œé‚®ç®±ä¿è¯æ­£ç¡®ã€‚ User Settings --&gt; Profile --&gt; Main Settings --&gt; email / public email é‡Œæ˜¯ä½ çš„é‚®ç®± User Settings --&gt; Emails ä¿è¯ç¬¬äºŒæ­¥é‡Œæ˜¾ç¤ºçš„ emailåœ¨è¿™é‡Œæ˜¯ verified çŠ¶æ€ User Settings --&gt; Notifications é‡Œ emailä¿è¯æ­£ç¡®ï¼Œé€‰æ‹© level ä¸ºç¬¬ä¸€ä¸ªï¼Œå¹¶å‹¾é€‰æŽ¥æ”¶é€šçŸ¥å¦‚ä¸‹å›¾ åˆ›å»ºä¸€ä¸ªé¡¹ç›® Settings --&gt; Integrations --&gt; email on pushï¼Œå…·ä½“å¦‚ä¸‹å›¾ â¤ï¸enjoy it ~~]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>devops</category>
      </categories>
      <tags>
        <tag>gitlab</tag>
        <tag>devops</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æå‡ JAVA ç¼–ç¨‹æŠ€èƒ½]]></title>
    <url>%2F2017%2F12%2F11%2Ftips-for-improve-java-skill.html</url>
    <content type="text"><![CDATA[ç¿»è¯‘è‡ªï¼š How to improve Java programming skill æ·±å…¥ç†è§£ OO æ€æƒ³ å¤šè¯» JAVA ç›¸å…³çš„ä¹¦ç± å¤šç»ƒä¹ ï¼Œåªæœ‰å¤šåŽ»å†™ä»£ç ï¼Œæ‰èƒ½æ›´æ‡‚ä»£ç  é˜…è¯»å…³é”®çš„ APIï¼ˆjava.lang.*ï¼Œjava.io.*ï¼Œjava.util.*ï¼‰çš„æºç  å¤„ç†é—®é¢˜ä¹‹å‰ï¼ŒèŠ±æ›´å¤šçš„æ—¶é—´åŽ»åˆ†æžé—®é¢˜ï¼Œè¿™å…¶å®žæ˜¯åœ¨èŠ‚çº¦æ—¶é—´ é€šè¿‡å¸®åŠ©ä»–äººæ¥æå‡è‡ªå·±å¯¹é—®é¢˜çš„ç†è§£ å°½é‡å†™ç®€å•ã€å®¹æ˜“ç†è§£çš„é€»è¾‘ä»£ç ï¼Œè€Œä¸æ˜¯é€šè¿‡å¤æ‚çš„ä»£ç æ¥å½°æ˜¾è‡ªå·±çš„ä»£ç å¤šä¹ˆç‰›é€¼ï¼Œå¥½çš„ä»£ç æœ¬èº«å°±æ˜¯æ–‡æ¡£ å¤šé˜…è¯»å¤§ç‰›çš„æŠ€æœ¯åšå®¢ ä¿æŒè·Ÿè¿›æ–°çš„ JAVA æŠ€æœ¯ï¼Œå¯ä»¥ä¸åŽ»ç²¾é€šï¼Œä½†æ˜¯ä½ ä¸èƒ½è½åŽ å¤šé˜…è¯»æ–‡æ¡£ ä¸è¦åŽ»å’Œä»–äººæ¯”è¾ƒï¼ˆæœ€åŽä¸€ç‚¹ï¼Œä½†å¹¶ä¸æ˜¯å…³é”®æ€§çš„ï¼‰ï¼Œæœ€å¤§çš„æ•Œäººæ°¸è¿œæ˜¯ä½ è‡ªå·±]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>ç¿»è¯‘</category>
      </categories>
      <tags>
        <tag>ç¿»è¯‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[redux å’Œ mobx åˆä½“éªŒ]]></title>
    <url>%2F2017%2F12%2F05%2Fredux-and-mobx-first.html</url>
    <content type="text"><![CDATA[å‰æ®µæ—¶é—´æžäº† Vueï¼ŒçŽ°åœ¨åˆå¾—å¼€å§‹å†™ React äº†ã€‚ æˆ‘å ‚å ‚çš„ä¸€ä¸ªåŽç«¯ï¼ŒçœŸæ˜¯å¤ªæ®‹å¿å•¦ o(â•¯â–¡â•°)o æŽ¥è§¦è¿‡ Vue çš„åº”è¯¥éƒ½çŸ¥é“ï¼ŒVue çš„çŠ¶æ€ç®¡ç†å¯ä»¥æœ‰ä¸¤ç§å®žçŽ°ï¼Œä¸€ç§æ˜¯ Vuexï¼Œè¿˜æœ‰ä¸€ç§æ˜¯ eventBus å½¢å¼ã€‚ React çŠ¶æ€ç®¡ç†ï¼Œè€ç‰Œçš„åº”è¯¥æ˜¯ Reduxï¼Œä½†æ˜¯å­˜åœ¨äº†å¤ªå¤šçš„æ¦‚å¿µï¼Œå¯¹äºŽåˆšæŽ¥è§¦çš„ç«¥éž‹ä¸å¤ªå‹å¥½ã€‚mobx å½“å±žæ—¶ä»£çš„æ–°æ˜Ÿäº†ã€‚ä¸ç®¡ä»Žæ•ˆçŽ‡ï¼Œè¿˜æ˜¯æ˜“è¯»æ€§éƒ½è¿œè¶… Reduxã€‚ ä¸‹é¢å¸¦æ¥ä¿©å°ðŸŒ°å¤§å®¶æ„Ÿå—ä¸‹~~ æœ€ç®€å•çš„ä¸€ä¸ª redux æ“ä½œ 123456789101112131415161718192021222324252627import &#123;createStore&#125; from 'redux';const ADD_ACTION = 'ADD';const add = (num) =&gt; &#123; return &#123; type: ADD_ACTION, num &#125;;&#125;;const initialState = &#123; count: 0&#125;;const reducers = (state = initialState, action) =&gt; &#123; switch (action.type) &#123; case ADD_ACTION: return Object.assign(&#123;&#125;, state, &#123;count: state.count + action.num&#125;); default: return state; &#125;&#125;;const reduxStore = createStore(reducers);reduxStore.dispatch(add(1)); æœ€ç®€å•çš„ä¸€ä¸ª mobx æ“ä½œ 12345678910import &#123;observable, action&#125; from 'mobx';const mobxStore = observable(&#123; count: 0, add: action((num) =&gt; &#123; this.count += num; &#125;)&#125;);mobxStore.add(1);]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>react</category>
      </categories>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Mac ä¸‹å½»åº•è§£å†³ mysql ä¸­æ–‡ä¹±ç é—®é¢˜]]></title>
    <url>%2F2017%2F11%2F14%2Fmysql-chinese-character-encoding.html</url>
    <content type="text"><![CDATA[æ•°æ®åº“ä¸­æ–‡ä¹±ç æ˜¯ä¸ªæ¯”è¾ƒå¸¸è§çš„é—®é¢˜ï¼Œä»Šå¤©ç¬”è€…å°±é‡åˆ°äº†ã€‚ ç³»ç»ŸçŽ¯å¢ƒï¼šmacOS Sierra 10.12.6MySQL ç‰ˆæœ¬ï¼š5.7.18 Homebrewè¿žæŽ¥è½¯ä»¶ï¼šNavicat Premium 12.0.12 TNT edition 1. MySQLç¨‹åºé—®é¢˜ 1234567891011121314151617181920#å¯åŠ¨mysql.server start#å…³é—­mysql.server stop#æ‰§è¡Œmysqlå‘½ä»¤mysql;#æŸ¥çœ‹ç¼–ç è®¾ç½®[ä¸‹é¢æ˜¾ç¤ºçš„æ˜¯å·²ç»è®¾ç½®å¥½çš„]mysql&gt; show variables like &apos;%char%&apos;;+--------------------------+--------------------------------------------------------+| Variable_name | Value |+--------------------------+--------------------------------------------------------+| character_set_client | utf8 || character_set_connection | utf8 || character_set_database | utf8 || character_set_filesystem | binary || character_set_results | utf8 || character_set_server | utf8 || character_set_system | utf8 || character_sets_dir | /usr/local/Cellar/mysql/5.7.18_1/share/mysql/charsets/ |+--------------------------+--------------------------------------------------------+ ä¸Žå®¢æˆ·ç«¯ï¼ˆç½‘é¡µæˆ–è½¯ä»¶ï¼šwebï¼ç»ˆç«¯ï¼æ•°æ®åº“ç®¡ç†å·¥å…·ï¼‰æœ‰å…³çš„ï¼š character_set_clientï¼šå¯¹å®¢æˆ·ç«¯çš„è¯·æ±‚å­—ç¬¦ä¸²è¿›è¡Œç¼–ç  character_set_connectionï¼šè¿žæŽ¥æœåŠ¡å™¨æ—¶çš„é»˜è®¤ç¼–ç ï¼Œä¾‹å¦‚navicatè¿žæŽ¥é˜¿é‡Œäº‘æœåŠ¡å™¨ character_set_resultsï¼šè¡¨ç¤ºå®¢æˆ·ç«¯æƒ³ä»¥å“ªç§ç¼–ç æŽ¥æ”¶æŸ¥è¯¢ç»“æžœ å¦‚æžœåŽä¸¤ä¸ªæ²¡æœ‰ç‰¹åˆ«æŒ‡å®šï¼Œåˆ™é»˜è®¤å’Œcharacter_set_clientæ˜¯ä¸€æ ·çš„ ä¸ŽæœåŠ¡å™¨ç«¯ï¼ˆå¢žåˆ æŸ¥æ”¹å‘½ä»¤ï¼‰æœ‰å…³çš„ï¼š character_set_serverï¼šæœåŠ¡å™¨ç¼–ç  character_set_databaseï¼šåˆ›å»ºæ•°æ®åº“æ—¶çš„é»˜è®¤ç¼–ç  å¦‚æžœåŽä¸€ä¸ªæ²¡æœ‰ç‰¹åˆ«æŒ‡å®šï¼Œåˆ™é»˜è®¤å’Œcharacter_set_serveræ˜¯ä¸€æ ·çš„ å…¶ä»–ï¼š character_set_filesystemï¼šä»¥äºŒè¿›åˆ¶æ–‡ä»¶è¿›è¡Œè®¾ç½®ï¼Œä¸å½±å“å­—ç¬¦æ˜¾ç¤º character_set_systemï¼šç”¨äºŽmysqlå­˜å‚¨æ ‡è¯†ç¬¦ï¼Œä¸€ç›´æ˜¯UTF8ï¼Œä¹Ÿä¸å½±å“å­—ç¬¦æ˜¾ç¤º å› æ­¤å¦‚æžœå­—ç¬¦ç¼–ç æœ‰å¼‚å¸¸ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨my.cnfä¸­å¯¹character_set_clientä¸Žcharacter_set_serverè¿›è¡Œè®¾ç½®å°±okäº†ã€‚ 12345#é»˜è®¤è·¯å¾„ä¸‹ï¼Œé…ç½®æ–‡ä»¶åŠ è½½çš„å…ˆåŽé¡ºåº/etc/my.cnf/etc/mysql/my.cnf/usr/local/etc/my.cnf~/.my.cnf ä½†æ˜¯æˆ‘çš„ç³»ç»Ÿæ˜¯é€šè¿‡ homebrew å®‰è£…çš„ MySQLï¼Œé»˜è®¤æƒ…å†µä¸‹æ²¡æœ‰ my.cnf æ–‡ä»¶ã€‚ 1cd /etc &amp;&amp; touch my.cnf ä½¿ç”¨ vi ç¼–è¾‘å™¨å°†ä¸‹é¢å†…å®¹å†™å…¥ /etc/my.cnf ã€‚ 1234[client]default-character-set=utf8[mysqld]character-set-server=utf8 ä¿å­˜é€€å‡ºï¼Œç„¶åŽåœæ­¢ MySQLï¼ˆmysql.server stopï¼‰ï¼Œå¹¶é‡æ–°å¯åŠ¨ MySQLï¼ˆmysql.server startï¼‰ï¼Œå¹¶ç”¨ä»¥ä¸‹å‘½ä»¤æ ¡éªŒå­—ç¬¦ç¼–ç ä¿¡æ¯ã€‚ 1234#æ‰§è¡Œmysqlå‘½ä»¤mysql -uroot -proot;#æŸ¥çœ‹ç¼–ç è®¾ç½®[ä¸‹é¢æ˜¾ç¤ºçš„æ˜¯å·²ç»è®¾ç½®å¥½çš„]mysql&gt; show variables like &apos;%char%&apos;; 2. MySQL æ•°æ®åº“æ•°æ®é—®é¢˜ å¦‚æžœæ˜¾ç¤ºçš„æ•°æ®æŸ¥è¯¢ç»“æžœè¿˜æ˜¯ä¹±ç ï¼Œå¯èƒ½å°±æ˜¯ä¹‹å‰åˆ›å»ºçš„æ•°æ®åº“æˆ–æ•°æ®è¡¨æœ‰é—®é¢˜äº†ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è¿›è¡Œæ£€æŸ¥ã€‚ æŸ¥è¯¢æ•°æ®åº“æ”¯æŒçš„æ‰€æœ‰å­—ç¬¦é›† 1show character set;æˆ–è€…show char set; æŸ¥çœ‹mysqlæœåŠ¡å™¨å½“å‰çŠ¶æ€ 1statusæˆ–è€…\s æŸ¥çœ‹æ•°æ®åº“ç¼–ç  1show create database dbname; æŸ¥çœ‹æ•°æ®è¡¨ç¼–ç  1show create table tablename\G; æŸ¥çœ‹æ•°æ®è¡¨å­—æ®µç¼–ç  1show full columns from tablename; å¦‚æžœå‘çŽ°ç¼–ç ä¸æ˜¯ UTF-8ï¼Œè¯·é‡æ–°åˆ›å»ºç›¸åº”çš„æ•°æ®åº“ï¼æ•°æ®è¡¨ï¼å­—æ®µ ã€‚ 3. Macç»ˆç«¯ï¼iTerm2è½¯ä»¶è®¾ç½® è¿™ä¸€ç§æƒ…å†µæ¯”è¾ƒå°‘è§ï¼Œå°±æ˜¯Macç»ˆç«¯ä¸æ”¯æŒæ˜¾ç¤ºä¸­æ–‡ï¼Œè¿™æ ·ä¹Ÿä¼šå¯¼è‡´ä¹±ç ã€‚ ä¸€æ–¹é¢å¯¹ç»ˆç«¯è½¯ä»¶å¦‚iterm2çš„è½¯ä»¶åå¥½è®¾ç½®è¿›è¡Œä¿®æ”¹ä¸ºutf-8ã€‚ å¦ä¸€æ–¹é¢å°±æ˜¯åœ¨ç»ˆç«¯æ‰§è¡Œä»¥ä¸‹è¯­å¥ï¼š 12LANG='zh_CN.UTF-8';export $LANG; 4. MySQL ç®¡ç†å·¥å…·â€”Navicat è½¯ä»¶è®¾ç½® ç¬”è€…è¿™æ¬¡é‡åˆ°çš„é—®é¢˜å°±å±žäºŽæœ€åŽä¸€ç§ï¼Œå‰é¢çš„æ•°æ®åº“é…ç½®ï¼ŒæŸ¥çœ‹çš„ç¼–ç éƒ½æ˜¯æ­£ç¡®çš„ï¼Œå¹¶ä¸”ä½¿ç”¨ç¨‹åºæŸ¥è¯¢å‡ºæ¥çš„ä¹Ÿæ²¡æœ‰ä¹±ç ï¼Œåå Navicat æ˜¾ç¤ºæ•°æ®è¡¨æ—¶ä¸­æ–‡ä¾¿ä¹±ç äº†ï¼Œé‚£ä¹ˆè¯·æ–°å»ºmysqlæœåŠ¡å™¨è¿žæŽ¥ï¼ŒEncodingé‚£ä¸€æ ä¸è¦é€‰æ‹©é»˜è®¤çš„ UTF-8ï¼Œé€‰æ‹©Autoå³å¯æ­£å¸¸æ˜¾ç¤ºä¸­æ–‡ã€‚ 5. å‚è€ƒ Macç³»ç»Ÿè§£å†³MySQLä¹±ç é—®é¢˜]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>Mac</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨ Druid åŠ é€Ÿ oracle çš„æŸ¥è¯¢]]></title>
    <url>%2F2017%2F11%2F10%2Fdruid-oracle-pscache.html</url>
    <content type="text"><![CDATA[##1. é—®é¢˜ æœ€è¿‘ï¼Œå…¬å¸çš„ web åº”ç”¨ï¼ŒæŸ¥è¯¢æ•°æ®æœ‰äº›æ…¢ï¼Œæ•°æ®åº“ä½¿ç”¨çš„æ˜¯ oracleï¼Œè¿žæŽ¥æ± é‡‡ç”¨äº†é˜¿é‡Œå·´å·´æ¸©å°‘å¼€æºçš„ Druid è¿žæŽ¥æ± ï¼ŒäºŽæ˜¯å¼€å§‹å¯»æ‰¾è§£å†³åŠžæ³•ã€‚ 2. æ–¹æ³• é¦–å…ˆæˆ‘ä»¬éœ€è¦åšçš„åº”è¯¥æ˜¯é€šè¿‡ Druid æ¥ç›‘æŽ§æˆ‘ä»¬åº”ç”¨ä¸­çš„æ…¢ SQLï¼Œç„¶åŽå¯¹å…¶è¿›è¡Œä¼˜åŒ–ã€‚ä»Ž SQL ç›‘æŽ§å’Œ SQL é˜²ç«å¢™ä¸­ï¼Œæˆ‘å‘çŽ°æˆ‘ä»¬çš„ SQL å¹¶æ²¡æœ‰å¤šå°‘æ…¢ SQLã€‚äºŽæ˜¯æŽ’é™¤äº†æ…¢ SQL å¯¼è‡´æŸ¥è¯¢å˜æ…¢çš„åŽŸå› ã€‚ Druid ä¸­æ”¯æŒé…ç½® PSCacheã€‚æˆ‘ä»¬çš„ web ç¨‹åºå¹¶æ²¡æœ‰å¼€å¯è¿™ä¸ªé€‰é¡¹ï¼Œæˆ‘ä»¬å°†å…¶å¼€å¯ï¼Œå‘çŽ°æŸ¥è¯¢è¿”å›žçš„ç»“æžœé€Ÿåº¦å¿«äº† 20% å·¦å³ã€‚ 3. åŽŸç† oracle æ”¯æŒæ¸¸æ ‡ï¼Œä¸€ä¸ª PreparedStatement å¯¹åº”æœåŠ¡å™¨ä¸€ä¸ªæ¸¸æ ‡ï¼Œå¦‚æžœ PreparedStatement è¢«ç¼“å­˜èµ·æ¥é‡å¤æ‰§è¡Œï¼ŒPreparedStatement æ²¡æœ‰è¢«å…³é—­ï¼ŒæœåŠ¡å™¨ç«¯çš„æ¸¸æ ‡å°±ä¸ä¼šè¢«å…³é—­ï¼Œæ€§èƒ½æé«˜éžå¸¸æ˜¾è‘—ã€‚åœ¨ç±»ä¼¼ SELECT * FROM T WHERE ID = ? è¿™æ ·çš„åœºæ™¯ï¼Œå¯ç”¨ PSCache å’Œä¸å¯ç”¨ PSCache çš„æ€§èƒ½å¯èƒ½æ˜¯ç›¸å·®ä¸€ä¸ªæ•°é‡çº§çš„ã€‚ è¿žæŽ¥ oracle æ•°æ®åº“ï¼Œæ‰“å¼€ PSCacheï¼Œä½†æ˜¯å…¶ä»–çš„æ•°æ®åº“è¿žæŽ¥æ± éƒ½ä¼šå­˜åœ¨å†…å­˜å ç”¨è¿‡å¤šçš„é—®é¢˜ï¼ŒDruid æ˜¯å”¯ä¸€è§£å†³è¿™ä¸ªé—®é¢˜çš„è¿žæŽ¥æ± ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>oracle</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[dubboå‰ç½®çŸ¥è¯†ï¼šdubbo-admin çš„å®‰è£…]]></title>
    <url>%2F2017%2F11%2F08%2Fdubbo-admin-install.html</url>
    <content type="text"><![CDATA[dubbo-admin æ˜¯ dubbo å®˜æ–¹æä¾›çš„ä¸€ä¸ªçš„ç®¡æŽ§å°ç¨‹åºï¼Œå¯ä»¥å¯¹ dubbo æœåŠ¡è¿›è¡Œç›‘æŽ§ï¼Œè¿˜å¯ä»¥å¯¹å…¶è¿›è¡Œæƒé‡åˆ†é…ã€è´Ÿè½½å‡è¡¡ç­–ç•¥ç­‰çš„è°ƒä¼˜æ“ä½œï¼Œç®€è€Œè¨€ä¹‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ dubbo-adminï¼Œå¯¹æˆ‘ä»¬çš„ dubbo æœåŠ¡è¿›è¡ŒæœåŠ¡æ²»ç†åŠæœåŠ¡ç›‘æŽ§ã€‚ çŽ°åœ¨ï¼Œæˆ‘ä»¬å¼€å§‹å®‰è£…åŠé…ç½® dubbo-adminã€‚ é¦–å…ˆå¯åŠ¨æˆ‘ä»¬ä¹‹å‰å®‰è£…äº† zookeeper é›†ç¾¤çš„ä¸‰å° Linux è™šæ‹Ÿæœºï¼Œå¹¶å°†è™šæ‹Ÿæœºçš„ zookeeper é›†ç¾¤å¯åŠ¨èµ·æ¥ã€‚ å‰å¾€ GitHub çš„ dubbo-ops ä»“åº“ åŽ» clone æœ€æ–°çš„ dubbo æºç ã€‚ 12# yangkai.shen @ localhost in ~/Documents/code/open [16:23:11]$ git clone https://github.com/apache/incubator-dubbo-ops.git è¿›å…¥ dubbo é¡¹ç›®æ–‡ä»¶å¤¹é‡Œçš„ dubbo-admin æ–‡ä»¶å¤¹ä¸­ã€‚ 12# yangkai.shen @ localhost in ~/Documents/code/open [16:24:05] C:1$ cd incubator-dubbo-ops ä½¿ç”¨ maven ç¼–è¯‘æ‰“åŒ…é¡¹ç›®ï¼Œç„¶åŽåœ¨ dubbo/dubbo-admin/target ç›®å½•ä¸­å¾—åˆ° dubbo-admin çš„ war åŒ…ç¨‹åºã€‚ 1234567891011121314151617181920# yangkai.shen @ localhost in ~/Documents/code/open/dubbo/dubbo-admin on git:master o [16:24:12]$ mvn package[INFO] Scanning for projects......çœç•¥ä¸­é—´ä¸€äº›æ—¥å¿—ä¿¡æ¯...[INFO] ------------------------------------------------------------------------[INFO] Reactor Summary:[INFO][INFO] dubbo-ops .......................................... SUCCESS [ 0.003 s][INFO] dubbo-admin ........................................ SUCCESS [ 3.612 s][INFO] dubbo-monitor-simple ............................... SUCCESS [ 2.491 s][INFO] dubbo-registry-simple .............................. SUCCESS [ 0.699 s][INFO] ------------------------------------------------------------------------[INFO] BUILD SUCCESS[INFO] ------------------------------------------------------------------------[INFO] Total time: 6.941 s[INFO] Finished at: 2018-04-17T18:37:09+08:00[INFO] Final Memory: 22M/301M[INFO] ------------------------------------------------------------------------ å‰å¾€ Apache çš„ Tomcat ä¸»é¡µï¼Œä¸‹è½½å¹¶è§£åŽ‹ä¸€ä¸ªæ–°çš„ Tomcat ç¨‹åºï¼Œä¸“é—¨ç”¨æ¥å¯åŠ¨ dubbo-admin ã€‚ æŽ¥ä¸‹æ¥æˆ‘ä»¬å¼€å§‹å¯¹ Tomcat ä»¥åŠ dubbo-admin åšä¸€äº›é…ç½®ã€‚ å¯ä»¥ç›´æŽ¥å°†æ‰“åŒ…å‡ºæ¥çš„ war æ–‡ä»¶æ”¾åœ¨ webapps ç›®å½•ä¸‹ï¼Œä½†æ˜¯ä¸ºäº†åŽé¢è®¿é—® URL çš„æ—¶å€™æ›´ç®€å•ï¼ˆå…¶å®žå°±æ˜¯æƒ³å·æ‡’ï¼‰å¯ä»¥å°†å…¶æ”¾å…¥ ROOT ä¸‹ï¼Œåˆ é™¤ webapps/ROOT ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œç„¶åŽå°† æ‰“åŒ…çš„ dubbo-admin.war ç¨‹åºè§£åŽ‹è‡³ webapps/ROOT ç›®å½•ä¸‹ï¼Œæ³¨æ„ä¸éœ€è¦ dubbo-admin è¿™ä¸ªç›®å½•ï¼Œåªè¦å°†é‡Œé¢çš„ WEB-INF è¿™çº§ç›®å½•åŠå…¶å­ç›®å½•çš„æ–‡ä»¶æ”¾ç½®åœ¨ webapps/ROOT ä¸­ã€‚ é…ç½® dubbo-admin çš„ä¸€äº›å¯åŠ¨é…ç½®ï¼Œé…ç½®æ–‡ä»¶æ˜¯ WEB-INF/dubbo.properties ï¼Œæˆ‘ä»¬éœ€è¦æŠŠä¹‹å‰çš„ zookeeper é›†ç¾¤åœ°å€é…ç½®ä¸Šã€‚ 12345678# zookeeper åœ°å€ï¼Œè¿™é‡Œæ˜¯é›†ç¾¤é…ç½®ï¼Œå¦‚æžœ zookeeper æ˜¯ standalone æ¨¡å¼ï¼Œé‚£ä¹ˆåˆ™ä¸éœ€è¦ ?backup=*** è¿™éƒ¨åˆ†å†…å®¹dubbo.registry.address=zookeeper://172.16.15.129:2181?backup=172.16.15.130:2181,172.16.15.131:2181# dubbo-admin ç¨‹åº root ç”¨æˆ·çš„å¯†ç dubbo.admin.root.password=root# dubbo-admin ç¨‹åº guest ç”¨æˆ·çš„å¯†ç dubbo.admin.guest.password=guest å› ä¸ºè€ƒè™‘åˆ°æˆ‘ä»¬è‡ªå·±å†™ç¨‹åºå¯èƒ½ä¼šå ç”¨8080ç«¯å£ï¼Œå› æ­¤æˆ‘ä»¬å¯¹è¿™ä¸ªä¸“é—¨ä¸º dubbo-admin çš„ Tomcat é‡æ–°é…ç½®ç«¯å£ï¼Œé…ç½®æ–‡ä»¶æ˜¯ tomcat/conf/server.xmlã€‚ ä¿®æ”¹ HTTP ç«¯å£ 12345678&lt;!--&lt;Connector port="8080" protocol="HTTP/1.1" connectionTimeout="20000" redirectPort="8443" /&gt;--&gt;&lt;Connector port="7777" protocol="HTTP/1.1" connectionTimeout="20000" redirectPort="8444" /&gt; ä¿®æ”¹ è¿œç¨‹åœæœåŠ¡ ç«¯å£ 1234&lt;!--&lt;Server port="8005" shutdown="SHUTDOWN"&gt;--&gt;&lt;Server port="8006" shutdown="SHUTDOWN"&gt; ä¿®æ”¹ AJP ç«¯å£ 1234&lt;!--&lt;Connector port="8009" protocol="AJP/1.3" redirectPort="8444" /&gt; --&gt;&lt;Connector port="8010" protocol="AJP/1.3" redirectPort="8444" /&gt; å› ä¸º dubbo-admin ç¨‹åºè¾ƒå¤§ï¼Œå› æ­¤éœ€è¦å¯¹ Tomcat åšä¸€äº›è°ƒä¼˜å‡†å¤‡ï¼Œ åœ¨ tomcat/bin/catalina.sh æ–‡ä»¶ä¸­çš„ç¬¬äºŒè¡ŒåŠ å…¥ JAVA_OPTS='-Xms256m -Xmx512m' ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ 123#!/bin/shJAVA_OPTS='-Xms256m -Xmx512m'# çœç•¥å‰©ä½™å†…å®¹ é…ç½®ã€è°ƒä¼˜ç»“æŸï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿è¡Œ tomcat/bin/start.sh æˆ–è€… tomcat/bin/start.batï¼Œå¯åŠ¨ Tomcat æŸ¥çœ‹æ•ˆæžœäº†ï¼Œå› ä¸ºçŽ°åœ¨åªæ˜¯æ­å»ºäº† dubbo-admin è¿˜æ²¡æœ‰ dubbo æœåŠ¡ï¼Œå› æ­¤æˆ‘ä»¬çŽ°åœ¨åªæµè§ˆé¦–é¡µå’Œä¸€äº›ç³»ç»Ÿé¡µé¢ã€‚ æµè§ˆå™¨è¾“å…¥ http://localhost:7777 å¼¹å‡ºéªŒè¯ä¿¡æ¯ã€‚ dubbo-admin é¦–é¡µ ç³»ç»ŸçŠ¶æ€ ç³»ç»Ÿæ—¥å¿— ç³»ç»ŸçŽ¯å¢ƒ]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>dubbo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[dubboå‰ç½®çŸ¥è¯†ï¼šzookeeperé›†ç¾¤æ­å»º]]></title>
    <url>%2F2017%2F11%2F01%2Fzookeeper-cluster.html</url>
    <content type="text"><![CDATA[æ‹–äº†ä¸€å¤©ä¸€å¤©åˆä¸€å¤©ï¼Œç»ˆäºŽåœ¨æ—¶éš”3æœˆä¹‹åŽï¼Œåˆè¿Žæ¥äº†ä¸€ç¯‡æ–°åšå®¢ã€‚çœŸçš„æ˜¯æ‡’ç™Œæ™šæœŸäº†ã€‚o(â•¯â–¡â•°)o dubbo æ¡†æž¶éœ€è¦å°†æœåŠ¡ç»Ÿä¸€æ³¨å†Œåˆ°ä¸€ä¸ªæ³¨å†Œä¸­å¿ƒï¼Œæ‰èƒ½è¢«è¿œç¨‹è°ƒç”¨ã€‚è¿™é‡Œæ³¨å†Œä¸­å¿ƒå¯ä»¥ä½¿ç”¨ zookeeper æˆ–è€… redisã€‚ è¿™é‡Œæˆ‘ä»¬ä»¥ zookeeper ä¸ºä¾‹ã€‚zookeeper å¯ä»¥å•æœºç‰ˆä¹Ÿå°±æ˜¯ standaloneæ¨¡å¼è¿è¡Œï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é›†ç¾¤æ–¹å¼è¿è¡Œã€‚ä¸ºäº†å®žçŽ°é«˜å¯ç”¨ï¼Œæœ¬ä¾‹é‡‡ç”¨é›†ç¾¤æ–¹å¼éƒ¨ç½²ï¼Œéœ€è¦ä¿è¯è‡³å°‘åŠæ•°ä»¥ä¸Šçš„æœºå™¨å­˜æ´»ï¼Œæ‰€ä»¥è‡³å°‘ä¸º3å°æœºå™¨ã€‚è¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬å¼€å§‹ zookeeper é›†ç¾¤çš„æ­å»ºå§ï¼š å®˜ç½‘ä¸‹è½½ zookeeper-3.4.10.tar.gz ï¼Œå°†è½¯ä»¶åŒ…åˆ†åˆ«æ”¾åœ¨ä¸‰å° Linux è™šæ‹Ÿæœºçš„ /software ç›®å½•ä¸‹ã€‚ è¿›å…¥ software ç›®å½•ä¸‹ï¼Œè§£åŽ‹è½¯ä»¶åŒ…ã€‚ 123456[root@localhost ~]# cd /software [root@localhost software]# tar -zxvf zookeeper-3.4.10.tar.gz[root@localhost software]# ll total 34228 drwxr-xr-x. 10 1001 1001 4096 Mar 23 2017 zookeeper-3.4.10 -rw-r--r--. 1 root root 35042811 Nov 1 14:58 zookeeper-3.4.10.tar.gz è§£åŽ‹åŽçš„æ–‡ä»¶å¤¹åå­—åŒ…å«äº†ç‰ˆæœ¬å·ï¼Œæˆ‘ä»¬å°†å…¶åˆ é™¤ã€‚ 12345[root@localhost software]# mv zookeeper-3.4.10 zookeeper [root@localhost software]# ll total 34228 drwxr-xr-x. 10 1001 1001 4096 Mar 23 2017 zookeeper -rw-r--r--. 1 root root 35042811 Nov 1 14:58 zookeeper-3.4.10.tar.gz è¿›å…¥åˆšè§£åŽ‹çš„ zookeeper çš„ç›®å½•ä¸­ 12345678910111213141516171819202122[root@bogon software]# cd zookeeper/ [root@bogon zookeeper]# ll total 1580 drwxr-xr-x. 2 1001 1001 4096 Mar 23 2017 bin -rw-rw-r--. 1 1001 1001 84725 Mar 23 2017 build.xml drwxr-xr-x. 2 1001 1001 74 Mar 23 2017 conf drwxr-xr-x. 10 1001 1001 4096 Mar 23 2017 contrib drwxr-xr-x. 2 1001 1001 4096 Mar 23 2017 dist-maven drwxr-xr-x. 6 1001 1001 4096 Mar 23 2017 docs -rw-rw-r--. 1 1001 1001 1709 Mar 23 2017 ivysettings.xml -rw-rw-r--. 1 1001 1001 5691 Mar 23 2017 ivy.xml drwxr-xr-x. 4 1001 1001 4096 Mar 23 2017 lib -rw-rw-r--. 1 1001 1001 11938 Mar 23 2017 LICENSE.txt -rw-rw-r--. 1 1001 1001 3132 Mar 23 2017 NOTICE.txt -rw-rw-r--. 1 1001 1001 1770 Mar 23 2017 README_packaging.txt -rw-rw-r--. 1 1001 1001 1585 Mar 23 2017 README.txt drwxr-xr-x. 5 1001 1001 44 Mar 23 2017 recipes drwxr-xr-x. 8 1001 1001 4096 Mar 23 2017 src -rw-rw-r--. 1 1001 1001 1456729 Mar 23 2017 zookeeper-3.4.10.jar -rw-rw-r--. 1 1001 1001 819 Mar 23 2017 zookeeper-3.4.10.jar.asc -rw-rw-r--. 1 1001 1001 33 Mar 23 2017 zookeeper-3.4.10.jar.md5 -rw-rw-r--. 1 1001 1001 41 Mar 23 2017 zookeeper-3.4.10.jar.sha1 è§£é‡Šä¸€ä¸‹ï¼Œå‡ ä¸ªå¸¸è§ç›®å½•é‡Œçš„å†…å®¹ï¼š bin ç›®å½•é‡Œå­˜æ”¾çš„æ˜¯ä¸€äº›å¯æ‰§è¡Œæ–‡ä»¶ï¼ŒåŸºæœ¬ä»¥ *.bat å’Œ *.sh ç»“å°¾çš„æ–‡ä»¶ã€‚ conf ç›®å½•é‡Œå­˜æ”¾çš„æ˜¯é¡¹ç›®ï¼ˆè½¯ä»¶ï¼‰è¿è¡Œæ—¶çš„ä¸€äº›é…ç½®æ–‡ä»¶ã€‚ contrib ç›®å½•å­˜æ”¾çš„å†…å®¹å®˜æ–¹æœªæä¾›çš„ä¸€äº›é™„åŠ è½¯ä»¶ã€‚ dist-maven ç›®å½•å­˜æ”¾çš„æ˜¯ zookeeper ä½¿ç”¨ maven ç¼–è¯‘ä¹‹åŽçš„æºç å’Œ jaræ–‡ä»¶ docs ç›®å½•é‡Œå­˜æ”¾çš„æ˜¯ä¸€äº›æ–‡æ¡£ lib ç›®å½•é‡Œå­˜æ”¾çš„æ˜¯ä¾èµ–åº“ recipes ç›®å½•ä¸‹å­˜æ”¾çš„æ˜¯ä½¿ç”¨ zookeeper å®žçŽ°çš„åˆ†å¸ƒå¼é”ã€é«˜å¹¶å‘ã€é˜Ÿåˆ—çš„ä¸€äº›æ–¹æ¡ˆ src ç›®å½•é‡Œå­˜æ”¾çš„æ˜¯æºç æ–‡ä»¶ åœ¨ conf æ–‡ä»¶å¤¹é‡Œå¯¹ zookeeper è¿›è¡Œé…ç½®ï¼Œå°†ç¤ºä¾‹é…ç½®æ–‡ä»¶å¤åˆ¶å¹¶æ”¹å 1234567891011121314[root@bogon software]# cd zookeeper/conf/ [root@bogon conf]# ll total 12 -rw-rw-r--. 1 1001 1001 535 Mar 23 2017 configuration.xsl -rw-rw-r--. 1 1001 1001 2161 Mar 23 2017 log4j.properties -rw-rw-r--. 1 1001 1001 922 Mar 23 2017 zoo_sample.cfg[root@bogon conf]# cp zoo_sample.cfg zoo.cfg [root@bogon conf]# ll total 16 -rw-rw-r--. 1 1001 1001 535 Mar 23 2017 configuration.xsl -rw-rw-r--. 1 1001 1001 2161 Mar 23 2017 log4j.properties -rw-r--r--. 1 root root 922 Nov 2 14:40 zoo.cfg -rw-rw-r--. 1 1001 1001 922 Mar 23 2017 zoo_sample.cfg[root@bogon conf]# vim zoo.cfg ç„¶åŽåœ¨ zoo.cfg é‡ŒåŠ ä¸Šä¸€äº›é…ç½® 1234567891011121314151617181920212223242526272829303132333435363738tickTime=2000 # The number of ticks that the initial # synchronization phase can take initLimit=10 # The number of ticks that can pass between # sending a request and getting an acknowledgement syncLimit=5 # the directory where the snapshot is stored. # do not use /tmp for storage, /tmp here is just # example sakes. ################ ä¿®æ”¹çš„åœ°æ–¹1 ################ # dataDir=/tmp/zookeeper# å°†åŽŸå…ˆçš„ dataDir æ³¨é‡Šï¼Œå¹¶ä¿®æ”¹æˆè‡ªå®šä¹‰çš„è·¯å¾„ dataDir=/software/zookeeper/data # the port at which the clients will connect clientPort=2181 # the maximum number of client connections. # increase this if you need to handle more clients #maxClientCnxns=60 # # Be sure to read the maintenance section of the # administrator guide before turning on autopurge. # # http://zookeeper.apache.org/doc/current/zookeeperAdmin.html#sc_maintenance # # The number of snapshots to retain in dataDir #autopurge.snapRetainCount=3 # Purge task interval in hours # Set to "0" to disable auto purge feature #autopurge.purgeInterval=1 ################ ä¿®æ”¹çš„åœ°æ–¹2 ################ # åœ¨æ–‡ä»¶çš„æœ«å°¾åŠ ä¸Š server.0=172.16.15.129:2888:3888 server.1=172.16.15.130:2888:3888 server.2=172.16.15.131:2888:3888 æ–°å»ºé…ç½®æ–‡ä»¶ä¸­çš„ dataDir é…ç½®çš„ç›®å½• 123456789101112131415161718192021222324[root@bogon conf]# cd ../ [root@bogon zookeeper]# mkdir data [root@bogon zookeeper]# ll total 1580 drwxr-xr-x. 2 1001 1001 4096 Mar 23 2017 bin -rw-rw-r--. 1 1001 1001 84725 Mar 23 2017 build.xml drwxr-xr-x. 2 1001 1001 88 Nov 2 14:57 conf drwxr-xr-x. 10 1001 1001 4096 Mar 23 2017 contrib drwxr-xr-x. 2 root root 6 Nov 2 14:58 data drwxr-xr-x. 2 1001 1001 4096 Mar 23 2017 dist-maven drwxr-xr-x. 6 1001 1001 4096 Mar 23 2017 docs -rw-rw-r--. 1 1001 1001 1709 Mar 23 2017 ivysettings.xml -rw-rw-r--. 1 1001 1001 5691 Mar 23 2017 ivy.xml drwxr-xr-x. 4 1001 1001 4096 Mar 23 2017 lib -rw-rw-r--. 1 1001 1001 11938 Mar 23 2017 LICENSE.txt -rw-rw-r--. 1 1001 1001 3132 Mar 23 2017 NOTICE.txt -rw-rw-r--. 1 1001 1001 1770 Mar 23 2017 README_packaging.txt -rw-rw-r--. 1 1001 1001 1585 Mar 23 2017 README.txt drwxr-xr-x. 5 1001 1001 44 Mar 23 2017 recipes drwxr-xr-x. 8 1001 1001 4096 Mar 23 2017 src -rw-rw-r--. 1 1001 1001 1456729 Mar 23 2017 zookeeper-3.4.10.jar -rw-rw-r--. 1 1001 1001 819 Mar 23 2017 zookeeper-3.4.10.jar.asc -rw-rw-r--. 1 1001 1001 33 Mar 23 2017 zookeeper-3.4.10.jar.md5 -rw-rw-r--. 1 1001 1001 41 Mar 23 2017 zookeeper-3.4.10.jar.sha1 åœ¨ data ç›®å½•ä¸­æ–°å»ºä¸€ä¸ª myid æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­çš„å†…å®¹å­˜æ”¾é…ç½®æ–‡ä»¶ä¸­å¯¹åº” IP çš„ serverIdã€‚ 1234[root@bogon zookeeper]# cd data [root@bogon data]# vim myid[root@bogon data]# cat myid 0 å°† zookeeper çš„ç›®å½•é…ç½®åœ¨ Linux ç³»ç»Ÿçš„çŽ¯å¢ƒå˜é‡ä¸­ 1[root@bogon data]# vim /etc/profile åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ  12export ZOOKEEPER_HOME=/software/zookeeperexport PATH=$ZOOKEEPER_HOME/bin:$PATH ç„¶åŽè®©çŽ¯å¢ƒå˜é‡ç”Ÿæ•ˆ 1[root@bogon data]# source /etc/profile å°†å¦å¤–ä¸¤å°è™šæ‹Ÿæœºä¹ŸæŒ‰ç…§ 2-7 çš„æ­¥éª¤é…ç½®ï¼Œæ³¨æ„ç¬¬6æ­¥çš„ myid æ–‡ä»¶é‡Œå­˜æ”¾çš„å†…å®¹ï¼Œåº”è¯¥ä¸Ž zoo.cfg é…ç½®æ–‡ä»¶æœ«å°¾çš„ server.n=ip:2888:3888 çš„ n å¯¹åº” é…ç½®å®ŒçŽ¯å¢ƒå˜é‡ä¹‹åŽï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¸éœ€è¦åˆ° bin ç›®å½•ä¸‹ï¼Œç›´æŽ¥åœ¨ä»»æ„ç›®å½•ä¸‹æ‰§è¡Œ zookeeper ä¸­ bin ç›®å½•ä¸‹çš„æ–‡ä»¶äº†ã€‚ zkServer.sh status ï¼šæŸ¥çœ‹ zookeeper çš„çŠ¶æ€ zkServer.sh start ï¼šå¯åŠ¨ zookeeper zkServer.sh stop ï¼šå…³é—­ zookeeper åˆ†åˆ«æŸ¥çœ‹å„ä¸ªè™šæ‹Ÿæœºçš„å¯åŠ¨æƒ…å†µï¼Œä»¥åŠå¯åŠ¨åŽçš„çŠ¶æ€ã€‚ è™šæ‹Ÿæœº1ï¼š(follower) 123456789101112[root@bogon software]# zkServer.sh status ZooKeeper JMX enabled by default Using config: /software/zookeeper/bin/../conf/zoo.cfg Error contacting service. It is probably not running. [root@bogon software]# zkServer.sh start ZooKeeper JMX enabled by default Using config: /software/zookeeper/bin/../conf/zoo.cfg Starting zookeeper ... STARTED [root@bogon software]# zkServer.sh status ZooKeeper JMX enabled by default Using config: /software/zookeeper/bin/../conf/zoo.cfg Mode: follower è™šæ‹Ÿæœº2ï¼š(leader) 123456789101112[root@bogon ~]# zkServer.sh status ZooKeeper JMX enabled by default Using config: /software/zookeeper/bin/../conf/zoo.cfg Error contacting service. It is probably not running. [root@bogon ~]# zkServer.sh start ZooKeeper JMX enabled by default Using config: /software/zookeeper/bin/../conf/zoo.cfg Starting zookeeper ... STARTED [root@bogon ~]# zkServer.sh status ZooKeeper JMX enabled by default Using config: /software/zookeeper/bin/../conf/zoo.cfg Mode: leader è™šæ‹Ÿæœº3ï¼š(follower) 123456789101112[root@bogon ~]# zkServer.sh status ZooKeeper JMX enabled by default Using config: /software/zookeeper/bin/../conf/zoo.cfg Error contacting service. It is probably not running. [root@bogon ~]# zkServer.sh start ZooKeeper JMX enabled by default Using config: /software/zookeeper/bin/../conf/zoo.cfg Starting zookeeper ... STARTED [root@bogon ~]# zkServer.sh status ZooKeeper JMX enabled by default Using config: /software/zookeeper/bin/../conf/zoo.cfg Mode: follower è‡³æ­¤ï¼Œzookeeper é›†ç¾¤çš„ç®€å•æ­å»ºå·²ç»æ­£å¼ç»“æŸäº†ã€‚å½“ç„¶è¿˜æœ‰ä¸€äº›ä¸ªæ€§åŒ–ï¼ˆè°ƒä¼˜ï¼‰çš„é…ç½®å‚æ•°ï¼Œè¯·è‡ªè¡Œå‚ç…§ zookeeper çš„å®˜æ–¹æ–‡æ¡£ åœ¨ zoo.cfg ä¸­é…ç½®ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>zookeeper</tag>
        <tag>dubbo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[mysqlå¯åŠ¨æŠ¥é”™é—®é¢˜]]></title>
    <url>%2F2017%2F08%2F31%2Fmysql-start-error.html</url>
    <content type="text"><![CDATA[ä»Šå¤©å…¬å¸ windows æœåŠ¡å™¨ MySQL æ•°æ®åº“å¯åŠ¨å¼‚å¸¸ï¼Œè®°å½•ä¸‹åŽŸå› ã€‚ 1. é—®é¢˜é‡çŽ° æ‰§è¡Œ net start mysql çš„æ—¶å€™å‡ºçŽ°å¦‚ä¸‹é”™è¯¯ï¼š 123ç³»ç»Ÿå‡ºé”™å‘ç”Ÿç³»ç»Ÿé”™è¯¯ 1067è¿›ç¨‹æ„å¤–ç»ˆæ­¢ 2. æŽ’æŸ¥é—®é¢˜ æŸ¥é˜…èµ„æ–™ï¼Œæ™®éçš„è§£å†³æ–¹æ³•æ˜¯ï¼Œmy.ini æ–‡ä»¶ä¸­éœ€è¦å­˜åœ¨ basedir å’Œ datadir è¿™ä¸¤ä¸ªé…ç½® ä½†æ˜¯æˆ‘çš„ my.ini åŽŸæœ¬å°±å·²ç»åŠ å…¥äº†è¿™ä¸¤ä¸ªé…ç½®ï¼Œä»ç„¶å¯åŠ¨é”™è¯¯ã€‚ æŽ’æŸ¥åŽŸå› ï¼Œå‘çŽ°æ˜¯ mysql çš„ 3306 ç«¯å£è¢«IEXPLORE.exeå ç”¨äº† 1234# windows ä¸‹æŸ¥çœ‹ç«¯å£å ç”¨netstat -aon|findstr "3306"# windows ä¸‹æ ¹æ® id æŸ¥çœ‹å¯¹åº”ç¨‹åºtasklist|findstr "2016" 3. è§£å†³é—®é¢˜ æ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨ï¼Œ IEXPLORE.exe çš„ç¨‹åºæ€æ­»ï¼Œé‡æ–° net start mysql MySQL å°±æ„‰å¿«çš„é‡æ–°å¯åŠ¨äº†ã€‚]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è‡ªå®šä¹‰é˜»å¡žé˜Ÿåˆ—]]></title>
    <url>%2F2017%2F08%2F02%2Fcustomize-blocked-queue.html</url>
    <content type="text"><![CDATA[ä»Šå¤©é‡æ¸©äº†ä¸‹ java å¤šçº¿ç¨‹ä¸­çš„ notify() æ–¹æ³•ä»¥åŠ wait() æ–¹æ³•ï¼Œä¸€æ—¶å…´èµ·ï¼Œå†³å®šé€šè¿‡è¿™ä¿©ä¸ªæ–¹æ³•ï¼Œå®žçŽ°ä¸€ä¸ªç®€æ˜“çš„è‡ªå®šä¹‰é˜»å¡žé˜Ÿåˆ—ã€‚ é˜»å¡žé˜Ÿåˆ—æ˜¯ä»€ä¹ˆï¼Œä¸Žæ™®é€šé˜Ÿåˆ—çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ é˜»å¡žé˜Ÿåˆ—ä¸Žæ™®é€šé˜Ÿåˆ—çš„åŒºåˆ«åœ¨äºŽï¼Œå½“é˜Ÿåˆ—æ˜¯ç©ºçš„æ—¶ï¼Œä»Žé˜Ÿåˆ—ä¸­èŽ·å–å…ƒç´ çš„æ“ä½œå°†ä¼šè¢«é˜»å¡žï¼Œæˆ–è€…å½“é˜Ÿåˆ—æ˜¯æ»¡æ—¶ï¼Œå¾€é˜Ÿåˆ—é‡Œæ·»åŠ å…ƒç´ çš„æ“ä½œä¼šè¢«é˜»å¡žã€‚è¯•å›¾ä»Žç©ºçš„é˜»å¡žé˜Ÿåˆ—ä¸­èŽ·å–å…ƒç´ çš„çº¿ç¨‹å°†ä¼šè¢«é˜»å¡žï¼Œç›´åˆ°å…¶ä»–çš„çº¿ç¨‹å¾€ç©ºçš„é˜Ÿåˆ—æ’å…¥æ–°çš„å…ƒç´ ã€‚åŒæ ·ï¼Œè¯•å›¾å¾€å·²æ»¡çš„é˜»å¡žé˜Ÿåˆ—ä¸­æ·»åŠ æ–°å…ƒç´ çš„çº¿ç¨‹åŒæ ·ä¹Ÿä¼šè¢«é˜»å¡žï¼Œç›´åˆ°å…¶ä»–çš„çº¿ç¨‹ä½¿é˜Ÿåˆ—é‡æ–°å˜å¾—ç©ºé—²èµ·æ¥ã€‚ æ–°å»ºä¸€ä¸ª MyQueue.java ç±» 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788import java.util.LinkedList;import java.util.concurrent.atomic.AtomicInteger;import com.xiaoleilu.hutool.util.StrUtil;/** * ä½¿ç”¨ notify() å’Œ wait() å®žçŽ°è‡ªå®šä¹‰é˜»å¡žé˜Ÿåˆ— * * @author Yangkai.Shen * @version 1.0 * @date 2017.08.02 at 11:51:14 */public class MyQueue &#123; // 1. æ‰¿è½½æ•°æ®çš„å®¹å™¨ private LinkedList&lt;Object&gt; queue = new LinkedList&lt;Object&gt;(); // 2. è®¡æ•°å™¨ï¼Œç”¨äºŽåˆ¤å®šè¾¹ç•Œ private AtomicInteger count = new AtomicInteger(0); private final int minSize = 0; // 3. åˆå§‹åŒ–ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨äºŽåŠ é” private final Object lock = new Object(); private final int maxSize; public MyQueue(int maxSize) &#123; this.maxSize = maxSize; &#125; /** * æ·»åŠ ä¸€ä¸ªå…ƒç´ åˆ°é˜Ÿåˆ—ä¸­ï¼Œå¦‚æžœé˜Ÿåˆ—å…ƒç´ å·²æ»¡ï¼Œåˆ™è°ƒç”¨æ­¤æ–¹æ³•çš„çº¿ç¨‹è¢«é˜»å¡žï¼Œç›´åˆ°å­˜åœ¨å¤šä½™ç©ºé—´äº†ï¼Œå†è¿›è¡Œæ·»åŠ  * * @param obj æ·»åŠ  obj åˆ°é˜Ÿåˆ—å°¾éƒ¨ */ public void put(Object obj) &#123; synchronized (lock) &#123; // 1.æ²¡æœ‰å¤šä½™ç©ºé—´ï¼Œå°±é˜»å¡žçº¿ç¨‹ while (count.get() == this.maxSize) &#123; try &#123; lock.wait(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; // 2.æ·»åŠ å…ƒç´  queue.add(obj); // 3.è®¡æ•°å™¨ç´¯åŠ  count.incrementAndGet(); System.out.println(StrUtil.format("æ–°åŠ å…¥çš„å…ƒç´ ä¸ºï¼š&#123;&#125;", obj)); // 4.å”¤é†’å…¶ä»–çº¿ç¨‹ï¼ˆè‹¥æœ¬æ¥å…ƒç´ ä¸ºç©ºï¼Œæœ‰çº¿ç¨‹è°ƒç”¨ get æ–¹æ³•ï¼Œé‚£ä¹ˆåŽŸæœ¬è¢«é˜»å¡žçš„ï¼Œéœ€è¦åœ¨æ­¤æ—¶è¢«å”¤é†’ï¼‰ lock.notify(); &#125; &#125; /** * èŽ·å–ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æžœé˜Ÿåˆ—å…ƒç´ ä¸ºç©ºï¼Œåˆ™è°ƒç”¨æ­¤æ–¹æ³•çš„çº¿ç¨‹è¢«é˜»å¡žï¼Œç›´åˆ°æ·»åŠ æ–°å…ƒç´ äº†ï¼Œå†è¿›è¡ŒèŽ·å– * * @return è¿”å›žé˜Ÿåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´  */ public Object get() &#123; Object ret = null; synchronized (lock) &#123; // 1.æ²¡æœ‰å…ƒç´ ï¼Œå°±é˜»å¡žçº¿ç¨‹ while (count.get() == this.minSize) &#123; try &#123; lock.wait(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; // 2.å–ç¬¬ä¸€ä¸ªå…ƒç´  ret = queue.removeFirst(); // 3.è®¡æ•°å™¨é€’å‡ count.decrementAndGet(); System.out.println(StrUtil.format("ç§»é™¤çš„å…ƒç´ ä¸ºï¼š&#123;&#125;", ret)); // 4.å”¤é†’å…¶ä»–çº¿ç¨‹ï¼ˆè‹¥å…ƒç´ æœ¬æ¥å·²æ»¡ï¼Œæœ‰çº¿ç¨‹è°ƒç”¨ put æ–¹æ³•ï¼Œé‚£ä¹ˆåŽŸæœ¬è¢«é˜»å¡žçš„ï¼Œéœ€è¦åœ¨æ­¤æ—¶è¢«å”¤é†’ï¼‰ lock.notify(); &#125; return ret; &#125; public int getSize() &#123; return this.count.get(); &#125;&#125; æ–°å»ºä¸€ä¸ªæµ‹è¯•ç±» MyQueueTest.javaï¼Œæµ‹è¯•ç±»ä¸­ï¼Œæˆ‘ä»¬åˆå§‹åŒ–ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå¹¶å°†å…ƒç´ å¡«æ»¡ï¼Œç„¶åŽå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ t1ï¼ŒåŽ»æ’å…¥æ•°æ®ï¼Œä¸­é—´ä¼‘çœ 2sï¼Œå†åŽ»å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ t2 å–æ•°æ®ã€‚ 1234567891011121314151617181920import com.xiaoleilu.hutool.util.StrUtil;import java.util.concurrent.TimeUnit;public class MyQueueTest &#123; public static void main(String[] args) &#123; final MyQueue queue = new MyQueue(5); queue.put("a"); queue.put("b"); queue.put("c"); queue.put("d"); queue.put("e"); System.out.println(StrUtil.format("å½“å‰é˜Ÿåˆ—çš„é•¿åº¦: &#123;&#125;", queue.getSize())); Thread t1 = new Thread(() -&gt; &#123; queue.put("f"); queue.put("g"); queue.put("h"); &#125;, "t1"); Thread t2 = new Thread(() -&gt; { queue.get(); queue.get(); }); t1.start(); try { TimeUnit.SECONDS.sleep(2); } catch (InterruptedException e) { e.printStackTrace(); } t2.start(); } } å¯åŠ¨æµ‹è¯•ç±»ï¼ŒæŸ¥çœ‹è¿è¡Œç»“æžœã€‚æŽ§åˆ¶å°å¦‚æžœåº”è¯¥å‡ºçŽ°çš„æ•ˆæžœæ˜¯ï¼Œé˜Ÿåˆ—å…ˆåˆå§‹åŒ–å®Œæˆï¼Œç„¶åŽä¼‘çœ 2sï¼ŒæŽ¥ä¸‹æ¥å…ˆå–æ•°æ®ï¼Œå†æ’å…¥æ•°æ®ï¼Œåˆ™è¯æ˜Žé˜»å¡žé˜Ÿåˆ—ç”Ÿæ•ˆã€‚ä¸‹é¢æ˜¯æŽ§åˆ¶å°è¿è¡Œçš„æ•ˆæžœï¼š åˆå§‹åŒ–é˜Ÿåˆ— ä¼‘çœ 2såŽå–é˜Ÿé¦–å…ƒç´ ï¼Œå†æ’å…¥é˜Ÿå°¾å…ƒç´  æ­¤æ—¶æˆ‘ä»¬ä¼šå‘çŽ°ï¼Œç¨‹åºè¿˜æœªåœæ­¢ï¼Œå› ä¸ºæ­¤æ—¶é˜Ÿåˆ—å·²æ»¡ï¼Œä½†æ˜¯çº¿ç¨‹ t1 è¿˜æœªæ’å…¥ h å…ƒç´ ï¼Œå› æ­¤çº¿ç¨‹è¢«é˜»å¡žç€ï¼Œç›´è‡³ä¸‹æ¬¡é˜Ÿåˆ—æœ‰ç©ºä½™ç©ºé—´æ‰ä¼šè¢«å”¤é†’ã€‚ è‡³æ­¤ï¼Œä¸€ä¸ªè‡ªå®šä¹‰é˜»å¡žé˜Ÿåˆ—å°±å·²ç»å®žçŽ°äº†ã€‚ ç»†å¿ƒçš„æœ‹å‹ä¼šå‘çŽ°ï¼Œæˆ‘æ‰“å°çš„ log é‡Œç”¨åˆ°äº†ä¸€ä¸ª StrUtil.format() æ–¹æ³•ï¼Œè¿™ä¸ªå’Œ slf4j çš„ log ç”¨æ³•ä¸€è‡´ï¼Œå¯ä»¥ä½¿ç”¨å ä½ç¬¦ã€‚è¿™ä¸ªæ˜¯ç”¨åˆ°äº†ä¸€ä¸ªå›½äº§è‰¯å¿ƒå·¥å…·ç±»ï¼Œhutoolï¼Œå›½äº§å¼€æºï¼Œéœ€è¦å¤§å®¶çš„æ”¯æŒï¼Œè§‰å¾—å¥½ç”¨çš„è¯ï¼ŒæœŸæœ›å¯ä»¥åŽ» ç äº‘ æˆ–è€… github ä¸Šç»™ä¸ª Star å§ï¼]]></content>
      <categories>
        <category>ä»£ç ç‰‡æ®µ</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>å¤šçº¿ç¨‹</tag>
        <tag>ä»£ç ç‰‡æ®µ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[spring-bootæ•´åˆmybatisçš„æ—¶å€™ä½¿ç”¨logbackæ‰“å°æ—¥å¿—]]></title>
    <url>%2F2017%2F07%2F19%2Fspring-boot-mybatis-logback.html</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨å­¦ä¹  spring boot ï¼Œæ—¥å¿—ç”¨çš„æ˜¯ logback ï¼Œè‡³äºŽä¸ºä»€ä¹ˆæ²¡æœ‰é€‰å¸¸ç”¨çš„ log4j ï¼Œå› ä¸º logback æ˜¯ spring boot å®˜æ–¹æŽ¨èçš„æ—¥å¿—ç³»ç»Ÿã€‚ä½†æ˜¯åœ¨æ•´åˆ Mybatis çš„æ—¶å€™ä¸€ç›´æ‰“å°ä¸äº† SQL è¯­å¥ï¼ŒæŸ¥é˜…å¤šæ–¹èµ„æ–™ï¼Œç»ˆäºŽè§£å†³äº†~ å…ˆå±•ç¤ºä¸‹ logback-spring.xml çš„å®Œæ•´å†…å®¹ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667&lt;?xml version="1.0" encoding="utf-8" ?&gt;&lt;configuration&gt; &lt;appender name="consoleLog" class="ch.qos.logback.core.ConsoleAppender"&gt; &lt;layout class="ch.qos.logback.classic.PatternLayout"&gt; &lt;pattern&gt;ã€xkcodingã€‘%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; %-5level [%thread] %logger&#123;36&#125; - %msg%n&lt;/pattern&gt; &lt;/layout&gt; &lt;/appender&gt; &lt;appender name="fileLog" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt; &lt;!--æ»šåŠ¨ç­–ç•¥--&gt; &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt; &lt;!--è¾“å‡ºè·¯å¾„--&gt; &lt;fileNamePattern&gt;$&#123;user.dir&#125;/logs/log/online-study.%d.log&lt;/fileNamePattern&gt; &lt;/rollingPolicy&gt; &lt;encoder&gt; &lt;pattern&gt;ã€xkcodingã€‘%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; %-5level [%thread] %logger&#123;36&#125; - %msg%n&lt;/pattern&gt; &lt;/encoder&gt; &lt;/appender&gt; &lt;appender name="fileErrorLog" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt; &lt;filter class="ch.qos.logback.classic.filter.LevelFilter"&gt; &lt;level&gt;ERROR&lt;/level&gt; &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt; &lt;onMismatch&gt;DENY&lt;/onMismatch&gt; &lt;/filter&gt; &lt;!--æ»šåŠ¨ç­–ç•¥--&gt; &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt; &lt;!--è¾“å‡ºè·¯å¾„--&gt; &lt;fileNamePattern&gt;$&#123;user.dir&#125;/logs/error/online-study.%d.error&lt;/fileNamePattern&gt; &lt;/rollingPolicy&gt; &lt;encoder&gt; &lt;pattern&gt;ã€xkcodingã€‘%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; %-5level [%thread] %logger&#123;36&#125; - %msg%n&lt;/pattern&gt; &lt;/encoder&gt; &lt;/appender&gt; &lt;!-- logger å±žæ€§ï¼š 1)name:ç”¨æ¥æŒ‡å®šå—æ­¤loggerçº¦æŸçš„æŸä¸€ä¸ªåŒ…æˆ–è€…å…·ä½“çš„æŸä¸€ä¸ªç±» 2)level:ç”¨æ¥è®¾ç½®æ‰“å°çº§åˆ«ï¼Œå¤§å°å†™æ— å…³ï¼ˆæœ€å¸¸ç”¨çš„å‡ ç§ï¼‰ï¼šDEBUG, INFO, WARN, ERROR --&gt; &lt;!-- ç”¨äºŽæ‰“å° Spring åœ¨å¯åŠ¨çš„æ—¶å€™åˆå§‹åŒ–å„ä¸ª Bean çš„ä¿¡æ¯ --&gt; &lt;logger name="org.springframework.web" level="DEBUG"/&gt; &lt;!-- mybatis æ—¥å¿—æ‰“å°å¦‚æžœåœ¨ ssm ä¸­ï¼Œå¯èƒ½å°±éœ€è¦ä¸‹è¾¹çš„7è¡Œäº†ã€‚--&gt; &lt;!--&lt;logger name="com.ibatis" level="DEBUG" /&gt;--&gt; &lt;!--&lt;logger name="com.ibatis.common.jdbc.SimpleDataSource" level="DEBUG" /&gt;--&gt; &lt;!--&lt;logger name="com.ibatis.common.jdbc.ScriptRunner" level="DEBUG" /&gt;--&gt; &lt;!--&lt;logger name="com.ibatis.sqlmap.engine.impl.SqlMapClientDelegate" level="DEBUG" /&gt;--&gt; &lt;!--&lt;logger name="java.sql.Connection" level="DEBUG" /&gt;--&gt; &lt;!--&lt;logger name="java.sql.Statement" level="DEBUG" /&gt;--&gt; &lt;!--&lt;logger name="java.sql.PreparedStatement" level="DEBUG" /&gt;--&gt; &lt;!-- ä»¥ä¸‹è¿™ä¸€å¥è‡³å…³é‡è¦å¦‚æžœæ²¡æœ‰ï¼Œå°±æ— æ³•è¾“å‡º sql è¯­å¥ --&gt; &lt;!--æ³¨æ„ï¼šåœ¨ spring boot ä¸­ï¼Œæƒ³åœ¨æŽ§åˆ¶å°æ‰“å° mybatis çš„ sql è¯­å¥ï¼Œåªéœ€è¦é…ç½®ä¸‹è¾¹è¿™ä¸€å¥å°±å¥½äº†ã€‚--&gt; &lt;!--å¦‚æžœæƒ³è¦è®°å½•æ›´è¯¦ç»†çš„ SQL æ—¥å¿—ï¼Œåªéœ€è¦æŠŠä¸‹é¢çš„æ—¥å¿—çº§åˆ«æ”¹æˆ TRACE å°±å¯ä»¥äº†--&gt; &lt;!--å³å°† mapper æŽ¥å£æ‰“å…¥ logger å°±è¡Œã€‚--&gt; &lt;logger name="com.xkcoding.dao" level="DEBUG"&gt;&lt;/logger&gt; &lt;root level="info"&gt; &lt;appender-ref ref="consoleLog"/&gt; &lt;appender-ref ref="fileLog"/&gt; &lt;appender-ref ref="fileErrorLog"/&gt; &lt;/root&gt;&lt;/configuration&gt; å¦‚æžœæ˜¯ Log4J å®žçŽ°çš„è¯å¯ä»¥å‚è€ƒMybatis æ—¥å¿— ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ consoleLog æ˜¯åœ¨æŽ§åˆ¶å°æ˜¾ç¤ºçš„ Log æ—¥å¿—ï¼Œåœ¨æŽ§åˆ¶å°æ˜¾ç¤º Log æ—¥å¿—éœ€è¦åœ¨ appender èŠ‚ç‚¹é‡Œé…ç½® class=&quot;ch.qos.logback.core.ConsoleAppender&quot; ï¼Œæ ¼å¼åŒ–è¾“å‡ºçš„é…ç½®åœ¨ pattern èŠ‚ç‚¹ä¸­é…ç½®ï¼Œå„ä¸ªå‚æ•°çš„ä»‹ç»å¦‚ä¸‹ï¼š 123456%-5level: æ˜¾ç¤º Log çº§åˆ«ï¼Œä»Žå·¦æ˜¾ç¤º5ä¸ªå­—ç¬¦å®½åº¦ï¼Œæ‰“å°å†…å®¹: TRACE/DEBUG/INFO/WARN/ERROR%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125;: æ˜¾ç¤ºæ—¶é—´æˆ³ï¼Œ&#123;&#125;ä¸­å†…å®¹ä»£è¡¨æ—¶é—´æˆ³æ ¼å¼%thread: æ˜¾ç¤ºçº¿ç¨‹åå­—%logger&#123;36&#125;: è¡¨ç¤º logger åå­—æœ€é•¿36ä¸ªå­—ç¬¦ï¼Œå¦åˆ™æŒ‰ç…§å¥ç‚¹åˆ†å‰²%msg: æ—¥å¿—æ¶ˆæ¯%n: æ¢è¡Œç¬¦ ç¬¬äºŒä¸ªèŠ‚ç‚¹ fileLog æ˜¯å°†æ—¥å¿—ä¿å­˜ä¸ºæ–‡ä»¶ï¼Œéœ€è¦åœ¨ appender èŠ‚ç‚¹é‡Œé…ç½® class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot; ï¼Œå¹¶ä¸”æŒ‡å®šæ»šåŠ¨ç­–ç•¥ï¼Œä¸ºæ¯å¤©ä¸€ä¸ªæ–‡ä»¶ï¼ŒæŒ‡å®šæ–‡ä»¶åä¸º %d.log ã€‚ 12345&lt;!--æ»šåŠ¨ç­–ç•¥--&gt;&lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt; &lt;!--è¾“å‡ºè·¯å¾„--&gt; &lt;fileNamePattern&gt;$&#123;user.dir&#125;/logs/log/online-study.%d.log&lt;/fileNamePattern&gt;&lt;/rollingPolicy&gt; ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹ fileErrorLog æ˜¯å°†é”™è¯¯æ—¥å¿—è®°å½•åœ¨æ–‡ä»¶ä¸­ï¼Œä¸ä¿å­˜å…¶ä»–çº§åˆ«çš„æ—¥å¿—ï¼Œéœ€è¦é…ç½®ä¸€ä¸ª filter èŠ‚ç‚¹ã€‚æ‹¦æˆªå†…å®¹å¦‚ä¸‹ï¼ˆæ³¨æ„å•è¯å¤§å°å†™ï¼Œåƒä¸‡ä¸èƒ½å‡ºé”™ï¼ï¼‰ï¼š 12345&lt;filter class="ch.qos.logback.classic.filter.LevelFilter"&gt; &lt;level&gt;ERROR&lt;/level&gt; &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt; &lt;onMismatch&gt;DENY&lt;/onMismatch&gt;&lt;/filter&gt; åœ¨è¿™é‡Œå†æŽ¨èä¸€ä¸ª maven ä¾èµ–ï¼Œlombok 1234&lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt;&lt;/dependency&gt; åœ¨ idea é‡Œå®‰è£… lombok çš„ç›¸åº”æ’ä»¶ ç„¶åŽå°±å¯ä»¥åœ¨ç±»åä¸Šæ–¹æ·»åŠ  @Slf4j æ³¨è§£ï¼Œè¿™æ ·å°±å¯ä»¥ç›´æŽ¥åœ¨ä»£ç ä¸­ä½¿ç”¨ log.info(&quot;....&quot;) æ‰“å°æ—¥å¿—äº†ã€‚ å†æç¤ºä¸‹ lombok çš„å…¶ä»–ä½¿ç”¨æŠ€å·§ï¼Œå¦‚æžœä½¿ç”¨äº† lombok ï¼Œåªè¦åœ¨å®žä½“ç±»çš„ç±»åä¸ŠåŠ ä¸Š @Data æ³¨è§£ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¸éœ€è¦å†™ getter/ setter/toString æ–¹æ³•ï¼Œlombok ä¼šè‡ªåŠ¨ç”Ÿæˆ getter/setter/toString æ–¹æ³•ï¼Œæˆ‘ä»¬ç›´æŽ¥è°ƒç”¨å°±å¯ä»¥äº†ï¼Œå¦‚æžœåªéœ€è¦ç”Ÿæˆ getter æˆ–è€… setterï¼Œå°±å¯ä»¥ç›´æŽ¥ä½¿ç”¨ @Getter æˆ–è€… @Setter æ³¨è§£ã€‚å¹¶ä¸” @Getter å’Œ @Setter è¿™ä¸¤ä¸ªæ³¨è§£ä¸æ­¢å¯ä»¥ç”¨åœ¨ Class ä¸Šï¼Œè¿˜å¯ä»¥ç”¨åœ¨ Enum ä¸Šå“¦ã€‚ å°±ä»‹ç»åˆ°è¿™å„¿ï¼Œenjoy it !!!]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>spring boot</category>
      </categories>
      <tags>
        <tag>spring boot</tag>
        <tag>mybatis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Windows10 ç³»ç»Ÿä¸‹è½½ä¸Žæ¿€æ´»]]></title>
    <url>%2F2017%2F07%2F18%2Fwin10-download.html</url>
    <content type="text"><![CDATA[windows æ˜¯ç›®å‰æˆ‘ä»¬ç”¨çš„æœ€å¤šä¸€ä¸ªç³»ç»Ÿï¼Œwin10 çŽ°åœ¨ä¹Ÿä¼˜åŒ–çš„è¶Šæ¥è¶Šå¥½ï¼Œä»Šå¤©å¤§å§çš„ç”µè„‘æœ‰ç‚¹é—®é¢˜ï¼Œæ‹…å¿ƒå¤ªè ¢ï¼Œä¸ä¼šä¸‹è½½å’Œæ¿€æ´»ç³»ç»Ÿï¼Œæ‰€ä»¥æ•´ç†å¹¶è®°å½•ä¸€ä¸‹å¦‚ä½•ä¸‹è½½å¹¶æ¿€æ´» win10 ç³»ç»Ÿï¼Œä»¥ä¾›æŸ¥é˜…ã€‚ å¾®è½¯å„ç±»è½¯ä»¶ä¸‹è½½åœ°å€ï¼ˆå›½äººè‡ªå·±æžå¾—ï¼Œéžå¾®è½¯å®˜æ–¹ï¼‰ é€‰æ‹© win10 æ›´æ–°ç‰ˆæœ¬ é€‰æ‹© win10 çš„å…·ä½“ç‰ˆæœ¬ å¤åˆ¶ç‰ˆæœ¬ä¸‹è½½åœ°å€ï¼Œä½¿ç”¨è¿…é›·ä¸‹è½½ æˆ‘å·²ç»æŠŠ64ä½å¤šç‰ˆæœ¬çš„é“¾æŽ¥å•ç‹¬æŠ å‡ºæ¥äº†ï¼Œéœ€è¦çš„ç›´æŽ¥æ‹¿åŽ»ç”¨~ 1ed2k://|file|cn_windows_10_multiple_editions_version_1703_updated_june_2017_x64_dvd_10724850.iso|5741144064|7717C389428734009E0350A1BB8F2508|/ é™„èµ ä¸€ä¸ªæ¿€æ´»å·¥å…·ä¸‹è½½åœ°å€ æå–ç ï¼š1pdp è¿™ä¸ªæ¿€æ´»å·¥å…·å¾ˆå¼ºå¤§ï¼Œå¯ä»¥æ¿€æ´» windows ç³»ç»Ÿ å’Œ office è½¯ä»¶ï¼Œå¹¶ä¸”æä¾› office 2016å’Œ office 2013ä¸¤ä¸ªç‰ˆæœ¬çš„è‡ªåŠ¨å®‰è£…åŠŸèƒ½ã€‚ æ¿€æ´»å·¥å…·çš„ä½¿ç”¨ï¼Œä¸‹è½½æ¿€æ´»å·¥å…·ï¼Œè§£åŽ‹åŽ‹ç¼©åŒ…ï¼Œå¾—åˆ°ä¸€ä¸ªåä¸º KMSTools.exe çš„æ–‡ä»¶ï¼Œç„¶åŽå³é”®ï¼Œä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œã€‚ï¼ˆè¿è¡Œä¹‹å‰ï¼Œæ³¨æ„å…³é—­æ‰€æœ‰æ€æ¯’è½¯ä»¶ï¼ï¼‰ æ‰“å¼€ä¹‹åŽï¼Œé€‰æ‹©ç¬¬äºŒä¸ª KMSAuto Lite å¼¹å‡ºå¦ä¸€ä¸ªç•Œé¢ï¼Œç‚¹å‡» Activate Windows é€‰æ‹©ï¼Œç„¶åŽå½“ä¸‹é¢çš„è“æ¡†æ¡†è¾“å‡º ACTIVATION SUCCESSFUL çš„æ—¶å€™ï¼Œå°±ä»£è¡¨æ¿€æ´»æˆåŠŸäº†ã€‚å¦‚æžœå¡ä½äº†ï¼Œå¯ä»¥å¤šè¯•å‡ æ¬¡ã€‚ have fun!]]></content>
      <categories>
        <category>ç³»ç»Ÿ</category>
      </categories>
      <tags>
        <tag>windows</tag>
        <tag>ç³»ç»Ÿ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HashMap çš„ JDK æºç æŽ¢ç´¢]]></title>
    <url>%2F2017%2F07%2F12%2Fjdk-map-source-explore.html</url>
    <content type="text"><![CDATA[ç¼˜ç”±ï¼šä»Šå¤©å¥½å‹æ‹¿ç€ä¸‹é¢çš„ä»£ç ï¼Œé—®æˆ‘ä¸ºä»€ä¹ˆMap.Entry è¿™ä¸ªæŽ¥å£æ²¡æœ‰å®žçŽ° getKey() å’Œ getValue() æ–¹æ³•ï¼Œå´å¯ä»¥ä½¿ç”¨ï¼Œç”±æ­¤ï¼Œå¼€å¯äº†ä¸€ç•ªæŸ¥é˜… JDK æºç çš„æ—…é€”â€¦ 12345678910111213Map map = new HashMap(); map.put(1, "å¼ ä¸‰");map.put(2, "æŽå››");map.put(3, "çŽ‹äº”");map.put(4, "èµµå…­");map.put(5, "é’±ä¸ƒ"); Set set = map.entrySet();for (Object object : set) &#123; Map.Entry entry = (Map.Entry) object; System.out.println(entry.getKey() + "--&gt;" + entry.getValue());&#125; é¦–å…ˆï¼Œæˆ‘ä»¬çœ‹ map å¯¹è±¡ï¼Œè¿™ä¸ª map å¯¹è±¡æ˜¯ HashMap çš„ä¸€ä¸ªå®žä¾‹ï¼Œç„¶åŽä¸‹é¢çš„ Set set = map.entrySet(); å¯ä»¥çŸ¥é“è¿™å…¶å®žç”¨çš„ HashMap å®žçŽ°çš„ entrySet() æ–¹æ³•ï¼Œç„¶åŽæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹ HashMap é‡Œ entrySet() çš„æºç  ä»Žæºç å¯ä»¥çœ‹å‡ºï¼Œè¿™é‡Œçš„è¿”å›žäº†ä¸€ä¸ª EntrySet å¯¹è±¡ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯è¿™ä¸ª EntrySet æ˜¯ HashMap é‡Œçš„ä¸€ä¸ªå†…éƒ¨ç±»ï¼Œæºç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051final class EntrySet extends AbstractSet&lt;Map.Entry&lt;K,V&gt;&gt; &#123; public final int size() &#123; return size; &#125; public final void clear() &#123; HashMap.this.clear(); &#125; public final Iterator&lt;Map.Entry&lt;K,V&gt;&gt; iterator() &#123; return new EntryIterator(); &#125; public final boolean contains(Object o) &#123; if (!(o instanceof Map.Entry)) return false; Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;) o; Object key = e.getKey(); Node&lt;K,V&gt; candidate = getNode(hash(key), key); return candidate != null &amp;&amp; candidate.equals(e); &#125; public final boolean remove(Object o) &#123; if (o instanceof Map.Entry) &#123; Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;) o; Object key = e.getKey(); Object value = e.getValue(); return removeNode(hash(key), key, value, true, true) != null; &#125; return false; &#125; public final Spliterator&lt;Map.Entry&lt;K,V&gt;&gt; spliterator() &#123; return new EntrySpliterator&lt;&gt;(HashMap.this, 0, -1, 0, 0); &#125; public final void forEach(Consumer&lt;? super Map.Entry&lt;K,V&gt;&gt; action) &#123; Node&lt;K,V&gt;[] tab; if (action == null) throw new NullPointerException(); if (size &gt; 0 &amp;&amp; (tab = table) != null) &#123; int mc = modCount; for (int i = 0; i &lt; tab.length; ++i) &#123; for (Node&lt;K,V&gt; e = tab[i]; e != null; e = e.next) action.accept(e); &#125; if (modCount != mc) throw new ConcurrentModificationException(); &#125; &#125;&#125; ä»Žè¿™é‡Œæˆ‘ä»¬æ˜¯å¯ä»¥çœ‹å‡ºï¼Œè¿™ä¸ª EntrySet å…¶å®žæ˜¯å°è£…çš„ä¸€ä¸ª Node ç±»çš„å®žä½“ã€‚ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬çš„ set å…¶å®žå°±æ˜¯è¿™ä¸ª Node å¯¹è±¡ã€‚ çŽ°åœ¨æˆ‘ä»¬æ¥è¯´è¯´è¿™ä¸ª Node å¯¹è±¡ï¼ŒNode å¯¹è±¡ä¹Ÿæ˜¯ HashMap é‡Œçš„ä¸€ä¸ªå†…éƒ¨ç±»ï¼Œæºç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647static class Node&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; &#123; final int hash; final K key; V value; Node&lt;K,V&gt; next; Node(int hash, K key, V value, Node&lt;K,V&gt; next) &#123; this.hash = hash; this.key = key; this.value = value; this.next = next; &#125; public final K getKey() &#123; return key; &#125; public final V getValue() &#123; return value; &#125; public final String toString() &#123; return key + "=" + value; &#125; public final int hashCode() &#123; return Objects.hashCode(key) ^ Objects.hashCode(value); &#125; public final V setValue(V newValue) &#123; V oldValue = value; value = newValue; return oldValue; &#125; public final boolean equals(Object o) &#123; if (o == this) return true; if (o instanceof Map.Entry) &#123; Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;)o; if (Objects.equals(key, e.getKey()) &amp;&amp; Objects.equals(value, e.getValue())) return true; &#125; return false; &#125;&#125; å¯ä»¥çœ‹å‡ºæ¥ï¼Œè¿™ä¸ª Node å¯¹è±¡æ˜¯ Map.Entry&lt;K,V&gt; çš„å®žçŽ°ç±»ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¸ª Node å¯¹è±¡å®žçŽ°äº† getKey() å’Œ getValue() çš„æ–¹æ³•ï¼Œæ‰€ä»¥åŽé¢è°ƒç”¨çš„ entry.getKey() ä»¥åŠ entry.getValue() æ–¹æ³•å…¶å®žéƒ½æ˜¯è°ƒç”¨çš„ Node å¯¹è±¡é‡Œçš„getKey() å’Œ getValue() æ–¹æ³•ï¼Œè¿™é‡Œå°±æ˜¯ Java çš„å¤šæ€çš„ä¸€ç§è¡¨çŽ°ã€‚ è‡³æ­¤ï¼Œæ‰“å®Œæ”¶æžªï¼]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>java</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>æºç æŽ¢ç´¢</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Oracle 11gR2 RACçš„JDBCè¿žæŽ¥ä¸²]]></title>
    <url>%2F2017%2F01%2F06%2Fconnect-oracle11g-rac-url.html</url>
    <content type="text"><![CDATA[ä»Šå¤©tomcatå¯åŠ¨æ—¶ï¼Œè¿žæŽ¥oracleç›´æŽ¥æŠ¥é”™ï¼Œå‡ºçŽ°ORA-12505çš„é—®é¢˜ï¼Œæœ€å¼€å§‹ï¼Œæˆ‘ä»¥ä¸ºé”™è¯¯çš„åŽŸå› æ˜¯jdbcè¿žæŽ¥Oracleçš„è¿žæŽ¥ä¸²ä¸­çš„sidé…ç½®çš„ä¸å¯¹ï¼Œoracleä¸èƒ½è§£æžè¿žæŽ¥ä¸²ä¸­çš„sidåå­—ï¼Œæ‰€ä»¥æ‹’ç»äº†è¿žæŽ¥ã€‚åœ¨è¿žæŽ¥å­—ä¸²ä¸­å†™å…¥æ­£ç¡®çš„sidå³å¯ã€‚ äºŽæ˜¯ï¼ŒæŸ¥çœ‹æ•°æ®åº“ä¸­å½“å‰çš„sid: 1select INSTANCE_NAME from v$instance; å‘çŽ°sidæžœç„¶ä¸åŒï¼Œç„¶åŽå°†urlçš„sidæ¢æˆæŸ¥å‡ºæ¥çš„sidï¼Œæžœç„¶è¿žæŽ¥ä¸Šäº†ã€‚ ä½†æ˜¯æˆ‘ä»”ç»†ä¸€æƒ³ï¼Œæˆ‘ç”¨åŽŸæ¥çš„sidé€šè¿‡navicatæ˜¯å¯ä»¥è¿žä¸Šoracleçš„ï¼Œä¸ºä»€ä¹ˆjdbcä¼šè¿žæŽ¥ä¸ä¸Šå‘¢ï¼Ÿ æŸ¥èµ„æ–™å¾—çŸ¥ï¼Œå¯¹äºŽOracleçš„JDBCè¿žæŽ¥ï¼Œæ˜¯æ”¯æŒEZ-Connectå†™æ³•çš„ï¼Œå³jdbc:oracle:thin:@Server:1521/Database ä½†å¯¹äºŽOracle 11gR2 RACç³»ç»Ÿï¼Œå¦‚æžœServerç”¨äº†ScanNameï¼ŒDatabaseç”¨äº†æ•°æ®åº“çš„ServiceNameï¼Œå¹¶ä¸èƒ½è¿žæŽ¥åˆ°æ•°æ®åº“ï¼Œè€Œæ˜¯æŠ¥SIDé”™è¯¯ã€‚ åŽŸå› å¯èƒ½æ˜¯æ­¤ç§å†™æ³•ï¼ŒJDBCå°†Databaseè§£æžä¸ºäº†æ•°æ®åº“çš„SIDã€‚ ç»å¤šæ–¹æµ‹è¯•ï¼Œå¯ç”¨å¦‚ä¸‹å†™æ³•å®žçŽ°11GR2çš„æ•°æ®åº“è¿žæŽ¥çš„è´Ÿè½½å‡è¡¡ï¼Œç‰¹æ­¤è®°å½•ä¸‹ï¼š jdbc:oracle:thin:@(DESCRIPTION =(ADDRESS = (PROTOCOL = TCP)(HOST = scan-name)(PORT = 1521))(CONNECT_DATA = (SERVER = DEDICATED)(SERVICE_NAME = DatabaseServiceName)))]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>oracle</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>oracle</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[elasticsearchçŽ¯å¢ƒæ­å»ºåŠèµ·æ­¥]]></title>
    <url>%2F2016%2F12%2F13%2Felasticsearch-get-start.html</url>
    <content type="text"><![CDATA[ElasticSearch æ¦‚è¿° ElasticSearchæ˜¯ä¸€ä¸ªé«˜å¯æ‰©å±•çš„å¼€æºçš„å…¨æ–‡æœç´¢åˆ†æžå¼•æ“Žã€‚ å®ƒå…è®¸ä½ å¿«é€Ÿçš„å­˜å‚¨ã€æœç´¢å’Œåˆ†æžå¤§é‡æ•°æ®ã€‚ElasticSearché€šå¸¸ä½œä¸ºåŽç«¯ç¨‹åºï¼Œä¸ºéœ€è¦å¤æ‚æŸ¥è¯¢çš„åº”ç”¨æä¾›æœåŠ¡ã€‚ Elasticsearchæ˜¯ä¸€ä¸ªåŸºäºŽLuceneçš„å¼€æºåˆ†å¸ƒå¼æœç´¢å¼•æ“Žï¼Œå…·æœ‰åˆ†å¸ƒå¼å¤šç”¨æˆ·èƒ½åŠ›ã€‚Elasticsearchæ˜¯ç”¨javaå¼€å‘ï¼Œæä¾›RestfulæŽ¥å£ï¼Œèƒ½å¤Ÿè¾¾åˆ°å®žæ—¶æœç´¢ã€é«˜æ€§èƒ½è®¡ç®—ï¼›åŒæ—¶Elasticsearchçš„æ¨ªå‘æ‰©å±•èƒ½åŠ›éžå¸¸å¼ºï¼Œä¸éœ€è¦é‡å¯æœåŠ¡ï¼ŒåŸºæœ¬ä¸Šè¾¾åˆ°äº†é›¶é…ç½®ã€‚ ElasticSearch å®‰è£… åœ¨VMwareä¸Šå®‰è£…centos7 å®‰è£…vimï¼Œè¾“å…¥yum install -y vim å®‰è£…gitï¼Œè¾“å…¥ï¼šyum install -y git å®‰è£…jdk1.8+ æŸ¥çœ‹CentOSè‡ªå¸¦JDKæ˜¯å¦å·²å®‰è£…ï¼Œè¾“å…¥ï¼šyum list installed |grep javaã€‚ è‹¥æœ‰è‡ªå¸¦å®‰è£…çš„JDKï¼Œå¸è½½CentOSç³»ç»Ÿè‡ªå¸¦JavaçŽ¯å¢ƒã€‚ å¸è½½JDKç›¸å…³æ–‡ä»¶ï¼Œè¾“å…¥ï¼šyum -y remove java-1.8.0-openjdk*ã€‚ å¸è½½tzdata-javaï¼Œè¾“å…¥ï¼šyum -y remove tzdata-java.noarchã€‚å½“ç»“æžœæ˜¾ç¤ºä¸ºCompleteï¼å³å¸è½½å®Œæ¯•ã€‚ æ³¨ï¼šâ€œ*â€è¡¨ç¤ºå¸è½½æŽ‰java1.8.0çš„æ‰€æœ‰openjdkç›¸å…³æ–‡ä»¶ã€‚ æ–°å»ºç›®å½•mkdir /usr/java/ å°†ä¸‹è½½çš„jdkçš„rpmåŒ…ä¸Šä¼ è‡³/usr/javaæ–‡ä»¶å¤¹ä¸­ï¼Œä¿®æ”¹æƒé™ï¼Œè¾“å…¥chmod +x jdk-8u111-linux-x64.rpm è¾“å…¥rpm -ivh jdk-8u101-linux-x64.rpmå®‰è£… è¾“å…¥PATH=&quot;${PATH}:/usr/java/jdk1.8.0_111&quot;ï¼Œä¿®æ”¹çŽ¯å¢ƒå˜é‡ æŸ¥çœ‹åˆšå®‰è£…çš„Javaç‰ˆæœ¬ä¿¡æ¯ï¼Œè¾“å…¥ï¼šjava -version å¯æŸ¥çœ‹Javaç‰ˆæœ¬ã€‚ æ‰“å¼€xshellé€šè¿‡xftpå°†elasticsearch-2.1.1.tar.gzä¼ åˆ°è™šæ‹Ÿæœº/optä¸­ï¼Œcdåˆ°optç›®å½•ï¼Œè¾“å…¥tar zxvf elasticsearch-2.1.1.tar.gzï¼Œè§£åŽ‹è‡³å½“å‰ç›®å½•ã€‚ æ³¨ï¼šä¸å¯ä»¥ä½¿ç”¨rootç”¨æˆ·å¯åŠ¨elasticsearchï¼Œè¿™æ˜¯å‡ºäºŽç³»ç»Ÿå®‰å…¨è€ƒè™‘è®¾ç½®çš„æ¡ä»¶ã€‚ç”±äºŽElasticSearchå¯ä»¥æŽ¥æ”¶ç”¨æˆ·è¾“å…¥çš„è„šæœ¬å¹¶ä¸”æ‰§è¡Œï¼Œä¸ºäº†ç³»ç»Ÿå®‰å…¨è€ƒè™‘ï¼Œå»ºè®®åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„ç”¨æˆ·ç”¨æ¥è¿è¡Œxkcoding å¦‚æžœæ˜¯ç”¨rootè´¦å·å¯åŠ¨ï¼Œä¼šæŠ¥ä»¥ä¸‹é”™è¯¯ 1Exception in thread "main" java.lang.RuntimeException: don't run elasticsearch as root. at org.elasticsearch.bootstrap.Bootstrap.initializeNatives(Bootstrap.java:93) at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:144) at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:285) at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:35) Refer to the log for complete error details. åˆ›å»ºxkcodingç”¨æˆ·ç»„åŠxkcodingç”¨æˆ· 12groupadd xkcodinguseradd xkcoding -g xkcoding -p elasticsearch-2.1.1 æ›´æ”¹elasticsearch-2.1.1æ–‡ä»¶å¤¹åŠå†…éƒ¨æ–‡ä»¶çš„æ‰€å±žç”¨æˆ·åŠç»„ä¸ºxkcoding:xkcoding 12cd /optchown -R xkcoding:xkcoding elasticsearch-2.1.1 åˆ‡æ¢åˆ°elsearchç”¨æˆ·å†å¯åŠ¨ 123su xkcodingcd elasticsearch-2.1.1./bin/elasticsearch -d #ä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼è¿è¡Œ æ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯è¿›è¡Œæµ‹è¯• 1curl 'http://localhost:9200/?pretty' æŸ¥çœ‹è¿”å›žæ•°æ® 123456789101112&#123; "name" : "node-1", "cluster_name" : "togeek", "version" : &#123; "number" : "2.1.1", "build_hash" : "40e2c53a6b6c2972b3d13846e450e66f4375bd71", "build_timestamp" : "2015-12-15T13:05:55Z", "build_snapshot" : false, "lucene_version" : "5.3.1" &#125;, "tagline" : "You Know, for Search"&#125; éœ€è¦ä»Žwindowsæœ¬æœºè®¿é—®centos7è™šæ‹Ÿæœºï¼Œå› æ­¤éœ€è¦å…³é—­é˜²ç«å¢™ CentOS 7.0é»˜è®¤ä½¿ç”¨çš„æ˜¯firewallä½œä¸ºé˜²ç«å¢™ï¼Œä½¿ç”¨iptableså¿…é¡»é‡æ–°è®¾ç½®ä¸€ä¸‹ ç›´æŽ¥å…³é—­é˜²ç«å¢™ 12systemctl stop firewalld.service #åœæ­¢firewallsystemctl disable firewalld.service #ç¦æ­¢firewallå¼€æœºå¯åŠ¨ è®¾ç½® iptables service 1yum -y install iptables-services å¦‚æžœè¦ä¿®æ”¹é˜²ç«å¢™é…ç½®ï¼Œå¦‚å¢žåŠ é˜²ç«å¢™ç«¯å£9200 1vi /etc/sysconfig/iptables å¢žåŠ è§„åˆ™ 1-A INPUT -m state --state NEW -m tcp -p tcp --dport 9200 -j ACCEPT ä¿å­˜é€€å‡ºåŽ 12systemctl restart iptables.service #é‡å¯é˜²ç«å¢™ä½¿é…ç½®ç”Ÿæ•ˆsystemctl enable iptables.service #è®¾ç½®é˜²ç«å¢™å¼€æœºå¯åŠ¨ æœ€åŽé‡å¯ç³»ç»Ÿä½¿è®¾ç½®ç”Ÿæ•ˆå³å¯ã€‚ åœ¨windowsçš„cmdä¸­æµ‹è¯•ï¼Œè¿”å›žjsonï¼Œæµ‹è¯•é€šè¿‡ï¼]]></content>
      <categories>
        <category>æŠ€æœ¯ç›¸å…³</category>
        <category>elasticsearch</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>elasticsearch</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Lenovo System X3250 M5æœåŠ¡å™¨å®‰è£…CentOS6.4]]></title>
    <url>%2F2016%2F08%2F31%2Fserver-install-centos6.html</url>
    <content type="text"><![CDATA[å‰è¨€ ç¬¬ä¸€æ¬¡çœŸæ­£æŽ¥è§¦æœåŠ¡å™¨ï¼Œå…¬å¸è¦æ±‚å®‰è£…linuxç³»ç»Ÿï¼ŒèŠ±äº†2å¤©æ—¶é—´ï¼Œå› ä¸ºè¯¥æœåŠ¡å™¨æ¯”è¾ƒå¤æ‚ï¼Œä»¥æ­¤æ–‡è®°å½•ä¸‹å®‰è£…è¿‡ç¨‹ä¸­å‡ºçŽ°çš„é—®é¢˜ã€‚ ### é—®é¢˜ä¸€ï¼šå®‰è£…ç³»ç»Ÿæ—¶æ— æ³•è¯†åˆ«ç¡¬ç›˜ é—®é¢˜æè¿°ï¼š Lenovo System X3250 M5 è¯¥æœåŠ¡å™¨æœ€åˆæ˜¯å­˜åœ¨ç£ç›˜é˜µåˆ—çš„ï¼Œä¹Ÿå°±æ˜¯Raidæ¨¡å¼ï¼Œå› æ­¤ä½¿ç”¨ Uç›˜å®‰è£…ç³»ç»Ÿ æ—¶ï¼Œæœ‰æ—¶ä¼šå‡ºçŽ°æ— æ³•è¯†åˆ«ç¡¬ç›˜çš„çŠ¶æ€ã€‚ é—®é¢˜è§£å†³ï¼š æ‰‹åŠ¨åŠ è½½é©±åŠ¨çš„æ–¹æ³• centos 6.2è¿›å…¥å®‰è£…ç•Œé¢æ—¶Tabé”®è¿›å…¥é«˜çº§é€‰é¡¹ï¼Œè¿½åŠ è¾“å…¥ linux ddï¼Œè¿™æ ·å®‰è£…æ—¶ä¼šæç¤ºåŠ è½½disk driverã€‚ç”¨ç®¡ç†å¡æŒ‚è½½é©±åŠ¨é•œåƒå³å¯ã€‚ centos 5.8è¿›å…¥å®‰è£…ç•Œé¢ç›´æŽ¥åœ¨boot:åŽé¢è¾“å…¥ linux ddã€‚ PXEå®‰è£…è‡ªåŠ¨åŠ è½½é©±åŠ¨ ksæ–‡ä»¶ä¸­åœ¨å¼€å¤´é™„è¿‘å¢žåŠ driverdiské€‰é¡¹ driverdisk --source=http://$ip/driverimg.iso é—®é¢˜äºŒï¼šä½¿ç”¨Uç›˜å®‰è£…ç³»ç»Ÿï¼Œå®‰è£…è¿‡ç¨‹ä¸­è¯´æ‰¾ä¸åˆ°ISOæ–‡ä»¶ é—®é¢˜æè¿°ï¼š è¯¥é—®é¢˜æ˜¯ä½¿ç”¨Uç›˜å®‰è£…ç³»ç»Ÿæ—¶ä¼šå‡ºçŽ°çš„ï¼Œä½¿ç”¨Uç›˜å®‰è£…çš„æ­¥éª¤ï¼š ä½¿ç”¨UltraISOï¼ˆè½¯ç¢Ÿé€šï¼‰å°†linuxç³»ç»Ÿé•œåƒå†™å…¥Uç›˜ ï¼Œå¹¶ä¸”å°†ISOæ–‡ä»¶æ”¾å…¥Uç›˜ è®¾ç½®Uç›˜å¯åŠ¨ å®‰è£… é—®é¢˜è§£å†³ï¼š æ–¹æ³•ä¸€ï¼šè¯¥é—®é¢˜æ˜¯å› ä¸ºç¬¬ä¸€æ­¥ä¸­ï¼ŒUç›˜æ ¼å¼ä¸ºFAT32æ ¼å¼ï¼Œå› æ­¤é•œåƒå¤§å°éœ€å°äºŽ4Gæ‰å¯ä»¥æ”¾å…¥Uç›˜ï¼Œä¸€èˆ¬ç³»ç»Ÿ64ä½çš„éƒ½ä¼šå¤§äºŽ4Gï¼Œé€‰æ‹©32ä½çš„å³å¯è§£å†³ã€‚ æ–¹æ³•äºŒï¼š é‡‡ç”¨å¤–æŽ¥å…‰é©±ï¼Œä½¿ç”¨UltraISOï¼ˆè½¯ç¢Ÿé€šï¼‰å°†é•œåƒå†™å…¥ä¸€å¼ ç™½ç›˜ è®¾ç½®å…‰ç›˜å¯åŠ¨ å®‰è£…ï¼Œäº²æµ‹ï¼ŒæˆåŠŸï¼]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å®žé™…é¡¹ç›®ä¸­çš„ä»£ç è§„èŒƒ]]></title>
    <url>%2F2016%2F04%2F05%2Fcoding-standards.html</url>
    <content type="text"><![CDATA[å‰è¨€æœ€è¿‘åœ¨å‡†å¤‡è½¯ä»¶æ¯çš„æ¯”èµ›é¡¹ç›®ï¼Œå› ä¸ºæ˜¯æ‹…ä»»çš„æ˜¯é¡¹ç›®ç»„é•¿ï¼Œæ‰€ä»¥è¦æ±‚ç»„å‘˜ä¹‹é—´çš„é¡¹ç›®ä»£ç å¿…é¡»è¦æœ‰è§„èŒƒï¼Œæ–¹ä¾¿ç»„å‘˜ä¹‹é—´çš„å›¢é˜Ÿåˆä½œï¼Œä»¥åŠåŽæœŸä»£ç çš„ç»´æŠ¤ã€‚è€Œä¸”ï¼Œæˆ‘ç›¸ä¿¡ï¼Œå¦‚æžœæˆ‘ä»¬ä»£ç è§„èŒƒèƒ½å¤Ÿåšå¥½çš„è¯ï¼Œå¯¹äºŽæˆ‘ä»¬çš„å¼€å‘æ°´å¹³ä¹Ÿä¼šæé«˜å¤šå°‘ã€‚ ## 1. ä»£ç çš„è§„èŒƒåŒ–å¥½å¤„å¤šå¤š è§„èŒƒçš„ä»£ç å¯ä»¥ä¿ƒè¿›å›¢é˜Ÿåˆä½œ è§„èŒƒçš„ä»£ç å¯ä»¥å‡å°‘bugå¤„ç† è§„èŒƒçš„ä»£ç å¯ä»¥é™ä½Žç»´æŠ¤æˆæœ¬ è§„èŒƒçš„ä»£ç æœ‰åŠ©äºŽä»£ç å®¡æŸ¥ å…»æˆä»£ç è§„èŒƒçš„ä¹ æƒ¯ï¼Œæœ‰åŠ©äºŽç¨‹åºå‘˜è‡ªèº«çš„æˆé•¿ 2. å¼€å‘å‰çš„å‡†å¤‡ Eclipseä¸­è®¾ç½®ä»£ç æ ·å¼åœ¨ Window --&gt;Preferences ä¸­è®¾ç½® 2.1. è®¾ç½®å·¥ä½œç©ºé—´ç¼–ç ä¸ºUTF-8 2.2. è®¾ç½®æ–‡ä»¶ç¼–ç ä¸ºUTF-8 2.3. æ–¹æ³•å˜é‡åè½¬åŒ–æˆæˆå‘˜å˜é‡åç§°æ—¶ï¼Œå˜é‡åç§°å‰åŠ mä»¥ç¤ºåŒºåˆ† 2.4. é…ç½®æ–‡æ¡£æ³¨é‡Š Window --&gt;Preferences --&gt;Java --&gt;Code Style --&gt;Code Templates 2.4.1. Comments Filesä¿®æ”¹æˆå¦‚ä¸‹å†…å®¹ /** * @Title: ${file_name} * @Package ${package_name} * @Description: ${todo}(ç”¨ä¸€å¥è¯æè¿°è¯¥æ–‡ä»¶åšä»€ä¹ˆ) * @author Yangkai.Shenï¼ˆæ­¤å¤„æ¢æˆä½ è‡ªå·±çš„åå­—ï¼Œæ ¼å¼å‚è€ƒæˆ‘çš„ï¼‰ * @date ${date} ${time} * @version V1.0 */ Typesä¿®æ”¹æˆå¦‚ä¸‹å†…å®¹ /** * @ClassName: ${type_name} * @Description: ${todo}(è¿™é‡Œç”¨ä¸€å¥è¯æè¿°è¿™ä¸ªç±»çš„ä½œç”¨) * @author Yangkai.Shenï¼ˆæ­¤å¤„æ¢æˆä½ è‡ªå·±çš„åå­—ï¼Œæ ¼å¼å‚è€ƒæˆ‘çš„ï¼‰ * @date ${date} ${time} * ${tags} */ Fieldsä¿®æ”¹æˆå¦‚ä¸‹å†…å®¹ /** * @Fields ${field} : ${todo}(ç”¨ä¸€å¥è¯æè¿°è¿™ä¸ªå˜é‡è¡¨ç¤ºä»€ä¹ˆ) */ Constructorsä¿®æ”¹æˆå¦‚ä¸‹å†…å®¹ /** * &lt;p&gt;Title: &lt;/p&gt; * &lt;p&gt;Description: &lt;/p&gt; * ${tags} */ Methodsä¿®æ”¹æˆå¦‚ä¸‹å†…å®¹ /** * @Title: ${enclosing_method} * @Description: ${todo}(è¿™é‡Œç”¨ä¸€å¥è¯æè¿°è¿™ä¸ªæ–¹æ³•çš„ä½œç”¨) * ${tags} å‚æ•°è¯´æ˜Ž * ${return_type} è¿”å›žç±»åž‹ * @throws */ Overriding methodsä¿®æ”¹æˆå¦‚ä¸‹å†…å®¹ /* * Title: ${enclosing_method} * Description: * ${tags} * ${see_to_overridden} */ Delegate methodsä¿®æ”¹æˆå¦‚ä¸‹å†…å®¹ /** * ${tags} * ${see_to_target} */ Gettersä¿®æ”¹æˆå¦‚ä¸‹å†…å®¹ /** * @return the ${bare_field_name} */ Settersä¿®æ”¹æˆå¦‚ä¸‹å†…å®¹ /** * @param ${param} the ${bare_field_name} to set */ 2.4.2. Codesä¸­åªä¿®æ”¹New Java files New Java filesä¿®æ”¹æˆå¦‚ä¸‹å†…å®¹ /** * @Title: ${file_name} * @Package ${package_name} * @Description: ${todo}(ç”¨ä¸€å¥è¯æè¿°è¯¥æ–‡ä»¶åšä»€ä¹ˆ) * @author Yangkai.Shenï¼ˆæ­¤å¤„æ¢æˆä½ è‡ªå·±çš„åå­—ï¼Œæ ¼å¼å‚è€ƒæˆ‘çš„ï¼‰ * @date ${date} ${time} * @version V1.0 */ 3. å¼€å‘æ—¶çš„è§„èŒƒ æ¯ä¸ªæ–¹æ³•å‰æ·»åŠ æ–‡æ¡£æ³¨é‡Šï¼ˆå¿«æ·æ–¹å¼ï¼šé€‰ä¸­éœ€è¦æ·»åŠ çš„æ–¹æ³•åï¼Œå†æŒ‰alt+shift+jï¼‰ SVNæäº¤ä»£ç æ—¶ï¼Œå¿…é¡»æ³¨æ˜Žæäº¤ä»£ç æ—¶æ‰€ä½œçš„ä¿®æ”¹ å°½å¯èƒ½å°‘çš„ä½¿ç”¨å…¨å±€çš„é™æ€å˜é‡ï¼Œä»¥å…å¸¸é©»å†…å­˜ æ–¹æ³•å˜é‡åè½¬åŒ–æˆæˆå‘˜å˜é‡åç§°æ—¶ï¼Œå˜é‡åç§°å‰åŠ mä»¥ç¤ºåŒºåˆ†ï¼ˆå¯ä»¥åœ¨eclipseä¸­å·²ç»è®¾ç½®ï¼Œè‡ªåŠ¨åŒ–è§£å†³ï¼‰]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>eclipse</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidä¸­svnä¸éœ€è¦è¿›è¡Œç‰ˆæœ¬æŽ§åˆ¶çš„éƒ¨åˆ†]]></title>
    <url>%2F2016%2F04%2F03%2Fandroid-svn-attention.html</url>
    <content type="text"><![CDATA[å‰è¨€SVNæ˜¯Subversionçš„ç®€ç§°ï¼Œæ˜¯ä¸€ä¸ªå¼€æ”¾æºä»£ç çš„ç‰ˆæœ¬æŽ§åˆ¶ç³»ç»Ÿï¼Œè¯´å¾—ç®€å•ä¸€ç‚¹SVNå°±æ˜¯ç”¨äºŽå¤šä¸ªäººå…±åŒå¼€å‘åŒä¸€ä¸ªé¡¹ç›®ï¼Œå…±ç”¨èµ„æºçš„ç›®çš„ã€‚ä½†æ˜¯SVNå¯¹äºŽAndroidé¡¹ç›®æ¥è¯´å¹¶ä¸æ˜¯æ‰€æœ‰æ–‡ä»¶éƒ½éœ€è¦è¿›è¡Œç‰ˆæœ¬æŽ§åˆ¶çš„ã€‚ > 1. binï¼Œgen ä¸¤ä¸ªæ–‡ä»¶å¤¹ä¸ç”¨æäº¤ï¼Œå› ä¸ºè¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œå¦‚æžœæäº¤å¯èƒ½ä¼šäº§ç”Ÿç¼–è¯‘å¼‚å¸¸ã€‚ > 1. .settingsä¹Ÿæ˜¯è‡ªåŠ¨ç”Ÿæˆï¼Œä¹Ÿä¸ç”¨æäº¤ã€‚ > 1. .gitæ–‡ä»¶å¤¹ä¹Ÿä¸éœ€è¦æäº¤ï¼Œè¿™æ˜¯å­˜æ”¾gitçš„é…ç½®ä¿¡æ¯ > 1. .svnåŒ.gitä¸€æ ·ï¼Œæ˜¯å­˜æ”¾svnçš„é…ç½®ä¿¡æ¯çš„ï¼ŒåŒæ ·ä¸éœ€è¦æäº¤ binç›®å½• genç›®å½• .svnç›®å½• .settingsç›®å½• .gitç›®å½• å±è”½ä¸Šä¼ çš„æ–¹å¼ï¼šwindowâ€“&gt;preferencesâ€“&gt;teamâ€“&gt;Ignored Resourcesâ€“&gt;Add Patternæœ€åŽæ·»åŠ å®Œæˆç‚¹å‡»Apply å…·ä½“éœ€è¦æ·»åŠ çš„éƒ¨åˆ†è§ä¸‹å›¾]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>eclipse</tag>
        <tag>svn</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è“æ¡¥æ¯æ„Ÿæƒ³]]></title>
    <url>%2F2016%2F03%2F28%2Flanqiao-exam.html</url>
    <content type="text"><![CDATA[å‰è¨€ä»Šå¹´æ˜¯æˆ‘ç¬¬ä¸€æ¬¡å‚åŠ è“æ¡¥æ¯ã€‚3æœˆ20å·ã€‚ å¤§ä¸€ã€å¤§äºŒçš„æ—¶å€™ï¼Œæˆ‘å°±å¯¹è“æ¡¥æ¯æœ‰æ‰€è€³é—»ï¼Œä»Šå¹´å¦‚æ„¿ä»¥å¿çš„æŠ¥åäº†ã€‚æ›¾ç»æ†§æ†¬ç€å¯ä»¥åœ¨è“æ¡¥æ¯è½»æ¾èŽ·å¾—äºŒç­‰å¥–ï¼Œå…´è®¸è¿æ°”æ¥äº†ï¼Œä¸€ç­‰ä¹Ÿæ˜¯æœ‰æœºä¼šçš„ã€‚Howeverï¼Œä»Šæ™šï¼ˆ3æœˆ28å·ï¼‰æˆç»©å‡ºæ¥äº†ï¼Œä¸‰ç­‰å¥–ï¼ŒGGäº†ã€‚å¤§å­¦ä»Žæœªæœ‰è¿‡çš„ä¿¡å¿ƒæ‘§æ®‹ã€‚å¥½äº†ï¼Œç‚®ç°å°±æ˜¯ç‚®ç°ï¼Œæˆ‘ä¹Ÿä¸ä¼šä¸€ç›´è‡ªæ€¨è‡ªè‰¾ï¼Œæˆ‘æ˜¯ä¸ªæœ‰æ€åº¦çš„ç‚®ç°ï¼Œæ€»ç»“ä¸€ä¸‹å¤±è´¥çš„åŽŸå› å§ï¼ 1. æ€»ç»“ è‡ªä¿¡å¿ƒçˆ†æ£šï¼ˆè‡ªè´Ÿï¼‰ æ¯”èµ›å‰ä¸€ä¸ªæœˆï¼Œå®¤å‹å’Œæˆ‘è¯´ï¼Œè“æ¡¥æ¯è¿˜æœ‰ä¸€ä¸ªæœˆäº†ï¼Œä¸åšåšæ¨¡æ‹Ÿï¼Ÿå½“æ—¶æˆ‘æ­£åœ¨åšä¸€ä¸ªAndroidé¡¹ç›®ï¼Œå†åŠ ä¸Šä¸€ç›´å¯¹è‡ªå·±å®žåŠ›çš„è‡ªä¿¡ï¼Œå°±æ²¡æœ‰åœ¨æ„ï¼›æ¯”èµ›å‰2å‘¨ï¼Œå®¤å‹è¯´ç´§å¼ ä¸ï¼Œæˆ‘è¯´å°caseã€‚ã€‚ç»ˆäºŽæˆ‘æˆåŠŸçš„è£¸è€ƒäº†ï¼ˆåœ¨è¿›è€ƒåœºä¹‹å‰æœªåšç”šè‡³æœªçœ‹ä¸€é¢˜æ¨¡æ‹Ÿé¢˜) å­¦è‰ºä¸ç²¾(å¯¹ç®€å•çš„ç®—æ³•ä¸å¤Ÿç†Ÿç»ƒï¼Œå¯¹å¤æ‚çš„ç®—æ³•æ²¡æœ‰æ·±ç©¶) æƒ³åˆ°å†è¡¥ï¼ˆä¸æ˜¯æƒ³ä¸åˆ°ï¼Œè€Œæ˜¯å®žåœ¨å¤ªå¤šäº†ï¼‰ 2. å±•æœ› è“æ¡¥æ¯ï¼Œå¦‚æžœå¤§å››è¿˜å¯ä»¥å‚æˆ˜çš„è¯ï¼Œæ˜Žå¹´æˆ‘è¿˜æƒ³å†æˆ˜ï¼Œé‚£æ—¶æˆ‘å¿…å°†å…¨åŠ›ä»¥èµ´ï¼Œæ¯•ç«Ÿå¤§å­¦ä¸æƒ³ç•™æœ‰é—æ†¾ã€‚å¤§å­¦å‰©ä¸‹çš„ä¸€å¹´ï¼Œæˆ‘ä¼šå°½è‡ªå·±æœ€å¤§çš„åŠªåŠ›æå‡è‡ªå·±ï¼Œä»¥æœ€å¥½çš„å§¿æ€è¿ŽæŽ¥æ¯•ä¸šã€‚]]></content>
      <categories>
        <category>éšç¬”</category>
      </categories>
      <tags>
        <tag>éšç¬”</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android åœ¨eclipseä¸­æŠŠå±€éƒ¨å˜é‡å˜æˆæˆå‘˜å˜é‡å‰è‡ªåŠ¨åŠ m]]></title>
    <url>%2F2016%2F03%2F27%2Feclipse-tips-variable.html</url>
    <content type="text"><![CDATA[å‰è¨€åœ¨å¼€å‘è¿‡ç¨‹ä¸­,å¼€å‘è§„èŒƒå¾ˆé‡è¦,è¿™æ ·æœ‰åˆ©äºŽåŽæœŸç»´æŠ¤,è€Œä¸”å¦‚æžœç¦»èŒåŽ,æ–°åŒäº‹æŽ¥æ”¶ä½ é¡¹ç›®æ—¶ä¹Ÿæ–¹ä¾¿é˜…è¯»ä»£ç ,æ¯”å¦‚æˆ‘ä»¬å‘½åä¸€ä¸ªæˆå‘˜å˜é‡,ä¸€èˆ¬åœ¨éƒ½æ˜¯må­æ¯å¼€å¤´ã€‚ æ¯”å¦‚æˆ‘ä»¬åœ¨ä¸€ä¸ªæ–¹æ³•ä¸­å†™ä¸€ä¸ªå˜é‡,åŽæ¥å‘çŽ°åœ¨å…¶ä»–åœ°æ–¹ä¹Ÿè¦ç”¨åˆ°æ­¤å˜é‡,è¿™æ—¶æˆ‘ä»¬å°±éœ€è¦æŠŠè¿™å˜é‡åšæˆæˆå‘˜å˜é‡,æˆ‘ä»¬åªè¦æŒ‰ä¸‹ctrl+1,å°±ä¼šæç¤ºæ˜¯å¦éœ€è¦å˜æˆæˆå‘˜å˜é‡,å¦‚æžœè¦å®ƒè‡ªåŠ¨åœ¨å˜é‡å‰åŠ mï¼Œå…¶å®žè¿™ä¹Ÿæ˜¯å¯ä»¥é…ç½®çš„,å¦‚å›¾:]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>eclipse</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[volleyå¼€æºæ¡†æž¶çš„åˆä½“éªŒ]]></title>
    <url>%2F2016%2F03%2F25%2Ffirst-use-volley-demo.html</url>
    <content type="text"><![CDATA[å‰è¨€Httpç½‘ç»œæ•°æ®äº¤äº’è¯·æ±‚æ˜¯æžå…¶é‡è¦å¹¶ä¸”ä½¿ç”¨å¾ˆé¢‘ç¹çš„ä¸€ä¸ªæ¨¡å—ï¼Œä¹Ÿæ˜¯æœ€åŸºæœ¬çš„ç½‘ç»œç¼–ç¨‹æ‰€éœ€è¦å­¦ä¹ çš„ã€‚ç½‘ç»œè¯·æ±‚æ–¹å¼çš„æ•ˆçŽ‡å’Œæ€§èƒ½ç›´æŽ¥å½±å“åˆ°APPçš„æ•´ä½“ç”¨æˆ·ä½“éªŒæµç•…æ€§ï¼Œæ‰€ä»¥å­¦ä¹ å¹¶æŽŒæ¡ä¸€æ¬¾å¥½çš„Httpè¯·æ±‚æ¡†æž¶å¯¹æˆ‘ä»¬çš„ç½‘ç»œå¼€å‘éžå¸¸é‡è¦ã€‚Httpè¯·æ±‚åœ¨ç§»åŠ¨ç½‘ç»œç¼–ç¨‹ä¸­ä¸»è¦æ˜¯Getå’ŒPostè¯·æ±‚æŽ¥å£æ•°æ®çš„ä½¿ç”¨ã€‚æ‰€ä»¥ï¼Œåœ¨å­¦ä¹ å¥½åŸºç¡€çš„Httpè¯·æ±‚çŸ¥è¯†åŽï¼Œä¸ºäº†æå‡å¼€å‘æ•ˆçŽ‡ï¼Œé€‰æ‹©å­¦ä¹ ä½¿ç”¨ä¸€æ¬¾å¥½çš„Httpç½‘ç»œè¯·æ±‚æ¡†æž¶å˜å¾—éžå¸¸çš„é‡è¦ã€‚ > ä»€ä¹ˆæ˜¯Volleyï¼Ÿæ±‰è¯­è¯‘è¿‡æ¥å°±æ˜¯ï¼šé½å°„; è¿¸å‘çš„æ„æ€ã€‚å¯ä»¥çœ‹å‡ºæ¥ï¼ŒVolleyç‰¹åˆ«é€‚åˆæ•°æ®é‡ä¸å¤§ä½†æ˜¯é€šä¿¡é¢‘ç¹çš„åœºæ™¯ã€‚ > Volleyæ˜¯Google I/O 2013ä¸ŠGoogleå®˜æ–¹å‘å¸ƒçš„ä¸€æ¬¾Androidå¹³å°ä¸Šçš„ç½‘ç»œé€šä¿¡åº“ã€‚ > ä»¥å‰çš„ç½‘ç»œè¯·æ±‚ï¼Œè¦è€ƒè™‘å¼€å¯çº¿ç¨‹ã€å†…å­˜æ³„æ¼ã€æ€§èƒ½ç­‰ç­‰å¤æ‚çš„é—®é¢˜ã€‚ä½†æ˜¯Volleyæ¡†æž¶å·²ç»å¸®æˆ‘ä»¬æŠŠè¿™äº›é—®é¢˜å¤„ç†å¥½äº†ï¼Œå¯¹å¤–æä¾›äº†ç›¸åº”çš„å®Œå–„çš„è¯·æ±‚API ï¼Œæˆ‘ä»¬åªéœ€è¦æŒ‰ç…§è¦æ±‚ä½¿ç”¨å³å¯ 1. Volleyæ¡†æž¶çš„ç‰¹ç‚¹ èƒ½ä½¿ç½‘ç»œé€šä¿¡æ›´å¿«ï¼Œæ›´ç®€å•ï¼Œæ›´å¥å£® Getã€Postç½‘ç»œè¯·æ±‚åŠç½‘ç»œå›¾åƒçš„é«˜æ•ˆçŽ‡å¼‚æ­¥å¤„ç†è¯·æ±‚ å¯ä»¥å¯¹ç½‘ç»œè¯·æ±‚è¿›è¡ŒæŽ’åºä¼˜å…ˆçº§ç®¡ç† ç½‘ç»œè¯·æ±‚çš„ç¼“å­˜ å¤šçº§åˆ«å–æ¶ˆè¯·æ±‚ å’ŒActivityç”Ÿå‘½å‘¨æœŸçš„è”åŠ¨ï¼ˆActivityç»“æŸæ—¶åŒæ—¶å–æ¶ˆæ‰€æœ‰ç½‘ç»œè¯·æ±‚ï¼‰ ä½¿ç”¨Volleyå¯ä»¥ç®€åŒ–ä¸€äº›ç½‘ç»œé€šä¿¡çš„å¼€å‘ï¼Œå½“ç„¶Volleyä¸é€‚åˆå¤§æ•°æ®ï¼ˆlargepayloadsï¼‰å’Œæµåª’ä½“çš„ç½‘ç»œè¯·æ±‚ã€‚ä¾‹å¦‚ä¸Šç™¾å…†çš„æ–‡ä»¶ã€è§†é¢‘ä¸‹è½½ã€‚ Volleyå¼€æºï¼Œå¯ä»¥è¿›è¡Œå®šåˆ¶ä¿®æ”¹ä¹Ÿå¯ä»¥ç›´æŽ¥ä½¿ç”¨JaråŒ…çš„å½¢å¼ã€‚ 2. Volleyçš„ç”¨æ³• Volleyçš„Getå’ŒPostè¯·æ±‚æ–¹å¼çš„ä½¿ç”¨ Volleyçš„ç½‘ç»œè¯·æ±‚é˜Ÿåˆ—å»ºç«‹å’Œå–æ¶ˆé˜Ÿåˆ—è¯·æ±‚ Volleyçš„Getå’ŒPostè¯·æ±‚æ–¹å¼çš„ä½¿ç”¨ Getå’ŒPostç”¨äºŽä¸ŽæœåŠ¡å™¨é—´è¯·æ±‚å’Œå‘é€æ•°æ®ã€‚ å»ºç«‹è¯·æ±‚é¦–å…ˆå»ºç«‹é˜Ÿåˆ—ï¼Œå°†è¯·æ±‚æ·»åŠ åˆ°è¯·æ±‚é˜Ÿåˆ—é‡Œã€‚ ç„¶åŽè¿›è¡Œç›¸åº”çš„Getå’ŒPostè¯·æ±‚ï¼Œè¯·æ±‚ç»“æžœåœ¨å›žè°ƒé‡ŒèŽ·å–è§£æžã€‚ Volleyçš„ç½‘ç»œè¯·æ±‚é˜Ÿåˆ—å»ºç«‹å’Œå–æ¶ˆé˜Ÿåˆ—è¯·æ±‚ Volleyæœ‰è‡ªå·±çš„è¯·æ±‚é˜Ÿåˆ—ç®¡ç†æœºåˆ¶ï¼Œå¯ä»¥æŽ§åˆ¶æ¯ä¸ªè¯·æ±‚çš„å»ºç«‹ä¸Žå–æ¶ˆã€‚éžå¸¸æ–¹ä¾¿å’Œå®‰å…¨ã€‚ è¿™æ ·ä¹Ÿå°±å¯ä»¥åšåˆ°éšæ—¶æŽ§åˆ¶æŸä¸ªè¯·æ±‚åœ¨ä»€ä¹ˆæ—¶å€™ç»“æŸï¼ŒActivityç”Ÿå‘½å‘¨æœŸå…³è”ï¼Œé˜²æ­¢æ— è°“çš„è¯·æ±‚ã€‚ 3. Volleyçš„ç®€å•æµ‹è¯•demo 1.æ–°å»ºä¸€ä¸ªMyApplicationç±»ï¼Œç»§æ‰¿è‡ªApplication ï¼Œç”¨äºŽè¿”å›žä¸€ä¸ªå…¨å±€çš„Volleyç½‘ç»œè¯·æ±‚é˜Ÿåˆ— 1234567891011121314151617181920212223242526272829303132333435package com.xkcoding.volley;import android.app.Application;import com.android.volley.RequestQueue;import com.android.volley.toolbox.Volley;/** * @ClassName: MyApplication * @Description: ç”¨äºŽç”Ÿæˆä¸€ä¸ªå…¨å±€çš„è¯·æ±‚é˜Ÿåˆ— * @author Yangkai.Shen * @date 2016-3-26 ä¸Šåˆ1:09:10 * */public class MyApplication extends Application &#123; public static RequestQueue queue; @Override public void onCreate() &#123; super.onCreate(); queue = Volley.newRequestQueue(getApplicationContext()); &#125; /** * @Title: getRequestQueue * @Description: èŽ·å–ä¸€ä¸ªå…¨å±€çš„è¯·æ±‚é˜Ÿåˆ— * @param @return å‚æ•°è¯´æ˜Ž * @return RequestQueue è¿”å›žç±»åž‹ * @throws */ public static RequestQueue getRequestQueue() &#123; return queue; &#125;&#125; 2.åœ¨MainActivityä¸­ç¼–å†™æµ‹è¯•GETä¸ŽPOSTè¯·æ±‚çš„ä»£ç  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113package com.xkcoding.volley;import java.util.HashMap;import java.util.Map;import android.app.Activity;import android.os.Bundle;import android.util.Log;import android.view.Menu;import android.widget.Toast;import com.android.volley.Request.Method;import com.android.volley.AuthFailureError;import com.android.volley.Response;import com.android.volley.Response.Listener;import com.android.volley.VolleyError;import com.android.volley.toolbox.StringRequest;/** * @ClassName: MainActivity * @Description: 1. Volleyçš„Getå’ŒPostè¯·æ±‚æ–¹å¼çš„ä½¿ç”¨ 2. Volleyçš„ç½‘ç»œè¯·æ±‚é˜Ÿåˆ—å»ºç«‹å’Œå–æ¶ˆé˜Ÿåˆ—è¯·æ±‚ * @author Yangkai.Shen * @date 2016-3-26 ä¸Šåˆ1:08:27 * */public class MainActivity extends Activity &#123; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); volley_Get(); volley_Post(); &#125; /** * @Title: volley_Get * @Description: æµ‹è¯•GETæ–¹æ³• * @param å‚æ•°è¯´æ˜Ž * @return void è¿”å›žç±»åž‹ * @throws */ private void volley_Get() &#123; //æµ‹è¯•urlä¸ºèšåˆæ•°æ®çš„æ‰‹æœºå½’å±žåœ°æŸ¥è¯¢ String url = "http://apis.juhe.cn/mobile/get?phone=13429667914&amp;key=ebe4429a46cb136bc7fcee57806fe952"; StringRequest request = new StringRequest(Method.GET, url, new Listener&lt;String&gt;() &#123; // æˆåŠŸæ—¶å›žè°ƒ @Override public void onResponse(String arg0) &#123; Log.i("volley_Get", arg0); Toast.makeText(getApplicationContext(), arg0, Toast.LENGTH_SHORT).show(); &#125; &#125;, new Response.ErrorListener() &#123; // å¤±è´¥æ—¶å›žè°ƒ @Override public void onErrorResponse(VolleyError arg0) &#123; Toast.makeText(getApplicationContext(), "ç½‘ç»œè¯·æ±‚å¤±è´¥", Toast.LENGTH_SHORT).show(); &#125; &#125;); // åŠ æ ‡ç­¾ï¼Œä¾¿äºŽåœ¨Activityé”€æ¯æ—¶ï¼Œæ–­å¼€ç½‘ç»œè¯·æ±‚ request.setTag("testGet"); // å°†è¯·æ±‚æ”¾å…¥è¯·æ±‚é˜Ÿåˆ— MyApplication.getRequestQueue().add(request); &#125; private void volley_Post() &#123; //æµ‹è¯•urlä¸ºèšåˆæ•°æ®çš„æ‰‹æœºå½’å±žåœ°æŸ¥è¯¢ String url = "http://apis.juhe.cn/mobile/get?"; StringRequest request = new StringRequest(Method.POST, url, new Listener&lt;String&gt;() &#123; // æˆåŠŸæ—¶å›žè°ƒ @Override public void onResponse(String arg0) &#123; Log.i("volley_Post", arg0); Toast.makeText(getApplicationContext(), arg0, Toast.LENGTH_SHORT).show(); &#125; &#125;, new Response.ErrorListener() &#123; // å¤±è´¥æ—¶å›žè°ƒ @Override public void onErrorResponse(VolleyError arg0) &#123; Toast.makeText(getApplicationContext(), "ç½‘ç»œè¯·æ±‚å¤±è´¥", Toast.LENGTH_SHORT).show(); &#125; &#125;) &#123; // POSTè¯·æ±‚æ‰€é™„å¸¦çš„è¯·æ±‚å‚æ•° @Override protected Map&lt;String, String&gt; getParams() throws AuthFailureError &#123; HashMap&lt;String, String&gt; map = new HashMap&lt;String, String&gt;(); map.put("phone", "13429667914"); map.put("key", "ebe4429a46cb136bc7fcee57806fe952"); return map; &#125; &#125;; // åŠ æ ‡ç­¾ï¼Œä¾¿äºŽåœ¨Activityé”€æ¯æ—¶ï¼Œæ–­å¼€ç½‘ç»œè¯·æ±‚ request.setTag("testPost"); // å°†è¯·æ±‚æ”¾å…¥è¯·æ±‚é˜Ÿåˆ— MyApplication.getRequestQueue().add(request); &#125; @Override protected void onStop() &#123; // Activityé”€æ¯æ—¶å–æ¶ˆè¯·æ±‚é˜Ÿåˆ—åˆ—çš„æ‰€æœ‰è¯·æ±‚ï¼Œé€šè¿‡Tagsæ‰¾åˆ°æ‰€æœ‰è¯·æ±‚ MyApplication.getRequestQueue().cancelAll("testGet"); MyApplication.getRequestQueue().cancelAll("testPost"); super.onStop(); &#125;&#125; 3.åœ¨æ¸…å•æ–‡ä»¶AndroidManifest.xmlä¸­æ³¨å†Œåˆšåˆšçš„MyApplicationå¹¶æ·»åŠ ç½‘ç»œæƒé™ 1&lt;uses-permission android:name="android.permission.INTERNET"/&gt; 4.Ctrl+F11 æˆåŠŸåœ¨LogCatä¸­æ‰“å°å‡ºå·ç ä¿¡æ¯]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android å¼€æºé¡¹ç›®åˆ†ç±»æ±‡æ€»]]></title>
    <url>%2F2016%2F03%2F25%2Fandroid-open-project.html</url>
    <content type="text"><![CDATA[ç›®å‰åŒ…æ‹¬ï¼š Android å¼€æºé¡¹ç›®ç¬¬ä¸€ç¯‡â€”â€”ä¸ªæ€§åŒ–æŽ§ä»¶(View)ç¯‡ åŒ…æ‹¬ï¼šListViewã€ActionBarã€Menuã€ViewPagerã€Galleryã€GridViewã€ImageViewã€ProgressBarã€TextViewã€ScrollViewã€TimeViewã€TipViewã€FlipViewã€ColorPickViewã€GraphViewã€UI Styleã€å…¶ä»– Android å¼€æºé¡¹ç›®ç¬¬äºŒç¯‡â€”â€”å·¥å…·åº“ç¯‡ åŒ…æ‹¬ï¼šä¾èµ–æ³¨å…¥ã€å›¾ç‰‡ç¼“å­˜ã€ç½‘ç»œè¯·æ±‚ã€æ•°æ®åº“ ORM å·¥å…·åŒ…ã€Android å…¬å…±åº“ã€é«˜ç‰ˆæœ¬å‘ä½Žç‰ˆæœ¬å…¼å®¹åº“ã€å¤šåª’ä½“ã€äº‹ä»¶æ€»çº¿ã€ä¼ æ„Ÿå™¨ã€å®‰å…¨ã€æ’ä»¶åŒ–ã€æ–‡ä»¶ã€å…¶ä»– Android å¼€æºé¡¹ç›®ç¬¬ä¸‰ç¯‡â€”â€”ä¼˜ç§€é¡¹ç›®ç¯‡ æ¯”è¾ƒæœ‰æ„æ€çš„å®Œæ•´çš„ Android é¡¹ç›® Android å¼€æºé¡¹ç›®ç¬¬å››ç¯‡â€”â€”å¼€å‘åŠæµ‹è¯•å·¥å…·ç¯‡ åŒ…æ‹¬ï¼šå¼€å‘æ•ˆçŽ‡å·¥å…·ã€å¼€å‘è‡ªæµ‹ç›¸å…³ã€æµ‹è¯•å·¥å…·ã€å¼€å‘åŠç¼–è¯‘çŽ¯å¢ƒã€å…¶ä»– Android å¼€æºé¡¹ç›®ç¬¬äº”ç¯‡â€”â€”ä¼˜ç§€ä¸ªäººå’Œå›¢ä½“ç¯‡ ä¹äºŽåˆ†äº«å¹¶ä¸”æœ‰ä¸€äº›å¾ˆä¸é”™çš„å¼€æºé¡¹ç›®çš„ä¸ªäººå’Œç»„ç»‡ï¼ŒåŒ…æ‹¬ JakeWhartonã€Chris Banesã€Koushik Dutta ç­‰å¤§ç‰› æç¤º ä»¥ä¸‹é“¾æŽ¥ç½‘å€è‹¥å­˜åœ¨ä¸èƒ½è®¿é—®ï¼Œè¯·è‡ªè¡Œå°è¯•ç¿»å¢™ï¼ŒæŽ¨èä½¿ç”¨GreenVPN ç¬¬ä¸€éƒ¨åˆ† ä¸ªæ€§åŒ–æŽ§ä»¶(View) ä¸»è¦ä»‹ç»é‚£äº›ä¸é”™ä¸ªæ€§åŒ–çš„ Viewï¼ŒåŒ…æ‹¬ ListViewã€ActionBarã€Menuã€ViewPagerã€Galleryã€GridViewã€ImageViewã€ProgressBarã€TextViewã€ScrollViewã€TimeViewã€TipViewã€FlipViewã€ColorPickViewã€GraphViewã€UI Style ç­‰ç­‰ã€‚ ä¸€ã€ListView android-pulltorefresh ä¸€ä¸ªå¼ºå¤§çš„æ‹‰åŠ¨åˆ·æ–°å¼€æºé¡¹ç›®ï¼Œæ”¯æŒå„ç§æŽ§ä»¶ä¸‹æ‹‰åˆ·æ–°ï¼ŒListViewã€ViewPagerã€WebViewã€ExpandableListViewã€GridViewã€ScrollViewã€Horizontal ScrollViewã€Fragment ä¸Šä¸‹å·¦å³æ‹‰åŠ¨åˆ·æ–°ï¼Œæ¯”ä¸‹é¢ johannilsson é‚£ä¸ªåªæ”¯æŒ ListView çš„å¼ºå¤§çš„å¤šã€‚å¹¶ä¸”å®ƒå®žçŽ°çš„ä¸‹æ‹‰åˆ·æ–° ListView åœ¨ item ä¸è¶³ä¸€å±æƒ…å†µä¸‹ä¹Ÿä¸ä¼šæ˜¾ç¤ºåˆ·æ–°æç¤ºï¼Œä½“éªŒæ›´å¥½ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/chrisbanes/Android-PullToRefresh Demo åœ°å€ï¼šhttps://github.com/Trinea/TrineaDownload/blob/master/pull-to-refreshview-demo.apk?raw=true APP ç¤ºä¾‹ï¼šæ–°æµªå¾®åšå„ä¸ªé¡µé¢ android-pulltorefresh-listview ä¸‹æ‹‰åˆ·æ–° ListViewï¼Œè¿™ä¸ªè¢«å¾ˆå¤šäººä½¿ç”¨çš„é¡¹ç›®å®žé™…æœ‰ä¸å°‘ bugï¼ŒæŽ¨èä½¿ç”¨ android-Ultra-Pull-to-Refresh é¡¹ç›®åœ°å€ï¼šhttps://github.com/johannilsson/android-pulltorefresh Demo åœ°å€ï¼šhttps://github.com/Trinea/TrineaDownload/blob/master/pull-to-refresh-listview-demo.apk?raw=true android-Ultra-Pull-to-Refresh ä¸‹æ‹‰åˆ·æ–°ï¼Œç¬¬ä¸€ä¸ªé¡¹ç›®å·²ç»åœæ­¢ç»´æŠ¤äº†ï¼Œå¹¶ä¸”ä½¿ç”¨èµ·æ¥ç›¸å¯¹å¤æ‚ï¼Œå®šåˆ¶æ€§ä¹Ÿå·®ã€‚è¿™ä¸ªæ˜¯æ›¿ä»£å’Œæ”¹è‰¯æ–¹æ¡ˆã€‚è¿™ä¸ªç»§æ‰¿äºŽ ViewGroup å¯ä»¥åŒ…å«ä»»ä½• Viewã€‚åŠŸèƒ½ç”šè‡³æ¯” SwipeRefreshLayout å¼ºå¤§ã€‚ä½¿ç”¨èµ·æ¥éžå¸¸ç®€å•ã€‚è‰¯å¥½çš„è®¾è®¡ï¼Œå¦‚æžœä½ æƒ³å®šåˆ¶è‡ªå·±çš„ UI æ ·å¼ï¼Œéžå¸¸ç®€å•ï¼Œå°±åƒç»™ ListView åŠ ä¸€ä¸ª Header View é‚£ä¹ˆç®€å•ã€‚æ”¯æŒ API LEVEL &gt;= 8 é¡¹ç›®åœ°å€ï¼šhttps://github.com/liaohuqiu/android-Ultra-Pull-To-Refresh åŽŸç†å‰–æžæ–‡æ¡£ï¼š[android-Ultra-Pull-to-Refresh](http://a.codekk.com/detail/Android/Grumoon/android-Ultra-Pull-To-Refresh æºç è§£æž) Demo åœ°å€ï¼šhttps://github.com/liaohuqiu/android-Ultra-Pull-To-Refresh/blob/master/ptr-demo/target/ultra-ptr-demo.apk?raw=true Android-PullToRefreshRecyclerView æ”¯æŒä¸‹æ‹‰åˆ·æ–°çš„RecyclerViewï¼ŒåŒæ—¶æ”¯æŒæ»‘åŠ¨åˆ°åº•éƒ¨è‡ªåŠ¨åŠ è½½æ•°æ®ã€ç»™RecyclerViewæ·»åŠ Headerã€‚å¹¶ä¸”ä¸æ›´æ”¹åŽŸæœ‰RecyclerViewçš„é€»è¾‘ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/HomHomLin/Android-PullToRefreshRecyclerViewã€‚ Demoåœ°å€ï¼šhttps://github.com/HomHomLin/Android-PullToRefreshRecyclerView/blob/master/sample.apk DragSortListView æ‹–åŠ¨æŽ’åºçš„ ListViewï¼ŒåŒæ—¶æ”¯æŒ ListView æ»‘åŠ¨ item åˆ é™¤ï¼Œå„ä¸ª Item é«˜åº¦ä¸ä¸€ã€å•é€‰ã€å¤é€‰ã€CursorAdapter åšä¸ºé€‚é…å™¨ã€æ‹–åŠ¨èƒŒæ™¯å˜åŒ–ç­‰ é¡¹ç›®åœ°å€ï¼šhttps://github.com/bauerca/drag-sort-listview Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.mobeta.android.demodslv APP ç¤ºä¾‹ï¼šWordpress Android SwipeListView æ”¯æŒå®šä¹‰ ListView å·¦å³æ»‘åŠ¨äº‹ä»¶ï¼Œæ”¯æŒå·¦å³æ»‘åŠ¨ä½ç§»ï¼Œæ”¯æŒå®šä¹‰åŠ¨ç”»æ—¶é—´ é¡¹ç›®åœ°å€ï¼šhttps://github.com/47deg/android-swipelistview Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.fortysevendeg.android.swipelistview APP ç¤ºä¾‹ï¼šå¾®ä¿¡ SlideAndDragListView æ”¯æŒListViewçš„Itemçš„æ‹–åŠ¨æŽ’åºã€å·¦å³æ»‘åŠ¨äº‹ä»¶ï¼Œå¯è‡ªå®šä¹‰å·¦å³æ»‘åŠ¨æ˜¾ç¤ºæ–‡å­—ã€å›¾æ ‡ã€ä½ç§»ï¼ŒåŒæ—¶æ”¯æŒonItemClickã€onItemLongClickç­‰ç›‘å¬å™¨ï¼Œæä¾›ä¸°å¯Œçš„å›žè°ƒæŽ¥å£ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/yydcdut/SlideAndDragListView Demo åœ°å€ï¼šhttps://github.com/yydcdut/SlideAndDragListView/blob/master/apk/sdlv.apk?raw=true APP ç¤ºä¾‹ï¼šAndroid æ‰‹æœºQQ 5.0 Android-SwipeToDismiss æ»‘åŠ¨ Item æ¶ˆå¤± ListViewï¼Œæ”¯æŒ 3.0 ä»¥ä¸‹ç‰ˆæœ¬è§ï¼šhttps://github.com/JakeWharton/SwipeToDismissNOA é¡¹ç›®åœ°å€ï¼šhttps://github.com/romannurik/Android-SwipeToDismiss Demo åœ°å€ï¼šhttps://github.com/JakeWharton/SwipeToDismissNOA/SwipeToDismissNOA.apk/qr_code RecyclerViewSwipeDismiss è½»é‡çº§æ”¯æŒ support-v7 ä¸­çš„ RecyclerView çš„æ»‘åŠ¨åˆ é™¤(Swipe to dismiss)è¡Œä¸ºï¼Œä¸éœ€è¦ä¿®æ”¹æºä»£ç ï¼Œåªè¦ç®€å•çš„ç»‘å®šonTouchListener é¡¹ç›®åœ°å€ï¼šhttps://github.com/CodeFalling/RecyclerViewSwipeDismiss PinnedHeaderExpandableListView é¦–å…ˆå®ƒæ˜¯ä¸€ä¸ª ExpandableListViewï¼Œä½†æ˜¯å®ƒçš„å¤´éƒ¨å¯ä»¥å›ºå®šï¼Œå…¶æ¬¡ï¼Œåœ¨å®ƒçš„ä¸Šé¢è¿˜æœ‰ä¸€ä¸ªå¤´éƒ¨å¯ä»¥æ¥å›žä¼¸ç¼© é¡¹ç›®åœ°å€ï¼šhttps://github.com/singwhatiwanna/PinnedHeaderExpandableListView APP ç¤ºä¾‹ï¼šç™¾åº¦æ‰‹æœºå«å£«åžƒåœ¾æ¸…ç†ç•Œé¢ StickyListHeaders GroupName æ»‘åŠ¨åˆ°é¡¶ç«¯æ—¶ä¼šå›ºå®šä¸åŠ¨ç›´åˆ°å¦å¤–ä¸€ä¸ª GroupName åˆ°è¾¾é¡¶ç«¯çš„ ExpandListViewï¼Œæ”¯æŒå¿«é€Ÿæ»‘åŠ¨ï¼Œæ”¯æŒ Android2.3 åŠä»¥ä¸Š é¡¹ç›®åœ°å€ï¼šhttps://github.com/emilsjolander/StickyListHeaders APP ç¤ºä¾‹ï¼šAndroid 4.0 è”ç³»äºº pinned-section-listview GroupName æ»‘åŠ¨åˆ°é¡¶ç«¯æ—¶ä¼šå›ºå®šä¸åŠ¨ç›´åˆ°å¦å¤–ä¸€ä¸ª GroupName åˆ°è¾¾é¡¶ç«¯çš„ ExpandListView é¡¹ç›®åœ°å€ï¼šhttps://github.com/beworker/pinned-section-listview PinnedHeaderListView GroupName æ»‘åŠ¨åˆ°é¡¶ç«¯æ—¶ä¼šå›ºå®šä¸åŠ¨ç›´åˆ°å¦å¤–ä¸€ä¸ª GroupName åˆ°è¾¾é¡¶ç«¯çš„ ExpandListView é¡¹ç›®åœ°å€ï¼šhttps://github.com/JimiSmith/PinnedHeaderListView QuickReturn ListView/ScrollView çš„ header æˆ– footerï¼Œå½“å‘ä¸‹æ»šåŠ¨æ—¶æ¶ˆå¤±ï¼Œå‘ä¸Šæ»šåŠ¨æ—¶å‡ºçŽ° é¡¹ç›®åœ°å€ï¼šhttps://github.com/lawloretienne/QuickReturn Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.etiennelawlor.quickreturn QuickReturnHeader ListView/ScrollView çš„ header æˆ– footerï¼Œå½“å‘ä¸‹æ»šåŠ¨æ—¶æ¶ˆå¤±ï¼Œå‘ä¸Šæ»šåŠ¨æ—¶å‡ºçŽ° é¡¹ç›®åœ°å€ï¼šhttps://github.com/ManuelPeinado/QuickReturnHeader Demo åœ°å€ï¼šhttps://github.com/Trinea/TrineaDownload/blob/master/quick-return-header-demo.apk?raw=true APP ç¤ºä¾‹ï¼šgoogle plus IndexableListView ListView å³ä¾§ä¼šæ˜¾ç¤º item é¦–å­—æ¯å¿«æ·ç´¢å¼•ï¼Œç‚¹å‡»å¯å¿«é€Ÿæ»‘åŠ¨åˆ°æŸä¸ª item é¡¹ç›®åœ°å€ï¼šhttps://github.com/woozzu/IndexableListView Demo åœ°å€ï¼šhttps://github.com/Trinea/TrineaDownload/blob/master/indexable-listview.apk?raw=true APP ç¤ºä¾‹ï¼šå¾®ä¿¡é€šè®¯å½•ã€å°ç±³è”ç³»äºº CustomFastScrollView ListView å¿«é€Ÿæ»‘åŠ¨ï¼ŒåŒæ—¶å±å¹•ä¸­é—´ PopupWindows æ˜¾ç¤ºæ»‘åŠ¨åˆ°çš„ item å†…å®¹æˆ–é¦–å­—æ¯ é¡¹ç›®åœ°å€ï¼šhttps://github.com/nolanlawson/CustomFastScrollViewDemo Android-ScrollBarPanel ListView æ»‘åŠ¨æ—¶å›ºå®šçš„ Panel æŒ‡ç¤ºæ˜¾ç¤ºåœ¨ scrollbar æ—è¾¹ é¡¹ç›®åœ°å€ï¼šhttps://github.com/rno/Android-ScrollBarPanel SlideExpandableListView ç”¨æˆ·ç‚¹å‡» listView item æ»‘å‡ºå›ºå®šåŒºåŸŸï¼Œå…¶ä»– item çš„åŒºåŸŸæ”¶ç¼© é¡¹ç›®åœ°å€ï¼šhttps://github.com/tjerkw/Android-SlideExpandableListView Demo åœ°å€ï¼šhttps://github.com/Trinea/TrineaDownload/blob/master/slide-expandable-listView-demo.apk?raw=true JazzyListView ListView åŠ GridView item ä»¥ç‰¹æ®ŠåŠ¨ç”»æ•ˆæžœè¿›å…¥å±å¹•ï¼Œæ•ˆæžœåŒ…æ‹¬ growã€cardsã€curlã€waveã€flipã€fly ç­‰ç­‰ é¡¹ç›®åœ°å€ï¼šhttps://github.com/twotoasters/JazzyListView Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.twotoasters.jazzylistview.sample åœ¨çº¿æ¼”ç¤ºï¼šhttp://lab.hakim.se/scroll-effects/ ListViewAnimations å¸¦ Item æ˜¾ç¤ºåŠ¨ç”»çš„ ListViewï¼ŒåŠ¨ç”»åŒ…æ‹¬åº•éƒ¨é£žå…¥ã€å…¶ä»–æ–¹å‘æ–œé£žå…¥ã€ä¸‹å±‚é£žå…¥ã€æ¸å˜æ¶ˆå¤±ã€æ»‘åŠ¨åˆ é™¤ç­‰ é¡¹ç›®åœ°å€ï¼šhttps://github.com/nhaarman/ListViewAnimations Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.haarman.listviewanimations APP ç¤ºä¾‹ï¼šGoogle plusã€Google Now å¡ç‰‡å¼è¿›å…¥ã€å°ç±³ç³»ç»Ÿä¸­åº”ç”¨å•†åº—ã€è”ç³»äººã€æ¸¸æˆä¸­å¿ƒã€éŸ³ä¹ã€æ–‡ä»¶ç®¡ç†å™¨çš„ ListViewã€Ultimateã€Light Flow Liteã€TreinVerkeerã€Running Coachã€Pearl Jam Lyricsã€Calorie Chartã€Car Hireã€Super BARTã€DK FlashCardsã€Counter Plusã€Voorlees Verhaaltjes 2.0 DevsmartLib-Android æ¨ªå‘ ListView é¡¹ç›®åœ°å€ï¼šhttps://github.com/dinocore1/DevsmartLib-Android Demo åœ°å€ï¼šhttps://github.com/Trinea/TrineaDownload/blob/master/horizontal-listview-demo.apk?raw=true TwoWayView æ¨ªå‘ ListView çš„æ•ˆæžœï¼Œç»§æ‰¿è‡ª AdapterView é¡¹ç›®åœ°å€ï¼šhttps://github.com/lucasr/twoway-view HorizontalVariableListView æ”¯æŒ Item å®½åº¦ä¸ä¸€è‡´çš„ ListView é¡¹ç›®åœ°å€ï¼šhttps://github.com/sephiroth74/HorizontalVariableListView LinearListView ç”¨ LinearLayout å®žçŽ°çš„ ListViewï¼Œå¯è§£å†³å¤šä¸ª ListView å¹¶å­˜ç­‰é—®é¢˜ã€‚ç›®å‰è‡ªå·±ä¹Ÿæœ‰éœ€è¦ï¼Œç­‰äº²è‡ªå°è¯•è¿‡åŽä¼šå†å…·ä½“ä»‹ç» é¡¹ç›®åœ°å€ï¼šhttps://github.com/frankiesardo/LinearListView MultiChoiceAdapter æ”¯æŒå¤šé€‰çš„ ListView Adapter é¡¹ç›®åœ°å€ï¼šhttps://github.com/ManuelPeinado/MultiChoiceAdapter Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.manuelpeinado.multichoiceadapter.demo EnhancedListView æ”¯æŒæ¨ªå‘æ»‘åŠ¨åˆ é™¤åˆ—è¡¨é¡¹ä»¥åŠæ’¤é”€åˆ é™¤çš„ ListViewï¼Œè¯¥é¡¹ç›®çš„å‰èº«æ˜¯SwipeToDismissUndoList é¡¹ç›®åœ°å€ï¼šhttps://github.com/timroes/EnhancedListView Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=de.timroes.android.listviewdemo&amp;rdid=de.timroes.android.listviewdemo ListBuddies è‡ªåŠ¨æ»šåŠ¨çš„åŒåˆ— ListView ï¼Œä¸¤ä¸ª ListView æ»šåŠ¨é€Ÿåº¦ä¸ä¸€è‡´ï¼Œæœ‰è§†å·®æ•ˆæžœ é¡¹ç›®åœ°å€ï¼šhttps://github.com/jpardogo/ListBuddies Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.jpardogo.android.listbuddies SwipeMenuListView é’ˆå¯¹ ListView item çš„ä¾§æ»‘èœå• é¡¹ç›®åœ°å€ï¼šhttps://github.com/baoyongzhang/SwipeMenuListView APP ç¤ºä¾‹ï¼šæ‰‹æœº QQV5.0 PagingListView åˆ†é¡µåŠ è½½çš„ ListViewã€‚å½“æ»‘åŠ¨åˆ° ListView åº•éƒ¨æœ€åŽä¸€ä¸ªå…ƒç´ æ—¶ï¼Œæ˜¾ç¤ºä¸€ä¸ªè¿›åº¦è¡Œï¼Œç„¶åŽåŠ è½½ä¸‹ä¸€é¡µæ•°æ®ï¼Œå¹¶æ˜¾ç¤ºã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/nicolasjafelle/PagingListView PullZoomView æ”¯æŒä¸‹æ‹‰æ—¶ HeaderView ç¼©æ”¾çš„ ListViewã€ScrollView é¡¹ç›®åœ°å€ï¼šhttps://github.com/Frank-Zhu/PullZoomView PullToZoomInListView æ»‘åŠ¨ ListView æ—¶ä½¿å…¶ HeaderView è·Ÿéšæ»‘åŠ¨ç¼©æ”¾ é¡¹ç›®åœ°å€ï¼šhttps://github.com/matrixxun/PullToZoomInListView CalendarListview å®žçŽ°æ¯ä¸ªæœˆä¸€è¡Œæ—¥åŽ†æ•ˆæžœçš„ ListView é¡¹ç›®åœ°å€ï¼šhttps://github.com/traex/CalendarListview åŽŸç†å‰–æžæ–‡æ¡£ï¼šCalendarListview sticky-headers-recyclerview GroupName æ»‘åŠ¨åˆ°é¡¶ç«¯æ—¶ä¼šå›ºå®šä¸åŠ¨ç›´åˆ°å¦å¤–ä¸€ä¸ª GroupName åˆ°è¾¾é¡¶ç«¯çš„ ListViewï¼Œé‡‡ç”¨ support-v7 ä¸­çš„ RecyclerView å®žçŽ° é¡¹ç›®åœ°å€ï¼šhttps://github.com/timehop/sticky-headers-recyclerview PullSeparateListView åˆ°è¾¾é¡¶éƒ¨æˆ–åº•éƒ¨ç»§ç»­æ‹‰åŠ¨æ—¶ï¼Œå®žçŽ° Item é—´çš„ç›¸äº’åˆ†ç¦»ï¼Œä¸¤ç§æ¨¡å¼ï¼š(1) å…¨éƒ¨åˆ†ç¦»çš„æ¨¡å¼ï¼Œå³å±å¹•å†…æ‰€æœ‰ Item éƒ½ä¼šåˆ†ç¦» (2)éƒ¨åˆ†åˆ†ç¦»æ¨¡å¼ï¼Œä»¥ç‚¹å‡»ä½ç½®ä¸ºåˆ†ç•Œç‚¹ï¼Œéƒ¨åˆ† item åˆ†ç¦» é¡¹ç›®åœ°å€ï¼šhttps://github.com/chiemy/PullSeparateListView ExpandableLayout Header å’Œ Content Item éƒ½å¯ä»¥å±•å¼€çš„ ExpandableListview é¡¹ç›®åœ°å€ï¼šhttps://github.com/traex/ExpandableLayout PagedHeadListView æ”¯æŒ paginated header ä»¥åŠ material page indicator çš„ ListView. é¡¹ç›®åœ°å€ï¼šhttps://github.com/JorgeCastilloPrz/PagedHeadListView CustomSwipeListView æ”¯æŒå·¦æ»‘å¼¹å‡ºè‡ªå®šä¹‰èœå•ï¼Œå³æ»‘åˆ é™¤ä¸”å…è®¸æ’¤é”€ï¼ŒåŒæ—¶å¯ä»¥è‡ªå®šä¹‰æ»‘åŠ¨åŠ¨ç”»æ—¶é—´å’Œæ»‘åŠ¨è§¦å‘äº‹ä»¶çš„æ—¶æœºç­‰ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/xyczero/Android-CustomSwipeListView Demo åœ°å€ï¼šDownload here Pull-to-Refresh.Rentals-Android æä¾›ä¸€ä¸ªç®€å•å¯ä»¥è‡ªå®šä¹‰çš„ä¸‹æ‹‰åˆ·æ–°å®žçŽ°ï¼ŒYalantis å‡ºå“ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/Yalantis/Pull-to-Refresh.Rentals-Android ScrollerCalendar å®žçŽ°æ¯è¡Œæ˜¾ç¤ºä¸€å¹´çš„ 12 ä¸ªæœˆä»½çš„ RecyclerView å¹´åŽ† é¡¹ç›®åœ°å€ï¼šhttps://github.com/guanchao/ScrollerCalendar ExtractWordView ä¸€ä¸ªå¯ä»¥æå–å•è¯çš„ ListView,æ”¯æŒ&quot;æ”¾å¤§é•œ&quot;æ•ˆæžœã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/jcodeing/ExtractWordView Demo åœ°å€ï¼šDownload here FlyRefresh æ”¯æŒ ListView, GridView, RecyclerView, ScrollView çš„ä¸‹æ‹‰åˆ·æ–° é¡¹ç›®åœ°å€ï¼šhttps://github.com/race604/FlyRefresh MVCHelper å®žçŽ°ä¸‹æ‹‰åˆ·æ–°ï¼Œæ»šåŠ¨åº•éƒ¨è‡ªåŠ¨åŠ è½½æ›´å¤šï¼Œåˆ†é¡µåŠ è½½ï¼Œè‡ªåŠ¨åˆ‡æ¢æ˜¾ç¤ºç½‘ç»œå¤±è´¥å¸ƒå±€ï¼Œæš‚æ— æ•°æ®å¸ƒå±€ï¼Œæ”¯æŒä»»æ„ viewï¼ŒçœŸæ­£çš„ MVC æž¶æž„ æ”¯æŒåˆ‡æ¢ä¸»æµä¸‹æ‹‰åˆ·æ–°æ¡†æž¶ Android-PullToRefresh-Library,android-Ultra-Pull-To-Refresh-libraryï¼ŒSwipeRefreshLayout é¡¹ç›®åœ°å€ï¼šhttps://github.com/LuckyJayce/MVCHelper Demo åœ°å€ï¼šhttps://github.com/LuckyJayce/MVCHelper/blob/master/raw/MVCHelper_Demo.apk?raw=true RecyclerViewSwipeDismiss æ”¯æŒæ»‘åŠ¨ Item æ“ä½œã€ç‚¹å‡»å±•å¼€ã€æ‹–åŠ¨æŽ’åºã€å±•å¼€åŽæ‹–åŠ¨æŽ’åºç­‰ç‰¹æ€§çš„ RecyclerView é¡¹ç›®åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.h6ah4i.android.example.advrecyclerview è§†é¢‘ï¼šhttp://www.youtube.com/watch?feature=player_embedded&amp;v=S7cSwMArjUQ WaterDropListView æ¨¡ä»¿ iOS ä¸‹æ‹‰åˆ·æ–°â€œæ°´æ»´â€æ•ˆæžœï¼Œæ”¯æŒä¸‹æ‹‰åˆ·æ–°å’Œä¸Šæ‹‰åŠ è½½ é¡¹ç›®åœ°å€ï¼šhttps://github.com/THEONE10211024/WaterDropListView PopupListView å¯¦ç¾ListItem é»žæ“Šå¾Œç½®é ‚ä¸¦å¯é¡¯ç¤ºå®¢è£½åŒ–æ·»åŠ çš„itemçš„å…§éƒ¨View çš„ListView é¡¹ç›®åœ°å€ï¼šhttps://github.com/s8871404/PopupListView Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.baobomb.popuplistview_sample CircleRefreshLayout ä¸€ä¸ªåŒ…å«æœ‰è¶£çš„åŠ¨ç”»çš„è‡ªå®šä¹‰ä¸‹æ‹‰åˆ·æ–°å¸ƒå±€ é¡¹ç›®åœ°å€ï¼šhttps://github.com/tuesda/CircleRefreshLayout EasyRecyclerView ä¸€æ¬¾ç®€å•æ˜“ç”¨çš„EasyRecyclerView 1.æä¾›EasyRecyclerViewï¼Œä¸éœ€è¦å†™å¤ªå¤šRecyclerViewçš„é…ç½®ä»£ç  2.æä¾›å¥½ä¸€ä¸ªå¯ä»¥é€‚é…å•å¸ƒå±€å’Œå¤šå¸ƒå±€çš„RecyclerViewAdapter 3.æä¾›äº†åˆ†å‰²çº¿çš„å®žçŽ°ç±»ï¼Œåªéœ€è¦ä¼ å…¥ä¸€ä¸ªDrawableId é¡¹ç›®åœ°å€ï¼šhttps://github.com/CaMnter/EasyRecyclerView CanRefresh å¯é€‚é…æ‰€æœ‰è§†å›¾çš„ä¸‹æ‹‰åˆ·æ–°ä¸Šæ‹‰åŠ è½½ï¼Œå¹¶æ”¯æŒå„ç§é£Žæ ¼ é¡¹ç›®åœ°å€ï¼šhttps://github.com/canyinghao/CanRefresh äºŒã€ActionBar ActionBarSherlock ä¸º Android æ‰€æœ‰ç‰ˆæœ¬æä¾›ç»Ÿä¸€çš„ ActionBarï¼Œè§£å†³ 4.0 ä»¥ä¸‹ ActionBar çš„é€‚é…é—®é¢˜ é¡¹ç›®åœ°å€ï¼šhttps://github.com/JakeWharton/ActionBarSherlock Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.actionbarsherlock.sample.demos æ ‡ç­¾ï¼šå…¼å®¹åº“, ActionBar ActionBar-PullToRefresh ä¸‹æ‹‰åˆ·æ–°ï¼ŒActionBar å‡ºçŽ°åŠ è½½ä¸­æç¤º é¡¹ç›®åœ°å€ï¼šhttps://github.com/chrisbanes/ActionBar-PullToRefresh Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=uk.co.senab.actionbarpulltorefresh.samples.stock APP ç¤ºä¾‹ï¼šGmailï¼ŒGoogle Plusï¼ŒçŸ¥ä¹Žç­‰ FadingActionBar ListView å‘ä¸‹æ»šåŠ¨é€æ¸æ˜¾çŽ°çš„ ActionBar é¡¹ç›®åœ°å€ï¼šhttps://github.com/ManuelPeinado/FadingActionBar Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.manuelpeinado.fadingactionbar.demo APP ç¤ºä¾‹ï¼šgoogle musicï¼ŒçŸ¥ä¹Ž NotBoringActionBar google music ä¸‹æ‹‰æ”¶ç¼©çš„ ActionBar é¡¹ç›®åœ°å€ï¼šhttps://github.com/flavienlaurent/NotBoringActionBar Demo åœ°å€ï¼šhttp://flavienlaurent.com/blog/2013/11/20/making-your-action-bar-not-boring/ APP ç¤ºä¾‹ï¼šGoogle éŸ³ä¹ RefreshActionItem å¸¦è¿›åº¦æ˜¾ç¤ºå’Œåˆ·æ–°æŒ‰é’®çš„ ActionBar é¡¹ç›®åœ°å€ï¼šhttps://github.com/ManuelPeinado/RefreshActionItem Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.manuelpeinado.refreshactionitem.demo APP ç¤ºä¾‹ï¼šThe New York Timesï¼ŒDevAppsDirect GlassActionBar ç±»ä¼¼çŽ»ç’ƒçš„æœ‰ä¸€å®šé€æ˜Žåº¦çš„ ActionBar é¡¹ç›®åœ°å€ï¼šhttps://github.com/ManuelPeinado/GlassActionBar Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.manuelpeinado.glassactionbardemo APP ç¤ºä¾‹ï¼šgoogle music ä¸‰ã€Menu MenuDrawer æ»‘å‡ºå¼èœå•ï¼Œé€šè¿‡æ‹–åŠ¨å±å¹•è¾¹ç¼˜æ»‘å‡ºèœå•ï¼Œæ”¯æŒå±å¹•ä¸Šä¸‹å·¦å³åˆ’å‡ºï¼Œæ”¯æŒå½“å‰ View å¤„äºŽä¸Šä¸‹å±‚ï¼Œæ”¯æŒ Windows è¾¹ç¼˜ã€ListView è¾¹ç¼˜ã€ViewPager å˜åŒ–åˆ’å‡ºèœå•ç­‰ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/SimonVT/android-menudrawer Demo åœ°å€ï¼šhttp://simonvt.github.io/android-menudrawer/ APP ç¤ºä¾‹ï¼šGmailã€Google Music ç­‰å¤§éƒ¨åˆ† google app SlidingMenu æ»‘å‡ºå¼èœå•ï¼Œé€šè¿‡æ‹–åŠ¨å±å¹•è¾¹ç¼˜æ»‘å‡ºèœå•ï¼Œæ”¯æŒå±å¹•å·¦å³åˆ’å‡ºï¼Œæ”¯æŒèœå• zoomã€scaleã€slide up ä¸‰ç§åŠ¨ç”»æ ·å¼å‡ºçŽ°ã€‚ä¸Ž MenuDrawer ç›¸æ¯”è€Œè¨€ï¼ŒSlidingMenu æ”¯æŒèœå•åŠ¨ç”»æ ·å¼å‡ºçŽ°ï¼ŒMenuDrawer æ”¯æŒèœå• view å¤„äºŽå†…å®¹çš„ä¸Šä¸‹å±‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/jfeinstein10/SlidingMenu åŽŸç†å‰–æžæ–‡æ¡£ï¼š[SlidingMenu](http://a.codekk.com/detail/Android/huxian99/SlidingMenu æºç è§£æž) Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.slidingmenu.example APP ç¤ºä¾‹ï¼šFoursquare, LinkedIn, Zappos, Rdio, Evernote Food, Plume, VLC for Android, ESPN ScoreCenter, MLS MatchDay, 9GAG, Wunderlist 2, The Verge, MTG Familiar, Mantano Reader, Falcon Pro (BETA), MW3 Barracks ArcMenu æ”¯æŒç±»ä¼¼ Path çš„å·¦ä¸‹è§’åŠ¨ç”»æ—‹è½¬èœå•åŠæ¨ªå‘åˆ’å‡ºèœå•ã€åœ†å¿ƒå¼¹å‡ºèœå• é¡¹ç›®åœ°å€ï¼šhttps://github.com/daCapricorn/ArcMenu https://dl.dropboxusercontent.com/u/11369687/preview1.png https://dl.dropboxusercontent.com/u/11369687/raymenu.png APP ç¤ºä¾‹ï¼šPath android-satellite-menu ç±»ä¼¼ Path çš„å·¦ä¸‹è§’åŠ¨ç”»æ—‹è½¬èœå• é¡¹ç›®åœ°å€ï¼šhttps://github.com/siyamed/android-satellite-menu Demo åœ°å€ï¼šhttps://github.com/Trinea/TrineaDownload/blob/master/satellite-menu-demo.apk?raw=true APP ç¤ºä¾‹ï¼šPath radial-menu-widget åœ†å½¢èœå•ï¼Œæ”¯æŒäºŒçº§èœå• é¡¹ç›®åœ°å€ï¼šhttps://code.google.com/p/radial-menu-widget/ Android Wheel Menu åœ†å½¢æ—‹è½¬é€‰å–èœå• é¡¹ç›®åœ°å€ï¼šhttps://github.com/anupcowkur/Android-Wheel-Menu FoldingNavigationDrawer æ»‘åŠ¨å¹¶ä»¥æŠ˜å æ–¹å¼æ‰“å¼€èœå• é¡¹ç›®åœ°å€ï¼šhttps://github.com/tibi1712/FoldingNavigationDrawer-Android Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.ptr.folding.sample AndroidResideMenu ä»¿ Dribbble çš„è¾¹æ èœå• é¡¹ç›®åœ°å€ï¼šhttps://github.com/SpecialCyCi/AndroidResideMenu CircularFloatingActionMenu ä¸€ä¸ªå¯å®šåˆ¶çš„åœ†å½¢çš„æµ®åŠ¨èœå•æŽ§ä»¶ï¼Œç±»ä¼¼äºŽ Path çš„åœ†å½¢èœå•ã€‚è¿™ä¸ªæŽ§ä»¶çš„å¯å®šåˆ¶æ€§æ›´å¼ºï¼Œå¯ä»¥å¾ˆå®¹æ˜“çš„å®šåˆ¶èœå•å‡ºçŽ°æ¶ˆå¤±æ—¶çš„åŠ¨ç”»ï¼Œèµ·å§‹è§’åº¦å’ŒåŠå¾„ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/oguzbilgener/CircularFloatingActionMenu åŽŸç†å‰–æžæ–‡æ¡£ï¼š[CircularFloatingActionMenu](http://a.codekk.com/detail/Android/cpacm/CircularFloatingActionMenu æºç è§£æž) Demo åœ°å€ï¼šhttps://github.com/oguzbilgener/CircularFloatingActionMenu/tree/master/samples NavigationDrawerSI Navigation Drawer çš„ä¸€ä¸ªç®€å•å®žçŽ°ï¼Œæ»‘åŠ¨å¹¶ä»¥æŠ˜å æ–¹å¼æ‰“å¼€èœå• é¡¹ç›®åœ°å€ï¼šhttps://github.com/mmBs/NavigationDrawerSI Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=mmbialas.pl.navigationdrawersi APP ç¤ºä¾‹ï¼šhttps://play.google.com/store/apps/details?id=mmbialas.pl.navigationdrawersi DragLayout ä½¿ç”¨ support.v4 åŒ…ä¸‹çš„ ViewDragHelper å®žçŽ° QQ5.0 ä¾§æ»‘ é¡¹ç›®åœ°å€ï¼šhttps://github.com/BlueMor/DragLayout LDrawer Material Design å½¢å¼çš„å±•å¼€æŠ˜å  Icon é¡¹ç›®åœ°å€ï¼šhttps://github.com/ikimuhendis/LDrawer Floating Action Button æ‚¬æµ®çš„åœ†å½¢èœå•æ ï¼Œæ”¯æŒç»„å»ºæ»šåŠ¨æ—¶è‡ªåŠ¨éšè—åŠå…¶ä»–è®¾ç½® é¡¹ç›®åœ°å€ï¼šhttps://github.com/shamanland/floating-action-button Side-Menu.Android åˆ†ç±»ä¾§æ»‘èœå•ï¼ŒYalantis å‡ºå“ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/Yalantis/Side-Menu.Android åŽŸç†å‰–æžæ–‡æ¡£ï¼š[Side-Menu.Android](http://a.codekk.com/detail/Android/cpacm/Side Menu.Android æºç è§£æž) Context-Menu.Android å¯ä»¥æ–¹ä¾¿å¿«é€Ÿé›†æˆæ¼‚äº®å¸¦æœ‰åŠ¨ç”»æ•ˆæžœçš„ä¸Šä¸‹æ–‡èœå•ï¼ŒYalantiså‡ºå“ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/Yalantis/Context-Menu.Android Droppy æ”¯æŒå¤šç§æ ·å¼çš„ä¸‹æ‹‰èœå• é¡¹ç›®åœ°å€ï¼šhttps://github.com/shehabic/Droppy MaterialDrawer Material Design é£Žæ ¼çš„å¯¼èˆªæŠ½å±‰ï¼Œæä¾›ç®€ä¾¿ä¸”å¼ºå¤§çš„å®šåˆ¶åŠŸèƒ½ é¡¹ç›®åœ°å€ï¼šhttps://github.com/mikepenz/MaterialDrawer Demo åœ°å€ï¼šhttps://play.google.com/store/apps/detailsï¼Ÿid=com.mikepenz.materialdrawer.app SlideBottomPanel åº•éƒ¨åˆ’å‡ºèœå•ï¼Œæ»‘åŠ¨æ—¶èƒŒæ™¯å›¾é€æ˜Žåº¦æ¸å˜ï¼Œæ”¯æŒåµŒå¥— LiewView æˆ– ScrollView é¡¹ç›®åœ°å€ï¼šhttps://github.com/kingideayou/SlideBottomPanel Demo åœ°å€ï¼šSlideBottomPanelDemo ä¸‹è½½ FlowingDrawer å¸¦æ‰‹åŠ¿æµåŠ¨æ•ˆæžœä¾§æ»‘èœå• é¡¹ç›®åœ°å€ï¼šhttps://github.com/mxn21/FlowingDrawer å››ã€ViewPager ã€Gallery AdvancedPagerSlidingTabStrip ä¸€ä¸ªå®Œç¾Žå…¼å®¹ViewPagerçš„å¯¼èˆªæ ç»„ä»¶ï¼›å¯ä»¥è‡ªå®šä¹‰TabViewï¼›èƒ½åŠ¨æ€åŠ è½½Tabä¸Šçš„Iconå›¾ç‰‡ï¼› èƒ½æ˜¾ç¤ºTabçš„æ¶ˆæ¯æ•°é‡å’Œæç¤ºå°åœ†ç‚¹ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/HomHomLin/AdvancedPagerSlidingTabStrip ConvenientBanner é€šç”¨çš„å¹¿å‘Šæ æŽ§ä»¶ï¼Œè®©ä½ è½»æ¾å®žçŽ°å¹¿å‘Šå¤´æ•ˆæžœã€‚æ”¯æŒæ— é™å¾ªçŽ¯ï¼Œå¯ä»¥è®¾ç½®è‡ªåŠ¨ç¿»é¡µå’Œæ—¶é—´(è€Œä¸”éžå¸¸æ™ºèƒ½ï¼Œæ‰‹æŒ‡è§¦ç¢°åˆ™æš‚åœç¿»é¡µï¼Œç¦»å¼€è‡ªåŠ¨å¼€å§‹ç¿»é¡µã€‚ä½ ä¹Ÿå¯ä»¥è®¾ç½®åœ¨ç•Œé¢onPauseçš„æ—¶å€™ä¸è¿›è¡Œè‡ªåŠ¨ç¿»é¡µï¼ŒonResumeä¹‹åŽç»§ç»­è‡ªåŠ¨ç¿»é¡µ)ï¼Œå¹¶ä¸”æä¾›å¤šç§ç¿»é¡µç‰¹æ•ˆã€‚ å¯¹æ¯”å…¶ä»–å¹¿å‘Šæ æŽ§ä»¶ï¼Œå¤§å¤šéƒ½éœ€è¦å¯¹æºç è¿›è¡Œæ”¹åŠ¨æ‰èƒ½åŠ è½½ç½‘ç»œå›¾ç‰‡ï¼Œæˆ–è€…å¸®ä½ é›†æˆä¸æ˜¯ä½ æ‰€éœ€è¦çš„å›¾ç‰‡ç¼“å­˜åº“ã€‚è€Œè¿™ä¸ªåº“èƒ½è®©æœ‰ä»£ç æ´ç™–çš„ä½ æ¬¢å–œï¼Œä¸éœ€è¦å¯¹åº“æºç è¿›è¡Œä¿®æ”¹ä½ å°±å¯ä»¥ä½¿ç”¨ä»»ä½•ä½ å–œæ¬¢çš„ç½‘ç»œå›¾ç‰‡åº“è¿›è¡Œé…åˆã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/saiwu-bigkoo/Android-ConvenientBanner Android-ViewPagerIndicator é…åˆ ViewPager ä½¿ç”¨çš„ Indicatorï¼Œæ”¯æŒå„ç§ä½ç½®å’Œæ ·å¼ é¡¹ç›®åœ°å€ï¼šhttps://github.com/JakeWharton/Android-ViewPagerIndicator Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.viewpagerindicator.sample APP ç¤ºä¾‹ï¼šå¤ªå¤šäº†ã€‚ã€‚ JazzyViewPager æ”¯æŒ Fragment åˆ‡æ¢åŠ¨ç”»çš„ ViewPagerï¼ŒåŠ¨ç”»åŒ…æ‹¬è½¬ç›˜ã€æ·¡å…¥æ·¡å‡ºã€ç¿»é¡µã€å±‚å ã€æ—‹è½¬ã€æ–¹å—ã€ç¿»è½¬ã€æ”¾å¤§ç¼©å°ç­‰ï¼Œæ•ˆæžœç±»ä¼¼æ¡Œé¢å·¦å³åˆ‡æ¢çš„å„ç§æ•ˆæžœï¼Œä¸è¿‡æ¡Œé¢å¹¶éžç”¨ ViewPager å®žçŽ°è€Œå·² é¡¹ç›®åœ°å€ï¼šhttps://github.com/jfeinstein10/JazzyViewPager Demo åœ°å€ï¼šhttps://github.com/jfeinstein10/JazzyViewPager/blob/master/JazzyViewPager.apk?raw=true JellyViewPager ç‰¹æ®Šåˆ‡æ¢åŠ¨ç”»çš„ ViewPager é¡¹ç›®åœ°å€ï¼šhttps://github.com/chiemy/JellyViewPager Android-DirectionalViewPager æ”¯æŒæ¨ªå‘å’Œçºµå‘(åž‚ç›´)çš„ ViewPager é¡¹ç›®åœ°å€ï¼šhttps://github.com/JakeWharton/Android-DirectionalViewPager Demo åœ°å€ï¼šhttps://market.android.com/details?id=com.directionalviewpager.sample FancyCoverFlow æ”¯æŒ Item åˆ‡æ¢åŠ¨ç”»æ•ˆæžœçš„ç±»ä¼¼ Gallery View é¡¹ç›®åœ°å€ï¼šhttps://github.com/davidschreiber/FancyCoverFlow Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=at.technikum.mti.fancycoverflow.samples AndroidTouchGallery æ”¯æŒåŒå‡»æˆ–åŒæŒ‡ç¼©æ”¾çš„ Gallery(ç”¨ ViewPager å®žçŽ°)ï¼Œç›¸æ¯”ä¸‹é¢çš„ PhotoViewï¼Œåœ¨è¢«æ”¾å¤§åŽä¾ç„¶èƒ½æ»‘åˆ°ä¸‹ä¸€ä¸ª itemï¼Œå¹¶ä¸”æ”¯æŒç›´æŽ¥ä»Ž url å’Œæ–‡ä»¶ä¸­èŽ·å–å›¾ç‰‡ï¼Œ é¡¹ç›®åœ°å€ï¼šhttps://github.com/Dreddik/AndroidTouchGallery Demo åœ°å€ï¼šhttps://github.com/Trinea/TrineaDownload/blob/master/touch-gallery-demo.apk?raw=true APP ç¤ºä¾‹ï¼šç±»ä¼¼å¾®ä¿¡ä¸­æŸ¥çœ‹èŠå¤©è®°å½•å›¾ç‰‡æ—¶å¯åŒå‡»æ”¾å¤§ï¼Œå¹¶ä¸”æ”¾å¤§æƒ…å†µä¸‹èƒ½æ­£å¸¸å·¦å³æ»‘åŠ¨åˆ°å‰åŽå›¾ç‰‡ Android Auto Scroll ViewPager Android è‡ªåŠ¨æ»šåŠ¨ è½®æ’­å¾ªçŽ¯çš„ ViewPager é¡¹ç›®åœ°å€ï¼šhttps://github.com/Trinea/android-auto-scroll-view-pager Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=cn.trinea.android.demo æ–‡æ¡£ä»‹ç»ï¼šhttp://www.trinea.cn/android/auto-scroll-view-pager/ Android PagerSlidingTabStrip é…åˆ ViewPager ä½¿ç”¨çš„ Indicatorï¼Œæ”¯æŒ ViewPager Scroll æ—¶ Indicator è”åŠ¨ é¡¹ç›®åœ°å€ï¼šhttps://github.com/astuetz/PagerSlidingTabStrip åŽŸç†å‰–æžæ–‡æ¡£ï¼š[Android PagerSlidingTabStrip](http://a.codekk.com/detail/Android/ayyb1988/PagerSlidingTabStrip æºç è§£æž) Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.astuetz.viewpager.extensions.sample ViewPager3D ViewPager3D æ•ˆæžœ é¡¹ç›®åœ°å€ï¼šhttps://github.com/inovex/ViewPager3D AnimaTabsview ä»¿ç½‘æ˜“äº‘éŸ³ä¹æ ‡ç­¾åˆ‡æ¢çš„åŠ¨ç”»,å¸¦é€æ˜Žå°ä¸‰è§’ é¡¹ç›®åœ°å€ï¼šhttps://github.com/wuyexiong/transparent-over-animtabsview åœ¨çº¿æ¼”ç¤ºï¼šhttp://v.youku.com/v_show/id_XNzA4MjY5NjA0.html LoopingViewPager æ— é™å¾ªçŽ¯çš„ ViewPager é¡¹ç›®åœ°å€ï¼šhttps://github.com/imbryk/LoopingViewPager android_page_curl ç¿»ä¹¦å·æ›²æ•ˆæžœ é¡¹ç›®åœ°å€ï¼šhttps://github.com/harism/android_page_curl åœ¨çº¿æ¼”ç¤ºï¼šhttps://www.youtube.com/watch?v=iwu7P5PCpsw APP ç¤ºä¾‹ï¼šiReader ViewPagerIndicator ç®€åŒ–å¹¶å®žçŽ° android çš„ TabHost æ•ˆæžœï¼Œé¡¶éƒ¨æ»‘åŠ¨ tabï¼Œå¼•å¯¼é¡µï¼Œæ”¯æŒè‡ªå®šä¹‰ tab æ ·å¼,è‡ªå®šä¹‰æ»‘åŠ¨å—æ ·å¼å’Œä½ç½®,è‡ªå®šä¹‰åˆ‡æ¢ tab çš„è¿‡æ¸¡åŠ¨ç”»,å­ç•Œé¢çš„é¢„åŠ è½½å’Œç•Œé¢ç¼“å­˜,è®¾ç½®ç•Œé¢æ˜¯å¦å¯æ»‘åŠ¨ é¡¹ç›®åœ°å€ï¼šhttps://github.com/LuckyJayce/ViewPagerIndicator ScreenSlideIndicator è½»é‡çº§çš„åœ†å½¢ Indicadtorï¼Œä½ç½®å¯ä»¥è‡ªç”±è°ƒæ•´ï¼Œä¸ä¼šå¯¹ ViewPager äº§ç”Ÿä»»ä½•å½±å“ã€‚ é¡¹ç›®åœ°å€ï¼šScreenSlidePager SmartTabLayout è‡ªå®šä¹‰çš„ Tab title stripï¼ŒåŸºäºŽ Google Samples ä¸­çš„ android-SlidingTabBasic é¡¹ç›®ï¼Œæ»‘åŠ¨æ—¶ Indicator å¯å¹³æ»‘è¿‡æ¸¡ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/ogaclejapan/SmartTabLayout Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.ogaclejapan.smarttablayout.demo AndroidImageSlider Android å›¾ç‰‡æ»‘åŠ¨ é¡¹ç›®åœ°å€ï¼šhttps://github.com/daimajia/AndroidImageSlider Appç¤ºä¾‹ï¼šhttps://github.com/daimajia/AndroidImageSlider/releases/download/v1.0.8/demo-1.0.8.apk RecyclerViewPager å®Œå…¨ç»§æ‰¿è‡ª RecyclerViewï¼Œå¯ä»¥è‡ªå®šä¹‰è§¦å‘ç¿»é¡µçš„è·ç¦»ï¼Œå¯è‡ªå®šä¹‰ç¿»é¡µé€Ÿåº¦ï¼Œæ”¯æŒåž‚ç›´æ–¹å‘çš„ ViewPagerï¼Œæ”¯æŒ Fragmentã€‚ é¡¹ç›®åœ°å€ï¼šRecyclerViewPager CircleIndicator è½»é‡çº§ViewPageræŒ‡ç¤ºå™¨,æ”¯æŒä¸‰ç§ä¸åŒçš„æ¨¡å¼ é¡¹ç›®åœ°å€ï¼šCircleIndicator EasySlidingTabs ä¸€æ¬¾ç®€å•ã€æ˜“ç”¨çš„æ»‘åŠ¨æ ‡ç­¾é¡µ é¡¹ç›®åœ°å€ï¼š https://github.com/CaMnter/EasySlidingTabs äº”ã€GridView StaggeredGridView å…è®¸éžå¯¹é½è¡Œçš„ GridViewï¼Œç±»ä¼¼ Pinterest çš„ç€‘å¸ƒæµï¼Œå¹¶ä¸”è·Ÿ ListView ä¸€æ ·è‡ªå¸¦ View ç¼“å­˜ï¼Œç»§æ‰¿è‡ª ViewGroup é¡¹ç›®åœ°å€ï¼šhttps://github.com/maurycyw/StaggeredGridView Demo åœ°å€ï¼šhttps://github.com/Trinea/TrineaDownload/blob/master/staggered-gridview-demo.apk?raw=true APP ç¤ºä¾‹ï¼šPinterest ç­‰ AndroidStaggeredGrid å…è®¸éžå¯¹é½è¡Œçš„ GridViewï¼Œç±»ä¼¼ Pinterest çš„ç€‘å¸ƒæµï¼Œç»§æ‰¿è‡ª AbsListView é¡¹ç›®åœ°å€ï¼šhttps://github.com/etsy/AndroidStaggeredGrid APP ç¤ºä¾‹ï¼šPinterest ç­‰ PinterestLikeAdapterView å…è®¸éžå¯¹é½è¡Œçš„ GridViewï¼Œç±»ä¼¼ Pinterest çš„ç€‘å¸ƒæµï¼Œå…è®¸ä¸‹æ‹‰åˆ·æ–° é¡¹ç›®åœ°å€ï¼šhttps://github.com/GDG-Korea/PinterestLikeAdapterView APP ç¤ºä¾‹ï¼šPinterest ç­‰ DraggableGridView Item å¯æ‹–åŠ¨äº¤æ¢ä½ç½®çš„ GridViewï¼Œå®žé™…æ˜¯è‡ªå·±ç»§æ‰¿ ViewGroup å®žçŽ°ï¼Œç±»ä¼¼æ¡Œé¢çš„å•å±æ•ˆæžœï¼Œå¯å±å¹•è‡ªåŠ¨ä¸Šä¸‹æ»šåŠ¨è¿›è¡Œ Item ç§»åŠ¨äº¤æ¢ï¼Œå¤šå±æ•ˆæžœè§ä¸‹é¢ PagedDragDropGrid é¡¹ç›®åœ°å€ï¼šhttps://github.com/thquinn/DraggableGridView Demo åœ°å€ï¼šhttps://github.com/thquinn/DraggableGridView/blob/master/bin/DraggableGridViewSample.apk?raw=true ä¹Ÿå¯ä»¥è‡ªå®šä¹‰itemçš„å®½é«˜å’Œæ¯è¡Œçš„ä¸ªæ•°ï¼Œå¹¶ä¸”ä¿®æ”¹äº¤æ¢é€»è¾‘ï¼Œå½“ç§»åŠ¨åˆ°å¦ä¸€ä¸ªitemæ—¶å°±è¿›è¡Œäº¤æ¢ï¼Œåˆ é™¤æ»šåŠ¨é€»è¾‘ã€‚ é¡¹ç›®åœ°å€ï¼šDraggableGridView StickyGridHeaders GroupName æ»‘åŠ¨åˆ°é¡¶ç«¯æ—¶ä¼šå›ºå®šä¸åŠ¨ç›´åˆ°å¦å¤–ä¸€ä¸ª GroupName åˆ°è¾¾é¡¶ç«¯çš„ GridView é¡¹ç›®åœ°å€ï¼šhttps://github.com/TonicArtos/StickyGridHeaders PagedDragDropGrid Item å¯æ‹–åŠ¨äº¤æ¢ä½ç½®ã€æ‹–åŠ¨åˆ é™¤çš„è‡ªå®šä¹‰æŽ§ä»¶ï¼Œå®žé™…æ˜¯è‡ªå·±ç»§æ‰¿ ViewGroup å®žçŽ°ï¼Œç±»ä¼¼æ¡Œé¢çš„å¤šå±æ•ˆæžœï¼Œå¯æ‹–åŠ¨åˆ°å±å¹•è¾¹ç¼˜ï¼Œå±å¹•è‡ªåŠ¨å·¦å³æ»šåŠ¨è¿›è¡Œ Item ç§»åŠ¨äº¤æ¢ï¼Œå¯æ‹–åŠ¨è¿›è¡Œåˆ é™¤ï¼Œå•å±æ•ˆæžœè§ä¸Šé¢ DraggableGridView é¡¹ç›®åœ°å€ï¼šhttps://github.com/mrKlar/PagedDragDropGrid åœ¨çº¿æ¼”ç¤ºï¼šhttp://youtu.be/FYTSRfthSuQ Android-DraggableGridViewPager Item å¯æ‹–åŠ¨äº¤æ¢ä½ç½®çš„ GridViewï¼Œå®žé™…æ˜¯è‡ªå·±ç»§æ‰¿ ViewGroup å®žçŽ°ï¼Œç±»ä¼¼æ¡Œé¢çš„å¤šå±æ•ˆæžœï¼Œå¯å±å¹•è‡ªåŠ¨å·¦å³æ»šåŠ¨è¿›è¡Œ Item ç§»åŠ¨äº¤æ¢ï¼Œå•å±æ•ˆæžœè§ä¸Šé¢ DraggableGridView é¡¹ç›®åœ°å€ï¼šhttps://github.com/zzhouj/Android-DraggableGridViewPager Demo åœ°å€ï¼šhttps://github.com/Trinea/trinea-download/blob/master/draggable-grid-viewpager-demo.apk?raw=true TwoWayGridView å¯æ¨ªå‘æ»šåŠ¨çš„ GridView é¡¹ç›®åœ°å€ï¼šhttps://github.com/jess-anders/two-way-gridview PagingGridView åˆ†é¡µåŠ è½½çš„ GridViewã€‚å½“æ»‘åŠ¨åˆ° GridView åº•éƒ¨æœ€åŽä¸€ä¸ªè¡Œæ—¶ï¼Œæ˜¾ç¤ºä¸€ä¸ªè¿›åº¦è¡Œï¼Œç„¶åŽåŠ è½½ä¸‹ä¸€é¡µæ•°æ®ï¼Œå¹¶æ˜¾ç¤ºã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/nicolasjafelle/PagingGridView AsymmetricGridView ä¸€ä¸ªæ”¯æŒè·¨è¡Œå’Œè·¨åˆ—å¯å˜ Item å¤§å°çš„ GridView é¡¹ç›®åœ°å€ï¼šhttps://github.com/felipecsl/AsymmetricGridView Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.felipecsl.asymmetricgridview.app GridView with Header and Footer å’ŒListViewä¸€æ ·å¸¦å¤´éƒ¨å’Œåº•éƒ¨çš„GridViewï¼Œç”¨æ³•å’ŒListViewä¸€æ · é¡¹ç›®åœ°å€ï¼šhttps://github.com/liaohuqiu/android-GridViewWithHeaderAndFooter å…­ã€ImageView PhotoView æ”¯æŒåŒå‡»æˆ–åŒæŒ‡ç¼©æ”¾çš„ ImageViewï¼Œåœ¨ ViewPager ç­‰ Scrolling view ä¸­æ­£å¸¸ä½¿ç”¨ï¼Œç›¸æ¯”ä¸Šé¢çš„ AndroidTouchGalleryï¼Œä¸ä»…æ”¯æŒ ViewPagerï¼ŒåŒæ—¶æ”¯æŒå•ä¸ª ImageView é¡¹ç›®åœ°å€ï¼šhttps://github.com/chrisbanes/PhotoView åŽŸç†å‰–æžæ–‡æ¡£ï¼š[PhotoView](http://a.codekk.com/detail/Android/dkmeteor/PhotoView æºç è§£æž) Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=uk.co.senab.photoview.sample APP ç¤ºä¾‹ï¼šphotup Fresco-ImageView Fresco-ImageViewæ˜¯ä¸€ç§Androidå¹³å°çš„å›¾åƒæŽ§ä»¶ï¼Œåº•å±‚æ˜¯å¯¹Frescoçš„å°è£…ï¼Œå¯ä»¥å¼‚æ­¥åŠ è½½ç½‘ç»œå›¾ç‰‡ã€é¡¹ç›®èµ„æºå’Œæœ¬åœ°å›¾ç‰‡ï¼Œå¹¶ä¸”æ”¯æŒåŒæŒ‡ç¼©æ”¾ã€å›¾ç‰‡çš„åŸºæœ¬å¤„ç†ä»¥åŠFrescoçš„æ‰€æœ‰ç‰¹æ€§ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/HomHomLin/FrescoImageViewã€‚ android-gif-drawable æ”¯æŒ gif æ˜¾ç¤ºçš„ viewï¼Œç”¨ jni å®žçŽ°çš„ï¼Œç¼–è¯‘ç”Ÿæˆ so åº“åŽç›´æŽ¥ xml å®šä¹‰ view å³å¯ï¼Œè€Œä¸”æœ¬èº«ä¸ä¾èµ–äºŽå…¶ä»–å¼€æºé¡¹ç›®æ‰€ä»¥ç›¸å¯¹ä¸‹é¢çš„ ImageViewEx ç®€å•çš„å¤š é¡¹ç›®åœ°å€ï¼šhttps://github.com/koral--/android-gif-drawable ImageViewEx æ”¯æŒ Gif æ˜¾ç¤ºçš„ ImageViewï¼Œä¾èµ–å¾ˆå¤šï¼Œç¼–è¯‘è¿‡ç¨‹å¾ˆç¹ç é¡¹ç›®åœ°å€ï¼šhttps://github.com/frapontillo/ImageViewEx Demo åœ°å€ï¼šhttps://github.com/Trinea/TrineaDownload/blob/master/imageviewex-demo.apk?raw=true RoundedImageView å¸¦åœ†è§’çš„ ImageView é¡¹ç›®åœ°å€ï¼šhttps://github.com/vinc3m1/RoundedImageView SelectableRoundedImageView ImageView å…è®¸å››ä¸ªè§’çš„æ¯ä¸€ä¸ªæœ‰ä¸åŒçš„åŠå¾„å€¼ã€‚ä¹Ÿå…è®¸æ¤­åœ†å½¢ã€åœ†å½¢çš„å½¢çŠ¶æˆ–è€…è¾¹ é¡¹ç›®åœ°å€ï¼šhttps://github.com/pungrue26/SelectableRoundedImageView Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.joooonho ColorArt æ ¹æ®å›¾ç‰‡çš„å‡è‰²è®¾ç½®èƒŒæ™¯è‰²æ˜¾ç¤ºæ–‡å­—å’Œå›¾ç‰‡ï¼Œç±»ä¼¼ itune11 ä¸­æ•ˆæžœ é¡¹ç›®åœ°å€ï¼šhttps://github.com/MichaelEvans/ColorArt Demo åœ°å€ï¼šhttps://github.com/Trinea/TrineaDownload/blob/master/color-art-demo.apk?raw=true CircleImageView åœ†å½¢çš„ ImageView é¡¹ç›®åœ°å€ï¼šhttps://github.com/hdodenhof/CircleImageView ImageViewZoom æ”¯æŒæ”¾å¤§å’Œå¹³ç§»çš„ ImageView é¡¹ç›®åœ°å€ï¼šhttps://github.com/sephiroth74/ImageViewZoom APP ç¤ºä¾‹ï¼šhttps://play.google.com/store/apps/details?id=com.aviary.android.feather KenBurnsView å®žçŽ° Ken Burns effect æ•ˆæžœï¼Œè¾¾åˆ°èº«ä¸´å…¶å¢ƒæ•ˆæžœçš„ ImageView é¡¹ç›®åœ°å€ï¼šhttps://github.com/flavioarfaria/KenBurnsView CustomShapeImageView å„ç§å½¢çŠ¶çš„ ImageView, ç›¸æ¯”ä¸Šé¢çš„åœ†å½¢ ImageViewï¼Œå¤šäº†æ›´å¤šå½¢çŠ¶ é¡¹ç›®åœ°å€ï¼šhttps://github.com/MostafaGazar/CustomShapeImageView Shape Image View å¯ä»¥è‡ªå®šä¹‰å„ç§å½¢çŠ¶çš„ ImageView, å¹¶ä¸”æ”¯æŒè¾¹æ¡† é¡¹ç›®åœ°å€ï¼šhttps://github.com/siyamed/android-shape-imageview TextDrawable ä¸€ä¸ªç”¨äºŽç”Ÿæˆå¸¦æœ‰æ–‡æœ¬æˆ–è€…å­—æ¯çš„å›¾ç‰‡çš„è½»é‡çº§åº“ã€‚æ‰©å±•è‡ª Drawableï¼Œå› æ­¤å¯ç”¨äºŽçŽ°æœ‰/è‡ªå®šä¹‰/ç½‘ç»œç­‰ ImageView ç±»ï¼Œå¹¶ä¸”åŒ…å«ä¸€ä¸ªæµæŽ¥å£ç”¨äºŽåˆ›å»º drawables ä»¥åŠä¸€ä¸ªå®šåˆ¶çš„ ColorGenerator é¡¹ç›®åœ°å€ï¼šhttps://github.com/amulyakhare/TextDrawable android-smart-image-view å¯ä»Ž URL æˆ– contact address book åŠ è½½å›¾ç‰‡çš„ ImageViewï¼Œæ”¯æŒç¼“å­˜ é¡¹ç›®åœ°å€ï¼šhttps://github.com/loopj/android-smart-image-view PhotoView æ”¯æŒåŒæŒ‡/åŒå‡»ç¼©æ”¾çš„ImageView,æ”¯æŒä»Žä¸€ä¸ªPhotoViewç¼©æ”¾åˆ°å¦å¤–ä¸€ä¸ªPhotoView(ç‚¹å‡»å›¾ç‰‡æ”¾å¤§é¢„è§ˆ),ç›¸å¯¹äºŽå…¶ä»–PhototViewæœ‰æ›´åŠ å¹³æ»‘çš„ç¼©æ”¾,å¹³ç§»çš„åŠ¨ç”»,å¹¶ä¸”æ”¯æŒæ‰€æœ‰çš„ScaleType,å¯ä»¥ä½œä¸ºæ™®é€šçš„ImageViewä½¿ç”¨ é¡¹ç›®åœ°å€ï¼šhttps://github.com/bm-x/PhotoView ä¸ƒã€ProgressBar SmoothProgressBar æ°´å¹³è¿›åº¦æ¡ é¡¹ç›®åœ°å€ï¼šhttps://github.com/castorflex/SmoothProgressBar Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=fr.castorflex.android.smoothprogressbar.sample MaterialProgessBar Material Design çš„è¿›åº¦æ¡ï¼Œæ”¯æŒ Android 4.0 é¡¹ç›®åœ°å€ï¼šhttps://github.com/DreaminginCodeZH/MaterialProgressBar Demo åœ°å€ï¼šhttps://github.com/DreaminginCodeZH/MaterialProgressBar/blob/master/dist/sample.apk ProgressWheel æ”¯æŒè¿›åº¦æ˜¾ç¤ºçš„åœ†å½¢ ProgressBar é¡¹ç›®åœ°å€ï¼šhttps://github.com/Todd-Davies/ProgressWheel Demo åœ°å€ï¼šhttps://github.com/Trinea/TrineaDownload/blob/master/progress-wheel-demo.apk?raw=true android-square-progressbar åœ¨å›¾ç‰‡å‘¨å›´æ˜¾ç¤ºè¿›åº¦ é¡¹ç›®åœ°å€ï¼šhttps://github.com/mrwonderman/android-square-progressbar Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=net.yscs.android.square_progressbar_example APP ç¤ºä¾‹ï¼šsquare HoloCircularProgressBar Android4.1 æ—¶é’Ÿ App æ ·å¼ é¡¹ç›®åœ°å€ï¼šhttps://github.com/passsy/android-HoloCircularProgressBar APP ç¤ºä¾‹ï¼šAndroid4.1 æ—¶é’Ÿ App ProgressButton é€šè¿‡å›¾é’‰çš„ä¸åŒçŠ¶æ€æ˜¾ç¤ºè¿›åº¦ é¡¹ç›®åœ°å€ï¼šhttps://github.com/f2prateek/progressbutton æ–‡æ¡£ä»‹ç»ï¼šhttp://f2prateek.com/progressbutton/ GoogleProgressBar ç±»ä¼¼ google å¤šä¸ªåœ†å½¢å¡ç‰‡ç¿»è½¬çš„ progressBar é¡¹ç›®åœ°å€ï¼šhttps://github.com/jpardogo/GoogleProgressBar TH-ProgressButton å¸¦åœ†å½¢è¿›åº¦æ˜¾ç¤ºçš„æŒ‰é’® é¡¹ç›®åœ°å€ï¼šhttps://github.com/torryharris/TH-ProgressButton NumberProgressBar å¸¦æ•°å­—è¿›åº¦çš„è¿›åº¦æ¡ é¡¹ç›®åœ°å€ï¼šhttps://github.com/daimajia/NumberProgressBar CircularProgressDrawable å¸¦åœ†å½¢è¿›åº¦æ˜¾ç¤ºçš„è¿›åº¦æ¡ é¡¹ç›®åœ°å€ï¼šhttps://github.com/Sefford/CircularProgressDrawable Android-RoundCornerProgressBar Android åœ†è§’ ProgressBarï¼Œå¯è‡ªå®šä¹‰åœ†è§’é¢œè‰²å’ŒåŠå¾„ï¼ŒåŒ…æ‹¬å¸¦ Icon å’Œä¸å¸¦ Icon ä¸¤ç§ç±»åž‹ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/akexorcist/Android-RoundCornerProgressBar circular-progress-button å¸¦è¿›åº¦æ˜¾ç¤ºçš„ Button é¡¹ç›®åœ°å€ï¼šhttps://github.com/dmytrodanylyk/circular-progress-button WaveView ä¸€ä¸ªæ³¢çº¹æ•ˆæžœçš„ Viewï¼Œå¯ç”¨æ¥åš ProgressBar é¡¹ç›®åœ°å€ï¼šhttps://github.com/john990/WaveView Demo åœ°å€ï¼šhttps://raw.github.com/john990/WaveView/master/screenshot%26apk/demo.unaligned.apk MaterialLoadingProgressBar æŠ½å–è‡ª SwipeRefreshLayout çš„ Material Design è¿›åº¦æŒ‡ç¤ºå™¨ é¡¹ç›®åœ°å€ï¼šhttps://github.com/lsjwzh/MaterialLoadingProgressBar MetaballLoading A 2d metaball loading é¡¹ç›®åœ°å€ï¼šhttps://github.com/dodola/MetaballLoading SectorProgressView ä¸€ä¸ªåœ†å½¢æˆ–çŽ¯å½¢çš„è¿›åº¦æ˜¾ç¤ºæŽ§ä»¶ï¼Œç”¨åœ†ä¸­æ‰‡å½¢çš„è§’åº¦å¤§å°æ¥è¡¨ç¤ºè¿›åº¦ä¿¡æ¯ é¡¹ç›®åœ°å€ï¼šhttps://github.com/timqi/SectorProgressView Demoï¼šapk download CircularFillableLoaders ä¸€ä¸ªå¯ä»¥ç”¨äºŽé—ªå±æˆ–è€…å…¶ä»–åœ°æ–¹åŠ è½½çš„æŽ§ä»¶ é¡¹ç›®åœ°å€ï¼šhttps://github.com/lopspower/CircularFillableLoaders Demoåœ°å€ï¼š(https://play.google.com/store/apps/details?id=com.mikhaellopez.circularfillableloaderssample) PinWheel ä¸€ä¸ªæ—‹è½¬çš„å¤§é£Žè½¦Dialog é¡¹ç›®åœ°å€ï¼šhttps://github.com/codingWang/PinWheel ColorArcProgressBar ä¸€ä¸ªå¯å®šåˆ¶çš„åœ†å½¢è¿›åº¦æ¡ï¼Œé€šè¿‡xmlå‚æ•°é…ç½®å¯å®žçŽ°QQå¥åº·ä¸­æ­¥æ•°çš„å¼§å½¢è¿›åº¦æ˜¾ç¤ºã€ä»ªç›˜è¡¨æ˜¾ç¤ºé€Ÿåº¦ã€æœ€å¸¸è§çš„ä¸‹è½½è¿›åº¦æ¡ç­‰åŠŸèƒ½ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/Shinelw/ColorArcProgressBar å…«ã€TextView åŒ…æ‹¬ TextView åŠæ‰€æœ‰ç»§æ‰¿è‡ª TextView æŽ§ä»¶ï¼Œå¦‚ EditTextã€Buttonã€RadioButton android-flowtextview æ–‡å­—è‡ªåŠ¨çŽ¯ç»•å…¶ä»– View çš„ Layout é¡¹ç›®åœ°å€ï¼šhttps://github.com/deano2390/FlowTextView Android Form EditText éªŒè¯è¾“å…¥åˆæ³•æ€§çš„ç¼–è¾‘æ¡†ï¼Œæ”¯æŒè¾“å…¥ã€è‹±æ–‡ã€ipã€url ç­‰å¤šç§æ­£åˆ™éªŒè¯ é¡¹ç›®åœ°å€ï¼šhttps://github.com/vekexasia/android-edittext-validator Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.andreabaccega.edittextformexample Emojicon æ”¯æŒ emojis çš„ TextView å’Œ EditText é¡¹ç›®åœ°å€ï¼šhttps://github.com/rockerhieu/emojicon æ–‡æ¡£ä»‹ç»ï¼šhttp://rockerhieu.com/emojicon/ android-circlebutton Android åœ†å½¢æŒ‰é’®ï¼Œå®žé™…å®žçŽ°æ˜¯ç»§æ‰¿è‡ª ImageView é¡¹ç›®åœ°å€ï¼šhttps://github.com/markushi/android-circlebutton Demo åœ°å€ï¼šhttps://github.com/markushi/android-circlebutton/blob/master/example/example.apk Segmented Radio Buttons for Android iOSâ€™s segmented controls çš„å®žçŽ° é¡¹ç›®åœ°å€ï¼šhttps://github.com/vinc3m1/android-segmentedradiobutton Demo åœ°å€ï¼šhttps://github.com/thquinn/DraggableGridView/blob/master/bin/DraggableGridViewSample.apk?raw=true Chips EditText Library æ”¯æŒå›½å®¶åå­—è”æƒ³ä»Žè€Œé€‰æ‹©æ˜¾ç¤ºè¯¥å›½å›½æ——çš„ EditTextï¼Œå®žé™…å°±æ˜¯é€šè¿‡ SpannableStringBuilder å®žçŽ° é¡¹ç›®åœ°å€ï¼šhttps://github.com/kpbird/chips-edittext-library Demo åœ°å€ï¼šhttps://github.com/kpbird/chips-edittext-library/tree/master/ChipsEditTextDemo/bin AutoFitTextView å¯å›ºå®šè¾¹ç•Œå†…å®¹å­—ä½“å¤§å°è‡ªé€‚åº”çš„ TextView é¡¹ç›®åœ°å€ï¼šhttps://github.com/grantland/android-autofittextview Shimmer for Android æ–‡å­—å‘æ·¡å…‰çš„ TextView é¡¹ç›®åœ°å€ï¼šhttps://github.com/RomainPiel/Shimmer-android Titanic å¯ä»¥æ˜¾ç¤ºæ°´ä½ä¸Šå‡ä¸‹é™(ä¸çŸ¥é“è¯¥æ€Žä¹ˆæè¿° å›§)çš„ TextView é¡¹ç›®åœ°å€ï¼šhttps://github.com/RomainPiel/Titanic android-iconify æä¾›å¸¦ Icon çš„ TextView,Menu,Button ç­‰ é¡¹ç›®åœ°å€ï¼šhttps://github.com/JoanZapata/android-iconify Calligraphy è®©æˆ‘ä»¬åœ¨ android å¼€å‘ä¸­ä½¿ç”¨è‡ªå®šä¹‰å­—ä½“å˜å¾—æ›´åŠ ç®€å• é¡¹ç›®åœ°å€ï¼šhttps://github.com/chrisjenx/Calligraphy CreditsRoll ç±»ä¼¼æ˜Ÿçƒå¤§æˆ˜å­—å¹•æ•ˆæžœçš„ TextView é¡¹ç›®åœ°å€ï¼šhttps://github.com/frakbot/CreditsRoll android-process-buton å¸¦åŠ è½½æˆ–æäº¤è¿›åº¦çš„ Button é¡¹ç›®åœ°å€ï¼šhttps://github.com/dmytrodanylyk/android-process-buton FButton æ‰å¹³åŒ–çš„ Button é¡¹ç›®åœ°å€ï¼šhttps://github.com/hoang8f/android-flat-button Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=info.hoang8f.fbutton.demo FloatingActionButton ä¸€ä¸ªç±»ä¼¼ Android ç‰ˆ Google+æµ®åŠ¨åŠŸèƒ½æŒ‰é’®çš„æŽ§ä»¶ï¼Œå¯ä»¥å“åº” ListView çš„æ»šåŠ¨äº‹ä»¶ã€‚å½“åˆ—è¡¨å‘ä¸Šæ»šåŠ¨çš„æ—¶å€™ä¼šè‡ªåŠ¨æ˜¾ç¤ºï¼Œå‘ä¸‹æ»šåŠ¨çš„æ—¶å€™è‡ªåŠ¨éšè—ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/makovkastar/FloatingActionButton Demo åœ°å€ï¼šhttps://github.com/makovkastar/FloatingActionButton/tree/master/ Android Saripaar Android è¡¨å•éªŒè¯ é¡¹ç›®åœ°å€ï¼šhttps://github.com/ragunathjawahar/android-saripaar/ JumpingBeans æ–‡å­—åƒ Mexican beans ä¸€æ ·è·³åŠ¨ é¡¹ç›®åœ°å€ï¼šhttps://github.com/frakbot/JumpingBeans Demo åœ°å€ï¼šhttp://play.google.com/store/apps/details?id=net.frakbot.jumpingbeans.demo FancyButtons ä¸€ä¸ªä¸ç”¨å›¾ç‰‡å°±å¯ä»¥å¸®åŠ©æˆ‘ä»¬åˆ›å»ºå‡ºæ¼‚äº®æŒ‰é’®çš„åº“ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/medyo/fancybuttons Demo åœ°å€ï¼šhttps://github.com/medyo/fancybuttons/tree/master/samples Android-RobotoTextView ä¸€ä¸ªå®žçŽ°äº†æ‰€æœ‰ Roboto å­—ä½“çš„ TextViewï¼ŒåŒ…æ‹¬æ–°å‡ºçš„ Roboto Slab å­—ä½“ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/johnkil/Android-RobotoTextView Demo åœ°å€ï¼šhttp://play.google.com/store/apps/details?id=com.devspark.robototextview Demo é¡¹ç›®ï¼šhttps://github.com/johnkil/Android-RobotoTextView/tree/master/robototextview-sample Android-WizardPager ä¸€ä¸ªè¡¨å•å‘å¯¼åº“ é¡¹ç›®åœ°å€ï¼šhttps://github.com/romannurik/android-wizardpager Demo é¡¹ç›®ï¼šhttps://github.com/str4d/android-wizardpager/tree/textfield RippleView ä¸€ä¸ªå®žçŽ°äº† Android L ä¸Šæ‰å¼•å…¥çš„ç‚¹å‡»æŒ‰é’®åŽå‡ºçŽ°æ°´æ³¢çº¹æ•ˆæžœçš„æŒ‰é’® é¡¹ç›®åœ°å€ï¼šhttps://github.com/siriscac/RippleView Demo é¡¹ç›®ï¼šhttps://github.com/siriscac/RippleView/tree/master/RippleViewExample RippleEffect ä¸€ä¸ªå®žçŽ° Material Design Ripple æ•ˆæžœçš„åº“ï¼Œæ”¯æŒ Android API 9+ä»¥ä¸Šç‰ˆæœ¬ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/traex/RippleEffect Demo é¡¹ç›®ï¼šhttps://github.com/traex/RippleEffect/tree/master/sample RippleCompat ä½¿ç”¨æ˜“äºŽç§»æ¤çš„æ–¹å¼ä¸ºUIæŽ§ä»¶å®žçŽ°æ³¢çº¹æ•ˆåº”ï¼Œå¯ä»¥é€‚é…æŽ§ä»¶åŽŸèƒŒæ™¯åŠPaletteæ”¯æŒã€‚apiç®€å•ï¼Œå¯è‡ªå®šä¹‰æ•ˆæžœï¼Œå…¼å®¹è‡³Android API 7+ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/desmond1121/RippleCompat Demo é¡¹ç›®ï¼šhttps://github.com/desmond1121/RippleCompat/tree/master/app Android Floating Label Widgets åŒ…å«ä¸€ç³»åˆ—æŽ§ä»¶ï¼Œè¿™äº›æŽ§ä»¶ç‰¹ç‚¹æ˜¯ï¼šæœ‰é»˜è®¤å€¼ï¼Œå½“å€¼ä¸ä¸ºç©ºæ—¶é»˜è®¤å€¼æµ®åŠ¨åˆ°ä¸Šé¢å˜ä¸ºæç¤º é¡¹ç›®åœ°å€ï¼šhttps://github.com/marvinlabs/android-floatinglabel-widgets Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.marvinlabs.widget.floatinglabel.demo åœ¨çº¿æ¼”ç¤ºï¼šhttp://www.youtube.com/watch?v=hpZD9gJcRg0&amp;feature=youtu.be MaterialEditText EditText çš„ Material Design å®žçŽ°ã€‚åŒ…å« Google Material Design Specä¸­çš„ UI æ•ˆæžœå’Œä¸€äº›æ–°å¢žç‰¹æ€§ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/rengwuxian/MaterialEditText MaterialEditText å®žçŽ° Material Design ä¸­ Ripple æ•ˆæžœçº¿æ¡èƒŒæ™¯çš„ EditTextã€‚ç›´æŽ¥æ›¿æ¢åŽŸç”Ÿ EditText å³å¯é›†æˆã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/DreamingInCodeZH/MaterialEditText MultiActionTextView å¯ä»¥åˆ†åˆ«ç»™ TextView ä¸­çš„æŸå‡ ä¸ªå­—è®¾ç½®ç‚¹å‡»äº‹ä»¶çš„ TextView é¡¹ç›®åœ°å€ï¼šhttps://github.com/ajaysahani/MultiActionTextView ToggleButton çŠ¶æ€åˆ‡æ¢çš„ Buttonï¼Œç±»ä¼¼ iOSï¼Œç”¨ View å®žçŽ° é¡¹ç›®åœ°å€ï¼šhttps://github.com/zcweng/ToggleButton SwitchButton çŠ¶æ€åˆ‡æ¢çš„ Buttonï¼Œç±»ä¼¼ iOSï¼Œæ‹¥æœ‰è‰¯å¥½çš„ç”¨æˆ·ç•Œé¢ é¡¹ç›®åœ°å€ï¼šhttps://github.com/kyleduo/SwitchButton SlideSwitch çŠ¶æ€åˆ‡æ¢çš„å¼€å…³ï¼Œå¯ä»¥è®¾ç½®ä¸ºç±»ä¼¼ IOS çš„åœ†å½¢ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸ºçŸ©å½¢ï¼Œç”¨ View å®žçŽ° é¡¹ç›®åœ°å€ï¼šhttps://github.com/Leaking/SlideSwitch ExpandableTextView å¯å±•å¼€å’Œæ”¶ç¼©å†…å®¹çš„ TextViewã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/Manabu-GT/ExpandableTextView TagCloudView(æ”¯æŒ SingleLine æ¨¡å¼çš„æ ‡ç­¾äº‘) æ ‡ç­¾äº‘æ•ˆæžœï¼Œåªéœ€è¦ä¸€è¡Œä»£ç å³å¯è®¾ç½®ä¸º SingleLine æ¨¡å¼ï¼Œè½»æ¾å®žçŽ°çŸ¥ä¹Žé—®é¢˜è¯é¢˜åˆ—è¡¨æ•ˆæžœã€‚SingleLine æ¨¡å¼æ—¶æœ«å°¾æ–‡å­—åŠå›¾ç‰‡å¯è‡ªå®šä¹‰ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/kingideayou/TagCloudView ç¤ºä¾‹APKåœ°å€ï¼šhttps://github.com/kingideayou/TagCloudView/raw/master/apk/Demo.apk APPç¤ºä¾‹ï¼šçŸ¥ä¹Ž BubbleTextView Android Bubble View é¡¹ç›®åœ°å€ï¼šhttps://github.com/dupengtao/BubbleTextView shadow-layout Android Shadow Layout è§£å†³äº†CardViewï¼š1.ä¸èƒ½ç”»åœ†çš„é˜´å½±ã€‚2.è®¾ç½®é˜´å½±çš„ä½ç½®ã€‚3.è®¾ç½®é˜´å½±é¢œè‰²ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/dmytrodanylyk/shadow-layout ä¹ã€ScrollView Discrollview æ”¯æŒæ»šåŠ¨æ—¶ Item æ·¡å…¥æ·¡å‡ºï¼Œå¹³ç§»ï¼Œç¼©æ”¾æ•ˆæžœçš„ ScrollView é¡¹ç›®åœ°å€ï¼šhttps://github.com/flavienlaurent/discrollview Demo åœ°å€ï¼šhttps://github.com/flavienlaurent/discrollview/raw/master/sample.apk PullScrollView ä»¿ç…§æ–°æµªå¾®åš Android å®¢æˆ·ç«¯ä¸ªäººä¸­å¿ƒçš„ ScrollViewï¼Œä¸‹æ‹‰èƒŒæ™¯ä¼¸ç¼©å›žå¼¹æ•ˆæžœã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/MarkMjw/PullScrollView ArcLayout ä¸€ä¸ªéžå¸¸ç®€å•çš„å¼§å¸ƒå±€åº“ é¡¹ç›®åœ°å€ï¼šhttps://github.com/ogaclejapan/ArcLayout Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.ogaclejapan.arclayout.demo ParallaxScrollView æ”¯æŒè§†å·®æ»šåŠ¨çš„ ScrollView ï¼ŒèƒŒæ™¯å›¾ç‰‡çš„æ»šåŠ¨é€Ÿåº¦å°äºŽ ScrollView ä¸­å­æŽ§ä»¶çš„æ»šåŠ¨é€Ÿåº¦ é¡¹ç›®åœ°å€ï¼šhttps://github.com/chrisjenx/ParallaxScrollView Demo åœ°å€ï¼šhttp://cloud.github.com/downloads/chrisjenx/ParallaxScrollView/ParallaxScrollViewDemo-v1.0.5.apk AKParallax-Android æ”¯æŒè§†å·®æ»šåŠ¨çš„ ScrollView é¡¹ç›®åœ°å€ï¼šhttps://github.com/ideaismobile/AKParallax-Android Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.appkraft.parallax_sample Android-ObservableScrollView ç›‘å¬æ»šåŠ¨è§†å›¾æ»šåŠ¨äº‹ä»¶çš„åº“ï¼Œå¸®åŠ©ä¸Ž Toolbar çš„äº¤äº’åŠ¨æ•ˆå¤„ç†ä¸Ž Material Design çš„å®žçŽ° é¡¹ç›®åœ°å€ï¼šhttps://github.com/ksoichiro/Android-ObservableScrollView Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.github.ksoichiro.android.observablescrollview.samples2 OverScrollView æœ‰å¼¹æ€§çš„ ScrollViewï¼Œå®žçŽ°äº†å½“æ‰‹æŒ‡æ»‘åŠ¨åˆ° ScrollView çš„é¡¶éƒ¨ã€åº•éƒ¨æ—¶ï¼Œå¯ä»¥ç»§ç»­çš„å‘ä¸Šã€å‘ä¸‹æ‹‰ä¼¸ã€‚å½“é‡Šæ”¾æ‰‹æŒ‡çš„æ—¶å€™ï¼Œå‘ä¸Šã€ä¸‹å›žå¼¹ é¡¹ç›®åœ°å€ï¼šhttps://github.com/EverythingMe/OverScrollView åã€TimeView åŒ…æ‹¬ TimePickerã€DatePickerã€CalendarViewã€Clock ç­‰æ—¶é—´ç›¸å…³æŽ§ä»¶ android-times-square Android æ—¥åŽ†æ—¶é—´éƒ¨ä»¶ï¼Œæ”¯æŒé€‰å–å•ä¸ªæ—¥æœŸï¼Œå¤šä¸ªæ—¥æœŸï¼ŒåŠæ—¥æœŸåŒºé—´æ®µå’Œå¯¹è¯æ¡†å½¢å¼æ˜¾ç¤º é¡¹ç›®åœ°å€ï¼šhttps://github.com/square/android-times-square Demo åœ°å€ï¼šhttps://github.com/Trinea/TrineaDownload/blob/master/times-square-demo.apk?raw=true android-calendar-card æ—¥åŽ† é¡¹ç›®åœ°å€ï¼šhttps://github.com/kenumir/android-calendar-card Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.wt.calendarcardsample AndroidWheel Android Wheel æ”¯æŒåŸŽå¸‚ã€å¤šç§æ—¥æœŸæ—¶é—´ã€å¯†ç ã€å›¾ç‰‡ é¡¹ç›®åœ°å€ï¼šhttps://code.google.com/p/android-wheel/ GoogleDateTimePickers æ—¶é—´é€‰æ‹©éƒ¨ä»¶ é¡¹ç›®åœ°å€ï¼šhttps://github.com/Mirkoddd/GoogleDateTimePickers æ–‡æ¡£ä»‹ç»ï¼šhttps://play.google.com/store/apps/details?id=com.mirko.sample&amp;hl=it DateTimePicker æ—¥æœŸé€‰æ‹©éƒ¨ä»¶(Google Agenda çš„æ ·å¼é£Žæ ¼) é¡¹ç›®åœ°å€ï¼šhttps://github.com/flavienlaurent/datetimepicker Demo åœ°å€ï¼šhttps://raw.github.com/biboune/datetimepicker/master/datetimepicker-sample.apk android-betterpickers æä¾›æ—¥æœŸã€æ•°å­—ã€æ—¶é—´ï¼ˆæ•°å­—æ–¹å¼å’Œé’Ÿè¡¨æ–¹å¼ï¼‰ã€é‡å¤å‘¨æœŸï¼ˆé—¹é’Ÿçš„å‘¨æœŸé‡å¤ï¼‰ã€HMSï¼ˆæ—¶ã€åˆ†ã€ç§’ï¼‰çš„é€‰æ‹©ï¼Œæ”¯æŒä»¥ DialogFragment çš„å¼¹çª—é€‰æ‹© é¡¹ç›®åœ°å€ï¼šhttps://github.com/derekbrameyer/android-betterpickers Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.doomonafireball.betterpickers.sample Android Week View æ—¥æœŸæŽ§ä»¶ï¼Œæ”¯æŒå‘¨ï¼Œå¤©è§†å›¾ï¼Œæ”¯æŒè‡ªå®šä¹‰æ ·å¼ é¡¹ç›®åœ°å€ï¼šhttps://github.com/alamkanak/Android-Week-View PickerView ä»¿ iOS çš„ PickerView æŽ§ä»¶ï¼Œæœ‰æ—¶é—´é€‰æ‹©å’Œé€‰é¡¹é€‰æ‹©å¹¶æ”¯æŒä¸€äºŒä¸‰çº§è”åŠ¨æ•ˆæžœï¼ŒTimePopupWindow æ—¶é—´é€‰æ‹©å™¨ï¼Œæ”¯æŒå¹´æœˆæ—¥æ—¶åˆ†ï¼Œå¹´æœˆæ—¥ï¼Œæ—¶åˆ†ç­‰æ ¼å¼ï¼›OptionsPopupWindow é€‰é¡¹é€‰æ‹©å™¨ï¼Œæ”¯æŒä¸€ï¼ŒäºŒï¼Œä¸‰çº§é€‰é¡¹é€‰æ‹©ï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®æ˜¯å¦è”åŠ¨ é¡¹ç›®åœ°å€ï¼šhttps://github.com/saiwu-bigkoo/Android-PickerView CountdownView Android å€’è®¡æ—¶æŽ§ä»¶ï¼Œä½¿ç”¨Canvasç»˜åˆ¶ï¼Œæ”¯æŒå¤šç§æ ·å¼ é¡¹ç›®åœ°å€ï¼šhttps://github.com/iwgang/CountdownView åä¸€ã€TipView åŒ…æ‹¬ Toastã€è§’æ ‡ã€UndoBar ç­‰æç¤ºæ€§æŽ§ä»¶ SVProgressHUD SVProgressHUD For Android ç²¾ä»¿iOSçš„æç¤ºåº“ SVProgressHUDï¼Œapiä¹Ÿå‡ ä¹Žä¸€æ ·ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/saiwu-bigkoo/Android-SVProgressHUD Crouton ä¸°å¯Œæ ·å¼çš„ Toastï¼Œå…è®¸ alertã€comfirmã€info æ ·å¼åŠç‚¹å‡»æ¶ˆå¤±æ ·å¼ï¼Œå…è®¸è®¾ç½® Toast æ˜¾ç¤ºæ—¶é—´ï¼Œå…è®¸è‡ªå®šä¹‰ Viewã€‚ æœ¬æ–‡ 32. SuperToasts ä¸ºå…¶æ‰©å±•ç‰ˆ é¡¹ç›®åœ°å€ï¼šhttps://github.com/keyboardsurfer/Crouton Demo åœ°å€ï¼šhttp://play.google.com/store/apps/details?id=de.keyboardsurfer.app.demo.crouton supertooltips å¸¦åŠ¨ç”»æ•ˆæžœçš„ Tips æ˜¾ç¤º é¡¹ç›®åœ°å€ï¼šhttps://github.com/nhaarman/supertooltips Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.haarman.supertooltips Android ViewBadger ä¸ºå…¶ä»– View æ·»åŠ è§’æ ‡ï¼ˆæ¶ˆæ¯åœ†ç‚¹ï¼‰ç­‰ é¡¹ç›®åœ°å€ï¼šhttps://github.com/jgilfelt/android-viewbadger Demo åœ°å€ï¼šhttps://github.com/Trinea/TrineaDownload/blob/master/android-viewbadger.apk?raw=true SuperToasts æ›´ä¸°å¯Œæ ·å¼çš„ toastï¼Œæ”¯æŒ Buttonã€Progressã€Horizontal Progress æ ·å¼ã€æ”¯æŒè¿›å…¥åŠ¨ç”»ã€æ”¯æŒæ’¤é”€åŠå…¶åŠ¨ç”»è®¾ç½® é¡¹ç›®åœ°å€ï¼šhttps://github.com/JohnPersano/SuperToasts Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.supertoastsdemo UndoBar å±å¹•åº•éƒ¨æ˜¾ç¤ºå–æ¶ˆæˆ–æ˜¯ç¡®è®¤çš„ PopupWindows é¡¹ç›®åœ°å€ï¼šhttps://github.com/soarcn/UndoBar UndoBar å±å¹•åº•éƒ¨æ˜¾ç¤ºå–æ¶ˆæˆ–æ˜¯ç¡®è®¤æŸæ“ä½œ é¡¹ç›®åœ°å€ï¼šhttps://github.com/jenzz/Android-UndoBar Android-ActionItemBadge å¯ä»¥åœ¨ ActionBar çš„ MenuItem ä¸Šæ˜¾ç¤ºä¸€ä¸ªå°è§’æ ‡ é¡¹ç›®åœ°å€ï¼šhttps://github.com/mikepenz/Android-ActionItemBadge SnackBar Material Design é£Žæ ¼çš„ Toastï¼Œç±»ä¼¼ Google inbox ä¸­çš„æç¤º é¡¹ç›®åœ°å€ï¼šhttps://github.com/MrEngineer13/SnackBar Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.mrengineer13.snackbar.sample HeadsUp åœ¨ 2.3 ä¸Šä½¿ç”¨ android 5.0 çš„ HeadsUp æ•ˆæžœ é¡¹ç›®åœ°å€ï¼šhttps://github.com/zzz40500/HeadsUp åäºŒã€FlipView android-flip ç±»ä¼¼ Flipboard ç¿»è½¬åŠ¨ç”»çš„å®žçŽ° é¡¹ç›®åœ°å€ï¼šhttps://github.com/openaphid/android-flip Demo åœ°å€ï¼šhttps://github.com/openaphid/android-flip/blob/master/FlipView/Demo/APK/Aphid-FlipView-Demo.apk?raw=true APP ç¤ºä¾‹ï¼šflipboard FlipImageView æ”¯æŒ xã€yã€z åŠåŠ¨ç”»é€‰æ‹©çš„ç¿»è½¬åŠ¨ç”»çš„å®žçŽ° é¡¹ç›®åœ°å€ï¼šhttps://github.com/castorflex/FlipImageView Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=fr.castorflex.android.flipimageview FoldableLayout Flip ç¿»è½¬æ•ˆæžœçš„ ListViewï¼Œç›®å‰è¿˜ä¸æ”¯æŒ ListView ç¼“å­˜ é¡¹ç›®åœ°å€ï¼šhttps://github.com/alexvasilkov/FoldableLayout Demo åœ°å€ï¼šhttp://play.google.com/store/apps/details?id=com.alexvasilkov.foldablelayout.sample FlipViewPager.Draco Flip ç¿»è½¬æ•ˆæžœçš„ ViewPager é¡¹ç›®åœ°å€ï¼šhttps://github.com/Yalantis/FlipViewPager.Draco åä¸‰ã€ColorPickView ColorPickerView é¢œè‰²é€‰æ‹©å™¨ï¼Œæ”¯æŒ PopupWindows æˆ–æ–°çš„ Activity ä¸­æ‰“å¼€ é¡¹ç›®åœ°å€ï¼šhttps://code.google.com/p/color-picker-view/ HoloColorPicker é¢œè‰²é€‰æ‹©å™¨ é¡¹ç›®åœ°å€ï¼šhttps://github.com/LarsWerkman/HoloColorPicker Demo åœ°å€ï¼šhttps://docs.google.com/file/d/0BwclyDTlLrdXRzVnTGJvTlRfU2s/edit ColorPickerPreference é¢œè‰²é€‰æ‹©å™¨ é¡¹ç›®åœ°å€ï¼šhttps://github.com/attenzione/android-ColorPickerPreference ColorPicker é¢œè‰²é€‰æ‹©å™¨ï¼ˆGoogle Agenda ä¸­çš„æ ·å¼é£Žæ ¼ï¼‰ é¡¹ç›®åœ°å€ï¼šhttps://github.com/flavienlaurent/colorpicker Demo åœ°å€ï¼šhttps://raw.github.com/biboune/colorpicker/master/colorpicker-sample.apk åå››ã€GraphView MPAndroidChart å¼ºå¤§çš„å›¾è¡¨ç»˜åˆ¶å·¥å…·ï¼Œæ”¯æŒæŠ˜çº¿å›¾ã€é¢ç§¯å›¾ã€æ•£ç‚¹å›¾ã€æ—¶é—´å›¾ã€æŸ±çŠ¶å›¾ã€æ¡å›¾ã€é¥¼å›¾ã€æ°”æ³¡å›¾ã€åœ†çŽ¯å›¾ã€èŒƒå›´ï¼ˆé«˜è‡³ä½Žï¼‰æ¡å½¢å›¾ã€ç½‘çŠ¶å›¾ç­‰ï¼›æ”¯æŒå›¾çš„æ‹–æ‹½ç¼©æ”¾ï¼›æ”¯æŒ Android 2.2 ä»¥ä¸Šï¼Œæ”¯æŒæ¨ªçºµè½´ç¼©æ”¾ï¼Œå¤šæŒ‡ç¼©æ”¾ï¼Œå±•çŽ°åŠ¨ç”»ã€é«˜äº®ã€ä¿å­˜åˆ° sdcardã€ä»Žæ–‡ä»¶è¯»å–å›¾è¡¨ é¡¹ç›®åœ°å€ï¼šhttps://github.com/PhilJay/MPAndroidChart Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.xxmassdeveloper.mpchartexample Demo é¡¹ç›®ï¼šhttps://github.com/PhilJay/MPAndroidChart/tree/master/MPChartExample åœ¨çº¿æ¼”ç¤ºï¼šhttps://www.youtube.com/watch?v=ufaK_Hd6BpI achartengine å¼ºå¤§çš„å›¾è¡¨ç»˜åˆ¶å·¥å…·ï¼Œæ”¯æŒæŠ˜çº¿å›¾ã€é¢ç§¯å›¾ã€æ•£ç‚¹å›¾ã€æ—¶é—´å›¾ã€æŸ±çŠ¶å›¾ã€æ¡å›¾ã€é¥¼å›¾ã€æ°”æ³¡å›¾ã€åœ†çŽ¯å›¾ã€èŒƒå›´ï¼ˆé«˜è‡³ä½Žï¼‰æ¡å½¢å›¾ã€æ‹¨å·å›¾/è¡¨ã€ç«‹æ–¹çº¿å›¾åŠå„ç§å›¾çš„ç»“åˆ é¡¹ç›®åœ°å€ï¼šhttps://code.google.com/p/achartengine/ å®˜ç½‘ç½‘å€ï¼šhttp://www.achartengine.org/ APP ç¤ºä¾‹ï¼šWordpress Androidï¼ŒGoogle Analytics GraphView ç»˜åˆ¶å›¾è¡¨å’Œæ›²çº¿å›¾çš„ Viewï¼Œå¯ç”¨äºŽ Android ä¸Šçš„æ›²å½¢å›¾ã€æŸ±çŠ¶å›¾ã€æ³¢æµªå›¾å±•ç¤º é¡¹ç›®åœ°å€ï¼šhttps://github.com/jjoe64/GraphView Demo é¡¹ç›®ï¼šhttps://github.com/jjoe64/GraphView-Demos APP ç¤ºä¾‹ï¼šWordpress Androidï¼ŒGoogle Analytics HoloGraphLibrary ç»˜åˆ¶çŽ°çŠ¶å›¾ã€æŸ±çŠ¶å›¾ã€é¥¼çŠ¶å›¾ é¡¹ç›®åœ°å€ï¼šhttps://bitbucket.org/danielnadeau/holographlibrary/src æ–‡æ¡£ä»‹ç»ï¼šhttps://bitbucket.org/danielnadeau/holographlibrary/wiki/Home XCL-Charts XCL-Charts åŸºäºŽåŽŸç”Ÿçš„ Canvas æ¥ç»˜åˆ¶å„ç§å›¾è¡¨,åœ¨è®¾è®¡æ—¶ï¼Œå°½é‡åœ¨ä¿è¯å¼€å‘æ•ˆçŽ‡çš„åŒæ—¶ï¼Œç»™ä½¿ç”¨è€…æä¾›è¶³å¤Ÿå¤šçš„å®šåˆ¶åŒ–èƒ½åŠ›ã€‚å› æ­¤ä½¿ç”¨ç®€ä¾¿,åŒæ—¶å…·æœ‰ç›¸å½“çµæ´»çš„å®šåˆ¶èƒ½åŠ›ã€‚ç›®å‰æ”¯æŒ 3D/éž 3D æŸ±å½¢å›¾(Bar Chart)ã€3D/éž 3D é¥¼å›¾(Pie Chart)ã€å †ç§¯å›¾(Stacked Bar Chart)ã€é¢ç§¯å›¾(Area Chart)ã€ æŠ˜çº¿å›¾(Line Chart)ã€æ›²çº¿å›¾(Spline Chart)ã€çŽ¯å½¢å›¾(Dount Chart)ã€å—ä¸æ ¼å°”çŽ«ç‘°å›¾(Rose Chart)ã€ä»ªè¡¨ç›˜(Dial Chart)ã€åˆ»åº¦ç›˜(Gauge Chart)ã€é›·è¾¾å›¾(Radar Chart)ã€åœ†å½¢å›¾(Circle Chart)ç­‰å›¾è¡¨ã€‚å…¶å®ƒç‰¹æ€§è¿˜åŒ…æ‹¬æ”¯æŒå›¾è¡¨ç¼©æ”¾ã€æ‰‹åŠ¿ç§»åŠ¨ã€åŠ¨ç”»æ˜¾ç¤ºæ•ˆæžœã€é«˜å¯†åº¦æŸ±å½¢æ˜¾ç¤ºã€å›¾è¡¨åˆ†ç•Œå®šåˆ¶çº¿ã€å¤šå›¾è¡¨çš„æ··åˆæ˜¾ç¤ºåŠåŒæ•°æ®æºä¸åŒç±»åž‹å›¾è¡¨åˆ‡æ¢ç­‰ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/xcltapestry/XCL-Charts Demo åœ°å€ï¼šhttps://github.com/xcltapestry/XCL-Charts/blob/master/XCL-Charts-demo/bin/XCL-Charts-demo.apk?raw=true EazeGraph Android å›¾è¡¨åº“ï¼Œæ”¯æŒæŸ±çŠ¶å›¾ã€åˆ†å±‚æŸ±çŠ¶å›¾ã€é¥¼çŠ¶å›¾ã€çº¿æ€§å›¾ é¡¹ç›®åœ°å€ï¼šhttps://github.com/blackfizz/EazeGraph Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=org.eazegraph.app WilliamChart ç»˜åˆ¶å›¾è¡¨çš„åº“ï¼Œæ”¯æŒ LineChartViewã€BarChartView å’Œ StackBarChartView ä¸‰ä¸­å›¾è¡¨ç±»åž‹ï¼Œå¹¶ä¸”æ”¯æŒ Android 2.2 åŠä»¥ä¸Šçš„ç³»ç»Ÿã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/diogobernardino/WilliamChart Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.db.williamchartdemo Demo é¡¹ç›®ï¼šhttps://github.com/diogobernardino/WilliamChart/tree/master/sample HelloCharts for Android æ”¯æŒæŠ˜çº¿å›¾ã€æŸ±çŠ¶å›¾ã€é¥¼å›¾ã€æ°”æ³¡å›¾ã€ç»„åˆå›¾ï¼›æ”¯æŒé¢„è§ˆã€æ”¾å¤§ç¼©å°ï¼Œæ»šåŠ¨ï¼Œéƒ¨åˆ†å›¾è¡¨æ”¯æŒåŠ¨ç”»ï¼›æ”¯æŒ Android 2.2 ä»¥ä¸Š é¡¹ç›®åœ°å€ï¼šhttps://github.com/lecho/hellocharts-android Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=lecho.lib.hellocharts.samples åœ¨çº¿æ¼”ç¤ºï¼šhttps://www.youtube.com/watch?v=xbSBjyjH2SY PieChartView æ¯”è¾ƒç®€å•ç›´æŽ¥çš„é¥¼çŠ¶ç»Ÿè®¡æŠ¥è¡¨å›¾ï¼Œä½¿ç”¨æ–¹ä¾¿ï¼Œè®¾ç½®ç›¸åº”çš„å±žæ€§å‚æ•°å³å¯ é¡¹ç›®åœ°å€ï¼šhttps://github.com/wuseal/PieChartView Demo åœ°å€ï¼šhttps://github.com/wuseal/PieChartView åäº”ã€UI Style ä¸åŒæ ·å¼çš„ç³»ç»Ÿ UI é£Žæ ¼ï¼Œå¦‚ IOSã€Bootstrap é£Žæ ¼ UITableView ios é£Žæ ¼æŽ§ä»¶ï¼ŒåŒ…æ‹¬ Buttonã€ListViewã€TableView é¡¹ç›®åœ°å€ï¼šhttps://github.com/thiagolocatelli/android-uitableview Demo åœ°å€ï¼šhttps://github.com/Trinea/TrineaDownload/blob/master/ui-tableview-demo.apk?raw=true ATableView ios é£Žæ ¼æŽ§ä»¶ é¡¹ç›®åœ°å€ï¼šhttps://github.com/dmacosta/ATableView Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.nakardo.atableview.demo Cards-UI å¡ç‰‡å¼ Viewï¼Œæ”¯æŒå•ä¸ªå¡ç‰‡ï¼Œitem ä¸ºå¡ç‰‡çš„ ListView é¡¹ç›®åœ°å€ï¼šhttps://github.com/afollestad/Cards-UI Demo åœ°å€ï¼šhttps://github.com/Trinea/TrineaDownload/blob/master/cards-ui-demo.apk?raw=true cardslib å¡ç‰‡å¼ Viewï¼Œæ”¯æŒå•ä¸ªå¡ç‰‡ï¼Œitem ä¸ºå¡ç‰‡çš„ ListView å’Œ GridView é¡¹ç›®åœ°å€ï¼šhttps://github.com/gabrielemariotti/cardslib Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=it.gmariotti.cardslib.demo Android-Bootstrap Bootstrap é£Žæ ¼çš„æŒ‰é’® é¡¹ç›®åœ°å€ï¼šhttps://github.com/Bearded-Hen/Android-Bootstrap Material Design Android Library Android L ä¸­ Material Design é£Žæ ¼çš„ç»„ä»¶é€‚é…åˆ° Android 2.2+ é¡¹ç›®åœ°å€ï¼šhttps://github.com/navasmdc/MaterialDesignLibrary Android FlatUI Android æ‰å¹³åŒ–é£Žæ ¼çš„ç»„ä»¶ï¼Œæ”¯æŒä¸€äº›è‡ªå®šä¹‰æ ·å¼ é¡¹ç›®åœ°å€ï¼šhttps://github.com/eluleci/FlatUI cheesesquare å…¨æ–° Android è®¾è®¡åº“æ¼”ç¤º Demoï¼ŒåŒ…æ‹¬ Collapsing Toolbarã€FloatingActionButtonã€View anchoringã€NavigationViewã€Snackbar é¡¹ç›®åœ°å€ï¼šhttps://github.com/chrisbanes/cheesesquare åå…­ã€å…¶ä»– SnappingStepper ä¸€ç§æ¼‚äº®çš„UIæŽ§ä»¶ï¼Œèƒ½æ›´çµæ´»çš„æŽ§åˆ¶æ•°å­—çš„å¢žå‡ã€‚å¯ç”¨äºŽè´­ç‰©è½¦å•†å“æ•°é‡æŽ§åˆ¶ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/saiwu-bigkoo/Android-SnappingStepper SwipeBackLayout å·¦å³æˆ–å‘ä¸Šæ»‘åŠ¨è¿”å›žçš„ Activity é¡¹ç›®åœ°å€ï¼šhttps://github.com/Issacw0ng/SwipeBackLayout Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=me.imid.swipebacklayout.demo APP ç¤ºä¾‹ï¼šçŸ¥ä¹Ž android-styled-dialogs å¯è‡ªå®šä¹‰æ ·å¼çš„ dialogï¼Œé»˜è®¤ä¸Ž Holo ä¸»é¢˜æ ·å¼ä¸€è‡´ï¼Œåœ¨ Android2.2 ä»¥ä¸ŠåŒä¸€æ ·å¼ é¡¹ç›®åœ°å€ï¼šhttps://github.com/inmite/android-styled-dialogs Demo åœ°å€ï¼šhttps://github.com/Trinea/TrineaDownload/blob/master/styled-dialogs-demo.apk?raw=true Android Sliding Up Panel å¯æ‹–åŠ¨çš„ Viewï¼Œèƒ½åœ¨å½“å‰ Activity ä¸Šæ‰¶èµ·ä¸€ä¸ªå¯æ‹–åŠ¨çš„ Panel é¡¹ç›®åœ°å€ï¼šhttps://github.com/umano/AndroidSlidingUpPanel Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.sothree.umano APP ç¤ºä¾‹ï¼šGoogle Music ç²¾ç®€æ’­æ”¾æ  TableFixHeaders ç¬¬ä¸€åˆ—å›ºå®šçš„ Table é¡¹ç›®åœ°å€ï¼šhttps://github.com/InQBarna/TableFixHeaders Demo åœ°å€ï¼šhttp://bit.ly/13buAIq Inscription å¯ç”¨äºŽå±•ç¤ºåº”ç”¨ change å’Œ new feature ä¿¡æ¯ é¡¹ç›®åœ°å€ï¼šhttps://github.com/MartinvanZ/Inscription ActivityTransition Activity åˆ‡æ¢åŠ¨ç”»ï¼ŒåŒ…æ‹¬æ¸å˜ã€flipã€æŸä¸ªä½ç½®è¿›å…¥ç­‰ç­‰ é¡¹ç›®åœ°å€ï¼šhttps://github.com/ophilbert/ActivityTransition æ–‡æ¡£ä»‹ç»ï¼šhttps://github.com/jfeinstein10/JazzyViewPager/blob/master/JazzyViewPager.apk?raw=true EasyAndroidAnimations é’ˆå¯¹ View çš„å„ç§åŠ¨ç”» é¡¹ç›®åœ°å€ï¼šhttps://github.com/2359media/EasyAndroidAnimations ViewAnimation å¯¹android view åŠ¨ç”»è¿›è¡Œå°è£…,å®žçŽ°èµ·æ›´ç®€å•ï¼Œè‡ªå¸¦ä¸‰ç§å¸¸è§è¿åŠ¨è·¯å¾„ï¼Œå…¶ä»–çš„å¯è‡ªå®šä¹‰ é¡¹ç›®åœ°å€ï¼šhttps://github.com/guohuanwen/ViewAniamtion APP ç¤ºä¾‹ï¼šQQåç‰‡åœˆåœˆæ•ˆæžœ AndroidLoadingAnimation å¤šç§androidåŠ è½½åŠ¨ç”» é¡¹ç›®åœ°å€ï¼šhttps://github.com/guohuanwen/AndroidLoadingAnimation android-lockpattern Android çš„å›¾æ¡ˆå¯†ç è§£é” é¡¹ç›®åœ°å€ï¼šhttps://code.google.com/p/android-lockpattern/ åŽŸç†å‰–æžæ–‡æ¡£ï¼š[android-lockpattern](http://a.codekk.com/detail/Android/çˆ±æ—©èµ·/Android Lock Pattern æºç è§£æž) Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=group.pals.android.lib.ui.lockpattern.demo æ–‡æ¡£ä»‹ç»ï¼šhttps://code.google.com/p/android-lockpattern/wiki/QuickUse APP ç¤ºä¾‹ï¼šAndroid å¼€æœºçš„å›¾æ¡ˆå¯†ç è§£é”ï¼Œæ”¯ä»˜å®çš„å¯†ç è§£é” PatternLock å¦ä¸€ä¸ª Android å›¾æ¡ˆè§£é”åº“ é¡¹ç›®åœ°å€ï¼šhttps://github.com/DreaminginCodeZH/PatternLock Demo åœ°å€ï¼šhttps://github.com/DreaminginCodeZH/PatternLock/raw/master/dist/sample.apk APP ç¤ºä¾‹ï¼šAndroid å¼€æœºçš„å›¾æ¡ˆå¯†ç è§£é”ï¼Œæ”¯ä»˜å®çš„å¯†ç è§£é” RangeBar ç±»ä¼¼äºŽ SeekBarï¼Œä¸åŒçš„æ˜¯å¯ä»¥é€‰æ‹©ä¸€ä¸ªèŒƒå›´å†…çš„å€¼è€Œä¸æ˜¯å•ä¸ªå€¼ é¡¹ç›®åœ°å€ï¼šhttps://github.com/edmodo/range-bar Demo åœ°å€ï¼šhttps://github.com/Trinea/TrineaDownload/blob/master/range-bar-demo.apk?raw=true ChromeView åˆ©ç”¨ Chromium å®žçŽ°çš„ WebViewï¼Œè§£å†³å„ä¸ª Android ç‰ˆæœ¬ WebView ä¸åŒçš„é—®é¢˜ï¼ŒåŒæ—¶åˆ©ç”¨æœ€æ–° Chrome ä»£ç  é¡¹ç›®åœ°å€ï¼šhttps://github.com/pwnall/chromeview android-phased-seek-bar æ”¯æŒé¢„å…ˆå®šä¹‰çŠ¶æ€çš„ SeekBar é¡¹ç›®åœ°å€ï¼šhttps://github.com/ademar111190/android-phased-seek-bar Android Slider Preference Library å¯æ·»åŠ åˆ°è®¾ç½®ä¸­çš„åŸºäºŽå¯¹è¯æ¡†çš„ RankBar å°éƒ¨ä»¶ é¡¹ç›®åœ°å€ï¼šhttps://github.com/jayschwa/AndroidSliderPreference ShowcaseView library ç”¨äºŽé«˜äº®æ˜¾ç¤ºåº”ç”¨ç¨‹åºçš„ç‰¹å®šéƒ¨åˆ†ï¼Œä»Žè€Œçªå‡ºçªå‡ºé‡ç‚¹ é¡¹ç›®åœ°å€ï¼šhttps://github.com/amlcurran/ShowcaseView android-segmented-control Android ä¸Šçš„ Segmented Controlsï¼Œç›¸å½“äºŽ RadioButton ç»„ é¡¹ç›®åœ°å€ï¼šhttps://github.com/hoang8f/android-segmented-control Swipeable Cards ç±»ä¼¼ Tinder çš„å¡ç‰‡æ•ˆæžœï¼Œå¯ä»¥åŠ è½½å›¾ç‰‡å¹¶åŠ¨ç”»æ•ˆæžœå±•ç¤ºï¼Œå‘å·¦æ»‘åŠ¨è¡¨ç¤ºå–œæ¬¢ï¼Œå‘å³è¡¨ç¤ºä¸å–œæ¬¢ é¡¹ç›®åœ°å€ï¼šhttps://github.com/kikoso/Swipeable-Cards Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=info.hoang8f.fbutton.demo EdgeEffectOverride æ”¹å˜ ScrollView, ListView, ExpandableListView, GridView, ViewPager ç­‰æ»šåŠ¨æŽ§ä»¶æ»šåŠ¨åˆ°è¾¹ç¼˜çš„é¢œè‰²æ•ˆæžœ é¡¹ç›®åœ°å€ï¼šhttps://github.com/AndroidAlliance/EdgeEffectOverride android-pinned-header-listviews ä½¿ ExpandListView çš„ Group æ»‘åŠ¨åˆ°é¡¶ç«¯æ—¶ä¼šå›ºå®šä¸åŠ¨ç›´åˆ°å¦å¤–ä¸€ä¸ª Group åˆ°è¾¾é¡¶ç«¯ é¡¹ç›®åœ°å€ï¼šhttps://github.com/rtyley/android-pinned-header-listviews AndroidSwipeLayout æ»‘åŠ¨ Layoutï¼Œæ”¯æŒå•ä¸ª Viewï¼ŒListViewï¼ŒGridView é¡¹ç›®åœ°å€ï¼šhttps://github.com/daimajia/AndroidSwipeLayout Demo åœ°å€ï¼šDownload Demo DynamicCardLayout åœ¨ Android ä¸­å®žçŽ°çš„ç±»ä¼¼ Windows8 çš„ç“·ç‰‡å¸ƒå±€ é¡¹ç›®åœ°å€ï¼šhttps://github.com/dodola/DynamicCardLayout Emoticons-Keyboard å¸¦è¡¨æƒ…æƒ…ç¬¦å·çš„è‡ªå®šä¹‰é”®ç›˜ é¡¹ç›®åœ°å€ï¼šhttps://github.com/chiragjain/Emoticons-Keyboard Android Typeface Helper å¯ä»¥å¸®ä½ è½»æ¾å®žçŽ°è‡ªå®šä¹‰å­—ä½“çš„åº“ é¡¹ç›®åœ°å€ï¼šhttps://github.com/norbsoft/android-typeface-helper Android-Anim-Playground å‡ ä¸ªåŠ¨ç”»æ•ˆæžœï¼Œå…¶ä¸­ç¬¬äºŒä¸ªåŸºäºŽ android-svg çš„ç»˜åˆ¶æ•ˆæžœéžå¸¸å¥½ é¡¹ç›®åœ°å€ï¼šhttps://github.com/Tibolte/Android-Anim-Playground AlertView ä»¿iOSçš„AlertViewController å‡ ä¹Žå®Œç¾Žè¿˜åŽŸiOS çš„ AlertViewController ï¼ŒåŒæ—¶æ”¯æŒAlertå’ŒActionSheetæ¨¡å¼ï¼Œæ¯ä¸€ä¸ªç»†èŠ‚éƒ½æ˜¯ç²¾é›•ç»†ç¢ï¼Œå¹¶æŠŠapiå°è£…æˆæ‡’åˆ°æžè‡´æ¨¡å¼ï¼Œä¸€è¡Œä»£ç å°±å¯ä»¥è¿›è¡Œå¼¹çª—. é¡¹ç›®åœ°å€ï¼šhttps://github.com/saiwu-bigkoo/Android-AlertView NiftyDialogEffects æ”¯æŒè‡ªå®šä¹‰é£žå…¥åŠ¨ç”»æ ·å¼çš„ Dialog é¡¹ç›®åœ°å€ï¼šhttps://github.com/sd6352051/NiftyDialogEffects åœ¨çº¿æ¼”ç¤ºï¼šhttp://tympanus.net/Development/ModalWindowEffects/ PostOffice åˆ›å»º Holo åŠ Material Design æ ·å¼çš„ Dialog é¡¹ç›®åœ°å€ï¼šhttps://github.com/r0adkll/PostOffice Swipecards ç±»ä¼¼ Tinder çš„å¡ç‰‡æ•ˆæžœï¼Œå¯ä»¥åŠ è½½å›¾ç‰‡å¹¶åŠ¨ç”»æ•ˆæžœå±•ç¤ºï¼Œå‘å·¦æ»‘åŠ¨è¡¨ç¤ºå–œæ¬¢ï¼Œå‘å³è¡¨ç¤ºä¸å–œæ¬¢ï¼Œæ ¹æ® Kikosoâ€™s Swipeable-Cards æ”¹é€ è€Œæ¥ é¡¹ç›®åœ°å€ï¼šhttps://github.com/Diolor/Swipecards SeekArc åœ†å½¢çš„ SeekBar é¡¹ç›®åœ°å€ï¼šhttps://github.com/TriggerTrap/SeekArc BlurDialogFragment æ˜¾ç¤º DialogFragment æ—¶èƒŒæ™¯æ¨¡ç³Šæ•ˆæžœ é¡¹ç›®åœ°å€ï¼šhttps://github.com/tvbarthel/BlurDialogFragment Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=fr.tvbarthel.lib.blurdialogfragment.sample range-seek-bar éšæœºå€¼é€‰å–çš„ SeekBar é¡¹ç›®åœ°å€ï¼šhttps://github.com/yahoo/android-range-seek-bar MaterialRangeBar å¯ä»¥é€‰æ‹©ä¸€ä¸ªèŒƒå›´å†…çš„å€¼è€Œä¸æ˜¯å•ä¸ªå€¼çš„ SeekBarï¼ŒRangeBar çš„ Material Design é£Žæ ¼é€‚é… é¡¹ç›®åœ°å€ï¼šhttps://github.com/oli107/material-range-bar MaterialList Material Design é£Žæ ¼çš„ CardView é¡¹ç›®åœ°å€ï¼šhttps://github.com/dexafree/MaterialList Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.dexafree.materiallistviewexample road-trip è®¾ç½® path çš„å„ç§åŠ¨ç”»æ•ˆæžœï¼Œä»¥åŠå¦‚ä½•å®žçŽ°å¤æ‚è·¯å¾„åŠ¨ç”»ï¼Œç±»ä¼¼äºŽ ios ä¸­çš„æŒ‡çº¹æ³¨å†Œç•Œé¢çš„æŒ‡çº¹åŠ¨ç”»æ•ˆæžœ é¡¹ç›®åœ°å€ï¼šhttps://github.com/romainguy/road-trip dialogplus ä¸€ä¸ªç®€å•çš„ Android å¯¹è¯æ¡†ï¼Œæ”¯æŒä¸åŒçš„å¼¹å‡ºæ¨¡å¼ é¡¹ç›®åœ°å€ï¼šhttps://github.com/orhanobut/dialogplus FlowLayout ä¸€ä¸ªç®€å•çš„æµå¼å¸ƒå±€ï¼Œç”¨æ³•ç±»ä¼¼ LinearLayoutï¼Œä½†æ˜¯èƒ½å¤Ÿè®©å­å…ƒç´ æ ¹æ®å®½åº¦è‡ªåŠ¨æ¢è¡Œ é¡¹ç›®åœ°å€ï¼šFLowLayout CircleSeekbar ä¸€ä¸ªçŽ¯å½¢Seekbarç»„ä»¶,æ”¯æŒå åŠ å¤åˆä½¿ç”¨ é¡¹ç›®åœ°å€ï¼šCircleSeekbar FinestWebView ç¾Žéº—çš„å’Œå¯å®šåˆ¶çš„Androidçš„æ´»å‹•ï¼Œé¡¯ç¤ºåœ¨ä¸€å€‹æ‡‰ç”¨ç¨‹åºçš„ç¶²é ã€‚ é¡¹ç›®åœ°å€: https://github.com/TheFinestArtist/FinestWebView-Android Sample åœ°å€: https://play.google.com/store/apps/details?id=com.thefinestartist.finestwebview.sample YouTubePlayerActivity åªéœ€é€šéŽä¸€å€‹URLä¾†åœ¨æ–°çš„æ´»å‹•æ’­æ”¾YouTubeè¦–é »ã€‚å®ƒæ”¯æŒå±å¹•æ–¹å‘ï¼Œåª’é«”éŸ³é‡æŽ§åˆ¶ç­‰ã€‚ é¡¹ç›®åœ°å€: https://github.com/TheFinestArtist/YouTubePlayerActivity Sample åœ°å€: https://play.google.com/store/apps/details?id=com.thefinestartist.ytpa.sample material-camera materialé£Žæ ¼çš„cameraã€‚èƒ½ä½¿cameraä½¿ç”¨èµ·æ¥æ›´ç®€å•çš„åº“ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/afollestad/material-camera material-dialogs å„ç§materialé£Žæ ¼çš„dialogã€‚ æ¼‚äº®çš„çš„ã€æ˜“äºŽä½¿ç”¨çš„å’Œå¯å®šåˆ¶çš„Dialog APIï¼Œä½ èƒ½å¤Ÿä½¿ç”¨Material designedé£Žæ ¼çš„Dialogåˆ°API 8ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/afollestad/material-dialogs Sampleåœ°å€ï¼šhttps://github.com/afollestad/material-dialogs/blob/master/sample/sample.apk NotifyUtil æœ€å¸¸è§çš„é€šçŸ¥æ ·å¼åº“ é¡¹ç›®åœ°å€:https://github.com/wenmingvs/NotifyUtil demoåœ°å€ï¼šhttps://github.com/wenmingvs/NotifyUtil#notifydemo CanPhotos ä½¿ç”¨frescoé€‰å–å¤šå¼ å›¾ç‰‡å¹¶å¯é¢„è§ˆå›¾ç‰‡ é¡¹ç›®åœ°å€ï¼šhttps://github.com/canyinghao/CanPhotos CanDialog ä»¿ç…§ç³»ç»ŸDialogæ‰€å†™ï¼Œç»§æ‰¿äºŽFrameLayoutï¼Œæ·»åŠ ä¸€äº›åŠ¨ç”»ï¼Œä¸€äº›æ˜¾ç¤ºç±»åž‹ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/canyinghao/CanDialog ç¬¬äºŒéƒ¨åˆ† å·¥å…·åº“ ä¸»è¦åŒ…æ‹¬é‚£äº›ä¸é”™çš„å¼€å‘åº“ï¼ŒåŒ…æ‹¬ä¾èµ–æ³¨å…¥æ¡†æž¶ã€å›¾ç‰‡ç¼“å­˜ã€ç½‘ç»œè¯·æ±‚ã€æ•°æ®åº“ ORM å»ºæ¨¡ã€Android å…¬å…±åº“ã€Android é«˜ç‰ˆæœ¬å‘ä½Žç‰ˆæœ¬å…¼å®¹ã€å¤šåª’ä½“ç›¸å…³åŠå…¶ä»–ã€‚ ä¸€ã€ä¾èµ–æ³¨å…¥ DI é€šè¿‡ä¾èµ–æ³¨å…¥å‡å°‘ Viewã€æœåŠ¡ã€èµ„æºç®€åŒ–åˆå§‹åŒ–ï¼Œäº‹ä»¶ç»‘å®šç­‰é‡å¤ç¹çå·¥ä½œ AndroidAnnotations(Code Diet) android å¿«é€Ÿå¼€å‘æ¡†æž¶ é¡¹ç›®åœ°å€ï¼šhttps://github.com/excilys/androidannotations æ–‡æ¡£ä»‹ç»ï¼šhttps://github.com/excilys/androidannotations/wiki å®˜ç½‘ç½‘å€ï¼šhttp://androidannotations.org/ ç‰¹ç‚¹ï¼š(1) ä¾èµ–æ³¨å…¥ï¼šåŒ…æ‹¬ viewï¼Œextrasï¼Œç³»ç»ŸæœåŠ¡ï¼Œèµ„æºç­‰ç­‰ (2) ç®€å•çš„çº¿ç¨‹æ¨¡åž‹ï¼Œé€šè¿‡ annotation è¡¨ç¤ºæ–¹æ³•è¿è¡Œåœ¨ ui çº¿ç¨‹è¿˜æ˜¯åŽå°çº¿ç¨‹ (3) äº‹ä»¶ç»‘å®šï¼šé€šè¿‡ annotation è¡¨ç¤º view çš„å“åº”äº‹ä»¶ï¼Œä¸ç”¨åœ¨å†™å†…éƒ¨ç±» (4) REST å®¢æˆ·ç«¯ï¼šå®šä¹‰å®¢æˆ·ç«¯æŽ¥å£ï¼Œè‡ªåŠ¨ç”Ÿæˆ REST è¯·æ±‚çš„å®žçŽ° (5) æ²¡æœ‰ä½ æƒ³è±¡çš„å¤æ‚ï¼šAndroidAnnotations åªæ˜¯åœ¨åœ¨ç¼–è¯‘æ—¶ç”Ÿæˆç›¸åº”å­ç±» (6) ä¸å½±å“åº”ç”¨æ€§èƒ½ï¼šä»… 50kbï¼Œåœ¨ç¼–è¯‘æ—¶å®Œæˆï¼Œä¸ä¼šå¯¹è¿è¡Œæ—¶æœ‰æ€§èƒ½å½±å“ã€‚ å…¶ä»–ï¼šä¸Ž roboguice çš„æ¯”è¾ƒï¼šroboguice é€šè¿‡è¿è¡Œæ—¶è¯»å– annotations è¿›è¡Œåå°„ï¼Œæ‰€ä»¥å¯èƒ½å½±å“åº”ç”¨æ€§èƒ½ï¼Œè€Œ AndroidAnnotations åœ¨ç¼–è¯‘æ—¶ç”Ÿæˆå­ç±»ï¼Œæ‰€ä»¥å¯¹æ€§èƒ½æ²¡æœ‰å½±å“ roboguice å¸®ä½ å¤„ç†äº†å¾ˆå¤šä»£ç å¼‚å¸¸ï¼Œåˆ©ç”¨ annotation ä½¿å¾—æ›´å°‘çš„ä»£ç å®Œæˆé¡¹ç›® é¡¹ç›®åœ°å€ï¼šhttps://github.com/roboguice/roboguice æ–‡æ¡£ä»‹ç»ï¼šhttps://github.com/roboguice/roboguice/wiki butterknife åˆ©ç”¨ annotation å¸®ä½ å¿«é€Ÿå®Œæˆ View çš„åˆå§‹åŒ–ï¼Œå‡å°‘ä»£ç  é¡¹ç›®åœ°å€ï¼šhttps://github.com/JakeWharton/butterknife æ–‡æ¡£ä»‹ç»ï¼šhttp://jakewharton.github.io/butterknife/ Dagger ä¾èµ–æ³¨å…¥ï¼Œé€‚ç”¨äºŽ Android å’Œ Java é¡¹ç›®åœ°å€ï¼šhttps://github.com/square/dagger åŽŸç†å‰–æžæ–‡æ¡£ï¼š[Dagger](http://a.codekk.com/detail/Android/æ‰”ç‰©çº¿/Dagger æºç è§£æž) æ–‡æ¡£ä»‹ç»ï¼šhttp://square.github.io/dagger/ AutoParcel æ³¨è§£è‡ªåŠ¨ç”ŸæˆParcelableå®žçŽ°ä»£ç çš„åº“ é¡¹ç›®åœ°å€ï¼šhttps://github.com/frankiesardo/auto-parcel è¿™ç¯‡æ–‡ç« è¯¦ç»†ä»‹ç»äº†å®ƒçš„ä½¿ç”¨æ–¹æ³•ï¼šAutoParcel ä½œè€…è®¤ä¸ºä½¿ç”¨AutoParcelçš„å¥½å¤„æ˜¯ï¼Œå¯ä»¥ç®€åŒ–æž„é€ å‡½æ•°ï¼Œæ–¹ä¾¿IDEä»£ç è‡ªåŠ¨å®Œæˆï¼Œæ–¹ä¾¿æµ‹è¯•ï¼Œå‰å‘å…¼å®¹ï¼Œç”Ÿæˆä¸å¯å˜çš„å¯¹è±¡ã€‚ æ–‡æ¡£ä»‹ç»ï¼šhttps://github.com/frankiesardo/auto-parcel äºŒã€å›¾ç‰‡ç¼“å­˜ Android-Universal-Image-Loader å›¾ç‰‡ç¼“å­˜ï¼Œç›®å‰ä½¿ç”¨æœ€å¹¿æ³›çš„å›¾ç‰‡ç¼“å­˜ï¼Œæ”¯æŒä¸»æµå›¾ç‰‡ç¼“å­˜çš„ç»å¤§å¤šæ•°ç‰¹æ€§ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/nostra13/Android-Universal-Image-Loader åŽŸç†å‰–æžæ–‡æ¡£ï¼š[Android-Universal-Image-Loader](http://a.codekk.com/detail/Android/huxian99/Android Universal Image Loader æºç åˆ†æž) Demo åœ°å€ï¼šhttps://github.com/Trinea/TrineaDownload/blob/master/universal-imageloader-demo.apk?raw=true æ–‡æ¡£ä»‹ç»ï¼šhttp://www.intexsoft.com/blog/item/74-universal-image-loader-part-3.html picasso square å¼€æºçš„å›¾ç‰‡ç¼“å­˜ é¡¹ç›®åœ°å€ï¼šhttps://github.com/square/picasso æ–‡æ¡£ä»‹ç»ï¼šhttp://square.github.io/picasso/ ç‰¹ç‚¹ï¼š(1)å¯ä»¥è‡ªåŠ¨æ£€æµ‹ adapter çš„é‡ç”¨å¹¶å–æ¶ˆä¹‹å‰çš„ä¸‹è½½ (2)å›¾ç‰‡å˜æ¢ (3)å¯ä»¥åŠ è½½æœ¬åœ°èµ„æº (4)å¯ä»¥è®¾ç½®å ä½èµ„æº (5)æ”¯æŒ debug æ¨¡å¼ Cube ImageLoader é˜¿é‡Œå·´å·´ä¸€æ·˜ä½¿ç”¨çš„å›¾ç‰‡åŠ è½½ï¼Œç»¼åˆäº† Android-Universal-Image-Loader å’Œ square ç­‰ç»„ä»¶ä¼˜ç‚¹ï¼Œç®€å•æ˜“ç”¨ï¼Œè‰¯å¥½çš„ä¸­æ–‡æ–‡æ¡£æ”¯æŒ é¡¹ç›®åœ°å€ï¼šhttps://github.com/etao-open-source/cube-sdk Demo åœ°å€ï¼šhttps://github.com/liaohuqiu/cube-sdk/raw/master/cube-sdk-sample.apk æ–‡æ¡£ä»‹ç»ï¼šhttp://cube-sdk.liaohuqiu.net/ fresco ä¸€æ¬¾å¼ºå¤§çš„å›¾ç‰‡ç¼“å­˜å·¥å…·ï¼Œç”± Facebook å¼€å‘ é¡¹ç›®åœ°å€ï¼šhttps://github.com/facebook/fresco æ–‡æ¡£ä»‹ç»ï¼šhttp://frescolib.org/ ç‰¹ç‚¹ï¼š(1) ä¸¤ä¸ªå†…å­˜ç¼“å­˜åŠ ä¸Šç£ç›˜ç¼“å­˜æž„æˆäº†ä¸‰çº§ç¼“å­˜ (2) æ”¯æŒæµå¼ï¼Œå¯ä»¥ç±»ä¼¼ç½‘é¡µä¸Šæ¨¡ç³Šæ¸è¿›å¼æ˜¾ç¤ºå›¾ç‰‡ (3) å¯¹å¤šå¸§åŠ¨ç”»å›¾ç‰‡æ”¯æŒæ›´å¥½ï¼Œå¦‚ Gifã€WebP (4) æ›´å¤šæ ·çš„æ˜¾ç¤ºï¼Œå¦‚åœ†è§’ã€è¿›åº¦æ¡ã€ç‚¹å‡»é‡è¯•ã€è‡ªå®šä¹‰å¯¹ç„¦ç‚¹ (5) æ›´å¤šæ ·çš„åŠ è½½ï¼Œå¦‚æ”¯æŒ EXIFã€å…¨é¢æ”¯æŒ WebP (6) æ”¯æŒ Android 2.3+ Glide Glide æ˜¯ä¸€ä¸ª android å¹³å°ä¸Šçš„å¿«é€Ÿå’Œé«˜æ•ˆçš„å¼€æºçš„å¤šåª’ä½“èµ„æºç®¡ç†åº“,æä¾› å¤šåª’ä½“æ–‡ä»¶çš„åŽ‹ç¼©,å†…å­˜å’Œç£ç›˜ç¼“å­˜, èµ„æºæ± çš„æŽ¥å£ã€‚ å®ƒå¯ä»¥æœ€å¤§æ€§èƒ½åœ°åœ¨ Android è®¾å¤‡ä¸Šè¯»å–ã€è§£ç ã€æ˜¾ç¤ºå›¾ç‰‡å’Œè§†é¢‘ã€‚Glide å¯ä»¥å°†è¿œç¨‹çš„å›¾ç‰‡ã€è§†é¢‘ã€åŠ¨ç”»å›¾ç‰‡ç­‰ç¼“å­˜åœ¨è®¾å¤‡æœ¬åœ°ä¾¿äºŽæé«˜ç”¨æˆ·æµè§ˆå›¾ç‰‡çš„æµç•…ä½“éªŒã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/bumptech/glide ç‰¹ç‚¹ï¼š (1) GIF åŠ¨ç”»çš„è§£ç  (2) æœ¬åœ°è§†é¢‘å‰§ç…§çš„è§£ç  (3) æ”¯æŒç¼©ç•¥å›¾ (4) Activity ç”Ÿå‘½å‘¨æœŸçš„é›†æˆ (5) è½¬ç çš„æ”¯æŒ (6) åŠ¨ç”»çš„æ”¯æŒ (7) OkHttp å’Œ Volley çš„æ”¯æŒ ä¸‰ã€ç½‘ç»œè¯·æ±‚ Volley Google æä¾›çš„ç½‘ç»œé€šä¿¡åº“ï¼Œä½¿å¾—ç½‘ç»œè¯·æ±‚æ›´ç®€å•ã€æ›´å¿«é€Ÿ é¡¹ç›®åœ°å€ï¼šhttps://android.googlesource.com/platform/frameworks/volley æ–‡æ¡£ä»‹ç»ï¼šhttp://commondatastorage.googleapis.com/io-2013/presentations/110 - Volley- Easy, Fast Networking for Android.pdf Asynchronous Http Client for Android Android å¼‚æ­¥ Http è¯·æ±‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/loopj/android-async-http æ–‡æ¡£ä»‹ç»ï¼šhttp://loopj.com/android-async-http/ ç‰¹ç‚¹ï¼š(1) åœ¨åŒ¿åå›žè°ƒä¸­å¤„ç†è¯·æ±‚ç»“æžœ (2) åœ¨ UI çº¿ç¨‹å¤–è¿›è¡Œ http è¯·æ±‚ (3) æ–‡ä»¶æ–­ç‚¹ä¸Šä¼  (4) æ™ºèƒ½é‡è¯• (5) é»˜è®¤ gzip åŽ‹ç¼© (6) æ”¯æŒè§£æžæˆ Json æ ¼å¼ (7) å¯å°† Cookies æŒä¹…åŒ–åˆ° SharedPreferences android-query å¼‚æ­¥åŠ è½½ï¼Œæ›´å°‘ä»£ç å®Œæˆ Android åŠ è½½ é¡¹ç›®åœ°å€ï¼šhttps://github.com/androidquery/androidquery æˆ– https://code.google.com/p/android-query/ Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.androidquery æ–‡æ¡£ä»‹ç»ï¼šhttps://code.google.com/p/android-query/#Why_AQuery? ç‰¹ç‚¹ï¼šhttps://code.google.com/p/android-query/#Why_AQuery? Async Http Client Java å¼‚æ­¥ Http è¯·æ±‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/AsyncHttpClient/async-http-client æ–‡æ¡£ä»‹ç»ï¼šhttp://sonatype.github.io/async-http-client/ Ion æ”¯æŒå›¾ç‰‡ã€jsonã€http post ç­‰å¼‚æ­¥è¯·æ±‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/koush/ion æ–‡æ¡£ä»‹ç»ï¼šhttps://github.com/koush/ion#more-examples Http Request é¡¹ç›®åœ°å€ï¼šhttps://github.com/kevinsawicki/http-request æ–‡æ¡£ä»‹ç»ï¼šhttps://github.com/kevinsawicki/http-request#examples okhttp square å¼€æºçš„ http å·¥å…·ç±» é¡¹ç›®åœ°å€ï¼šhttps://github.com/square/okhttp æ–‡æ¡£ä»‹ç»ï¼šhttp://square.github.io/okhttp/ ç‰¹ç‚¹ï¼š(1) æ”¯æŒ SPDY( http://zh.wikipedia.org/wiki/SPDY )åè®®ã€‚SPDY åè®®æ˜¯ Google å¼€å‘çš„åŸºäºŽä¼ è¾“æŽ§åˆ¶åè®®çš„åº”ç”¨å±‚åè®®ï¼Œé€šè¿‡åŽ‹ç¼©ï¼Œå¤šè·¯å¤ç”¨(ä¸€ä¸ª TCP é“¾æŽ¥ä¼ é€ç½‘é¡µå’Œå›¾ç‰‡ç­‰èµ„æº)å’Œä¼˜å…ˆçº§æ¥ç¼©çŸ­åŠ è½½æ—¶é—´ã€‚ (2) å¦‚æžœ SPDY ä¸å¯ç”¨ï¼Œåˆ©ç”¨è¿žæŽ¥æ± å‡å°‘è¯·æ±‚å»¶è¿Ÿ (3) Gzip åŽ‹ç¼© (4) Response ç¼“å­˜å‡å°‘ä¸å¿…è¦çš„è¯·æ±‚ Retrofit RESTFUL API è®¾è®¡ é¡¹ç›®åœ°å€ï¼šhttps://github.com/square/retrofit æ–‡æ¡£ä»‹ç»ï¼šhttp://square.github.io/retrofit/ RoboSpice Android å¼‚æ­¥ç½‘ç»œè¯·æ±‚å·¥å…·ï¼Œæ”¯æŒç¼“å­˜ã€REST ç­‰ç­‰ é¡¹ç›®åœ°å€ï¼šhttps://github.com/stephanenicolas/robospice Demo åœ°å€ï¼šhttps://github.com/stephanenicolas/RoboDemo/downloads TwistVolley TwistVolley æ˜¯å¯¹ Volley çš„ä¸€ä¸ªå°è£…åº“ã€‚æä¾›ç±»ä¼¼ Picasso ä¸€æ ·çš„ä¸²è”å¼ APIã€‚ä½¿å¾—ä½¿ç”¨ Volley æ›´åŠ æ–¹ä¾¿ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/TwistedEquations/TwistVolley å››ã€æ•°æ®åº“ orm å·¥å…·åŒ… orm çš„ db å·¥å…·ç±»ï¼Œç®€åŒ–å»ºè¡¨ã€æŸ¥è¯¢ã€æ›´æ–°ã€æ’å…¥ã€äº‹åŠ¡ã€ç´¢å¼•çš„æ“ä½œ greenDAO Android Sqlite orm çš„ db å·¥å…·ç±» é¡¹ç›®åœ°å€ï¼šhttps://github.com/greenrobot/greenDAO æ–‡æ¡£ä»‹ç»ï¼šhttp://greendao-orm.com/documentation/ å®˜ç½‘ç½‘å€ï¼šhttp://greendao-orm.com/ ç‰¹ç‚¹ï¼š(1) æ€§èƒ½ä½³ (2) ç®€å•æ˜“ç”¨çš„ API (3) å†…å­˜å°å¥½å° (4) åº“å¤§å°å° GreenDaoUpgradeHelper greenDAOçš„æ•°æ®åº“å‡çº§å¸®åŠ©ç±»ï¼Œåªéœ€ä¸€è¡Œä»£ç è§£å†³æ•°æ®åº“å‡çº§ é¡¹ç›®åœ°å€ï¼šhttps://github.com/yuweiguocn/GreenDaoUpgradeHelper ActiveAndroid Android Sqlite orm çš„ db å·¥å…·ç±» é¡¹ç›®åœ°å€ï¼šhttps://github.com/pardom/ActiveAndroid æ–‡æ¡£ä»‹ç»ï¼šhttps://github.com/pardom/ActiveAndroid/wiki/_pages Sprinkles Android Sqlite orm çš„ db å·¥å…·ç±»ï¼Œæ¯”è¾ƒæ˜¾è‘—çš„ç‰¹ç‚¹å°±æ˜¯é…åˆ https://github.com/square/retrofit èƒ½ä¿å­˜ä»ŽæœåŠ¡å™¨èŽ·å–çš„æ•°æ® é¡¹ç›®åœ°å€ï¼šhttps://github.com/emilsjolander/sprinkles æ–‡æ¡£ä»‹ç»ï¼šhttp://emilsjolander.github.io/blog/2013/12/18/android-with-sprinkles/ Realm ç§»åŠ¨ç«¯çš„æ•°æ®åº“ï¼Œé€‚ç”¨äºŽ Phoneã€Tabletã€Wearableï¼Œæ”¯æŒ ORMï¼Œçº¿ç¨‹å®‰å…¨ã€æ”¯æŒè¿žè¡¨åŠæ•°æ®åº“åŠ å¯†ï¼Œæ¯” SQLite æ€§èƒ½æ›´å¥½ é¡¹ç›®åœ°å€ï¼šhttps://github.com/realm/realm-java æ–‡æ¡£ä»‹ç»ï¼šhttp://realm.io/docs/java/0.72.0/ ormlite-android é¡¹ç›®åœ°å€ï¼šhttps://github.com/j256/ormlite-android æ–‡æ¡£ä»‹ç»ï¼šhttp://ormlite.com/sqlite_java_android_orm.shtml Schematic æ ¹æ® SQLite ç”Ÿæˆ ContentProvider é¡¹ç›®åœ°å€ï¼šhttps://github.com/SimonVT/schematic DBFlow Android SQLite ORM å·¥å…·åº“ã€‚ç»¼åˆäº† Active Android, Schematic, Ollie,Sprinkles ç­‰åº“çš„ä¼˜ç‚¹ï¼›é€šè¿‡æ³¨è§£å®žçŽ°ï¼Œæ€§èƒ½å¥½ï¼›èƒ½ç”Ÿæˆ ContentProviderã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/Raizlabs/DBFlow æ–‡æ¡£ä»‹ç»ï¼šhttps://github.com/Raizlabs/DBFlow#usage-docs SnappyDB SnappyDBæ˜¯ä¸€ä¸ªkey-valueæ•°æ®åº“ï¼Œéžå¸¸æµè¡Œçš„NoSQLæ•°æ®åº“ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/nhachicha/SnappyDB æ¼”ç¤ºDemoï¼šhttps://play.google.com/store/apps/details?id=com.snappydb.snippets.app äº”ã€Android å…¬å…±åº“ Guava Google çš„åŸºäºŽ java1.6 çš„ç±»åº“é›†åˆçš„æ‰©å±•é¡¹ç›®ï¼ŒåŒ…æ‹¬ collections, caching, primitives support, concurrency libraries, common annotations, string processing, I/O ç­‰ç­‰. è¿™äº›é«˜è´¨é‡çš„ API å¯ä»¥ä½¿ä½ çš„ JAVa ä»£ç æ›´åŠ ä¼˜é›…ï¼Œæ›´åŠ ç®€æ´ é¡¹ç›®åœ°å€ï¼šhttps://code.google.com/p/guava-libraries/ æ–‡æ¡£ä»‹ç»ï¼šhttps://code.google.com/p/guava-libraries/wiki/GuavaExplained AndroidCommon Android å…¬å…±åº“ é¡¹ç›®åœ°å€ï¼šhttps://github.com/Trinea/AndroidCommon Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=cn.trinea.android.demo æ–‡æ¡£ä»‹ç»ï¼šhttp://www.trinea.cn/android/android-common-lib/ åŒ…æ‹¬ï¼ša. ImageCache å›¾ç‰‡ç¼“å­˜ï¼ŒåŒ…å«å†…å­˜å’Œ Sdcard ç¼“å­˜ http://www.trinea.cn/android/android-imagecache/ ç‰¹ç‚¹ï¼š(1)æ”¯æŒé¢„å–æ–°å›¾ç‰‡ï¼Œæ”¯æŒç­‰å¾…é˜Ÿåˆ— (2)åŒ…å«äºŒçº§ç¼“å­˜ï¼Œå¯è‡ªå®šä¹‰æ–‡ä»¶åä¿å­˜è§„åˆ™ (3)å¯é€‰æ‹©å¤šç§ç¼“å­˜ç®—æ³•(FIFOã€LIFOã€LRUã€MRUã€LFUã€MFU ç­‰ 13 ç§)æˆ–è‡ªå®šä¹‰ç¼“å­˜ç®—æ³• (4)å¯æ–¹ä¾¿çš„ä¿å­˜åŠåˆå§‹åŒ–æ¢å¤æ•°æ® (5)æ”¯æŒä¸åŒç±»åž‹ç½‘ç»œå¤„ç† (6)å¯æ ¹æ®ç³»ç»Ÿé…ç½®åˆå§‹åŒ–ç¼“å­˜ç­‰ HttpCache Http ç¼“å­˜ æ–‡æ¡£ä»‹ç»ï¼šhttp://www.trinea.cn/android/android-http-cache ç‰¹ç‚¹æ˜¯ï¼š(1) æ ¹æ® cache-controlã€expires ç¼“å­˜ http è¯·æ±‚ (2) æ”¯æŒåŒæ­¥ã€å¼‚æ­¥ Http è¯·æ±‚ (3) åœ¨åŒ¿åå›žè°ƒä¸­å¤„ç†è¯·æ±‚ç»“æžœ (4) åœ¨ UI çº¿ç¨‹å¤–è¿›è¡Œ http è¯·æ±‚ (5) é»˜è®¤ gzip åŽ‹ç¼© (2) å…¬å…± View(ä¸‹æ‹‰åŠåº•éƒ¨åŠ è½½æ›´å¤š ListViewã€åº•éƒ¨åŠ è½½æ›´å¤š ScrollViewã€æ»‘åŠ¨ä¸€é¡µ Gallery) (3) Android å¸¸ç”¨å·¥å…·ç±»(ç½‘ç»œã€ä¸‹è½½ã€Android èµ„æºæ“ä½œã€shellã€æ–‡ä»¶ã€Jsonã€éšæœºæ•°ã€Collection ç­‰ç­‰) DropDownListView ä¸‹æ‹‰åˆ·æ–°åŠæ»‘åŠ¨åˆ°åº•éƒ¨åŠ è½½æ›´å¤š ListView æ–‡æ¡£ä»‹ç»ï¼šhttp://www.trinea.cn/android/dropdown-to-refresh-and-bottom-load-more-listview/ shipfaster æ•´åˆäº† Dagger Otto Retrofit Robolectric Picasso OkHttpï¼Œæ–¹ä¾¿å¿«é€Ÿå¼€å‘ é¡¹ç›®åœ°å€ï¼šhttps://github.com/pyricau/shipfaster CleanAndroidCode æ•´åˆäº† Dagger Otto AndroidAnnotationsï¼Œæ–¹ä¾¿å¿«é€Ÿå¼€å‘ é¡¹ç›®åœ°å€ï¼šhttps://github.com/pyricau/CleanAndroidCode xUtils åŸºäºŽ Afinalï¼ŒåŒ…å« DbUtilsã€ViewUtilsã€HttpUtilsã€BitmapUtils å››å¤§æ¨¡å—ï¼Œå¯ç”¨äºŽå¿«é€Ÿå¼€å‘ é¡¹ç›®åœ°å€ï¼šhttps://github.com/wyouflf/xUtils åŽŸç†å‰–æžæ–‡æ¡£ï¼š[xUtils](http://a.codekk.com/detail/Android/Caij/xUtils æºç è§£æž) Afinal Afinal æ˜¯ä¸€ä¸ª android çš„ iocï¼Œorm æ¡†æž¶ï¼Œå†…ç½®äº†å››å¤§æ¨¡å—åŠŸèƒ½ï¼šFinalAcitivity,FinalBitmap,FinalDb,FinalHttpã€‚é€šè¿‡ finalActivityï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ³¨è§£çš„æ–¹å¼è¿›è¡Œç»‘å®š ui å’Œäº‹ä»¶ã€‚é€šè¿‡ finalBitmapï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿çš„åŠ è½½ bitmap å›¾ç‰‡ï¼Œè€Œæ— éœ€è€ƒè™‘ oom ç­‰é—®é¢˜ã€‚é€šè¿‡ finalDB æ¨¡å—ï¼Œæˆ‘ä»¬ä¸€è¡Œä»£ç å°±å¯ä»¥å¯¹ android çš„ sqlite æ•°æ®åº“è¿›è¡Œå¢žåˆ æ”¹æŸ¥ã€‚é€šè¿‡ FinalHttp æ¨¡å—ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥ ajax å½¢å¼è¯·æ±‚ http æ•°æ® é¡¹ç›®åœ°å€ï¼šhttps://github.com/yangfuhai/afinal å®˜ç½‘ç½‘å€ï¼šhttp://www.afinal.org UltimateAndroid UltimateAndroid æ˜¯ä¸€ä¸ªå¿«é€Ÿå¼€å‘ Android åº”ç”¨çš„æ¡†æž¶ï¼Œæ¡†æž¶ç›®å‰ä¸»è¦åŒ…å«çš„åŠŸèƒ½æœ‰ View Injection,ORM,å¼‚æ­¥ç½‘ç»œè¯·æ±‚å’Œå›¾ç‰‡åŠ è½½ï¼Œè‡ªåŠ¨åŒ–è„šæœ¬æµ‹è¯•,ç£ç›˜ LRU ç­‰åŠŸèƒ½.åŒæ—¶æä¾›äº†ç±»ä¼¼äºŽ TripleDesã€Webview å¿«é€Ÿè®¾ç½®ã€Md5 å¤„ç†ã€String å¤„ç†,Https å¤„ç†ç­‰å¸¸ç”¨å·¥å…·ç±»ï¼Œè¿˜æœ‰è¶…è¿‡ 100 å¤šç§ UI æŽ§ä»¶æ•ˆæžœã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/cymcsg/UltimateAndroid å®˜ç½‘ç½‘å€ï¼šhttp://blog.marshalchen.com/UltimateAndroid/ SAF SAF(Simple Android Framework)æ˜¯ä¸€ä¸ªç®€å•çš„ android æ¡†æž¶ï¼Œå®ƒä¸ºå¼€å‘ Android app æä¾›äº†åŸºç¡€æ€§ç»„ä»¶ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/fengzhizi715/SAF å®˜ç½‘ç½‘å€ï¼šhttp://www.salesuite.cn/ åŒ…æ‹¬ï¼š(1)Event Bus(äº‹ä»¶æ€»çº¿) (2) Rest Client(http çš„æ¡†æž¶) (3) Image Cache(å›¾ç‰‡ç¼“å­˜) (4) Dependency Injection(ä¾èµ–æ³¨å…¥) (5) Sqlite ORM(sqlite çš„ orm) (6) Router(Activityã€Fragment çš„ Router) (7) Utils(å„ç§å¸¸ç”¨çš„å·¥å…·ç±») Barber Custom View ç¥žå™¨ã€‚é€šè¿‡ç®€å•çš„æ³¨è§£å¸®åŠ©ä½ å¤§å¤§å‡å°‘ Custom View ä¸­çš„ä»£ç é‡ã€‚ç”±äºŽå’Œ ButterKnife ä¸€æ ·ä½¿ç”¨äº† Annotation Proccessor ï¼Œæ‰€ä»¥å¯¹ç¨‹åºæ€§èƒ½æ²¡æœ‰å½±å“ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/hzsweers/barber device-year-class A library that analyzes an Android deviceâ€™s specifications and calculates which year the device would be considered &quot;high endâ€.(facebook å¼€å‘çš„æ£€æµ‹æ‰‹æœºä¸»æµé…ç½®å·¥å…·) é¡¹ç›®åœ°å€ï¼šhttps://github.com/facebook/device-year-class RxAndroid å¯¹RxJavaåœ¨Androidä¸Šçš„æ‰©å±•ï¼Œä½¿å¾—Androidä¸Šä¹Ÿå¾ˆå®¹æ˜“å®žçŽ°reactive componentsï¼Œç®€åŒ–çº¿ç¨‹æ“ä½œï¼Œä»Žè€Œå†™å‡ºå¾ˆæ¼‚äº®çš„ä»£ç ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/ReactiveX/RxAndroid æ–‡æ¡£ä»‹ç»ï¼šç»™Android å¼€å‘è€…çš„ RxJava è¯¦è§£ MultiImageSelector ä¸€ä¸ªæœ¬åœ°å›¾ç‰‡é€‰æ‹©å™¨ï¼Œæ”¯æŒå›¾ç‰‡çš„å•é€‰å’Œå¤šé€‰ï¼Œç›´æŽ¥è¿”å›žæ‰€é€‰å›¾ç‰‡çš„è·¯å¾„ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/lovetuzitong/MultiImageSelector.git å…­ã€Android é«˜ç‰ˆæœ¬å‘ä½Žç‰ˆæœ¬å…¼å®¹ Nine Old Androids å°† Android 3.0(Honeycomb)æ‰€æœ‰åŠ¨ç”» API(ObjectAnimator ValueAnimator ç­‰)å…¼å®¹åˆ° Android1.0 é¡¹ç›®åœ°å€ï¼šhttps://github.com/JakeWharton/NineOldAndroids åŽŸç†å‰–æžæ–‡æ¡£ï¼š[Nine Old Androids](http://a.codekk.com/detail/Android/Mr.Simple/NineOldAnimations æºç è§£æž) Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.jakewharton.nineoldandroids.sample æ–‡æ¡£ä»‹ç»ï¼šhttp://nineoldandroids.com/ HoloEverywhere å°† Android 3.0 çš„ Holo ä¸»é¢˜å…¼å®¹åˆ° Android2.1++ é¡¹ç›®åœ°å€ï¼šhttps://github.com/Prototik/HoloEverywhere Demo åœ°å€ï¼šhttps://raw.github.com/Prototik/HoloEverywhere/repo/org/holoeverywhere/demo/2.1.0/demo-2.1.0.apk æ–‡æ¡£ä»‹ç»ï¼šhttp://android-developers.blogspot.com/2012/01/holo-everywhere.html SherlockNavigationDrawer å°† Android NavigationDrawer å’Œ ActionbarSherlock ç»“åˆï¼Œè§£å†³ 4.0 ä»¥ä¸‹ NavigationDrawer çš„é€‚é…é—®é¢˜ é¡¹ç›®åœ°å€ï¼šhttps://github.com/tobykurien/SherlockNavigationDrawer æ–‡æ¡£ä»‹ç»ï¼šhttp://developer.android.com/training/implementing-navigation/nav-drawer.html Notifications4EveryWhere å°† Android 4.1 çš„ Notification å…¼å®¹åˆ° Android2.2++ é¡¹ç›®åœ°å€ï¼šhttps://github.com/youxiachai/Notifications4EveryWhere Android Switch Widget Backport å°† Android Switch å’Œ SwitchPreference çš„å…¼å®¹åˆ° Android2.1++ é¡¹ç›®åœ°å€ï¼šhttps://github.com/BoD/android-switch-backport Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=org.jraf.android.backport.switchwidget.sample æ–‡æ¡£ä»‹ç»ï¼šhttps://github.com/BoD/android-switch-backport#using-the-switch android-datepicker å°† Android 4.0 çš„ datepicker å…¼å®¹åˆ° Android2.2++ é¡¹ç›®åœ°å€ï¼šhttps://github.com/SimonVT/android-datepicker Transitions Everywhere Android 4.4 çš„ Transitions API å…¼å®¹åˆ° Android 2.2 ä»¥ä¸Š é¡¹ç›®åœ°å€ï¼šhttps://github.com/andkulikov/transitions-everywhere KShareViewActivityManager ä¸€ä¸ªå…¼å®¹Android 5.0 ä»¥ä¸‹Shared Element Transition ï¼ˆé¡µé¢é—´å…±äº«å…ƒç´ ä½ç§»åŠ¨ç”»ï¼‰åº“ é¡¹ç›®åœ°å€ï¼šhttps://github.com/kot32go/KShareViewActivityManager ä¸ƒã€å¤šåª’ä½“ç›¸å…³ cocos2d-x è·¨å¹³å°çš„ 2d æ¸¸æˆæ¡†æž¶ï¼Œæ”¯æŒ Androidã€IOSã€Linuxã€Windows ç­‰ä¼—å¤šå¹³å° é¡¹ç›®åœ°å€ï¼šhttps://github.com/cocos2d/cocos2d-x æ–‡æ¡£ä»‹ç»ï¼šhttp://www.cocos2d-x.org/wiki å®˜ç½‘ç½‘å€ï¼šhttp://www.cocos2d-x.org/ JustWeEngine Androidçš„è½»é‡çº§æ¸¸æˆæ¡†æž¶ï¼Œèƒ½å¤§å¤§ç¼©å‡ç¼–å†™åŽŸç”Ÿæ¸¸æˆçš„ä»£ç é‡å’Œéš¾åº¦ï¼Œä»åœ¨æŒç»­æ›´æ–°ä¸­ã€‚ é¡¹ç›®åœ°å€: https://github.com/lfkdsk/JustWeEngine Demoåœ°å€: https://github.com/lfkdsk/EngineDemo Vitamio æ˜¯ä¸€æ¬¾ Android ä¸Ž iOS å¹³å°ä¸Šçš„å…¨èƒ½å¤šåª’ä½“å¼€å‘æ¡†æž¶ é¡¹ç›®åœ°å€ï¼šhttps://github.com/yixia/VitamioBundle ç½‘ç«™ä»‹ç»ï¼šhttp://www.vitamio.org/docs/ ç‰¹ç‚¹ï¼š(1) å…¨é¢æ”¯æŒç¡¬ä»¶è§£ç ä¸Ž GPU æ¸²æŸ“ (2) èƒ½å¤Ÿæµç•…æ’­æ”¾ 720P ç”šè‡³ 1080P é«˜æ¸… MKVï¼ŒFLVï¼ŒMP4ï¼ŒMOVï¼ŒTSï¼ŒRMVB ç­‰å¸¸è§æ ¼å¼çš„è§†é¢‘ (3) åœ¨ Android ä¸Ž iOS ä¸Šè·¨å¹³å°æ”¯æŒ MMS, RTSP, RTMP, HLS(m3u8)ç­‰å¸¸è§çš„å¤šç§è§†é¢‘æµåª’ä½“åè®®ï¼ŒåŒ…æ‹¬ç‚¹æ’­ä¸Žç›´æ’­ã€‚ VDPlayerSDK æœ€å®¹æ˜“é›†æˆçš„å¼€æºæ’­æ”¾å™¨ç»„ä»¶ï¼Œæ”¯æŒç›´æ’­ï¼Œæ”¯æŒè½¯ç¡¬è§£åˆ‡æ¢ï¼Œæ”¯æŒæ¸…æ™°åº¦åˆ‡æ¢ é¡¹ç›®åœ°å€ï¼šhttps://github.com/SinaVDDeveloper/ Demo åœ°å€ï¼šhttps://github.com/SinaVDDeveloper/demo æ–‡æ¡£ä»‹ç»ï¼šhttps://github.com/SinaVDDeveloper/sinavideo_playersdk ç‰¹ç‚¹ï¼š (1) ä½¿ç”¨è‡ªå®šä¹‰æŽ§ä»¶æ–¹å¼æä¾›æ’­æ”¾å™¨UIï¼Œä¸éœ€è¦è§†é¢‘ç›¸å…³çŸ¥è¯†ï¼Œèƒ½ç¼–å†™androidåº”ç”¨å°±èƒ½ä½¿ç”¨ (2) è½¯ç¡¬è§£åˆ‡æ¢ã€ç‚¹æ’­ç›´æ’­æ”¯æŒ (3) è§£ç å†…æ ¸å°äºŽ4Mï¼Œæ›´æ–¹ä¾¿é›†æˆåˆ°éžä¸“ä¸šè§†é¢‘appä¸­ (4) ä¿®æ­£ä¸€äº›vitaimioçš„é—®é¢˜ï¼Œæ¯”å¦‚m3u8å¯ä»¥æ‹–åŠ¨ç­‰ç­‰ VideoPlayerManager å¸®åŠ©å®žçŽ°VideoPlayeræŽ§åˆ¶ï¼Œä½¿å¾—å®ƒæ›´å®¹æ˜“ä½¿ç”¨ListViewå’Œrecyclerviewã€‚å®ƒè¿˜å¯ä»¥è·Ÿè¸ªæ»šåŠ¨åˆ—è¡¨ä¸­å¯è§çš„é¡¹ã€‚å½“åˆ—è¡¨ä¸­çš„æ–°é¡¹å¯è§åŸŸæœ€å¤§æ—¶ï¼Œè¯¥åº“ç»™å‡ºäº†æŽ¥å£æ¥è·Ÿè¸ªå®ƒã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/danylovolokh/VideoPlayerManager æ–‡æ¡£ä»‹ç»ï¼šhttps://medium.com/@v.danylo/implementing-video-playback-in-a-scrolled-list-listview-recyclerview-d04bc2148429#.hs5n0geqn UniversalVideoView Androidä¸Šå®šä¹‰æ’­æ”¾å™¨æŽ§ä»¶,æ”¯æŒè‡ªå®šä¹‰æŽ§åˆ¶UI, å…¨å±æ’­æ”¾, é‡åŠ›æ„Ÿåº”è‡ªåŠ¨åˆ‡æ¢æ¨ªç«–å±. é¡¹ç›®åœ°å€ï¼šhttps://github.com/linsea/UniversalVideoView PhotoProcessing åˆ©ç”¨ ndk å¤„ç†å›¾ç‰‡åº“ï¼Œæ”¯æŒ Instafixã€Anselã€Testinoã€XProã€Retroã€BWã€Sepiaã€Cyanoã€Georgiaã€Saharaã€HDRã€Rotate(æ—‹è½¬)ã€Flip(ç¿»è½¬)ç­‰å„ç§ç‰¹æ•ˆ é¡¹ç›®åœ°å€ï¼šhttps://github.com/lightbox/PhotoProcessing Demo åœ°å€ï¼šhttps://github.com/Trinea/TrineaDownload/blob/master/photo-processing.apk?raw=true Android StackBlur å›¾ç‰‡æ¨¡ç³Šæ•ˆæžœå·¥å…·ç±» é¡¹ç›®åœ°å€ï¼šhttps://github.com/kikoso/android-stackblur Demo åœ°å€ï¼šhttps://github.com/kikoso/android-stackblur/blob/master/StackBlurDemo/bin/StackBlurDemo.apk?raw=true æ–‡æ¡£ä»‹ç»ï¼šhttps://github.com/kikoso/android-stackblur#usage Bitmap Smart Clipping using OpenCV å›¾ç‰‡æ™ºèƒ½è£å‰ªä¿ç•™é‡è¦éƒ¨åˆ†æ˜¾ç¤º é¡¹ç›®åœ°å€ï¼šhttps://github.com/beartung/tclip-android åˆ©ç”¨æ·˜å®çš„ http://code.taobao.org/p/tclip/ åº“å®Œæˆ ä¸€æ·˜çŽ©å®¢æ­£åœ¨ä½¿ç”¨çš„å›¾ç‰‡è£å‰ªï¼Œè‡ªåŠ¨è¯†åˆ«å›¾ç‰‡ä¸­çš„é‡è¦åŒºåŸŸï¼Œå¹¶ä¸”åœ¨å›¾ç‰‡è£å‰ªæ—¶ä¿ç•™é‡è¦åŒºåŸŸ ç‰¹ç‚¹ï¼š(1). èƒ½è¿›è¡Œäººè„¸è¯†åˆ«ã€‚å›¾ç‰‡ä¸­æœ‰äººè„¸ï¼Œå°†è‡ªåŠ¨è§†ä¸ºäººè„¸åŒºåŸŸä¸ºé‡è¦åŒºåŸŸï¼Œå°†ä¸ä¼šè¢«è£å‰ªæŽ‰ (2).è‡ªåŠ¨å…¶å®ƒé‡è¦åŒºåŸŸã€‚å¦‚æžœå›¾ç‰‡ä¸­æœªè¯†åˆ«å‡ºäººè„¸ï¼Œåˆ™ä¼šæ ¹æ®ç‰¹å¾åˆ†å¸ƒè®¡ç®—å‡ºé‡åŒºåŸŸ Cropper å›¾ç‰‡å±€éƒ¨å‰ªåˆ‡å·¥å…·ï¼Œå¯è§¦æ‘¸æŽ§åˆ¶é€‰æ‹©åŒºåŸŸæˆ–æ—‹è½¬ é¡¹ç›®åœ°å€ï¼šhttps://github.com/edmodo/cropper æ–‡æ¡£ä»‹ç»ï¼šhttps://github.com/edmodo/cropper/wiki uCrop Yalantis å‡ºå“çš„å¼ºå¤§çš„å›¾ç‰‡è£å‰ªåº“ ï¼Œæ”¯æŒç¼©æ”¾ï¼Œæ—‹è½¬å›¾ç‰‡ï¼Œæ”¯æŒå„ç§æ¯”ä¾‹çš„è£å‰ªæ¡† é¡¹ç›®åœ°å€ï¼šhttps://github.com/Yalantis/uCrop android-crop å›¾ç‰‡è£å‰ª Activity é¡¹ç›®åœ°å€ï¼šhttps://github.com/jdamcd/android-crop TileView å¯åˆ†å—æ˜¾ç¤ºå¤§å›¾ï¼Œæ”¯æŒ 2D æ‹–åŠ¨ã€åŒå‡»ã€åŒæŒ‡æ”¾å¤§ã€åŒæŒ‡æåˆ é¡¹ç›®åœ°å€ï¼šhttps://github.com/moagrius/TileView Demo åœ°å€ï¼šhttp://moagrius.github.io/TileView/TileViewDemo.apk BlurEffectForAndroidDesign å›¾ç‰‡æ¨¡ç³Šæ•ˆæžœ é¡¹ç›®åœ°å€ï¼šhttps://github.com/PomepuyN/BlurEffectForAndroidDesign android-eye PC ç«¯ç½‘é¡µæŸ¥çœ‹åŒä¸€å±€åŸŸç½‘å†…çš„æ‰‹æœºæ‘„åƒå¤´å†…å®¹ï¼Œå¯ä»¥ç”¨æ¥ç›‘æŽ§å“¦ é¡¹ç›®åœ°å€ï¼šhttps://github.com/Teaonly/android-eye Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=teaonly.droideye libpng for Android PNG å›¾ç‰‡çš„ jni åº“ï¼Œæ”¯æŒå‡ ä¹Ž png çš„æ‰€æœ‰ç‰¹æ€§ é¡¹ç›®åœ°å€ï¼šhttps://github.com/julienr/libpng-android æ–‡æ¡£ä»‹ç»ï¼šhttp://www.libpng.org/pub/png/libpng.html android-gpuimage åŸºäºŽ GPU çš„å›¾ç‰‡æ»¤é•œ é¡¹ç›®åœ°å€ï¼šhttps://github.com/CyberAgent/android-gpuimage AndroidFaceCropper å›¾ç‰‡è„¸éƒ¨è‡ªåŠ¨è¯†åˆ«ï¼Œå°†è¯†åˆ«åŽçš„å±€éƒ¨å›¾ç‰‡è¿”å›ž é¡¹ç›®åœ°å€ï¼šhttps://github.com/lafosca/AndroidFaceCropper Android Video Crop åˆ©ç”¨ TextureView æ’­æ”¾å’Œå‰ªåˆ‡è§†é¢‘ï¼Œç±»ä¼¼ ImageView.setScaleType é¡¹ç›®åœ°å€ï¼šhttps://github.com/dmytrodanylyk/android-video-crop Demo åœ°å€ï¼šhttps://github.com/lafosca/AndroidFaceCropper/releases/download/1.0/FaceCropper-sample-debug-unaligned.apk svg-android Android Svg çŸ¢é‡å›¾å½¢æ”¯æŒ é¡¹ç›®åœ°å€ï¼šhttps://github.com/japgolly/svg-android https://github.com/japgolly/svg-android Android Visualizer ä»Ž Android MediaPlayer èŽ·å¾—éŸ³é¢‘ï¼Œç„¶åŽåƒ iTunes åŠ WinAmp ä¸€æ ·å±•ç¤ºéŸ³è½¨ é¡¹ç›®åœ°å€ï¼šhttps://github.com/felixpalmer/android-visualizer ExoPlayer åŒ…æ‹¬ä»ªè¡¨æ¿å’Œ SmoothStreaming è‡ªé€‚åº”å›žæ”¾ï¼Œç¼“å­˜æŒä¹…åŒ–å’Œè‡ªå®šä¹‰æ¸²æŸ“å™¨ï¼Œæ–¹ä¾¿è‡ªå®šä¹‰å’Œæ‰©å±•ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡åº”ç”¨å•†åº—æ›´æ–° é¡¹ç›®åœ°å€ï¼šhttps://github.com/google/ExoPlayer DanmakuFlameMaster android ä¸Šå¼€æºå¼¹å¹•è§£æžç»˜åˆ¶å¼•æ“Žé¡¹ç›® é¡¹ç›®åœ°å€ï¼šhttps://github.com/ctiao/DanmakuFlameMaster OpenDanmaku android ä¸Šä¸€ä¸ªè½»é‡çº§çš„æ›´ç®€å•çš„å¼€æºå¼¹å¹•æŽ§ä»¶ é¡¹ç›®åœ°å€ï¼šhttps://github.com/linsea/OpenDanmaku å…«ã€äº‹ä»¶æ€»çº¿(è®¢é˜…è€…æ¨¡å¼) é€šè¿‡å‘å¸ƒ/è®¢é˜…äº‹ä»¶è§£è€¦äº‹ä»¶å‘é€å’ŒæŽ¥å—ï¼Œä»Žè€Œç®€åŒ–åº”ç”¨ç¨‹åºç»„ä»¶(Activities, Fragments åŠåŽå°çº¿ç¨‹)ä¹‹é—´çš„é€šä¿¡ EventBus greenrobot çš„å¼€æºé¡¹ç›® é¡¹ç›®åœ°å€ï¼šhttps://github.com/greenrobot/EventBus åŽŸç†å‰–æžæ–‡æ¡£ï¼š[EventBus](http://a.codekk.com/detail/Android/Trinea/EventBus æºç è§£æž) æ–‡æ¡£ä»‹ç»ï¼šhttps://github.com/greenrobot/EventBus#general-usage-and-api ç‰¹ç‚¹ï¼š(1) æ”¯æŒåœ¨ä¸åŒç±»åž‹çš„çº¿ç¨‹ä¸­å¤„ç†è®¢é˜…ï¼ŒåŒ…æ‹¬å‘å¸ƒæ‰€åœ¨çº¿ç¨‹ï¼ŒUI çº¿ç¨‹ã€å•ä¸€åŽå°çº¿ç¨‹ã€å¼‚æ­¥çº¿ç¨‹ (2) æ”¯æŒäº‹ä»¶ä¼˜å…ˆçº§å®šä¹‰ï¼Œæ”¯æŒä¼˜å…ˆçº§é«˜çš„è®¢é˜…è€…å–æ¶ˆäº‹ä»¶ç»§ç»­ä¼ é€’ï¼Œæ”¯æŒç²˜æ€§äº‹ä»¶ï¼Œæ˜¯ä¸æ˜¯è·Ÿç³»ç»Ÿçš„æœ‰åºå¹¿æ’­ã€ç²˜æ€§å¹¿æ’­å¾ˆåƒå•Š (3) ä¸æ˜¯åŸºäºŽ annotations (4) æ€§èƒ½æ›´ä¼˜ (5) ä½“ç§¯å° (6) æ”¯æŒå•ä¾‹åˆ›å»ºæˆ–åˆ›å»ºå¤šä¸ªå¯¹è±¡ (7) æ”¯æŒæ ¹æ®äº‹ä»¶ç±»åž‹è®¢é˜… Otto Square çš„å¼€æºé¡¹ç›®ï¼ŒåŸºäºŽ Guava çš„ Android ä¼˜åŒ– é¡¹ç›®åœ°å€ï¼šhttps://github.com/square/otto æ–‡æ¡£ä»‹ç»ï¼šhttp://square.github.io/otto/ EventBus ä¸Ž Otto çš„åŠŸèƒ½åŠæ€§èƒ½å¯¹æ¯”æ–‡æ¡£ EventBus ä¸Ž Otto æ€§èƒ½å¯¹æ¯” Demo Apk ä¹ã€ä¼ æ„Ÿå™¨ Great Android Sensing Toolkit Android æ„Ÿåº”å™¨å·¥å…·åŒ…ï¼ŒåŒ…å«ç¤ºä¾‹åŠä½¿ç”¨è¿‡ç¨‹ä¸­å¯èƒ½éœ€è¦çš„ç®—æ³• é¡¹ç›®åœ°å€ï¼šhttps://github.com/gast-lib/gast-lib Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=root.gast.playground æ–‡æ¡£ä»‹ç»ï¼šhttps://github.com/gast-lib/gast-lib#documentation SensorManager Android ä¼ æ„Ÿå™¨ç®¡ç† é¡¹ç›®åœ°å€ï¼šhttps://github.com/nlathia/SensorManager æ–‡æ¡£ä»‹ç»ï¼šhttps://docs.google.com/document/d/1TqThJULb-4e6TGb1gdkAaPCfyuXStjJpbnt7a0OZ9OE/edit GPSLogger è®°å½• GPS ä¿¡æ¯ é¡¹ç›®åœ°å€ï¼šhttps://github.com/mendhak/gpslogger Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.mendhak.gpslogger æ–‡æ¡£ä»‹ç»ï¼šhttp://code.mendhak.com/gpslogger/ Pedometer è®¡æ­¥å™¨ï¼Œä½¿ç”¨ç¡¬ä»¶è®¡æ­¥æ„Ÿåº”å™¨ é¡¹ç›®åœ°å€ï¼šhttps://github.com/j4velin/Pedometer leapcast ChromeCast æ¨¡æ‹Ÿå™¨çš„ App é¡¹ç›®åœ°å€ï¼šhttps://github.com/dz0ny/leapcast Arduino-Communicator ä¸Ž Arduino é€šä¿¡çš„ App é¡¹ç›®åœ°å€ï¼šhttps://github.com/jeppsson/Arduino-Communicator android-pedometer Android è®¡æ­¥å™¨ é¡¹ç›®åœ°å€ï¼šhttps://github.com/bagilevi/android-pedometer Demo åœ°å€ï¼šhttp://pedometer.googlecode.com/files/Pedometer-1.4.apk OwnTracks for Android è‡ªå·±çš„è½¨è¿¹è®°å½• é¡¹ç›®åœ°å€ï¼šhttps://github.com/owntracks/android Shake Detector library for Android Android æ‰‹æœºéœ‡åŠ¨æ‘‡æ™ƒæ£€æµ‹åº“ï¼Œæä¾›ä¾› UI çº¿ç¨‹è°ƒç”¨çš„å›žè°ƒæŽ¥å£ é¡¹ç›®åœ°å€ï¼šhttps://github.com/tbouron/ShakeDetector Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.github.tbouron.shakedetector.example Android heart rate monitor Android å¿ƒè·³æ£€æµ‹ é¡¹ç›®åœ°å€ï¼šhttps://github.com/phishman3579/android-heart-rate-monitor Bluetooth LE Library for Android è“ç‰™æºä¿¡æ¯ï¼ŒåŒ…æ‹¬å®åº“ Macã€æ›´æ–°æ—¶é—´ã€RSSIã€UUIDã€ä¿¡å·æºè·ç¦»ã€å½±å“èŒƒå›´ç­‰ä¿¡æ¯ é¡¹ç›®åœ°å€ï¼šhttps://github.com/alt236/Bluetooth-LE-Library---Android Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=uk.co.alt236.btlescan farebot é€šè¿‡ NFC ä»Žå…¬äº¤å¡ä¸­è¯»å–æ•°æ®çš„ä¸€ä¸ªåº”ç”¨ é¡¹ç›®åœ°å€ï¼šhttps://github.com/codebutler/farebot åã€å®‰å…¨ SQLCipher Sqlite åŠ å¯†å·¥å…· é¡¹ç›®åœ°å€ï¼šhttps://github.com/sqlcipher/sqlcipher æ–‡æ¡£ä»‹ç»ï¼šhttp://sqlcipher.net/sqlcipher-for-android/ Conceal å¿«é€Ÿé«˜æ•ˆçš„è¿›è¡Œæ–‡ä»¶åŠ å¯†è§£å¯† é¡¹ç›®åœ°å€ï¼šhttps://github.com/facebook/conceal æ–‡æ¡£ä»‹ç»ï¼šhttps://github.com/facebook/conceal#usage Android-PasscodeLock åº”ç”¨é”ï¼Œæ¯æ¬¡å¯åŠ¨æˆ–ä»Žä»»ä½• Activity å¯åŠ¨åº”ç”¨éƒ½éœ€è¦è¾“å…¥å››ä½æ•°å­—çš„å¯†ç æ–¹å¯è¿›å…¥ é¡¹ç›®åœ°å€ï¼šhttps://github.com/wordpress-mobile/Android-PasscodeLock Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=org.wordpress.android APP ç¤ºä¾‹ï¼šWordpress Androidï¼Œæ”¯ä»˜å®ï¼ŒæŒ–è´¢ GlowPadBackport å°† Android4.2 çš„é”å±ç•Œé¢è§£é”æ‰©å±•åˆ° Android1.6 åŠ 1.6+ é¡¹ç›®åœ°å€ï¼šhttps://github.com/rock3r/GlowPadBackport Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=net.sebastianopoggi.samples.ui.GlowPadSample GlowPadView Android 4 é”å±ç•Œé¢è§£é” é¡¹ç›®åœ°å€ï¼šhttps://github.com/nadavfima/GlowPadView Android-InsecureBank å…³äºŽ Android ä¸å®‰å…¨æ€§çš„ç¤ºä¾‹ é¡¹ç›®åœ°å€ï¼šhttps://github.com/dineshshetty/Android-InsecureBankv2 åä¸€ã€æ’ä»¶åŒ– æ›´å¤šè§ï¼šAndroid æ’ä»¶åŒ–ä½œç”¨ã€æ¦‚å¿µä»¥åŠä¸é”™çš„èµ„æ–™(åŒ…æ‹¬å¼€æºé¡¹ç›®)å’Œè§£å†³æ–¹æ¡ˆ dynamic-load-apk Android åŠ¨æ€åŠ è½½ Apkï¼Œçƒ­éƒ¨ç½²ï¼Œåˆ©ç”¨ ClassLoader ä»¥åŠ Activity ä»£ç†çš„æ–¹å¼è§£å†³ é¡¹ç›®åœ°å€ï¼šhttps://github.com/singwhatiwanna/dynamic-load-apk åŽŸç†å‰–æžæ–‡æ¡£ï¼š[dynamic-load-apk](http://a.codekk.com/detail/Android/FFish/DynamicLoadApk æºç è§£æž) æ–‡æ¡£ä»‹ç»ï¼šhttp://blog.csdn.net/singwhatiwanna/article/details/22597587 Android Dynamic Loader ç‚¹è¯„çš„å®žçŽ°æ–¹å¼ï¼Œå’Œä¸Šé¢ä¸åŒçš„æ˜¯ï¼šä»–ä¸æ˜¯ç”¨ä»£ç† Activity çš„æ–¹å¼å®žçŽ°è€Œæ˜¯ç”¨ Fragment ä»¥åŠ Schema çš„æ–¹å¼å®žçŽ° é¡¹ç›®åœ°å€ï¼šhttps://github.com/mmin18/AndroidDynamicLoader Demo åœ°å€ï¼šhttps://github.com/mmin18/AndroidDynamicLoader/raw/master/host.apk xCombine Android App æ’ä»¶å¼æ’ä»¶å¼€å‘ï¼Œæ’ä»¶å¿…é¡»å…ˆå®‰è£…ï¼Œæ›´æŽ¨èçœ‹ä¸Šé¢ä¸¤ä¸ªå¼€æºé¡¹ç›® é¡¹ç›®åœ°å€ï¼šhttps://github.com/wyouflf/xCombine æ–‡æ¡£ä»‹ç»ï¼šhttp://my.oschina.net/u/1171837/blog/155377 Android Plugin Framework Android æ’ä»¶å¼å¼€å‘ï¼Œå¼€æ”¾çš„æºç ç›®å‰ä¸å®Œæ•´ é¡¹ç›®åœ°å€ï¼šhttps://github.com/umeng/apf Android OpenAtlas Androidæ’ä»¶æ¡†æž¶ï¼ŒåŸºäºŽOSGIï¼Œéžä»£ç†æ–¹å¼ï¼Œç»„ä»¶éœ€è¦åœ¨å®¿ä¸»ä¸­å£°æ˜Ž é¡¹ç›®åœ°å€ï¼šhttps://github.com/bunnyblue/OpenAtlas Demo åœ°å€ï¼šhttps://github.com/bunnyblue/OpenAtlasExtension/blob/master/Dist/OpenAtlasLauncher.apk multidex å®‰è£…å¤š dex çš„ classloader é¡¹ç›®åœ°å€ï¼šhttps://github.com/casidiablo/multidex ANR-WatchDog Android ANR ç›‘å¬ï¼Œé€šè¿‡ç›‘å¬è‡ªå·±çš„ UI Thread æ˜¯å¦è¢«æ‰§è¡Œç¡®å®šæ˜¯å¦å‘ç”Ÿäº† ANRï¼Œå¹¶å¯ä»¥è®¾ç½®ç›¸å…³äº‹ä»¶ é¡¹ç›®åœ°å€ï¼šhttps://github.com/SalomonBrys/ANR-WatchDog åäºŒã€æ–‡ä»¶ å¯¹ä¸åŒæ–‡æ¡£ç±»åž‹çš„å¤„ç†ï¼ŒåŒ…æ‹¬ PDFã€Wordã€EPubã€Htmlã€Zip ç­‰ purePDF å…è®¸ä»Žä»»ä½•è¿è¡Œçš„ SWF æ–‡ä»¶è¯»å–å’Œåˆ›å»º PDF æ–‡æ¡£ é¡¹ç›®åœ°å€ï¼šhttps://github.com/sephiroth74/purePDF android-pdfview å¿«é€Ÿè§£æž pdf çš„ viewï¼Œé»˜è®¤æ”¯æŒæ‰‹åŠ¿ç¼©æ”¾å’Œç›¸å…³åŠ¨ç”» é¡¹ç›®åœ°å€ï¼šhttps://github.com/JoanZapata/android-pdfview Office 365 SDK for Android Preview å¯æ”¯æŒ Microsoft SharePoint Lists, Microsoft SharePoint Files, Microsoft Exchange Calendar, Microsoft Exchange Contacts, Microsoft Exchange Mail é¡¹ç›®åœ°å€ï¼šhttps://github.com/OfficeDev/Office-365-SDK-for-Android OpenSpritz-Android EPub é˜…è¯»å™¨ é¡¹ç›®åœ°å€ï¼šhttps://github.com/OnlyInAmerica/OpenSpritz-Android jsoup ä¸€ä¸ªè§£æž html çš„ java åº“ï¼Œå¯æ–¹ä¾¿çš„æå–å’Œæ“ä½œæ•°æ® é¡¹ç›®åœ°å€ï¼šhttps://github.com/jhy/jsoup å®˜ç½‘ç½‘å€ï¼šhttp://jsoup.org/ ä½œç”¨ï¼š(1) ä»Žä¸€ä¸ª urlã€æ–‡ä»¶æˆ– string èŽ·å¾— html å¹¶è§£æž (2) åˆ©ç”¨ dom éåŽ†æˆ– css é€‰æ‹©å™¨æŸ¥æ‰¾ã€æå–æ•°æ® (3) æ“ä½œ html å…ƒç´  (4) æ ¹æ®ç™½åå•åŽ»é™¤ç”¨äºŽæäº¤çš„éžæ³•æ•°æ®é˜²æ­¢ xss æ”»å‡» (5) è¾“å‡ºæ•´é½çš„ html ZIP java åŽ‹ç¼©å’Œè§£åŽ‹åº“ é¡¹ç›®åœ°å€ï¼šhttps://github.com/zeroturnaround/zt-zip æ–‡æ¡£ä»‹ç»ï¼šhttps://github.com/zeroturnaround/zt-zip#examples ä½œç”¨ï¼š(1) è§£åŽ‹å’ŒåŽ‹ç¼©ï¼Œå¹¶æ”¯æŒæ–‡ä»¶å¤¹å†…é€’å½’æ“ä½œ (2) æ”¯æŒåŒ…å«å’ŒæŽ’é™¤æŸäº›å…ƒç´  (3) æ”¯æŒé‡å‘½åå…ƒç´  (4) æ”¯æŒéåŽ† zip åŒ…å†…å®¹ (5) æ¯”è¾ƒä¸¤ä¸ª zip åŒ…ç­‰åŠŸèƒ½ Image File Selector è½»é‡çº§çš„å›¾ç‰‡æ–‡ä»¶é€‰æ‹©å™¨ï¼Œç”¨ç³»ç»Ÿapié€‰å–ï¼ŒåŽ‹ç¼©å’Œè£åˆ‡å›¾ç‰‡ï¼Œå¯ä»¥æ–¹ä¾¿çš„å¾—è¦æŒ‡å®šå°ºå¯¸çš„å›¾ç‰‡ é¡¹ç›®åœ°å€ï¼šhttps://github.com/sw926/ImageFileSelector åä¸‰ã€å…¶ä»– FragmentStack ä¸€ä¸ªå°è£…äº†å¯åŠ¨æ¨¡å¼çš„Fragmentä¾¿æ·ä½¿ç”¨åº“,æ–¹ä¾¿æž„å»ºå•Activity+å¤šFragmentè½»é‡çº§æ¡†æž¶ é¡¹ç›®åœ°å€ï¼šhttps://github.com/Mr-wangyong/FragmentStack Appç¤ºä¾‹ï¼šå—ç“œç”µå½± CustomTabsHelper å¿«é€Ÿé›†æˆ CustomTabs çš„å·¥å…·ç±» é¡¹ç›®åœ°å€ï¼šhttps://github.com/DreaminginCodeZH/CustomTabsHelper Salvage view å¸¦ View ç¼“å­˜çš„ Viewpager PagerAdapterï¼Œå¾ˆæ–¹ä¾¿ä½¿ç”¨ é¡¹ç›®åœ°å€ï¼šhttps://github.com/JakeWharton/salvage Android Priority Job Queue Android åŽå°ä»»åŠ¡é˜Ÿåˆ— é¡¹ç›®åœ°å€ï¼šhttps://github.com/path/android-priority-jobqueue æ–‡æ¡£ä»‹ç»ï¼šhttps://github.com/path/android-priority-jobqueue#getting-started Cobub Razor å¼€æºçš„ mobile è¡Œä¸ºåˆ†æžç³»ç»Ÿï¼ŒåŒ…æ‹¬ web ç«¯ã€android ç«¯ï¼Œæ”¯æŒ ios å’Œ window phone é¡¹ç›®åœ°å€ï¼šhttps://github.com/cobub/razor Demo åœ°å€ï¼šhttp://demo.cobub.com/razor å®˜ç½‘ç½‘å€ï¼šhttp://dev.cobub.com/ Countly Android ç§»åŠ¨ç«¯æ•°æ®é‡‡é›†åˆ†æžç³»ç»Ÿ é¡¹ç›®åœ°å€ï¼šhttps://github.com/Countly/countly-sdk-android å®˜ç½‘ç½‘å€ï¼šhttps://count.ly/ aFileChooser æ–‡ä»¶é€‰æ‹©å™¨ï¼Œå¯å†…åµŒåˆ°ç¨‹åºä¸­ï¼Œè€Œæ— éœ€ä½¿ç”¨ç³»ç»Ÿæˆ–ä¸‰æ–¹æ–‡ä»¶é€‰æ‹©å™¨ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/iPaulPro/aFileChooser androidpn åŸºäºŽ xmpp åè®®çš„æ¶ˆæ¯æŽ¨é€è§£å†³æ–¹æ¡ˆï¼ŒåŒ…æ‹¬æœåŠ¡å™¨ç«¯å’Œ android ç«¯ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/dannytiehui/androidpn Bolts Android çš„å¼‚æ­¥ç¼–ç¨‹æ¨¡å¼ é¡¹ç›®åœ°å€ï¼šhttps://github.com/BoltsFramework/Bolts-Android/ ä¸Ž AsyncTask æ¯”è¾ƒï¼š(1) ä½¿ç”¨çš„æ˜¯æ— å¤§å°é™åˆ¶çš„çº¿ç¨‹æ±  (2) ä»»åŠ¡å¯ç»„åˆå¯çº§è”ï¼Œé˜²æ­¢äº†ä»£ç è€¦åˆ CastCompanionLibrary-android ä½¿ Android ç¨‹åºä¸­æ›´å¿«çš„æŽ¥å…¥ Google Cast é¡¹ç›®åœ°å€ï¼šhttps://github.com/googlecast/CastCompanionLibrary-android æ–‡æ¡£ä»‹ç»ï¼šhttps://developers.google.com/cast/ CastVideos-android ä»Ž Android è®¾å¤‡åˆ†äº« Video é€šè¿‡ Google Cast é¡¹ç›®åœ°å€ï¼šhttps://github.com/googlecast/CastVideos-android æ–‡æ¡£ä»‹ç»ï¼šhttps://developers.google.com/cast/ Uninstall_Statics Android åº”ç”¨è‡ªèº«è¢«å¸è½½ç›‘å¬åŠæ‰“å¼€æµè§ˆå™¨ç­‰åé¦ˆåŠŸèƒ½å®žçŽ° é¡¹ç›®åœ°å€ï¼šhttps://github.com/sevenler/Uninstall_Statics æ–‡æ¡£ä»‹ç»ï¼šhttp://www.cnblogs.com/zealotrouge/p/3157126.html http://www.cnblogs.com/zealotrouge/p/3159772.html Memento ä¿è¯åœ¨ç³»ç»Ÿé…ç½®æ”¹å˜æ—¶ï¼ŒActivity ä¸­çš„æŸäº›æ•°æ®å¯ä»¥ç®€å•å®‰å…¨çš„ä¿æŒä¸å˜ é¡¹ç›®åœ°å€ï¼šhttps://github.com/mttkay/memento æ–‡æ¡£ä»‹ç»ï¼šhttps://github.com/mttkay/memento#usage FreeFlow å¸ƒå±€å¼•æ“Žï¼Œæ›´ç®€å•çš„åˆ›å»ºè‡ªå®šä¹‰å¸ƒå±€ï¼Œå¹¶ä¸”å½“æ•°æ®å’Œå¸ƒå±€æ”¹å˜æ—¶æ›´ç¾Žè§‚çš„è¿‡æ¸¡åŠ¨ç”» é¡¹ç›®åœ°å€ï¼šhttps://github.com/Comcast/FreeFlow Demo åœ°å€ï¼šhttps://github.com/Comcast/FreeFlow/releases Android Gesture Detectors Framework Android æ‰‹åŠ¿æ¡†æž¶ï¼Œæ”¯æŒåŒæŒ‡æ—‹è½¬ã€ç§»åŠ¨ã€å¹³ç§»ã€ç¼©æ”¾ç­‰ é¡¹ç›®åœ°å€ï¼šhttps://github.com/Almeros/android-gesture-detectors Mapbox Android SDK Android Map çš„æ›¿ä»£ç‰ˆ é¡¹ç›®åœ°å€ï¼šhttps://github.com/mapbox/mapbox-android-sdk Activity animation Activity è·³è½¬åŠ¨ç”»ï¼Œæ”¯æŒå„ä¸ªæ–¹å‘æ³¢æµªçš„æ•ˆæžœ é¡¹ç›®åœ°å€ï¼šhttps://github.com/flavienlaurent/activityanimation åœ¨çº¿æ¼”ç¤ºï¼šhttps://www.youtube.com/watch?v=-E0sc6w_Jck KryoNet é€šè¿‡ NIO æä¾›å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ TCP/UDP ç½‘ç»œä¼ è¾“çš„ Java åº“ é¡¹ç›®åœ°å€ï¼šhttps://github.com/EsotericSoftware/kryonet Rebound ä¸€ä¸ªæ¨¡ä»¿å¼¹ç°§åå¼¹çš„ Java åº“ï¼Œå¯ç”¨äºŽåˆ›å»ºåŠ¨ç”» é¡¹ç›®åœ°å€ï¼šhttps://github.com/facebook/rebound Android Social Networks ç¤¾äº¤ç½‘ç»œæŽ¥å…¥ç»Ÿä¸€ç®¡ç†å™¨ï¼Œå¯æ–¹ä¾¿çš„ä»Ž Twitter, LinkedIn, Facebook, Google Plus ç™»é™†ã€èŽ·å¾—ä¸ªäººä¿¡æ¯ã€å‘é€æ¶ˆæ¯ã€å‘é€ä¸“ç¯‡ã€æ·»åŠ æˆ–åˆ é™¤å¥½å‹ é¡¹ç›®åœ°å€ï¼šhttps://github.com/antonkrasov/AndroidSocialNetworks Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.github.androidsocialnetworks.apidemos SmartAppUpdates Android App å¢žé‡å‡çº§ï¼ŒåŒ…å«å‰åŽç«¯æ–¹æ¡ˆã€Demoã€ä»¥åŠ so åº“ï¼Œå¯ç”¨äºŽå•†åº—æˆ–å¤§ä½“ç§¯ App å·®åˆ†å‡çº§ é¡¹ç›®åœ°å€ï¼šhttps://github.com/cundong/SmartAppUpdates Magnet åˆ›å»ºç±»ä¼¼ Facebook èŠå¤©æ¡Œé¢æ‚¬æµ®çª—çš„æ•ˆæžœ é¡¹ç›®åœ°å€ï¼šhttps://github.com/premnirmal/Magnet AcDisplay å°† Android çš„é€šçŸ¥éƒ½é›†ä¸­åˆ°é”å±æ˜¾ç¤º é¡¹ç›®åœ°å€ï¼šhttps://github.com/AChep/AcDisplay Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.achep.acdisplay QrCodeScan ZXing å’Œ ZBar ç»“åˆçš„äºŒç»´ç æ‰«æé¡¹ç›®ï¼Œæé«˜äº†æ‰«ææ•ˆçŽ‡ é¡¹ç›®åœ°å€ï¼šhttps://github.com/SkillCollege/QrCodeScan Android-ScreenShot å®žçŽ° android ç³»ç»Ÿæˆªå±åŠŸèƒ½ é¡¹ç›®åœ°å€ï¼šhttps://github.com/Android-ScreenShot/AndroidScreenShotService æ–‡æ¡£ä»‹ç»ï¼šhttp://blog.csdn.net/buptgshengod/article/details/39155979 card.io SDK for Android ä¿¡ç”¨å¡æ‰«æ Android SDK é¡¹ç›®åœ°å€ï¼šhttps://github.com/card-io/card.io-Android-SDK Demo é¡¹ç›®ï¼šhttps://github.com/card-io/card.io-Android-SDK/tree/master/SampleApp ASNE Twitter, Facebook, Google Plus, LinkedIn, Instagram, Vkontakte, Odnoklassniki çš„é›†æˆåº“ï¼ŒåŒ…æ‹¬ä»–ä»¬çš„å¤§å¤šæ•°åŠŸèƒ½ é¡¹ç›®åœ°å€ï¼šhttps://github.com/gorbin/ASNE Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.gorbin.androidsocialnetworksextended.asne Android Signature Pad Android è‡ªå®šä¹‰çš„ç­¾å Viewï¼Œå¯è‡ªå®šä¹‰ç¬”é¢œè‰²å’Œå¤§å° é¡¹ç›®åœ°å€ï¼šhttps://github.com/gcacace/android-signaturepad Demo é¡¹ç›®ï¼šhttps://github.com/gcacace/android-signaturepad/tree/master/SignaturePad-Example Teleport Android Wear æ•°æ®åŒæ­¥å’Œæ¶ˆæ¯ä¼ é€åº“ é¡¹ç›®åœ°å€ï¼šhttps://github.com/Mariuxtheone/Teleport DebugLog å¯ä»¥å¸®ä½ åˆ›å»ºæ›´ç®€å•å’Œæ›´å®¹æ˜“ç†è§£çš„è°ƒè¯•æ—¥å¿—ï¼Œèƒ½å¤Ÿå‹å¥½çš„æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯æ‰€åœ¨ç±»å’Œå‡½æ•°ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/MustafaFerhan/DebugLog Logger ç®€å•ã€ç¾Žè§‚è€Œä¸”ååˆ†å¼ºå¤§çš„ Android æ—¥å¿—å·¥å…· é¡¹ç›®åœ°å€ï¼šhttps://github.com/orhanobut/logger Demo åœ°å€ï¼šhttps://github.com/orhanobut/logger/tree/master/app jlog å¯ä»¥çµæ´»é…ç½®çš„æ—¥å¿—å·¥å…·ï¼Œæ”¯æŒJSONæ‰“å°ï¼Œæ—¥å¿—ä¿å­˜åˆ°æŒ‡å®šæ–‡ä»¶ï¼Œæ—¥å¿—æ˜¾ç¤ºè°ƒç”¨ä½ç½®ï¼ˆæ··æ·†æ¨¡å¼ä¸‹ä¾ç„¶æœ‰æ•ˆï¼‰ é¡¹ç›®åœ°å€ï¼šhttps://github.com/JiongBull/jlog Demo åœ°å€ï¼šapkåœ°å€ Phrase square ç»„å¼€æºå¤§ç‰›å†™çš„å­—ç¬¦ä¸²æ›¿æ¢ç±» é¡¹ç›®åœ°å€ï¼šhttps://github.com/square/phrase ColorPhrase æ¨¡ä»¿ phrase å†™çš„å¯¹å­—ç¬¦ä¸²ä¸ªåˆ«å­—ç¬¦é¢œè‰²æ”¹å˜çš„ç±»ï¼Œé«˜æ•ˆå¼ºå¤§ï¼ é¡¹ç›®åœ°å€ï¼šhttps://github.com/THEONE10211024/ColorPhrase PinyinSearch ä¸€ä¸ªä¸º T9 æœç´¢å’Œ Qwerty æœç´¢,æä¾›æ•°æ®è§£æžä¸ŽåŒ¹é…ç­‰æ–¹æ³•çš„æ‹¼éŸ³æœç´¢ java åº“ã€‚ é¡¹ç›®åœ°å€ï¼š https://github.com/handsomezhou/PinyinSearchLibrary Demo åœ°å€ï¼š ContactsSearch AppSearch APP ç¤ºä¾‹ï¼š é€šè®¯å½•åº”ç”¨ï¼Œå¾®ä¿¡ç”µè¯æœ¬ PrainView PaintView æ˜¯ä¸€ä¸ªç”»å›¾å·¥å…·: å¯ç›´æŽ¥ä½¿ç”¨è®¾å®šæŒ‰é’®æ¥å®žçŽ°å·²æ‹¥æœ‰çš„æ–¹æ³•ï¼Œä¸”æ‹“å±•æ€§å¼º åŸºç¡€åŠŸèƒ½ï¼šæ›´æ¢é¢œè‰²ã€æ›´æ¢æ©¡çš®ã€ä»¥åŠæ›´æ¢æ©¡çš®å’Œç¬”çš„ç²—ç»†ã€æ¸…å±ã€å€’å…¥å›¾ç‰‡ ç‰¹æ®ŠåŠŸèƒ½ï¼šä¿å­˜ç”»ç¬”è½¨è¿¹å¸§åŠ¨ç”»ã€å¸§åŠ¨ç”»å¯¼å…¥å¯¼å‡ºã€ReDoå’ŒUnDo é¡¹ç›®åœ°å€ï¼šPaintview demoåœ°å€ï¼šapkåœ°å€ åŽŸç†è§£æžï¼šPaintView ç»˜å›¾æŽ§ä»¶è§£æž CodeView CodeViewä»£ç æŸ¥çœ‹ï¼ä¿®æ”¹å·¥å…·: åŸºäºŽWebViewåˆ¶ä½œçš„ä»£ç ç¼–è¾‘å™¨,å®žçŽ°ä»£ç é«˜äº®ï¼Œæš—è‰²ä¸»é¢˜ é¡¹ç›®åœ°å€ï¼šCodeView demoåœ°å€ï¼šapkåœ°å€ ExplorerView æ–‡ä»¶æµè§ˆå™¨ï¼šç»§æ‰¿è‡ªListViewï¼Œå¯æ‹“å±•æ€§å¼ºï¼Œå¯è¿›è¡Œæ–‡ä»¶ç±»åž‹åˆ†æž é¡¹ç›®åœ°å€ï¼šCodeView demoåœ°å€ï¼šapkåœ°å€ ReadView å°è¯´é˜…è¯»å™¨ï¼Œæ”¯æŒæ–‡å­—å­—ä½“ã€é¢œè‰²ã€èƒŒæ™¯ã€è¿›åº¦ç­‰å¤šç§è°ƒæ•´ï¼Œæ”¯æŒä¸€é”®è®¾ç½®ã€‚ é¡¹ç›®åœ°å€ï¼šReadView demoåœ°å€ï¼šapkåœ°å€ MarkDownView æ”¯æŒMarkDownè¯­æ³•çš„æ¸²æŸ“å™¨,åŸºäºŽWebViewçš„MarkDownæ¸²æŸ“å™¨,æ”¯æŒæ ‡å‡†åŒ–çš„MarkDownè¯­æ³•, è°ƒç”¨æŽ¥å£å’ŒCodeViewä¿æŒä¸€è‡´ä½¿ç”¨ç®€ä¾¿ é¡¹ç›®åœ°å€ï¼šReadView demoåœ°å€ï¼šapkåœ°å€ VerTextViewç«–è¡ŒæŽ’ç‰ˆçš„TextView: æ”¯æŒç«–è¡ŒæŽ’ç‰ˆï¼Œæ·»åŠ äº†ä¸‹åˆ’çº¿åŠŸèƒ½ï¼Œå¼€å¯ç®€ä¾¿ï¼Œä¸‹åˆ’çº¿ç²—ç»†ã€é¢œè‰²ã€é—´è·å‡å¯è‡ªå®šä¹‰ï¼Œ æŽ¥å£è°ƒç”¨æ–¹å¼ä¸ŽTextViewç›¸ä¼¼ï¼Œä½¿ç”¨ç®€ä¾¿ã€‚ é¡¹ç›®åœ°å€ï¼šReadView demoåœ°å€ï¼šapkåœ°å€ GHDownloadä¸‹è½½æ¡†æž¶ æ”¯æŒå•çº¿ç¨‹å’Œå¤šçº¿ç¨‹æ–­ç‚¹ä¸‹è½½ï¼Œç®€å•æ˜“ç”¨ã€‚ é¡¹ç›®åœ°å€ï¼šGHDownload ç¬¬ä¸‰éƒ¨åˆ† ä¼˜ç§€é¡¹ç›® ä¸»è¦ä»‹ç»é‚£äº› Android è¿˜ä¸é”™çš„å®Œæ•´é¡¹ç›®ï¼Œç›®å‰åŒ…å«çš„é¡¹ç›®ä¸»è¦ä¾æ®æ˜¯é¡¹ç›®æœ‰æ„æ€æˆ–é¡¹ç›®åˆ†å±‚è§„èŒƒæ¯”è¾ƒå¥½ã€‚ ä¸€ã€ç³»ç»ŸåŠå¹³å° Linux é¡¹ç›®åœ°å€ï¼šhttps://github.com/torvalds/linux Android é¡¹ç›®åœ°å€ï¼šhttps://android.googlesource.com/ äºŒã€é¡¹ç›® ZXing äºŒç»´ç æ‰«æå·¥å…· é¡¹ç›®åœ°å€ï¼šhttps://github.com/zxing/zxing æˆ– https://code.google.com/p/zxing/ APK åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.google.zxing.client.android å…¶ä»–ï¼šçŽ°åœ¨å¸‚é¢ä¸Šå¾ˆå¤šåº”ç”¨çš„äºŒç»´ç æ‰«æåŠŸèƒ½éƒ½æ˜¯ä»Žè¿™ä¸ªä¿®æ”¹è€Œæ¥ photup ç¼–è¾‘æœºæ‰¹é‡ä¸Šä¼ ç…§ç‰‡åˆ° facebook ä¸Š é¡¹ç›®åœ°å€ï¼šhttps://github.com/chrisbanes/photup APK åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=uk.co.senab.photup å…¶ä»–ï¼šä»£ç åˆ†åŒ…åˆç†ï¼Œå¾ˆæ£’ã€‚ä¸è¿‡è¿™ä¸ªé¡¹ç›®ä¾èµ–çš„å¼€æºé¡¹ç›®æ¯”è¾ƒå¤šï¼Œæ¯”è¾ƒéš¾ç¼–è¯‘ github-android Github çš„ Android å®¢æˆ·ç«¯é¡¹ç›® é¡¹ç›®åœ°å€ï¼šhttps://github.com/github/android APK åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.github.mobile Notes MIUI ä¾¿ç­¾ é¡¹ç›®åœ°å€ï¼šhttps://github.com/MiCode/Notes APK åœ°å€ï¼šhttps://github.com/Trinea/TrineaDownload/blob/master/miui-note-demo.apk?raw=true å…¶ä»–ï¼šé¡¹ç›®åˆ†åŒ…æ¯”è¾ƒåˆç†ï¼Œç›¸æ¯”è¾ƒ miui çš„æ–‡ä»¶ç®¡ç†å™¨ https://github.com/MiCode/FileExplorer ä»£ç è§„èŒƒè¾ƒå¥½å¾—å¤š weicuiyuan å››æ¬¡å…ƒ-æ–°æµªå¾®åšå®¢æˆ·ç«¯ é¡¹ç›®åœ°å€ï¼šhttps://github.com/qii/weiciyuan APK åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=org.qii.weiciyuan Douya è±†èŠ½â€”â€”Material Design çš„è±†ç“£å®¢æˆ·ç«¯ é¡¹ç›®åœ°å€ï¼šhttps://github.com/DreaminginCodeZH/Douya gnucash-android ä¸€ä¸ªè®°è´¦ç†è´¢è½¯ä»¶ é¡¹ç›®åœ°å€ï¼šhttps://github.com/codinguser/gnucash-android APK åœ°å€ï¼šhttp://play.google.com/store/apps/details?id=org.gnucash.android AntennaPod æ”¯æŒ rss è®¢é˜…ã€éŸ³ä¹è®¢é˜… é¡¹ç›®åœ°å€ï¼šhttps://github.com/danieloeh/AntennaPod APK åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=de.danoeh.antennapod ChaseWhisplyProject æ‰“é¬¼æ¸¸æˆ é¡¹ç›®åœ°å€ï¼šhttps://github.com/tvbarthel/ChaseWhisplyProject APK åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=fr.tvbarthel.games.chasewhisply Tweet Lanes åŠŸèƒ½å®Œæ•´çš„ Twitter å®¢æˆ·ç«¯ é¡¹ç›®åœ°å€ï¼šhttps://github.com/chrislacy/TweetLanes APK åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.tweetlanes.android Financius ç®€å•æ˜“ç”¨çš„è®°è´¦ç¨‹åº é¡¹ç›®åœ°å€ï¼šhttps://github.com/mvarnagiris/Financius APK åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.code44.finance todo.txt-android todo.txt çš„å®˜æ–¹ Android åº”ç”¨ é¡¹ç›®åœ°å€ï¼šhttps://github.com/ginatrapani/todo.txt-android APK åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.todotxt.todotxttouch simpletask åŸºäºŽ todo.txt å®˜æ–¹åº”ç”¨çš„å¦ä¸€ä¸ªå®¢æˆ·ç«¯ é¡¹ç›®åœ°å€ï¼šhttps://github.com/mpcjanssen/simpletask-android APK åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=nl.mpcjanssen.todotxtholo Muzei Live Wallpaper å®šæ—¶æ›´æ¢æ¡Œé¢ç²¾ç¾Žå£çº¸ é¡¹ç›®åœ°å€ï¼šhttps://github.com/romannurik/muzei APK åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=net.nurik.roman.muzei Scanbook æ‰«ææœç´¢æŸ¥è¯¢å›¾ä¹¦ä¿¡æ¯ é¡¹ç›®åœ°å€ï¼šhttps://github.com/JayFang1993/ScanBook APK åœ°å€ï¼šhttp://www.wandoujia.com/apps/com.scanbook iosched The Google I/O 2014 Android App é¡¹ç›®åœ°å€ï¼šhttps://github.com/google/iosched APK åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=com.google.samples.apps.iosched ç¬¬å››éƒ¨åˆ† å¼€å‘å·¥å…·åŠæµ‹è¯•å·¥å…· ä¸»è¦ä»‹ç»å’Œ Android å¼€å‘å·¥å…·å’Œæµ‹è¯•å·¥å…·ç›¸å…³çš„å¼€æºé¡¹ç›®ã€‚ ä¸€ã€å¼€å‘æ•ˆçŽ‡å·¥å…· Parceler é€šè¿‡æ³¨è§£åŠå·¥å…·ç±»è‡ªåŠ¨å®Œæˆå®žä½“ç±» Parcelable åŠå€¼ä¼ é€’ é¡¹ç›®åœ°å€ï¼šhttps://github.com/johncarl81/parceler Json2Java æ ¹æ® JSon æ•°æ®è‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„ Java å®žä½“ç±»ï¼Œè¿˜æ”¯æŒ Parcelã€Gson Annotations å¯¹åº”ä»£ç è‡ªåŠ¨ç”Ÿæˆã€‚æœŸå¾…åŽç»­çš„æå–çˆ¶ç±»ä»¥åŠå¤š url æž„å»ºæ•´ä¸ªå·¥ç¨‹çš„åŠŸèƒ½ é¡¹ç›®åœ°å€ï¼šhttps://github.com/jonfhancock/JsonToJava åœ¨çº¿æ¼”ç¤ºï¼šhttp://jsontojava.appspot.com/ IntelliJ Plugin for Android Parcelable boilerplate code generation Android studio æ’ä»¶ï¼Œç”Ÿæˆ Parcelable ä»£ç  é¡¹ç›®åœ°å€ï¼šhttps://github.com/mcharmas/android-parcelable-intellij-plugin Android Holo Colors IntelliJ Plugin Android studio æ’ä»¶ï¼Œç”Ÿæˆ holo æ ·å¼ 9 patch å›¾ç‰‡ é¡¹ç›®åœ°å€ï¼šhttps://github.com/jeromevdl/android-holo-colors-idea-plugin Android Drawable Factory ç”¨äºŽç”Ÿæˆå„ä¸ªåˆ†è¾¨çŽ‡çš„å›¾ç‰‡ é¡¹ç›®åœ°å€ï¼šhttps://github.com/tizionario/AndroidDrawableFactory SelectorChapek for Android Android Studio æ’ä»¶ï¼Œå¯æ ¹æ®å›ºå®šæ–‡ä»¶åæ ¼å¼èµ„æºè‡ªåŠ¨ç”Ÿæˆ drawable selectors xml æ–‡ä»¶ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/inmite/android-selector-chapek Android Action Bar Style Generator Android ActionBar æ ·å¼ç”Ÿæˆå™¨ï¼Œå¯åœ¨çº¿é€‰æ‹© ActionBar æ ·å¼è‡ªåŠ¨ç”Ÿæˆæ‰€éœ€è¦çš„å›¾ç‰‡èµ„æºåŠ xml æ–‡ä»¶ é¡¹ç›®åœ°å€ï¼šhttps://github.com/jgilfelt/android-actionbarstylegenerator åœ¨çº¿æ¼”ç¤ºï¼šhttp://jgilfelt.github.io/android-actionbarstylegenerator/ ButterKnifeZelezny ç”¨äºŽå¿«é€Ÿç”ŸæˆButterKnifeView æ³¨å…¥ä»£ç çš„ Android Studio/IDEA æ’ä»¶ é¡¹ç›®åœ°å€ï¼šhttps://github.com/inmite/android-butterknife-zelezny RoboCoP åˆ©ç”¨ Gradle task æ ¹æ®å›ºå®šæ ¼å¼çš„ json æ–‡ä»¶ç”Ÿæˆ ContentProvider é¡¹ç›®åœ°å€ï¼šhttps://github.com/mediarain/RoboCoP appiconsizes ç”¨äºŽç”Ÿæˆå„ä¸ªåˆ†è¾¨çŽ‡çš„å›¾ç‰‡ é¡¹ç›®åœ°å€ï¼šhttp://www.appiconsizes.com/ AndroidUtiles é›†åˆäº†æ‰€æœ‰å¸¸ç”¨çš„å®‰å“å·¥å…·ç±» é¡¹ç›®åœ°å€ï¼šhttps://github.com/l123456789jy/Lazy Gradle Retrolambda Plugin Retrolambdaæ˜¯å°† Java8 çš„ Lambdas åº”ç”¨äºŽ Java7 çš„å·¥å…·ï¼Œæœ¬é¡¹ç›®æ˜¯ Gradle æ’ä»¶ï¼Œé€šè¿‡ Retrolambda ä»Žè€Œä½¿ Java æˆ– Android é¡¹ç›®ç”¨ Java8 çš„ Lambdas ç¼–å†™ï¼Œå°†ç¼–è¯‘åŽçš„å­—èŠ‚ç è½¬æ¢ä¸º Java6 å’Œ 7 çš„å­—èŠ‚ç ä»Žè€Œæ­£å¸¸è¿è¡Œ é¡¹ç›®åœ°å€ï¼šhttps://github.com/evant/gradle-retrolambda Dagger IntelliJ Plugin dagger çš„ intellij æ’ä»¶ é¡¹ç›®åœ°å€ï¼šhttps://github.com/square/dagger-intellij-plugin Android Gen Drawable Maven plugin åœ¨ç¼–è¯‘æ—¶æ ¹æ® SVG æè¿°æ–‡ä»¶ç”Ÿæˆä¸åŒåˆ†è¾¨çŽ‡çš„ jpgã€png æˆ–ç‚¹ 9 å›¾ç‰‡ é¡¹ç›®åœ°å€ï¼šhttps://github.com/avianey/androidgendrawable-maven-plugin Android Asset Studio å„ç§ Android èµ„æºè‡ªåŠ¨ç”Ÿæˆå™¨ï¼ŒåŒ…æ‹¬å¯åŠ¨å›¾æ ‡ã€ActionBar å›¾æ ‡ã€é€šçŸ¥æ å›¾æ ‡ã€ç‚¹ 9 ç­‰ é¡¹ç›®åœ°å€ï¼šhttps://github.com/romannurik/AndroidAssetStudio åœ¨çº¿æ¼”ç¤ºï¼šhttp://romannurik.github.io/AndroidAssetStudio/ jsonschema2pojo æ ¹æ® Json å†…å®¹ç”Ÿæˆ java å¯¹è±¡ï¼Œæ”¯æŒ jackjson å’Œ gson é¡¹ç›®åœ°å€ï¼šhttps://github.com/joelittlejohn/jsonschema2pojo åœ¨çº¿æ¼”ç¤ºï¼šhttp://www.jsonschema2pojo.org/ GsonFormat æ ¹æ® JSONObject æ ¼å¼çš„å­—ç¬¦ä¸²,è‡ªåŠ¨ç”Ÿæˆå®žä½“ç±»å‚æ•°çš„ Android Studio/IntelliJ IDEA æ’ä»¶ é¡¹ç›®åœ°å€ï¼šhttps://github.com/zzz40500/GsonFormat 9-Patch-Resizer è‡ªåŠ¨ç”Ÿæˆ png åŠç‚¹ 9 å›¾ç‰‡çš„ä¸åŒåˆ†è¾¨çŽ‡ç‰ˆæœ¬ é¡¹ç›®åœ°å€ï¼šhttps://github.com/redwarp/9-Patch-Resizer AndroidLocalizationer å¯ç”¨äºŽå°†é¡¹ç›®ä¸­çš„ string èµ„æºè‡ªåŠ¨ç¿»è¯‘ä¸ºå…¶ä»–è¯­è¨€çš„ Android Studio/IntelliJ IDEA æ’ä»¶ é¡¹ç›®åœ°å€ï¼šhttps://github.com/westlinkin/AndroidLocalizationer Material Palette ä¸€ä¸ªå°†çŽ°æœ‰çš„è‰²å½©æ–¹æ¡ˆç»„åˆæˆææ–™è®¾è®¡çš„è°ƒè‰²æ¿æ–¹æ¡ˆï¼Œæä¾›ä¸‹è½½ã€‚é€‰å–ä¸¤ä¸ªä¸»è¦è‰²å½©åŽä¾¿å¯ä»¥æä¾›ä¸‹è½½ï¼Œæä¾›ä¸‹è½½çš„æ ¼å¼å¯ä»¥æ˜¯ android çš„èµ„æº xml æ–‡ä»¶ï¼Œä»¥è‰²å½©çš„æ–¹å¼æä¾›ï¼Œä¹Ÿå¯ä»¥æ˜¯ CSSã€SVGã€PNG ç­‰å¸¸è§æ ¼å¼æ–‡ä»¶ã€‚ é¡¹ç›®åœ°å€ï¼šhttp://www.materialpalette.com/ äºŒã€å¼€å‘è‡ªæµ‹ç›¸å…³ Quality Tools for Android Android æµ‹è¯•åŠè‡ªæµ‹å·¥å…·é›†åˆå’Œç¤ºä¾‹ é¡¹ç›®åœ°å€ï¼šhttps://github.com/stephanenicolas/Quality-Tools-for-Android android-test-kit Google çš„ Android æµ‹è¯•å·¥å…· åŒ…æ‹¬ GoogleInstrumentationTestRunner(å¢žå¼ºç‰ˆçš„ InstrumentationTestRunner)å’Œ Espresso(ç”¨äºŽå¿«é€Ÿå†™å‡ºå¯é æµ‹è¯•ç”¨ä¾‹çš„ API) é¡¹ç›®åœ°å€ï¼šhttps://code.google.com/p/android-test-kit/ æ–‡æ¡£ä»‹ç»ï¼šhttps://code.google.com/p/android-test-kit/w/list robolectric æµ‹è¯•ç”¨ä¾‹ç¼–å†™æ¡†æž¶ é¡¹ç›®åœ°å€ï¼šhttps://github.com/robolectric/robolectric Demo åœ°å€ï¼šhttps://github.com/robolectric/robolectricsample æ–‡æ¡£ä»‹ç»ï¼šhttp://robolectric.org/ ç‰¹ç‚¹ï¼š(1). ä¸éœ€è¦æ¨¡æ‹Ÿå™¨åœ¨ä¸€èˆ¬ JVM å°±å¯ä»¥è¿è¡Œæµ‹è¯•ç”¨ä¾‹ (2). èƒ½å®Œæˆåœ¨çœŸæœºä¸Šçš„å¤§éƒ¨åˆ†æµ‹è¯•åŒ…æ‹¬æ„Ÿåº”å™¨ å…¶ä»–çš„æµ‹è¯•ç”¨ä¾‹åŠç›¸å…³æ¨¡å— Mock å¯è§ï¼šandroid-mock, mockito, easy-mock Android FEST æä¾›ä¸€äº›åˆ—æ–¹ä¾¿çš„æ–­è¨€ï¼Œå¯ç”¨äºŽæé«˜ç¼–å†™ Android è‡ªæµ‹ä»£ç æ•ˆçŽ‡ é¡¹ç›®åœ°å€ï¼šhttps://github.com/square/fest-android BoundBox å¯ç”¨äºŽæµ‹è¯•ç±»å„ç§è®¿é—®æƒé™çš„å±žæ€§ã€æ–¹æ³•ã€‚å®žé™…æ˜¯é€šè¿‡ BoundBox è¿™ä¸ª annotation ç”Ÿæˆä¸€ä¸ªå±žæ€§å’Œæ–¹æ³•éƒ½æ˜¯ public æƒé™çš„ä¸­é—´ç±»å¹¶å¯¹æ­¤ç±»è¿›è¡Œæµ‹è¯•å®Œæˆçš„ é¡¹ç›®åœ°å€ï¼šhttps://github.com/stephanenicolas/boundbox Hugo ç”¨äºŽæ‰“å°å‡½æ•°ä¿¡æ¯åŠæ‰§è¡Œæ—¶é—´çš„å·¥å…·ï¼Œä»…åœ¨ debug æ¨¡å¼ç”Ÿæ•ˆ é¡¹ç›®åœ°å€ï¼šhttps://github.com/JakeWharton/hugo scalpel åœ¨åº”ç”¨ä¸‹é¢æ·»åŠ ä¸€å±‚ç”¨äºŽç•Œé¢è°ƒè¯• é¡¹ç›®åœ°å€ï¼šhttps://github.com/JakeWharton/scalpel Android Screenshot library Android æˆªå›¾å·¥å…·ç±»ï¼Œç”¨äºŽåœ¨æŒç»­é›†æˆæ—¶æˆªå›¾ é¡¹ç›®åœ°å€ï¼šhttps://github.com/rtyley/android-screenshot-lib sonar-android-lint-plugin å°† android lint çš„é”™è¯¯åœ¨ sonar ä¸­å±•çŽ° é¡¹ç›®åœ°å€ï¼šhttps://github.com/SonarCommunity/sonar-android ä¸‰ã€æµ‹è¯•å·¥å…· Spoon å¯ç”¨äºŽ android ä¸åŒæœºåž‹è®¾å¤‡è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œèƒ½å°†åº”ç”¨ apk å’Œæµ‹è¯• apk è¿è¡Œåœ¨ä¸åŒæœºå™¨ä¸Šå¹¶ç”Ÿæˆç›¸åº”æµ‹è¯•æŠ¥å‘Šã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/square/spoon Tencent APT APT æ˜¯è…¾è®¯å¼€æºçš„ä¸€ä¸ª Android å¹³å°é«˜æ•ˆæ€§èƒ½æµ‹è¯•ç»„ä»¶ï¼Œæä¾›ä¸°å¯Œå®žç”¨çš„åŠŸèƒ½ï¼Œé€‚ç”¨äºŽå¼€å‘è‡ªæµ‹ã€å®šä½æ€§èƒ½ç“¶é¢ˆï¼›æµ‹è¯•äººå‘˜å®Œæˆæ€§èƒ½åŸºå‡†æµ‹è¯•ã€ç«žå“å¯¹æ¯”æµ‹è¯• é¡¹ç›®åœ°å€ï¼šhttps://github.com/stormzhang/APT Emmagee ç½‘æ˜“å¼€æºçš„æ€§èƒ½æµ‹è¯•å·¥å…·ï¼ŒåŒ…æ‹¬ CPUã€å†…å­˜ã€ç½‘ç»œæµé‡ã€å¯åŠ¨æ—¶é—´ã€ç”µæ± çŠ¶æ€ç­‰ é¡¹ç›®åœ°å€ï¼šhttps://github.com/NetEase/Emmagee Android py-uiautomator py-uiautomator æ˜¯ä¸€ä¸ªå¯¹ Android uiautomator ç”¨ python è¿›è¡Œå°è£…çš„æµ‹è¯•æ¡†æž¶. é¡¹ç›®åœ°å€ï¼šhttps://github.com/xiaocong/uiautomator Augmented Traffic Control æ¨¡æ‹Ÿç½‘ç»œçŠ¶å†µï¼ŒåŒ…æ‹¬å¸¦å®½ã€æ—¶å»¶æŠ–åŠ¨ã€ä¸¢åŒ…çŽ‡ã€é”™åŒ…çŽ‡ã€åŒ…é‡æŽ’çŽ‡ é¡¹ç›®åœ°å€ï¼šhttps://github.com/facebook/augmented-traffic-control stetho å¼ºå¤§çš„ Android Debug å·¥å…·ã€‚æ”¯æŒç½‘ç»œè¯·æ±‚ç›‘æŽ§ä»¥åŠæ•°æ®åº“æŸ¥çœ‹ï¼Œå¯ä»¥å’Œ Chrome DevTools ç»“åˆæˆ–è€…å‘½ä»¤è¡Œæ¨¡å¼ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/facebook/stetho å››ã€å¼€å‘åŠç¼–è¯‘çŽ¯å¢ƒ Buck facebook å¼€æºçš„ Android ç¼–è¯‘å·¥å…·ï¼Œæ•ˆçŽ‡æ˜¯ ant çš„ä¸¤å€ã€‚ä¸»è¦ä¼˜ç‚¹åœ¨äºŽï¼š (1) åŠ å¿«ç¼–è¯‘é€Ÿåº¦ï¼Œé€šè¿‡å¹¶è¡Œåˆ©ç”¨å¤šæ ¸ cpu å’Œè·Ÿè¸ªä¸å˜èµ„æºå‡å°‘å¢žé‡ç¼–è¯‘æ—¶é—´å®žçŽ° (2) å¯ä»¥åœ¨ç¼–è¯‘ç³»ç»Ÿä¸­ç”Ÿæˆç¼–è¯‘è§„åˆ™è€Œæ— é¡»å¦å¤–çš„ç³»ç»Ÿç”Ÿæˆç¼–è¯‘è§„åˆ™æ–‡ä»¶ (3) ç¼–è¯‘åŒæ—¶å¯ç”Ÿæˆå•å…ƒæµ‹è¯•ç»“æžœ (4) æ—¢å¯ç”¨äºŽ IDE ç¼–è¯‘ä¹Ÿå¯ç”¨äºŽæŒç»­é›†æˆç¼–è¯‘ (5) facebook æŒç»­ä¼˜åŒ–ä¸­ é¡¹ç›®åœ°å€ï¼šhttps://github.com/facebook/buck Android Maven Plugin Android Maven æ’ä»¶ï¼Œå¯ç”¨äºŽå¯¹ android ä¸‰æ–¹ä¾èµ–è¿›è¡Œç®¡ç†ã€‚åœ¨ J2EE å¼€å‘ä¸­ï¼Œmaven æ˜¯éžå¸¸æˆç†Ÿçš„ä¾èµ–åº“ç®¡ç†å·¥å…·ï¼Œå¯ç»Ÿä¸€ç®¡ç†ä¾èµ–åº“ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/jayway/maven-android-plugin umeng-muti-channel-build-tool æ¸ é“æ‰“åŒ…å·¥å…· é¡¹ç›®åœ°å€ï¼šhttps://github.com/umeng/umeng-muti-channel-build-tool å¦å¯å‚è§ Google çš„æž„å»ºç³»ç»Ÿ Gradleï¼šhttp://tools.android.com/tech-docs/new-build-system/user-guide Genymotion ç›®å‰æœ€å¥½ç”¨æœ€å¿«çš„ android æ¨¡æ‹Ÿå™¨ é¡¹ç›®åœ°å€ï¼šhttp://www.genymotion.com/ Android studio é›†æˆæŽ§ä»¶ï¼š http://plugins.jetbrains.com/plugin/7269?pr=idea Cyril Mottier æŽ¨èï¼šhttp://cyrilmottier.com/2013/06/27/a-productive-android-development-environment/ gradle-mvn-push æ–¹ä¾¿çš„å°† Gradle çš„ Artifacts ä¸Šä¼ åˆ° Maven ä»“åº“ é¡¹ç›®åœ°å€ï¼šhttps://github.com/chrisbanes/gradle-mvn-push æ–‡æ¡£ä»‹ç»ï¼šhttps://github.com/chrisbanes/gradle-mvn-push#usage Android Emulator Plugin for Jenkins Android æ¨¡æ‹Ÿå™¨ jenkins æ’ä»¶ï¼Œç”¨äºŽ Jenkins åšæŒç»­é›†æˆæ—¶è·‘æ¨¡æ‹Ÿå™¨æµ‹è¯• é¡¹ç›®åœ°å€ï¼šhttps://github.com/jenkinsci/android-emulator-plugin Android Maven Plugin ç®¡ç†åº”ç”¨æ‰€éœ€è¦çš„ä¾èµ–åº“ã€‚åŒ…æ‹¬çš„æž„å»ºå·¥å…·æœ‰ Mavenã€Gradleã€antã€sbt é¡¹ç›®åœ°å€ï¼šhttps://github.com/mosabua/maven-android-sdk-deployer SDK Manager Plugin ä¸‹è½½å’Œç®¡ç† Android SDK çš„ Gradle æ’ä»¶ é¡¹ç›®åœ°å€ï¼šhttps://github.com/JakeWharton/sdk-manager-plugin Gradle Protobuf Plugin å°†.proto æ–‡ä»¶è½¬æ¢æˆ Java æ–‡ä»¶çš„ gradle æ’ä»¶ é¡¹ç›®åœ°å€ï¼šhttps://github.com/andrewkroh/gradle-protobuf-plugin ChromeADB Chrome çš„ Adb æ’ä»¶ï¼Œå½“ç™»å½•åŽï¼Œèƒ½çœ‹åˆ°æ‰€æœ‰è¿žæŽ¥çš„è®¾å¤‡å¹¶æ“ä½œï¼Œå¯ä»¥çœ‹åº”ç”¨ã€è¿›ç¨‹ã€å†…å­˜åŠç£ç›˜ä½¿ç”¨æƒ…å†µç­‰ é¡¹ç›®åœ°å€ï¼šhttps://github.com/importre/chromeadb äº”ã€å…¶ä»– GT APPçš„éšèº«è°ƒè¯•å¹³å°ï¼Œå®ƒæ˜¯ç›´æŽ¥è¿è¡Œåœ¨æ‰‹æœºä¸Šçš„â€œé›†æˆè°ƒè¯•çŽ¯å¢ƒâ€(IDTE, Integrated Debug Environment)ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/TencentOpen/GT æ–‡æ¡£ä»‹ç»ï¼šhttp://gt.qq.com/docs.html ViewServer å…è®¸ app è¿è¡Œåœ¨ä»»ä½•æ‰‹æœºä¸Šéƒ½å¯ä»¥ç”¨ HierarchyViewer æŸ¥çœ‹ é¡¹ç›®åœ°å€ï¼šhttps://github.com/romainguy/ViewServer GridWichterle for Android åœ¨æ•´ä¸ªç³»ç»Ÿä¸Šæ˜¾ç¤ºä¸€ä¸ª gridï¼Œç”¨æ¥å¸®åŠ©æŸ¥çœ‹åº”ç”¨å¸ƒå±€åŠä½¿å¾—å¸ƒå±€æ›´ç¾Žè§‚ï¼Œå¯è®¾ç½® grid ç½‘æ ¼å¤§å°å’Œé¢œè‰²ï¼Œandroid æŽ¨è 48dp å’Œ 8dpï¼Œå¯è§ Android Design Guidelines â€“ Metrics and Gridsï¼Œæ¯”èµ· hierarchyviewer ç›¸å·®ç”šè¿œï¼Œä¸è¿‡å¶å°”å¯ç”¨æ¥ä½œä¸ºå¸ƒå±€æŸ¥çœ‹å·¥å…·ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/inmite/android-grid-wichterle Demo åœ°å€ï¼šhttps://play.google.com/store/apps/details?id=eu.inmite.android.gridwichterle Catlog æ‰‹æœºç«¯ log æŸ¥çœ‹å·¥å…·ï¼Œæ”¯æŒä¸åŒé¢œè‰²æ˜¾ç¤ºã€å…³é”®å­—è¿‡æ»¤ã€çº§åˆ«è¿‡æ»¤ã€è¿›ç¨‹ id è¿‡æ»¤ã€å½•åˆ¶åŠŸèƒ½ç­‰ é¡¹ç›®åœ°å€ï¼šhttps://github.com/nolanlawson/Catlog åœ¨çº¿æ¼”ç¤ºï¼šhttps://play.google.com/store/apps/details?id=com.nolanlawson.logcat PID Cat æ ¹æ® package æŸ¥çœ‹ logcat æ—¥å¿— é¡¹ç›®åœ°å€ï¼šhttps://github.com/JakeWharton/pidcat ACRA åº”ç”¨å´©æºƒä¿¡æ¯æ—¥å¿—ä¸ŠæŠ¥åˆ° GoogleDoc å·¥å…·ï¼Œç½‘é¡µç‰ˆå±•çŽ°ç»“æžœä¸‰æ–¹å¼€æºåœ°å€ https://github.com/BenoitDuffez/crashreportsviewer é¡¹ç›®åœ°å€ï¼šhttps://github.com/ACRA/acra æ–‡æ¡£ä»‹ç»ï¼šhttps://github.com/ACRA/acra/wiki/BasicSetup Crashlytics æä¾›ä¸°å¯Œçš„åº”ç”¨å´©æºƒä¿¡æ¯æ—¥å¿—æ”¶é›† è½»é‡çº§ï¼Œä¸°å¯Œï¼Œå¯è‡ªå®šä¹‰åº”ç”¨å´©æºƒä¿¡æ¯æ”¶é›†å™¨ï¼Œé™„æœ‰é‚®ä»¶é€šçŸ¥ é¡¹ç›®åœ°å€ï¼šhttp://www.crashlytics.com/ é›†æˆæ’ä»¶ï¼šAndroid Studio, Eclipse and IntelliJ Android Resource Navigator chrome æ’ä»¶ï¼Œå¯ä»¥æ–¹ä¾¿çš„æŸ¥çœ‹ github ä¸Š android æºç å·¥ç¨‹çš„ styles.xml å’Œ themes.xmlã€‚ä¸»è¦åŠŸèƒ½ï¼š (1) å¿«é€Ÿæ‰“å¼€ android styles.xml themes.xml (2) æ–¹ä¾¿åœ¨èµ„æºé—´è·³è½¬ã€‚styles.xml themes.xml æ–‡ä»¶ä¸­èµ„æºé“¾æŽ¥è·³è½¬ï¼Œå¯ä»¥æ–¹ä¾¿è·³è½¬åˆ°æŸä¸ªèµ„æº (3) æ–¹ä¾¿æŸ¥æ‰¾æŸä¸ª style å’Œ themeã€‚chrome åœ°å€æ è¾“å…¥ arn+tab+æœç´¢å†…å®¹å›žè½¦å³å¯ (4) è‡ªåŠ¨ä¸‹è½½ä¸åŒåˆ†è¾¨çŽ‡ä¸‹çš„ drawable (5) é€šè¿‡æ˜ å°„æŸ¥æ‰¾é‚£äº›ä¸æ˜¯æŒ‰ç…§å›ºå®šå‘½åè§„åˆ™å‘½åçš„ style å’Œ theme é¡¹ç›®åœ°å€ï¼šhttps://github.com/jgilfelt/android-resource-navigator åœ¨çº¿æ¼”ç¤ºï¼šhttps://chrome.google.com/webstore/detail/android-resource-navigato/agoomkionjjbejegcejiefodgbckeebo?hl=en&amp;gl=GB android-resource-remover æ ¹æ® lint çš„æç¤ºåˆ é™¤é¡¹ç›®ä¸­æ— ç”¨çš„èµ„æºï¼Œå‡å°‘åŒ…çš„å¤§å° é¡¹ç›®åœ°å€ï¼šhttps://github.com/KeepSafe/android-resource-remover Telescope é€šè¿‡æ‰‹åŠ¿æˆªå›¾ä»¥ç‰¹å®šä¸»é¢˜å‘é€åˆ°ç‰¹å®šé‚®ç®±åœ°å€æŠ¥å‘Š Bug é¡¹ç›®åœ°å€ï¼šhttps://github.com/mattprecious/telescope Complete Android Fragment &amp; Activity Lifecycle å®Œæ•´çš„ Android Fragment/Activity ç”Ÿå‘½å‘¨æœŸå›¾ é¡¹ç›®åœ°å€ï¼šhttps://github.com/xxv/android-lifecycle Bugsnag Notifier for Android é€šè¿‡Thread.UncaughtExceptionHandleræ•èŽ·åº”ç”¨æœªå¤„ç†çš„å¼‚å¸¸å´©æºƒ Bug å¹¶ç”¨ Notification å±•ç¤ºåŒæ—¶ä¸Šä¼ åˆ°åŽå°æœåŠ¡å™¨ é¡¹ç›®åœ°å€ï¼šhttps://github.com/bugsnag/bugsnag-android æ–‡æ¡£ä»‹ç»ï¼šhttps://github.com/bugsnag/bugsnag-android#installation--setup Material Design Icons Google Material Design è§„èŒƒä¸­çš„ Icon é¡¹ç›®åœ°å€ï¼šhttps://github.com/google/material-design-icons scrollscreenshot Android æ»šåŠ¨å±å¹•è‡ªåŠ¨æˆªå›¾ jar åŒ…ï¼Œæ”¯æŒçºµå‘ã€æ¨ªå‘æ»šåŠ¨æˆªå±æ‹¼æŽ¥ é¡¹ç›®åœ°å€ï¼šhttps://github.com/PGSSoft/scrollscreenshot droidicon 1600+çš„æµ·é‡ Iconï¼ŒåŒ…æ‹¬ 750+çš„ Material Design icons é¡¹ç›®åœ°å€ï¼šhttps://github.com/theDazzler/droidicon leakcanary Android å†…å­˜æ³„éœ²æ£€æµ‹å·¥å…·ï¼Œé›†æˆæ–¹ä¾¿ï¼Œå‡ºçŽ°æ³„éœ²åŽæŠ¥å‘Šç›´è§‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/square/leakcanary CacheUtilsLibrary å°†ä»»ä½•Java Objectç±»åž‹çš„æ•°æ®åºåˆ—åŒ–åŽå†™å…¥ç¼“å­˜æ–‡ä»¶ï¼Œå°†æ¥ä½¿ç”¨æ—¶è¯»å–ç¼“å­˜æ–‡ä»¶å¹¶ååºåˆ—åŒ–æˆå¯¹åº”Java Objectçš„åº“ é¡¹ç›®åœ°å€ï¼šhttps://github.com/westlinkin/CacheUtilsLibrary BlockCanary BlockCanaryæ˜¯ä¸€ä¸ªAndroidå¹³å°çš„ä¸€ä¸ªéžä¾µå…¥å¼çš„æ€§èƒ½ç›‘æŽ§ç»„ä»¶ï¼Œåº”ç”¨åªéœ€è¦å®žçŽ°ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæä¾›ä¸€äº›è¯¥ç»„ä»¶éœ€è¦çš„ä¸Šä¸‹æ–‡çŽ¯å¢ƒï¼Œå°±å¯ä»¥åœ¨å¹³æ—¶ä½¿ç”¨åº”ç”¨çš„æ—¶å€™æ£€æµ‹ä¸»çº¿ç¨‹ä¸Šçš„å„ç§å¡æ…¢é—®é¢˜ï¼Œå¹¶é€šè¿‡ç»„ä»¶æä¾›çš„å„ç§ä¿¡æ¯åˆ†æžå‡ºåŽŸå› å¹¶è¿›è¡Œä¿®å¤ã€‚ é¡¹ç›®åœ°å€: https://github.com/moduth/blockcanary ç¬¬äº”éƒ¨åˆ† ä¸»è¦ä»‹ç»é‚£äº›ä¹äºŽåˆ†äº«å¹¶ä¸”æœ‰ä¸€äº›å¾ˆä¸é”™çš„å¼€æºé¡¹ç›®çš„ä¸ªäººå’Œç»„ç»‡ã€‚Follow å¤§ç¥žï¼Œæ·±æŒ–å¤§ç¥žçš„é¡¹ç›®å’Œ followingï¼Œä½ ä¼šå‘çŽ°å¾ˆå¤šã€‚ ä¸€ã€ä¸ªäºº JakeWharton å°±èŒäºŽ Squareï¼Œç»å¯¹ç‰›é€¼çš„å¤§ç¥žï¼Œé¡¹ç›®ä¸»è¦é›†ä¸­åœ¨ Android ç‰ˆæœ¬å…¼å®¹ï¼ŒViewPager åŠå¼€å‘å·¥å…·ä¸Š Github åœ°å€ï¼šhttps://github.com/JakeWharton ä»£è¡¨ä½œï¼šActionBarSherlockï¼ŒAndroid-ViewPagerIndicatorï¼ŒNine Old Androidsï¼ŒSwipeToDismissNOAï¼Œhugoï¼Œbutterknifeï¼ŒAndroid-DirectionalViewPager, scalpel pidcat å¦å¤–å¯¹ square åŠå…¶ä»–å¼€æºé¡¹ç›®æœ‰å¾ˆå¤šè´¡çŒ® ä¸»é¡µï¼šhttp://jakewharton.com/ Chris Banes Github åœ°å€ï¼šhttps://github.com/chrisbanes ä»£è¡¨ä½œï¼šActionBar-PullToRefreshï¼ŒPhotoViewï¼ŒAndroid-BitmapCacheï¼ŒAndroid-PullToRefresh ä¸»é¡µï¼šhttp://chris.banes.me/ Koushik Dutta å°±èŒäºŽ ClockworkMod Github åœ°å€ï¼šhttps://github.com/koush ä»£è¡¨ä½œï¼šSuperuserï¼ŒAndroidAsyncï¼ŒUrlImageViewHelperï¼Œion, å¦å¤–å¯¹ https://github.com/CyanogenMod çš„å¼€æºé¡¹ç›®æœ‰å¾ˆå¤šè´¡çŒ® ä¸»é¡µï¼šhttp://koush.com/ Simon Vig Github åœ°å€ï¼šhttps://github.com/SimonVT ä»£è¡¨ä½œï¼šandroid-menudrawerï¼ŒMessageBar ä¸»é¡µï¼šhttp://simonvt.net/ Manuel Peinado Github åœ°å€ï¼šhttps://github.com/ManuelPeinado ä»£è¡¨ä½œï¼šFadingActionBarï¼ŒGlassActionBarï¼ŒRefreshActionItemï¼ŒQuickReturnHeader Emil Sj?lander Github åœ°å€ï¼šhttps://github.com/emilsjolander ä»£è¡¨ä½œï¼šStickyListHeadersï¼Œsprinklesï¼Œandroid-FlipView ä¸»é¡µï¼šhttp://emilsjolander.se/ greenrobot Github åœ°å€ï¼šhttps://github.com/greenrobot ä»£è¡¨ä½œï¼šgreenDAOï¼ŒEventBus ä¸»é¡µï¼šhttp://greenrobot.de/ Jeff Gilfelt Github åœ°å€ï¼šhttps://github.com/jgilfelt ä»£è¡¨ä½œï¼šandroid-mapviewballoonsï¼Œandroid-viewbadgerï¼Œandroid-actionbarstylegeneratorï¼Œandroid-sqlite-asset-helper ä¸»é¡µï¼šhttp://jeffgilfelt.com Romain Guy Android team æˆå‘˜(2013.10 å·²ç¦»å¼€ Android teamï¼Œä»åœ¨ Google) Github åœ°å€ï¼šhttps://github.com/romainguy ä»£è¡¨ä½œï¼šViewServer ä¸»é¡µï¼šhttp://www.curious-creature.org/category/android/ å€‹äººæ”å½±ä½œå“ï¼šhttp://www.flickr.com/photos/romainguy sephiroth74 å°±èŒäºŽ Aviary.com Github åœ°å€ï¼šhttps://github.com/sephiroth74 ä»£è¡¨ä½œï¼šImageViewZoomï¼ŒHorizontalVariableListViewï¼ŒAndroidWheelï¼ŒpurePDF ä¸»é¡µï¼šhttp://www.sephiroth.it/ Cyril Mottier Google å¼€å‘è€…ä¸“å®¶è®¤è¯ï¼Œå‘å¸ƒä¸€äº› Android æŠ€å·§åŠæ–‡ç«  Github åœ°å€ï¼šhttps://github.com/cyrilmottier ä»£è¡¨ä½œï¼šGreenDroidï¼ŒPolaris ä¸»é¡µï¼šhttp://cyrilmottier.com/ äºŒã€ç»„ç»‡ Square æœ‰æ€åº¦æœ‰è‰¯å¿ƒçš„ä¼ä¸šï¼Œå¾ˆå¤šä¸é”™çš„åˆ†äº« Github åœ°å€ï¼šhttps://github.com/square ä»£è¡¨ä½œï¼šokhttpã€fest-androidï¼Œandroid-times-squareã€picassoã€daggerã€spoon ç­‰ç­‰ ä¸»é¡µï¼šhttp://square.github.io/ Inmite s.r.o. Github åœ°å€ï¼šhttps://github.com/inmite ä»£è¡¨ä½œï¼šandroid-styled-dialogsï¼Œandroid-grid-wichterleï¼Œandroid-selector-chapek ä¸»é¡µï¼šhttp://www.inmite.eu/ ä¸‰ã€åšå®¢ éƒ¨åˆ†å›½å¤–è‘—å Android å¼€å‘è€…ä¿¡æ¯ æ³¨æ„ æœ¬æ–‡è½¬è‡ªâ€”â€”Trinea æ±‡æ€»çš„å¼€æºé¡¹ç›® æ¬¢è¿Žå¤§å®¶å…³æ³¨ä»–çš„å¾®ä¿¡å…¬ä¼—å·ï¼šcodekkã€‚äºŒç»´ç å¦‚ä¸‹ï¼š ä¸“æ³¨äºŽ Android å¼€æºåˆ†äº«ã€æºç è§£æžã€æ¡†æž¶è®¾è®¡ã€Android å†…æŽ¨ã€‚ ä»–çš„ç½‘ç«™ï¼šwww.codekk.com å…³äºŽtrineaï¼Œæ¬¢è¿Žå…³æ³¨ å¾®åšï¼šTrinea ä¸»é¡µï¼štrinea.cn æŽ¨è Android å¼€æºé¡¹ç›®æºç è§£æž(Volleyã€UILã€Daggerã€EventBusã€æ’ä»¶åŒ–åº“ç­‰åˆ†æž) Android èŒä½å†…éƒ¨æŽ¨è(é˜¿é‡Œã€è…¾è®¯ã€ç™¾åº¦ã€äº¬ä¸œã€æ»´æ»´ã€ç¾Žå›¢ã€58ã€åŽä¸ºã€ç½‘æ˜“ã€é­…æ—ç­‰)]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ubuntu-15.04å®‰è£…jdk]]></title>
    <url>%2F2016%2F03%2F23%2Fubuntu-15.04-install-jdk.html</url>
    <content type="text"><![CDATA[å‰è¨€æœ€è¿‘åœ¨Linuxä¸Šå­¦ä¹ Pythonï¼Œè€ŒPyCharméœ€è¦javaçŽ¯å¢ƒçš„æ”¯æŒï¼Œæœ¬æ–‡è®°å½•äº†åœ¨Ubuntu-15.04ä¸Šå®‰è£…jdk1.8ç‰ˆæœ¬çš„æ­¥éª¤ä¸Žé‡åˆ°çš„é—®é¢˜ã€‚ ## 1. æ–¹å¼ä¸€ Ubuntuå®‰è£…JDK **ç³»ç»Ÿç‰ˆæœ¬ï¼š**Ubuntu 15.04 x64 **JDKç‰ˆæœ¬ï¼š**jdk-8u60-linux-x64 æ­¥éª¤è¯¦è§£ æŸ¥çœ‹ç³»ç»Ÿä½æ•°ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤å³å¯ getconf LONG_BIT ä¸‹è½½å¯¹åº”çš„JDKæ–‡ä»¶ï¼Œæˆ‘è¿™é‡Œä¸‹è½½çš„æ˜¯jdk-8u60-linux-64.tar.gz åˆ›å»ºç›®å½•ä½œä¸ºJDKçš„å®‰è£…ç›®å½•ï¼Œè¿™é‡Œé€‰æ‹©å®‰è£…ä½ç½®ä¸º:/usr/java/ sudo mkdir /usr/java è§£åŽ‹æ–‡ä»¶å¸¦/usr/java/ç›®å½•ä¸‹ï¼Œæ–‡ä»¶ä¸‹è½½çš„ä½ç½®æ˜¯åœ¨downloadç›®å½•ä¸‹çš„ cd download sudo tar zxvf jdk-8u60-linux-x64.tar.gz -C /usr/java/ è¿›å…¥åˆ°**/usr/java/**ç›®å½•ï¼Œç»™æ–‡ä»¶å¤¹æ”¹åï¼ˆè¿™ä¸€æ­¥å¹¶éžå¿…é¡»ï¼Œä½†æ˜¯ä¸ºäº†é…ç½®çŽ¯å¢ƒå˜é‡æ–¹ä¾¿ï¼Œå»ºè®®è¿™æ ·åšï¼‰ cd /usr/java/ sudo mv jdk1.8.0_60 jdk_8u60 é…ç½®ç³»ç»ŸçŽ¯å¢ƒå˜é‡ sudo gedit /etc/environment åŠ å…¥ä»¥ä¸‹çš„å†…å®¹ PATH=&quot;:$JAVA_HOME/bin&quot; export CLASSPATH=.:$JAVA_HOME/lib:$JAVA_HOME/jre/lib export JAVA_HOME=/usr/java/jdk_8u60 ä¿®æ”¹å®ŒæˆåŽä¿å­˜å¹¶å…³é—­ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ä½¿çŽ¯å¢ƒå˜é‡ç”Ÿæ•ˆ source /etc/environment ä½¿ç”¨echoå‘½ä»¤æ£€æŸ¥çŽ¯å¢ƒå˜é‡çš„é…ç½®æƒ…å†µ echo $JAVA_HOME è¾“å‡º /usr/java/jdk_8u60 echo $CLASSPATH è¾“å‡º .:/usr/java/jdk_8u60/lib:/usr/java/jdk_8u60/jre/lib echo $PATH è¾“å‡º /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/java/jdk_8u60/bin æŸ¥çœ‹å®‰è£…ç‰ˆæœ¬: java -version Picked up JAVA_TOOL_OPTIONS: -javaagent:/usr/share/java/jayatanaag.jar java version â€œ1.8.0_60â€ Javaâ„¢ SE Runtime Environment (build 1.8.0_60-b27) Java HotSpotâ„¢ 64-Bit Server VM (build 25.60-b23, mixed mode) è®¾ç½®æ‰€æœ‰ç”¨æˆ·çš„çŽ¯å¢ƒå˜é‡ï¼Œä¸ç„¶é‡å¯ä¹‹åŽä¾ç„¶æ‰¾ä¸åˆ°javaå‘½ä»¤ sudo gedit /etc/profile æ·»åŠ ä»¥ä¸‹å†…å®¹å³å¯(æ³¨æ„æ›¿æ¢è·¯å¾„): #set Java environment JAVA_HOME=/usr/java/jdk_8u60 export JRE_HOME=/usr/java/jdk_8u60/jre export CLASSPATH=.:$JAVA_HOME/lib:$JRE_HOME/lib:$CLASSPATH export PATH=$JAVA_HOME/bin:$JRE_HOME/bin:$PATH é‡å¯ç”µè„‘ï¼Œä½¿é…ç½®ç”Ÿæ•ˆã€‚ ç»“æŸäº†ï¼Ÿæ²¡æœ‰ï¼ï¼ï¼ å¦‚æžœä½¿ç”¨Myeclipseç­‰IDEçš„æˆ–è€…å®‰è£…äº†å¤šä¸ªjdkç‰ˆæœ¬çš„è¯·ç»§ç»­å‘ä¸‹çœ‹â†“â†“â†“ ä¿®æ”¹é»˜è®¤çš„JDK(æ³¨æ„æ›¿æ¢è·¯å¾„) sudo update-alternatives --install &quot;/usr/bin/java&quot; &quot;java&quot; &quot;/usr/java/jdk_8u60/bin/java&quot; 300 sudo update-alternatives --install &quot;/usr/bin/javac&quot; &quot;javac&quot; &quot;/usr/java/jdk_8u60/bin/javac&quot; 300 sudo update-alternatives --install &quot;/usr/bin/javaws&quot; &quot;javaws&quot; &quot;/usr/java/jdk_8u60/bin/javaws&quot; 300 ä»¥ä¸Šæ˜¯ä¸ºä¸åŒçš„å‘½ä»¤å»ºç«‹é“¾æŽ¥ï¼Œå¦‚æžœå­˜åœ¨å¤šä¸ªJDKåªéœ€è¦æ›¿æ¢è·¯å¾„é‡æ–°æ‰§è¡Œä¸€éå³å¯å»ºç«‹é“¾æŽ¥ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤é€‰æ‹©é“¾æŽ¥ï¼Œå¦‚æžœæ¯ä¸ªé€‰é¡¹åªå»ºç«‹äº†ä¸€ä¸ªé“¾æŽ¥ï¼Œç³»ç»Ÿä¸ä¼šæä¾›é€‰é¡¹ï¼Œå¦‚æžœå­˜åœ¨å¤šä¸ªé“¾æŽ¥ï¼Œè¯·æ ¹æ®éœ€è¦é€‰æ‹©ä¸åŒé€‰é¡¹ sudo update-alternatives --config java sudo update-alternatives --config javac sudo update-alternatives --config javaws 2. æ–¹å¼äºŒ å¦‚æžœåœ¨ Ubuntu è½¯ä»¶ä¸­å¿ƒå®‰è£…è¿‡ OpenJDKï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å°†å…¶åˆ é™¤ï¼š sudo apt-get purge openjdk* æ·»åŠ æºå’Œæ›´æ–° sudo add-apt-repository ppa:webupd8team/java sudo apt-get update å®‰è£…java 8 sudo apt-get install Oracle-java8-installer 3. å®‰è£…æ—¶å¸¸è§é”™è¯¯å¤„ç† å®‰è£…æ—¶VirtualBoxå¼‚å¸¸é€€å‡ºï¼Œé‡è¿›æ—¶æŠ¥å¦‚ä¸‹é”™è¯¯ï¼š dpkg è¢«ä¸­æ–­,æ‚¨å¿…é¡»æ‰‹å·¥è¿è¡Œ sudo dpkg --configure -a è§£å†³æ­¤é—®é¢˜ã€‚ è§£å†³æ–¹æ³•ï¼š sudo rm /var/lib/dpkg/updates/* sudo apt-get update sudo apt-get upgrade è¿è¡Œjava -versionå‡ºçŽ°å¦‚ä¸‹é”™è¯¯: Picked up JAVA_TOOL_OPTIONS: -javaagent:/usr/share/java/jayatanaag.jarã€‚ è§£å†³æ–¹æ³•ï¼š sudo rm /usr/share/upstart/sessions/jayatana.conf sudo add-apt-repository ppa:danjaredg/jayatana sudo apt-get update sudo apt-get install jayatana å†æ­£å¸¸è¿è¡Œæ­£å¸¸ï¼š xkcoding@Yangkai:~$ ~/workspace$ java -version java version &quot;1.8.0_60&quot; Java(TM) SE Runtime Environment (build 1.8.0_60-b27) Java HotSpot(TM) 64-Bit Server VM (build 25.60-b23, mixed mode)]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[helloworld]]></title>
    <url>%2F2016%2F03%2F21%2Fhelloworld.html</url>
    <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick Start Create a new post 1$ hexo new "My New Post" More info: Writing Run server 1$ hexo server More info: Server Generate static files 1$ hexo generate More info: Generating Deploy to remote sites 1$ hexo deploy More info: Deployment]]></content>
      <categories>
        <category>HelloWorld</category>
      </categories>
      <tags>
        <tag>HelloWorld</tag>
      </tags>
  </entry>
</search>